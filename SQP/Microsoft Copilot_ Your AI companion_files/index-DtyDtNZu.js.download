
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3a8166b5-1fda-5a7d-8e06-d1cb454f5640")}catch(e){}}();
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-Dmlf5KxN.js","assets/sentry-CQNtvQBy.js","assets/index-DNw7SDtx.js","assets/deferred-CJklbcw8.js","assets/math.scalar.functions-C0i4R8fp.js","assets/animationGroup-nZ910APe.js","assets/skeleton-k6JpE_ge.js","assets/rawTexture-DoAsqqez.js","assets/easing-GMs17d1u.js","assets/weightedsound-dLoKE2Gg.js","assets/audioEngine-BGgap0qc.js","assets/babylonFileParser.function-CWsVgwsY.js","assets/outlineRenderer-CQsuEHtq.js","assets/discBuilder-jveZMll2.js","assets/backgroundMaterial-CeCPeWNo.js","assets/standardMaterial-D8uh-41o.js","assets/cubeTexture-B5ZigPZr.js","assets/abstractEngine.cubeTexture-D-Ash8ho.js","assets/lazy-Bl3TzD7M.js","assets/ray-43mRfGtJ.js","assets/dds-6pGsbClJ.js","assets/dumpTools-CjEQRdLV.js","assets/khronosTextureContainer2-6bYei__r.js","assets/workerPool-H9Ji3mCo.js","assets/assetContainer-DpNQnOpm.js","assets/shaderMaterial-DJNc2SPl.js","assets/timer-9_uHi_LH.js","assets/math.scalar-f_vV31rr.js","assets/logDepthDeclaration-COTCZUIT.js","assets/fogFragmentDeclaration-BAQsZT5B.js","assets/sceneUboDeclaration-jvmbh8Aw.js","assets/meshUboDeclaration-D2W4LjLG.js","assets/logDepthVertex-CwYJoHy0.js","assets/helperFunctions-Bv60zFsn.js","assets/clipPlaneFragment-DHhf9Rul.js","assets/logDepthDeclaration-lpaHElza.js","assets/fogFragmentDeclaration-DUD35ThM.js","assets/sceneUboDeclaration-B7o2vce-.js","assets/meshUboDeclaration-C1_vAetn.js","assets/helperFunctions-34DHJtVO.js","assets/clipPlaneVertex-BwRwUDnq.js","assets/logDepthVertex-BixsKIfO.js","assets/pointLight-KlvvWRP3.js","assets/fresnelFunction-BuzjpgCQ.js","assets/proceduralTexture-CZ_zlvJu.js","assets/abstractAudioBus-BrFUK1Ec.js","assets/webAudioBaseSubGraph-D1NkaLgW.js","assets/abstractSoundInstance-CWF9m-2a.js","assets/abstractSoundSource-JP47pox1.js","assets/webAudioBus-DvaFZGQz.js","assets/spatialWebAudio-CVnWj7QB.js","assets/webAudioMainBus-DB9W4P7K.js","assets/webAudioStaticSound-LVTmFY3n.js","assets/webAudioStreamingSound-ByxKrZND.js","assets/webAudioSoundSource-NYOhYHff.js","assets/webgpuEngine-C8-_38b2.js","assets/bakedVertexAnimation-EssQfYO5.js","assets/instancesDeclaration-7FPQAFqk.js","assets/fresnelFunction-Dpd4RYjz.js","assets/decalFragment-B4TlZvmv.js","assets/bonesVertex-B03CRh-N.js","assets/morphTargetsVertex-LEholPDA.js","assets/asyncLock-Cz8N-2u5.js","assets/engine.multiRender-D3_hfCho.js","assets/environmentTextureTools-C5UZBjow.js","assets/engine.multiRender-Da8TwQko.js","assets/flowGraphParser-C4-MBea2.js","assets/flowGraphRichTypes-DJe-7O4O.js","assets/flowGraphJsonPointerParserBlock-CVDOc4E6.js","assets/flowGraphCachedOperationBlock-BRXiUgY4.js","assets/flowGraphConsoleLogBlock-DzNczy25.js","assets/flowGraphBranchBlock-DHA0yOFx.js","assets/flowGraphDoNBlock-BRBROJws.js","assets/flowGraphForLoopBlock-CQpeUvC1.js","assets/flowGraphThrottleBlock-DLGnV-L9.js","assets/flowGraphMultiGateBlock-N31ooVF2.js","assets/flowGraphSwitchBlock-DWRfGA7e.js","assets/flowGraphWaitAllBlock-eegt5Fmk.js","assets/flowGraphCounterBlock-36KEQI6z.js","assets/flowGraphWhileLoopBlock-CggeoWJO.js","assets/flowGraphDebounceBlock-Dt0nFgvW.js","assets/flowGraphFlipFlopBlock-_1LLYxfX.js","assets/flowGraphSequenceBlock-BtxOEG_V.js","assets/flowGraphSetDelayBlock-BEPfGb-T.js","assets/flowGraphCancelDelayBlock-BVvdkRNw.js","assets/flowGraphPlayAnimationBlock-DcrTRw7x.js","assets/flowGraphStopAnimationBlock-JFc2Txco.js","assets/flowGraphPauseAnimationBlock-BNUoJYSU.js","assets/flowGraphInterpolationBlock-7n673lN2.js","assets/flowGraphEasingBlock-CrbCge-_.js","assets/flowGraphBezierCurveEasingBlock-DfddNIpP.js","assets/flowGraphConditionalDataBlock-CCyDWj_f.js","assets/flowGraphGetVariableBlock-CtLYWRPU.js","assets/flowGraphSetVariableBlock-DCw_9tI3.js","assets/flowGraphTransformCoordinatesSystemBlock-BEy425P1.js","assets/flowGraphGetPropertyBlock-DwXIJFfx.js","assets/flowGraphSetPropertyBlock-ChS7lt6j.js","assets/flowGraphConstantBlock-CODYkkt_.js","assets/flowGraphGetAssetBlock-BK1S2gKU.js","assets/flowGraphDataSwitchBlock-BDeCXWNw.js","assets/flowGraphMathBlocks-CQVRcVtr.js","assets/flowGraphBinaryOperationBlock-CcaYSuv1.js","assets/flowGraphUnaryOperationBlock-DADkBgWD.js","assets/flowGraphMathCombineExtractBlocks-Bz8rqc1O.js","assets/flowGraphMatrixMathBlocks-DLWlVyPp.js","assets/flowGraphVectorMathBlocks-BBMacloK.js","assets/flowGraphTypeToTypeBlocks-CklWds16.js","assets/flowGraphContextBlock-kT0Y1tbB.js","assets/flowGraphArrayIndexBlock-DnXmn5mH.js","assets/flowGraphCodeExecutionBlock-BIxFZHr3.js","assets/flowGraphIndexOfBlock-BiTqByoz.js","assets/flowGraphFunctionReferenceBlock-xXPzXWsz.js","assets/flowGraphMeshPickEventBlock-D5QnM4YF.js","assets/flowGraphSceneReadyEventBlock-R4ig25gD.js","assets/flowGraphReceiveCustomEventBlock-B2e07qDJ.js","assets/flowGraphSendCustomEventBlock-DadC9bXg.js","assets/flowGraphSceneTickEventBlock-BQ75JuMZ.js","assets/flowGraphPointerOutEventBlock-CIN9xrFi.js","assets/flowGraphPointerOverEventBlock-DySzpQUs.js","assets/spotLight-CQTqHirt.js","assets/glowMapGeneration.fragment-DpIOqhUo.js","assets/glowMapGeneration.vertex-Ncj-vnWI.js","assets/glowMapGeneration.fragment-CyoWNGtF.js","assets/glowMapGeneration.vertex-Cgz0QPi7.js","assets/glowMapMerge.fragment-6sFdDwIW.js","assets/glowMapMerge.vertex-BAlzWxtb.js","assets/glowBlurPostProcess.fragment-BVmjjpzG.js","assets/glowMapMerge.fragment-Bp1yiwop.js","assets/glowMapMerge.vertex-Cu9P6H47.js","assets/glowBlurPostProcess.fragment-Ci-JjTmC.js","assets/shadowGeneratorSceneComponent-BuqPO6cW.js","assets/shadowMap.fragment-0EQhC1pC.js","assets/packingFunctions-Br09dqiU.js","assets/shadowMapFragment-BGmqmevN.js","assets/shadowMap.vertex-CbGLnd0r.js","assets/shadowMapVertexMetric-COVFGV-y.js","assets/depthBoxBlur.fragment-B4SH-ycm.js","assets/shadowMapFragmentSoftTransparentShadow-DJ75fwkV.js","assets/shadowMap.fragment-BL4J3Qb5.js","assets/shadowMapFragment-qN1MFulX.js","assets/shadowMap.vertex-zV_u0ljy.js","assets/shadowMapVertexMetric-B22nSEvY.js","assets/depthBoxBlur.fragment-DtbsqGCO.js","assets/shadowMapFragmentSoftTransparentShadow-DOWFYWYd.js","assets/thinInstanceMesh-BaucQhxo.js","assets/lightFragment-fLA34bsc.js","assets/lightFragment-C3zvFtLo.js","assets/iesTextureLoader-KeaDZ2QM.js","assets/hdrCubeTexture-BHsPU8C8.js","assets/hdr-D5uqCMdl.js","assets/iblCdfGenerator-bM1n-knR.js","assets/background.vertex-D-jO-Yfj.js","assets/backgroundUboDeclaration-B_wABIjs.js","assets/shadowsVertex-CCCIC1Dp.js","assets/background.fragment-BV6L-kiG.js","assets/lightsFragmentFunctions-JxCGHdbW.js","assets/background.vertex-ByTRf8Qg.js","assets/backgroundUboDeclaration-Cn-Eon8e.js","assets/shadowsVertex-DkIoopzO.js","assets/background.fragment-u7VSqMtJ.js","assets/lightsFragmentFunctions-Ct9qsBWE.js","assets/color.fragment-rJKyfz4L.js","assets/color.vertex-1Ctj4yEJ.js","assets/vertexColorMixing-DPadHBPA.js","assets/pbr.vertex-Bie4xyDN.js","assets/harmonicsFunctions-HvW8Jz4L.js","assets/samplerVertexImplementation-CvkzjqK2.js","assets/mainUVVaryingDeclaration-BA3TM8pl.js","assets/bumpVertex-CjOM5J7s.js","assets/vertexColorMixing-CqxYM_ap.js","assets/pbr.fragment-C7BVThqQ.js","assets/oitFragment-kJrv75N2.js","assets/bumpFragment-DWsFPM5K.js","assets/pbr.vertex-BTbAkhgD.js","assets/samplerVertexImplementation-Ce36ugkJ.js","assets/harmonicsFunctions-C4MnQs5b.js","assets/mainUVVaryingDeclaration-CUlRDdKI.js","assets/bumpVertex-CyY6lkBx.js","assets/pbr.fragment-mt9EkARL.js","assets/oitFragment-t8-VPW48.js","assets/bumpFragment-B9NZHJMU.js","assets/shaderLanguage-BjwqUAVi.js","assets/ddsTextureLoader-B38nakQ2.js","assets/envTextureLoader-CgRAQwfe.js","assets/ktxTextureLoader-CH47tqM_.js","assets/tgaTextureLoader-C5_Dmybe.js","assets/hdrTextureLoader-D-riYmaG.js","assets/basisTextureLoader-B03dwfAv.js","assets/exrTextureLoader-Cfy6yCxf.js","assets/geometryBufferRenderer-sdc-rsXn.js","assets/rawCubeTexture-Dt0Ij-Ls.js","assets/iblShadowsRenderPipeline-D6mA0w06.js","assets/iblCdfGeneratorSceneComponent-B5SHdrdH.js","assets/procedural.vertex-CiBvYAUF.js","assets/procedural.vertex-CinDe-za.js","assets/default.fragment-CyZE-9Vf.js","assets/defaultUboDeclaration-DRI2_8zu.js","assets/default.vertex-BCy9dJQl.js","assets/default.fragment-B-avzsiq.js","assets/defaultUboDeclaration-DfcHhFuN.js","assets/default.vertex-DrnJtcP-.js","assets/dracoDecoder-DaKyrWRY.js","assets/meshoptCompression-CIBdMicc.js","assets/mesh.vertexData.functions-BXkNVxNr.js","assets/pointsCloudSystem-DT87ioZM.js","assets/color.fragment-rpWQGzgy.js","assets/color.vertex-BeYQNWQu.js","assets/lodCube.fragment-rTWMBMFx.js","assets/lod.fragment-Do49eMe_.js","assets/lodCube.fragment-I2T_0vEr.js","assets/lod.fragment-D0CAdOEl.js","assets/rgbdDecode.fragment-D6y1nJ42.js","assets/rgbdEncode.fragment-CHJdk0n7.js","assets/rgbdDecode.fragment-8AAdG2wT.js","assets/rgbdEncode.fragment-DFdbSL1u.js","assets/particles.fragment-DSuecYzO.js","assets/particles.vertex-oBAPJbQg.js","assets/particles.fragment-BQs5eObS.js","assets/particles.vertex-nvvG9zml.js","assets/postProcessRenderPipelineManagerSceneComponent-7F7JuHIV.js","assets/postprocess.vertex-CTnmiukQ.js","assets/kernelBlur.fragment-B_OBnveB.js","assets/kernelBlurVaryingDeclaration-Cy4ZXs-L.js","assets/kernelBlur.vertex-C9pRy0QK.js","assets/kernelBlur.fragment-BETzGxil.js","assets/kernelBlurVaryingDeclaration-n597oVjg.js","assets/kernelBlur.vertex-Dd3wM7QR.js","assets/pass.fragment-CtGfeEpq.js","assets/passCube.fragment-BRtPJneb.js","assets/pass.fragment-CZhO_qm-.js","assets/passCube.fragment-diEgTnyb.js","assets/vrDistortionCorrection.fragment-CpXjkJQp.js","assets/vrDistortionCorrection.fragment-DkHVJoYm.js","assets/depth.fragment-CrrRDAEq.js","assets/depth.vertex-Ba05Rmw7.js","assets/geometry.fragment-CPRjk4VA.js","assets/geometry.vertex-BVWaxvCI.js","assets/boundingBoxRenderer.fragment-8s2QHvIQ.js","assets/boundingBoxRendererUboDeclaration-BzIT5xq8.js","assets/boundingBoxRenderer.vertex-D_9af3XJ.js","assets/boundingBoxRenderer.fragment-D9Q3VYZR.js","assets/boundingBoxRenderer.vertex-D-xTJCgt.js","assets/outline.fragment-xR51A-uR.js","assets/outline.vertex-CkEAG7G4.js","assets/outline.fragment-DlkmOrUn.js","assets/outline.vertex-1-hHfYRc.js","assets/index-CrTE8OQE.js","assets/glTFLoader-DBbyIQ2g.js","assets/glTFLoaderExtensionRegistry-BOCeKnNl.js","assets/objectModelMapping-CMxsX3_R.js","assets/glTFLoaderAnimation-C44VcYt3.js","assets/EXT_lights_image_based-JXj6s-Lq.js","assets/EXT_mesh_gpu_instancing-DTn3EN1x.js","assets/EXT_meshopt_compression-yunRNKid.js","assets/EXT_texture_webp-Dwsbv1t9.js","assets/EXT_texture_avif-CQRZVN95.js","assets/EXT_lights_ies-CigFgiaK.js","assets/KHR_draco_mesh_compression-CgQ6objr.js","assets/KHR_lights_punctual-Bf669pWI.js","assets/KHR_materials_pbrSpecularGlossiness-Cz4OlDv3.js","assets/KHR_materials_unlit-CGvM8cXi.js","assets/KHR_materials_clearcoat-BHWNG2zp.js","assets/KHR_materials_iridescence-2AcvNqzx.js","assets/KHR_materials_anisotropy-CDTTkx7U.js","assets/KHR_materials_emissive_strength-BfI8i3RZ.js","assets/KHR_materials_sheen-BQ-W7QOO.js","assets/KHR_materials_specular-6QmY98iX.js","assets/KHR_materials_ior-DnzYMunK.js","assets/KHR_materials_variants-Huy7CCt5.js","assets/KHR_materials_transmission-CkZ2Jv2O.js","assets/KHR_materials_diffuse_transmission-CvOiE0p5.js","assets/KHR_materials_volume-CeX1oFxS.js","assets/KHR_materials_dispersion-CUNRAXIA.js","assets/EXT_materials_diffuse_roughness-CLkDDmrN.js","assets/KHR_mesh_quantization-CjgKQ0IH.js","assets/KHR_texture_basisu-DiDcMyEm.js","assets/KHR_texture_transform-ZIE1b8lT.js","assets/KHR_xmp_json_ld-BdJIXXIn.js","assets/KHR_animation_pointer-BTJtRbIG.js","assets/MSFT_audio_emitter-Dt2SsH8Z.js","assets/MSFT_lod-DN1XCP9b.js","assets/MSFT_minecraftMesh-DO0VLzXd.js","assets/MSFT_sRGBFactors-BBfeg2iP.js","assets/KHR_interactivity-TuUDfh_X.js","assets/declarationMapper-DnXr5DHX.js","assets/KHR_node_visibility-PgYkAaTD.js","assets/KHR_node_selectability-j-yUCnKI.js","assets/KHR_node_hoverability-BM9d_IvG.js","assets/ExtrasAsMetadata-D0QmW6Hw.js","assets/index-2j2srYFv.js","assets/stlFileLoader.metadata-2VxBZznk.js","assets/babylon.inspector.bundle-BnSFz7_u.js","assets/index-wDuOEHRk.js","assets/bvhFileLoader-DD2Po_cQ.js","assets/objFileLoader-BgBe84EI.js","assets/stlFileLoader-sr40hFc0.js","assets/splatFileLoader-BDH57bPb.js","assets/index.es-w3_8LO18.js","assets/index-CUtnOa90.js","assets/botd.esm-DWjBD4G5.js","assets/sidebar-settings-Dg4x-to2.js","assets/settings-button-DAqK9bK1.js","assets/settings-BNNP7iNk.js","assets/voice-options-O1qAi1Kw.js","assets/use-key-up-B1dqpf0L.js","assets/privacy-choices-BGJdHACP.js","assets/one-drive-Y2yl8N0o.js","assets/wallet-BqZwdYNp.js","assets/utils-qVlV0UaP.js","assets/order-details-view-DGc4jNZn.js","assets/card-info-BlQ4s6fH.js","assets/visa-BZetSaxj.js","assets/constants-DobLavIp.js","assets/product-info-HD8yXHsG.js","assets/pidl-pages-CYQSt0-Q.js","assets/constants-BnxRz7co.js","assets/paypal-button--3ln71rv.js","assets/v4-CtRu48qb.js","assets/index-Cr3DIIUQ.js","assets/index-Chjiymov.js","assets/minus-DkhkvjzJ.js","assets/shipping-address-CjWnGFxU.js","assets/atoms-TqUOTTu2.js","assets/use-price-tracking-jZ6o2v7N.js","assets/buy-button-Ow_b_4Ru.js","assets/shopping-telemetry-DvRMlQPO.js","assets/shopping-utils-GYr52a7P.js","assets/format-money-5coY0IJJ.js","assets/shopping-api-DzFGqcCg.js","assets/conversion-tracking-disclaimer-CwpRrTvc.js","assets/info-Q_p5JV6Y.js","assets/faq-link-Bl7NQGxx.js","assets/utils-C2f4hxM_.js","assets/use-ocv-feedback-B8PWHkPM.js","assets/rewards-link-DtiTDZ2R.js","assets/gift-Cs72v6ky.js","assets/rewards-badge-background-dark-BeBD1TCC.js","assets/rewards-badge-background-B23EPGDC.js","assets/rewards-badge-container-dark-S6q4BOxJ.js","assets/rewards-badge-container-BqmFMFt2.js","assets/rewards-badge-dark-DSeGPlxL.js","assets/rewards-badge-DaLHM-G_.js","assets/plus-B_MZIZac.js","assets/alert-C_V04Fuq.js","assets/error-3tLLYGbj.js","assets/mask-wrapper-CBv9wiem.js","assets/moon-Bz2vjkde.js","assets/sun-Bv7B3FzF.js","assets/task-manager-DyNYVJg0.js","assets/wallet-element-factory-DcOIQClN.js","assets/disconnect-BvN87QHc.js","assets/sidebar-pages-DBGpu2y9.js","assets/conversations-D7_y3cX3.js","assets/use-tasks-BRqMpHaf.js","assets/code-Ct2CAsoH.js","assets/core-DtWfXB6c.js","assets/language-loader-Czy6Ca_Y.js","assets/index-CpYs3caX.js","assets/sender-share-conversation-modal-BB4gdNIX.js","assets/sender-share-modal-cta-with-social-media-CuLY1J9Z.js","assets/index-ChQhNLNm.js","assets/appearance-component-interface-Dx_z36cZ.js","assets/character-B3F1MwQv.js","assets/use-set-up-babylon-Bc7SabNM.js","assets/starter-prompt-category-B2FRiOb7.js","assets/wallet-section-SVDq_ix3.js","assets/product-purchase-DfyLdSm3.js","assets/upsell-block-CF9yHmoz.js","assets/cross-selling-strip-D1yEg5QP.js","assets/price-tracking-block-CWAbnvnc.js","assets/use-shopping-telemetry-CaDH4VTm.js","assets/chevron-bolded-uGzwXRCK.js","assets/composer-auto-complete-Cf9eqBpF.js","assets/composer-actions-prompt-suggestions-Ksw5enjj.js","assets/booking-e4nyoPoj.js","assets/expedia-NiaNtx-A.js","assets/flower-BRNfueyd.js","assets/hotels-cUH2CCeH.js","assets/kayak-CebbQuzZ.js","assets/open-table-mBIvcsiz.js","assets/priceline-C6IKVzoW.js","assets/sky-scanner-DmxVsoUu.js","assets/trip-advisor-DNZGn0xi.js","assets/viator-BnEs8EKp.js","assets/think-deeper-pro-subscription-BUNq1XT2.js","assets/over-task-quota-DKoB5sB5.js","assets/composer-action-CNHYCeAo.js","assets/computer-use-task-closed-DpxpfCbO.js","assets/export-N-33mqM8.js","assets/import-CUc8ydf4.js","assets/settings-T2H8hRTD.js","assets/speed-Et9xZEn_.js","assets/audio-controls-Bca89d2V.js","assets/next-BcLEkuFu.js","assets/pause-BC8dPpKn.js","assets/play-ahr_O-bW.js","assets/close-button-BbIpB2Kz.js","assets/progress-bar-CFIb3Q0h.js","assets/replay-tUEcAJ94.js","assets/safety-risk-card-BYuPEr4y.js","assets/use-send-action-command-BJIM1bIf.js","assets/add-to-page-Ctlhppiy.js","assets/cross-selling-strip-consumer-Dg7U3JRn.js","assets/composer-prompt-review-7O_xkaR3.js","assets/biometric-consent-CAmvHNQg.js","assets/daily-briefing-chat-Bx9JW8NB.js","assets/contract-down-left-m8hDSPAU.js","assets/dailly-briefing-composer-input-NoDD0Wzq.js","assets/composer-sign-in-DdzVujRH.js","assets/merge-conversation-checkbox-sDgBFe_k.js","assets/daily-briefing-composer-player-JQlPryGl.js","assets/settings-wrapper-1kH1CgnU.js","assets/invite-5XAw3Ixy.js","assets/media-viewer-BM070lGV.js","assets/picture-in-picture-CDF7MKhO.js","assets/video-player-Cp3l3lUF.js","assets/native-player-DHcov9fb.js","assets/card-carousel-BAQH6pBs.js","assets/use-carousel-B7jji4NA.js","assets/utils-ifQmq0fb.js","assets/composer-large-screen-CmM1Tpdw.js","assets/types-S47nI6MK.js","assets/audio-recorder-DHIlb5Zz.js","assets/actions-chat-detail-B2MzT5aN.js","assets/expand-pane-DZ1VEJPa.js","assets/save-action-BeRKk29q.js","assets/new-tab-CcFdrgvM.js","assets/pause-outline-BtIBu8ME.js","assets/play-outline-CtADuXS3.js","assets/showroom-chat-detail-MYJNxxSp.js","assets/contextual-shopping-card-BbvRsS4Q.js","assets/sse-stream-reader-BlvU241g.js","assets/product-rating-DTk6sW2M.js","assets/bell-alert-B0fzNrEO.js","assets/star-BXV5zMlV.js","assets/use-shopping-visibility-telemetry-CjkWz3sm.js","assets/citation-chips-row-BqThCFqH.js","assets/arrow-trending-down-DRbgJLaG.js","assets/price-history-chart-Dn5LolD8.js","assets/generateCategoricalChart-8f2U70sP.js","assets/rich-card-actions-DdASL4zB.js","assets/appearance-chat-DGFT5spc.js","assets/appearance-analytics-adapter-CLAUe2dL.js","assets/ai-message-Dev3NyOE.js","assets/research-header-C9yn7foN.js","assets/thumbs-up-filled-BLH6HHFi.js","assets/progress-bar-optimistic-CAyfyb1d.js","assets/use-ads-card-operations-DZt2cUB2.js","assets/podcast-CbINBG0h.js","assets/use-podcast-share-F1M4ipSJ.js","assets/typeahead-B6qpLr_c.js","assets/product-details-modal-C5_Kbc1B.js","assets/wallet-dropdown-BBSB1-7Y.js","assets/wallet-list-DYJmEo1i.js","assets/use-is-paypal-checkout-enabled-DWeqcGW_.js","assets/topic-selection.lazy-Ks87Lvzm.js","assets/login.lazy-p7_Et4if.js","assets/library.lazy-BOB8LvDD.js","assets/page-share-modal-D9syqmZg.js","assets/page-delete-modal-DGvavHVb.js","assets/shared-page-delete-modal-BC_zpy7J.js","assets/secondsToMinutes-DwHnjsQa.js","assets/use-podcasts-navigation-BXT7k-0Z.js","assets/gaming.lazy-CtQ5w3W0.js","assets/gallery._galleryItemId.lazy-CjNXW6Ye.js","assets/daily.lazy-DbtiYp1K.js","assets/daily-briefing-CNAfuWoe.js","assets/formatDistanceToNow-DVx4H29L.js","assets/constructNow-q-CydsQI.js","assets/en-US-DXcgFgB0.js","assets/parseISO-DjYL6cTA.js","assets/use-scroll-element-into-view-DlTr5S6i.js","assets/arrow-maximize-DFy0Xcyc.js","assets/arrow-minimize-CL_qSV3t.js","assets/use-is-portrait-q_ydEitp.js","assets/wand-D5z1F5pa.js","assets/use-is-sidebar-expanded-on-the-side-D12Kap9o.js","assets/use-discover-feed-sPbDiDPq.js","assets/agents.lazy-DvbSDBb9.js","assets/index.lazy-BFmq7pRD.js","assets/arrow-referral-BXsABAX7.js","assets/copliot-referral-DszZT81w.js","assets/four-leaf-clover-BHlvOGIB.js","assets/hexagon-BVtO35J1.js","assets/message-referral-DcQ_R1TY.js","assets/rewards-WKpx9c5D.js","assets/index.lazy-DA5iTuwx.js","assets/use-labs-telemetry-EMkk3v-P.js","assets/index-Dtkq4PJW.js","assets/labs-social-icon-discord-7KSjSPfA.js","assets/labs-social-icon-instagram-CR4OkaPf.js","assets/labs-social-icon-x-MzjywQkY.js","assets/labs-social-icon-youtube-hl6wbUB8.js","assets/subscription.start.lazy-DIYz9eHq.js","assets/subscription.manage.lazy-3BPPGhMh.js","assets/shares._conversationId.lazy-nZw1KwoR.js","assets/rules.lazy-BYwKUt_h.js","assets/link-multiple-C-Apvtqj.js","assets/pro.subscribe.lazy-oUpQdF-V.js","assets/checkout-wrapper-BxWOxpBR.js","assets/paywall-container-Bx2-wcSv.js","assets/add-address-DH7BkMn_.js","assets/address-DhtyRPI2.js","assets/pidl-element-factory-xsibL32C.js","assets/workflow-pi-dropdown-disabler-BdnopoQA.js","assets/react-number-format.es-CgQb584A.js","assets/dropdown-radio-DKkgofWV.js","assets/current-8INtI9I6.js","assets/pidl-element-factory-Cq7KyA6l.css","assets/add-address-view-CoszAi8D.js","assets/form-field-skeleton-BBG6NyDs.js","assets/add-payment-instrument-AmSjkH9D.js","assets/add-payment-instrument-view-DC-it2to.js","assets/add-ewallet-skeleton-C5wVQvwH.js","assets/select-payment-instrument-y8Nr5wm4.js","assets/start-line-Boq0ajKy.js","assets/credit-card-DZNuBX_2.js","assets/pro.subscribe-jQX9gqYg.css","assets/pages._pageId.lazy-Pxu9hcai.js","assets/use-clean-history-state-Ci2AzVpf.js","assets/text-bold-YwXIkKZA.js","assets/text-bullet-list-CGyk65pD.js","assets/text-code-CbPa122f.js","assets/text-italic-G7nita-l.js","assets/text-numbered-list-vzp-1dRV.js","assets/text-paragraph-O0zBI9XG.js","assets/upload-image-Cr2JtnJE.js","assets/pages-welcome-dark-r64A2mUI.js","assets/pages-welcome-light-DDUDcHxX.js","assets/panel-right-contract-B8A2zxE3.js","assets/panel-right-expand-DPij22TI.js","assets/arrow-enter-up-BXgtBKz0.js","assets/use-emit-page-loaded-CLEdAhMm.js","assets/use-clean-history-state-1zwaObvJ.css","assets/copy-add-DPj7HPqg.js","assets/memory.narrative.lazy-CQt_WdXR.js","assets/e.sol.lazy-DaQ7Yhkj.js","assets/e.so.lazy-CGYgrDwo.js","assets/connector.callback.lazy-DTV3N7Cn.js","assets/chats.private.lazy-TebyEZS2.js","assets/campaigns._campaignId.lazy-zwghYZir.js","assets/index.lazy-CVmOmgCe.js","assets/mock-interview.lazy-Dt0qFxTn.js","assets/index.lazy-DL_58bMT.js","assets/labs-badge-BX2-t8nh.js","assets/shares.tasks._shareId.lazy-slq6SLkh.js","assets/shares.podcasts._shareId.lazy-CHEFYocK.js","assets/shares.pages._shareId.lazy-CmelRboc.js","assets/shares.3d-generations._shareId.lazy-hZB694et.js","assets/use-sidebar-position-B_DarxIS.js","assets/cube-D40Jt_9t.js","assets/printer-3d-CFf3IQq9.js","assets/cube-solid-BecN-T5t.js","assets/pro.redeem._redeemCode.lazy-B65VKzON.js","assets/pro.ewallet.return.lazy-CEmWd6vo.js","assets/podcasts._podcastType._podcastId.lazy-46fWijPk.js","assets/talk.lazy-DqCwjWA-.js","assets/audio-call-B-dt7dHj.js","assets/timer-IhHqbU6E.js","assets/voicemail-dark-BtARQIb1.js","assets/voicemail-light-DeMSWjpH.js","assets/experiments._experimentAlias.lazy-ffz3l_-j.js","assets/discover._-_modalType_._-_modalId_.lazy-DAXQ9LwV.js","assets/chats_._conversationId.talk.lazy-DC9BVVd7.js","assets/my-creations.lazy-Dm59p6s3.js","assets/use-responsive-masonry-CCAJjdE-.js","assets/use-window-size-CojYiStA.js","assets/share-url-modal-_DtbMNLN.js","assets/my-creations-BiEk7v8n.css","assets/react-B7EQstoL.js"])))=>i.map(i=>d[i]);
var u9=Object.defineProperty;var Sy=e=>{throw TypeError(e)};var d9=(e,t,n)=>t in e?u9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var N=(e,t,n)=>d9(e,typeof t!="symbol"?t+"":t,n),Xp=(e,t,n)=>t.has(e)||Sy("Cannot "+n);var Y=(e,t,n)=>(Xp(e,t,"read from private field"),n?n.call(e):t.get(e)),gt=(e,t,n)=>t.has(e)?Sy("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),nt=(e,t,n,s)=>(Xp(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),ye=(e,t,n)=>(Xp(e,t,"access private method"),n);import{r as d,j as i,b as k,x as De,a as _,$ as wh,F as qi,o as Ca,h as Ki,I as xa,f as Zi,a0 as m9,a1 as p9,k as _m,l as km,m as Nm,g as _a,K as h1,a2 as f9,R as Yi,u as z,C as qS,z as a,_ as P,E as g1,e as Ee,P as KS,a3 as h9,a4 as wy,a5 as g9,a6 as b9,M as v9,a7 as y9,a8 as Iy,a9 as C9,aa as x9,t as B,s as ZS,ab as b1,ac as S9,ad as w9,n as Mm,ae as jd,i as Wt,J as I9,A as Bl,G as Rm,v as YS,H as QS,S as T9,L as JS,af as XS,ag as E9,ah as A9,ai as kc,p as v1,B as Pm,aj as _9,ak as k9,al as N9,am as M9,an as ef,d as ze,q as R9,ao as P9,ap as L9,aq as j9,ar as O9,as as D9}from"./vendor-Dmlf5KxN.js";import{g as U9}from"./sentry-CQNtvQBy.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const e5=d.createContext({});function Eo(e){const t=d.useRef(null);return t.current===null&&(t.current=e()),t.current}const Vl=d.createContext(null),lr=d.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class F9 extends d.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=n.offsetParent,o=s instanceof HTMLElement&&s.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=o-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function B9({children:e,isPresent:t,anchorX:n}){const s=d.useId(),o=d.useRef(null),r=d.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=d.useContext(lr);return d.useInsertionEffect(()=>{const{width:l,height:u,top:m,left:p,right:f}=r.current;if(t||!o.current||!l||!u)return;const h=n==="left"?`left: ${p}`:`right: ${f}`;o.current.dataset.motionPopId=s;const g=document.createElement("style");return c&&(g.nonce=c),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${h}px !important;
            top: ${m}px !important;
          }
        `),()=>{document.head.removeChild(g)}},[t]),i.jsx(F9,{isPresent:t,childRef:o,sizeRef:r,children:d.cloneElement(e,{ref:o})})}const V9=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:o,presenceAffectsLayout:r,mode:c,anchorX:l})=>{const u=Eo(H9),m=d.useId(),p=d.useCallback(h=>{u.set(h,!0);for(const g of u.values())if(!g)return;s&&s()},[u,s]),f=d.useMemo(()=>({id:m,initial:t,isPresent:n,custom:o,onExitComplete:p,register:h=>(u.set(h,!1),()=>u.delete(h))}),r?[Math.random(),p]:[n,p]);return d.useMemo(()=>{u.forEach((h,g)=>u.set(g,!1))},[n]),d.useEffect(()=>{!n&&!u.size&&s&&s()},[n]),c==="popLayout"&&(e=i.jsx(B9,{isPresent:n,anchorX:l,children:e})),i.jsx(Vl.Provider,{value:f,children:e})};function H9(){return new Map}function z9(e=!0){const t=d.useContext(Vl);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:o}=t,r=d.useId();d.useEffect(()=>{if(e)return o(r)},[e]);const c=d.useCallback(()=>e&&s&&s(r),[r,s,e]);return!n&&s?[!1,c]:[!0]}function Uge(){return W9(d.useContext(Vl))}function W9(e){return e===null?!0:e.isPresent}const Yu=e=>e.key||"";function Ty(e){const t=[];return d.Children.forEach(e,n=>{d.isValidElement(n)&&t.push(n)}),t}const t5=typeof window<"u",Hl=t5?d.useLayoutEffect:d.useEffect,at=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:r="sync",propagate:c=!1,anchorX:l="left"})=>{const[u,m]=z9(c),p=d.useMemo(()=>Ty(e),[e]),f=c&&!u?[]:p.map(Yu),h=d.useRef(!0),g=d.useRef(p),y=Eo(()=>new Map),[b,x]=d.useState(p),[v,S]=d.useState(p);Hl(()=>{h.current=!1,g.current=p;for(let w=0;w<v.length;w++){const I=Yu(v[w]);f.includes(I)?y.delete(I):y.get(I)!==!0&&y.set(I,!1)}},[v,f.length,f.join("-")]);const C=[];if(p!==b){let w=[...p];for(let I=0;I<v.length;I++){const A=v[I],E=Yu(A);f.includes(E)||(w.splice(I,0,A),C.push(A))}return r==="wait"&&C.length&&(w=C),S(Ty(w)),x(p),null}const{forceRender:T}=d.useContext(e5);return i.jsx(i.Fragment,{children:v.map(w=>{const I=Yu(w),A=c&&!u?!1:p===v||f.includes(I),E=()=>{if(y.has(I))y.set(I,!0);else return;let R=!0;y.forEach(U=>{U||(R=!1)}),R&&(T==null||T(),S(g.current),c&&(m==null||m()),s&&s())};return i.jsx(V9,{isPresent:A,initial:!h.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:r,onExitComplete:A?void 0:E,anchorX:l,children:w},I)})})},ka=e=>e;let G9=ka,n5=ka;const Ih={skipAnimations:!1,useManualTiming:!1},Qu=["read","resolveKeyframes","update","preRender","render","postRender"];function $9(e,t){let n=new Set,s=new Set,o=!1,r=!1;const c=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(p){c.has(p)&&(m.schedule(p),e()),p(l)}const m={schedule:(p,f=!1,h=!1)=>{const y=h&&o?n:s;return f&&c.add(p),y.has(p)||y.add(p),p},cancel:p=>{s.delete(p),c.delete(p)},process:p=>{if(l=p,o){r=!0;return}o=!0,[n,s]=[s,n],n.forEach(u),n.clear(),o=!1,r&&(r=!1,m.process(p))}};return m}const q9=40;function s5(e,t){let n=!1,s=!0;const o={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,c=Qu.reduce((v,S)=>(v[S]=$9(r),v),{}),{read:l,resolveKeyframes:u,update:m,preRender:p,render:f,postRender:h}=c,g=()=>{const v=Ih.useManualTiming?o.timestamp:performance.now();n=!1,Ih.useManualTiming||(o.delta=s?1e3/60:Math.max(Math.min(v-o.timestamp,q9),1)),o.timestamp=v,o.isProcessing=!0,l.process(o),u.process(o),m.process(o),p.process(o),f.process(o),h.process(o),o.isProcessing=!1,n&&t&&(s=!1,e(g))},y=()=>{n=!0,s=!0,o.isProcessing||e(g)};return{schedule:Qu.reduce((v,S)=>{const C=c[S];return v[S]=(T,w=!1,I=!1)=>(n||y(),C.schedule(T,w,I)),v},{}),cancel:v=>{for(let S=0;S<Qu.length;S++)c[Qu[S]].cancel(v)},state:o,steps:c}}const{schedule:Un,cancel:Lm,state:fl,steps:Fge}=s5(typeof requestAnimationFrame<"u"?requestAnimationFrame:ka,!0),y1=d.createContext({strict:!1}),Ey={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Od={};for(const e in Ey)Od[e]={isEnabled:t=>Ey[e].some(n=>!!t[n])};function Th(e){for(const t in e)Od[t]={...Od[t],...e[t]}}function K9({children:e,features:t,strict:n=!1}){const[,s]=d.useState(!tf(t)),o=d.useRef(void 0);if(!tf(t)){const{renderer:r,...c}=t;o.current=r,Th(c)}return d.useEffect(()=>{tf(t)&&t().then(({renderer:r,...c})=>{Th(c),o.current=r,s(!0)})},[]),i.jsx(y1.Provider,{value:{renderer:o.current,strict:n},children:e})}function tf(e){return typeof e=="function"}const Z9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Z9.has(e)}let o5=e=>!Dd(e);function a5(e){e&&(o5=t=>t.startsWith("on")?!Dd(t):e(t))}try{a5(require("@emotion/is-prop-valid").default)}catch{}function Y9(e,t,n){const s={};for(const o in e)o==="values"&&typeof e.values=="object"||(o5(o)||n===!0&&Dd(o)||!t&&!Dd(o)||e.draggable&&o.startsWith("onDrag"))&&(s[o]=e[o]);return s}function r5({children:e,isValidProp:t,...n}){t&&a5(t),n={...d.useContext(lr),...n},n.isStatic=Eo(()=>n.isStatic);const s=d.useMemo(()=>n,[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return i.jsx(lr.Provider,{value:s,children:e})}function Q9(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...s)=>e(...s);return new Proxy(n,{get:(s,o)=>o==="create"?e:(t.has(o)||t.set(o,e(o)),t.get(o))})}const jm=d.createContext({});function i5(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Eh(e){return typeof e=="string"||Array.isArray(e)}const J9=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],X9=["initial",...J9];function C1(e){return i5(e.animate)||X9.some(t=>Eh(e[t]))}function e8(e){return!!(C1(e)||e.variants)}function t8(e,t){if(C1(e)){const{initial:n,animate:s}=e;return{initial:n===!1||Eh(n)?n:void 0,animate:Eh(s)?s:void 0}}return e.inherit!==!1?t:{}}function n8(e){const{initial:t,animate:n}=t8(e,d.useContext(jm));return d.useMemo(()=>({initial:t,animate:n}),[Ay(t),Ay(n)])}function Ay(e){return Array.isArray(e)?e.join(" "):e}const s8=Symbol.for("motionComponentSymbol");function c5(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function o8(e,t,n){return d.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):c5(n)&&(n.current=s))},[t])}const l5=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),a8="framerAppearId",r8="data-"+l5(a8),{schedule:i8}=s5(queueMicrotask,!1),c8=d.createContext({});function l8(e,t,n,s,o){var r,c;const{visualElement:l}=d.useContext(jm),u=d.useContext(y1),m=d.useContext(Vl),p=d.useContext(lr).reducedMotion,f=d.useRef(null);s=s||u.renderer,!f.current&&s&&(f.current=s(e,{visualState:t,parent:l,props:n,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:p}));const h=f.current,g=d.useContext(c8);h&&!h.projection&&o&&(h.type==="html"||h.type==="svg")&&u8(f.current,n,o,g);const y=d.useRef(!1);d.useInsertionEffect(()=>{h&&y.current&&h.update(n,m)});const b=n[r8],x=d.useRef(!!b&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,b))&&((c=window.MotionHasOptimisedAnimation)===null||c===void 0?void 0:c.call(window,b)));return Hl(()=>{h&&(y.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),i8.render(h.render),x.current&&h.animationState&&h.animationState.animateChanges())}),d.useEffect(()=>{h&&(!x.current&&h.animationState&&h.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,b)}),x.current=!1))}),h}function u8(e,t,n,s){const{layoutId:o,layout:r,drag:c,dragConstraints:l,layoutScroll:u,layoutRoot:m}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:u5(e.parent)),e.projection.setOptions({layoutId:o,layout:r,alwaysMeasureLayout:!!c||l&&c5(l),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,layoutScroll:u,layoutRoot:m})}function u5(e){if(e)return e.options.allowProjection!==!1?e.projection:u5(e.parent)}function d8({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:o}){var r,c;e&&Th(e);function l(m,p){let f;const h={...d.useContext(lr),...m,layoutId:m8(m)},{isStatic:g}=h,y=n8(m),b=s(m,g);if(!g&&t5){p8();const x=f8(h);f=x.MeasureLayout,y.visualElement=l8(o,b,h,t,x.ProjectionNode)}return i.jsxs(jm.Provider,{value:y,children:[f&&y.visualElement?i.jsx(f,{visualElement:y.visualElement,...h}):null,n(o,m,o8(b,y.visualElement,p),b,g,y.visualElement)]})}l.displayName=`motion.${typeof o=="string"?o:`create(${(c=(r=o.displayName)!==null&&r!==void 0?r:o.name)!==null&&c!==void 0?c:""})`}`;const u=d.forwardRef(l);return u[s8]=o,u}function m8({layoutId:e}){const t=d.useContext(e5).id;return t&&e!==void 0?t+"-"+e:e}function p8(e,t){d.useContext(y1).strict}function f8(e){const{drag:t,layout:n}=Od;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const d5=e=>t=>typeof t=="string"&&t.startsWith(e),m5=d5("--"),h8=d5("var(--"),g8=e=>h8(e)?b8.test(e.split("/*")[0].trim()):!1,b8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ah={};function Bge(e){for(const t in e)Ah[t]=e[t],m5(t)&&(Ah[t].isCSSVariable=!0)}const zl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],x1=new Set(zl);function p5(e,{layout:t,layoutId:n}){return x1.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Ah[e]||e==="opacity")}const Ao=e=>!!(e&&e.getVelocity),f5=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Sa=(e,t,n)=>n>t?t:n<e?e:n,Wl={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},hl={...Wl,transform:e=>Sa(0,1,e)},Ju={...Wl,default:1},Gl=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ha=Gl("deg"),el=Gl("%"),Fe=Gl("px"),Vge=Gl("vh"),Hge=Gl("vw"),_y={...el,parse:e=>el.parse(e)/100,transform:e=>el.transform(e*100)},v8={borderWidth:Fe,borderTopWidth:Fe,borderRightWidth:Fe,borderBottomWidth:Fe,borderLeftWidth:Fe,borderRadius:Fe,radius:Fe,borderTopLeftRadius:Fe,borderTopRightRadius:Fe,borderBottomRightRadius:Fe,borderBottomLeftRadius:Fe,width:Fe,maxWidth:Fe,height:Fe,maxHeight:Fe,top:Fe,right:Fe,bottom:Fe,left:Fe,padding:Fe,paddingTop:Fe,paddingRight:Fe,paddingBottom:Fe,paddingLeft:Fe,margin:Fe,marginTop:Fe,marginRight:Fe,marginBottom:Fe,marginLeft:Fe,backgroundPositionX:Fe,backgroundPositionY:Fe},y8={rotate:Ha,rotateX:Ha,rotateY:Ha,rotateZ:Ha,scale:Ju,scaleX:Ju,scaleY:Ju,scaleZ:Ju,skew:Ha,skewX:Ha,skewY:Ha,distance:Fe,translateX:Fe,translateY:Fe,translateZ:Fe,x:Fe,y:Fe,z:Fe,perspective:Fe,transformPerspective:Fe,opacity:hl,originX:_y,originY:_y,originZ:Fe},ky={...Wl,transform:Math.round},h5={...v8,...y8,zIndex:ky,size:Fe,fillOpacity:hl,strokeOpacity:hl,numOctaves:ky},C8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},x8=zl.length;function S8(e,t,n){let s="",o=!0;for(let r=0;r<x8;r++){const c=zl[r],l=e[c];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(c.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const m=f5(l,h5[c]);if(!u){o=!1;const p=C8[c]||c;s+=`${p}(${m}) `}n&&(t[c]=m)}}return s=s.trim(),n?s=n(t,o?"":s):o&&(s="none"),s}function g5(e,t,n){const{style:s,vars:o,transformOrigin:r}=e;let c=!1,l=!1;for(const u in t){const m=t[u];if(x1.has(u)){c=!0;continue}else if(m5(u)){o[u]=m;continue}else{const p=f5(m,h5[u]);u.startsWith("origin")?(l=!0,r[u]=p):s[u]=p}}if(t.transform||(c||n?s.transform=S8(t,e.transform,n):s.transform&&(s.transform="none")),l){const{originX:u="50%",originY:m="50%",originZ:p=0}=r;s.transformOrigin=`${u} ${m} ${p}`}}const S1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function b5(e,t,n){for(const s in t)!Ao(t[s])&&!p5(s,n)&&(e[s]=t[s])}function w8({transformTemplate:e},t){return d.useMemo(()=>{const n=S1();return g5(n,t,e),Object.assign({},n.vars,n.style)},[t])}function I8(e,t){const n=e.style||{},s={};return b5(s,n,e),Object.assign(s,w8(e,t)),s}function T8(e,t){const n={},s=I8(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const E8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function v5(e){return typeof e!="string"||e.includes("-")?!1:!!(E8.indexOf(e)>-1||/[A-Z]/u.test(e))}const A8={offset:"stroke-dashoffset",array:"stroke-dasharray"},_8={offset:"strokeDashoffset",array:"strokeDasharray"};function k8(e,t,n=1,s=0,o=!0){e.pathLength=1;const r=o?A8:_8;e[r.offset]=Fe.transform(-s);const c=Fe.transform(t),l=Fe.transform(n);e[r.array]=`${c} ${l}`}function Ny(e,t,n){return typeof e=="string"?e:Fe.transform(t+n*e)}function N8(e,t,n){const s=Ny(t,e.x,e.width),o=Ny(n,e.y,e.height);return`${s} ${o}`}function y5(e,{attrX:t,attrY:n,attrScale:s,originX:o,originY:r,pathLength:c,pathSpacing:l=1,pathOffset:u=0,...m},p,f){if(g5(e,m,f),p){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:g,dimensions:y}=e;h.transform&&(y&&(g.transform=h.transform),delete h.transform),y&&(o!==void 0||r!==void 0||g.transform)&&(g.transformOrigin=N8(y,o!==void 0?o:.5,r!==void 0?r:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),s!==void 0&&(h.scale=s),c!==void 0&&k8(h,c,l,u,!1)}const C5=()=>({...S1(),attrs:{}}),x5=e=>typeof e=="string"&&e.toLowerCase()==="svg";function M8(e,t,n,s){const o=d.useMemo(()=>{const r=C5();return y5(r,t,x5(s),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};b5(r,e.style,e),o.style={...r,...o.style}}return o}function R8(e=!1){return(n,s,o,{latestValues:r},c)=>{const u=(v5(n)?M8:T8)(s,r,c,n),m=Y9(s,typeof n=="string",e),p=n!==d.Fragment?{...m,...u,ref:o}:{},{children:f}=s,h=d.useMemo(()=>Ao(f)?f.get():f,[f]);return d.createElement(n,{...p,children:h})}}function My(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function P8(e,t,n,s){if(typeof t=="function"){const[o,r]=My(s);t=t(n!==void 0?n:e.custom,o,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,r]=My(s);t=t(n!==void 0?n:e.custom,o,r)}return t}const L8=e=>Array.isArray(e),j8=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),zge=e=>L8(e)?e[e.length-1]||0:e;function O8(e){const t=Ao(e)?e.get():e;return j8(t)?t.toValue():t}function D8({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},s,o,r){const c={latestValues:U8(s,o,r,e),renderState:t()};return n&&(c.onMount=l=>n({props:s,current:l,...c}),c.onUpdate=l=>n(l)),c}const S5=e=>(t,n)=>{const s=d.useContext(jm),o=d.useContext(Vl),r=()=>D8(e,t,s,o);return n?r():Eo(r)};function U8(e,t,n,s){const o={},r=s(e,{});for(const h in r)o[h]=O8(r[h]);let{initial:c,animate:l}=e;const u=C1(e),m=e8(e);t&&m&&!u&&e.inherit!==!1&&(c===void 0&&(c=t.initial),l===void 0&&(l=t.animate));let p=n?n.initial===!1:!1;p=p||c===!1;const f=p?l:c;if(f&&typeof f!="boolean"&&!i5(f)){const h=Array.isArray(f)?f:[f];for(let g=0;g<h.length;g++){const y=P8(e,h[g]);if(y){const{transitionEnd:b,transition:x,...v}=y;for(const S in v){let C=v[S];if(Array.isArray(C)){const T=p?C.length-1:0;C=C[T]}C!==null&&(o[S]=C)}for(const S in b)o[S]=b[S]}}}return o}function w5(e,t,n){var s;const{style:o}=e,r={};for(const c in o)(Ao(o[c])||t.style&&Ao(t.style[c])||p5(c,e)||((s=n==null?void 0:n.getValue(c))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(r[c]=o[c]);return r}const F8={useVisualState:S5({scrapeMotionValuesFromProps:w5,createRenderState:S1})};function B8(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}function V8(e,{style:t,vars:n},s,o){Object.assign(e.style,t,o&&o.getProjectionStyles(s));for(const r in n)e.style.setProperty(r,n[r])}const H8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function z8(e,t,n,s){V8(e,t,void 0,s);for(const o in t.attrs)e.setAttribute(H8.has(o)?o:l5(o),t.attrs[o])}function W8(e,t,n){const s=w5(e,t,n);for(const o in e)if(Ao(e[o])||Ao(t[o])){const r=zl.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;s[r]=e[o]}return s}const Ry=["x","y","width","height","cx","cy","r"],G8={useVisualState:S5({scrapeMotionValuesFromProps:W8,createRenderState:C5,onUpdate:({props:e,prevProps:t,current:n,renderState:s,latestValues:o})=>{if(!n)return;let r=!!e.drag;if(!r){for(const l in o)if(x1.has(l)){r=!0;break}}if(!r)return;let c=!t;if(t)for(let l=0;l<Ry.length;l++){const u=Ry[l];e[u]!==t[u]&&(c=!0)}c&&Un.read(()=>{B8(n,s),Un.render(()=>{y5(s,o,x5(n.tagName),e.transformTemplate),z8(n,s)})})}})};function $8(e,t){return function(s,{forwardMotionProps:o}={forwardMotionProps:!1}){const c={...v5(s)?G8:F8,preloadedFeatures:e,useRender:R8(o),createVisualElement:t,Component:s};return d8(c)}}const q8=$8(),ee=Q9(q8);let gd;function K8(){gd=void 0}const rr={now:()=>(gd===void 0&&rr.set(fl.isProcessing||Ih.useManualTiming?fl.timestamp:performance.now()),gd),set:e=>{gd=e,queueMicrotask(K8)}};function Z8(e,t){e.indexOf(t)===-1&&e.push(t)}function Y8(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function Wge([...e],t,n){const s=t<0?e.length+t:t;if(s>=0&&s<e.length){const o=n<0?e.length+n:n,[r]=e.splice(t,1);e.splice(o,0,r)}return e}class Q8{constructor(){this.subscriptions=[]}add(t){return Z8(this.subscriptions,t),()=>Y8(this.subscriptions,t)}notify(t,n,s){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,s);else for(let r=0;r<o;r++){const c=this.subscriptions[r];c&&c(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function w1(e,t){return t?e*(1e3/t):0}const Py=30,J8=e=>!isNaN(parseFloat(e)),tl={current:void 0};class X8{constructor(t,n={}){this.version="12.4.7",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,o=!0)=>{const r=rr.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=rr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=J8(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Q8);const s=this.events[t].add(n);return t==="change"?()=>{s(),Un.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return tl.current&&tl.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=rr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Py)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Py);return w1(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function li(e,t){return new X8(e,t)}function eN(e){let t;return()=>(t===void 0&&(t=e()),t)}const tN=eN(()=>window.ScrollTimeline!==void 0),I1=e=>e*1e3,yi=e=>e/1e3,nN={current:!1};function I5(e){return typeof e=="function"}const sN=e=>Array.isArray(e)&&typeof e[0]=="number",Om=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},oN=(e,t,n=10)=>{let s="";const o=Math.max(Math.round(t/n),2);for(let r=0;r<o;r++)s+=e(Om(0,o-1,r))+", ";return`linear(${s.substring(0,s.length-2)})`},T5=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,aN=1e-7,rN=12;function iN(e,t,n,s,o){let r,c,l=0;do c=t+(n-t)/2,r=T5(c,s,o)-e,r>0?n=c:t=c;while(Math.abs(r)>aN&&++l<rN);return c}function $l(e,t,n,s){if(e===t&&n===s)return ka;const o=r=>iN(r,0,1,e,n);return r=>r===0||r===1?r:T5(o(r),t,s)}const E5=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,A5=e=>t=>1-e(1-t),_5=$l(.33,1.53,.69,.99),T1=A5(_5),cN=E5(T1),lN=e=>(e*=2)<1?.5*T1(e):.5*(2-Math.pow(2,-10*(e-1))),E1=e=>1-Math.sin(Math.acos(e)),uN=A5(E1),dN=E5(E1),nl=e=>Math.round(e*1e5)/1e5,k5=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function mN(e){return e==null}const pN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,A1=(e,t)=>n=>!!(typeof n=="string"&&pN.test(n)&&n.startsWith(e)||t&&!mN(n)&&Object.prototype.hasOwnProperty.call(n,t)),N5=(e,t,n)=>s=>{if(typeof s!="string")return s;const[o,r,c,l]=s.match(k5);return{[e]:parseFloat(o),[t]:parseFloat(r),[n]:parseFloat(c),alpha:l!==void 0?parseFloat(l):1}},fN=e=>Sa(0,255,e),nf={...Wl,transform:e=>Math.round(fN(e))},nr={test:A1("rgb","red"),parse:N5("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+nf.transform(e)+", "+nf.transform(t)+", "+nf.transform(n)+", "+nl(hl.transform(s))+")"};function hN(e){let t="",n="",s="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,s+=s,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:o?parseInt(o,16)/255:1}}const _h={test:A1("#"),parse:hN,transform:nr.transform},ui={test:A1("hsl","hue"),parse:N5("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+el.transform(nl(t))+", "+el.transform(nl(n))+", "+nl(hl.transform(s))+")"},gl={test:e=>nr.test(e)||_h.test(e)||ui.test(e),parse:e=>nr.test(e)?nr.parse(e):ui.test(e)?ui.parse(e):_h.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?nr.transform(e):ui.transform(e)},gN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function bN(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(k5))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(gN))===null||n===void 0?void 0:n.length)||0)>0}const M5="number",R5="color",vN="var",yN="var(",Ly="${}",CN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ud(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},o=[];let r=0;const l=t.replace(CN,u=>(gl.test(u)?(s.color.push(r),o.push(R5),n.push(gl.parse(u))):u.startsWith(yN)?(s.var.push(r),o.push(vN),n.push(u)):(s.number.push(r),o.push(M5),n.push(parseFloat(u))),++r,Ly)).split(Ly);return{values:n,split:l,indexes:s,types:o}}function P5(e){return Ud(e).values}function L5(e){const{split:t,types:n}=Ud(e),s=t.length;return o=>{let r="";for(let c=0;c<s;c++)if(r+=t[c],o[c]!==void 0){const l=n[c];l===M5?r+=nl(o[c]):l===R5?r+=gl.transform(o[c]):r+=o[c]}return r}}const xN=e=>typeof e=="number"?0:e;function SN(e){const t=P5(e);return L5(e)(t.map(xN))}const j5={test:bN,parse:P5,createTransformer:L5,getAnimatableNone:SN},Gge=e=>e===Wl||e===Fe,jy=(e,t)=>parseFloat(e.split(", ")[t]),Oy=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const o=s.match(/^matrix3d\((.+)\)$/u);if(o)return jy(o[1],t);{const r=s.match(/^matrix\((.+)\)$/u);return r?jy(r[1],e):0}},wN=new Set(["x","y","z"]),IN=zl.filter(e=>!wN.has(e));function TN(e){const t=[];return IN.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const Fd={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Oy(4,13),y:Oy(5,14)};Fd.translateX=Fd.x;Fd.translateY=Fd.y;const ir=new Set;let kh=!1,Nh=!1;function O5(){if(Nh){const e=Array.from(ir).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const o=TN(s);o.length&&(n.set(s,o),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const o=n.get(s);o&&o.forEach(([r,c])=>{var l;(l=s.getValue(r))===null||l===void 0||l.set(c)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Nh=!1,kh=!1,ir.forEach(e=>e.complete()),ir.clear()}function D5(){ir.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Nh=!0)})}function EN(){D5(),O5()}class AN{constructor(t,n,s,o,r,c=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=o,this.element=r,this.isAsync=c}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ir.add(this),kh||(kh=!0,Un.read(D5),Un.resolveKeyframes(O5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:o}=this;for(let r=0;r<t.length;r++)if(t[r]===null)if(r===0){const c=o==null?void 0:o.get(),l=t[t.length-1];if(c!==void 0)t[0]=c;else if(s&&n){const u=s.readValue(n,l);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=l),o&&c===void 0&&o.set(t[0])}else t[r]=t[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ir.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ir.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Dy=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(j5.test(e)||e==="0")&&!e.startsWith("url("));function _N(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function kN(e,t,n,s){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],c=Dy(o,t),l=Dy(r,t);return!c||!l?!1:_N(e)||(n==="spring"||I5(n))&&s}const NN=e=>e!==null;function U5(e,{repeat:t,repeatType:n="loop"},s){const o=e.filter(NN),r=t&&n!=="loop"&&t%2===1?0:o.length-1;return!r||s===void 0?o[r]:s}const MN=40;class RN{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:o=0,repeatDelay:r=0,repeatType:c="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=rr.now(),this.options={autoplay:t,delay:n,type:s,repeat:o,repeatDelay:r,repeatType:c,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MN?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&EN(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=rr.now(),this.hasAttemptedResolve=!0;const{name:s,type:o,velocity:r,delay:c,onComplete:l,onUpdate:u,isGenerator:m}=this.options;if(!m&&!kN(t,s,o,r))if(nN.current||!c){u&&u(U5(t,this.options,n)),l&&l(),this.resolveFinishedPromise();return}else this.options.duration=0;const p=this.initPlayback(t,n);p!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...p},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Mh=2e4;function F5(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<Mh;)t+=n,s=e.next(t);return t>=Mh?1/0:t}const Dm=(e,t,n)=>e+(t-e)*n;function sf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function PN({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let o=0,r=0,c=0;if(!t)o=r=c=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;o=sf(u,l,e+1/3),r=sf(u,l,e),c=sf(u,l,e-1/3)}return{red:Math.round(o*255),green:Math.round(r*255),blue:Math.round(c*255),alpha:s}}function Bd(e,t){return n=>n>0?t:e}const of=(e,t,n)=>{const s=e*e,o=n*(t*t-s)+s;return o<0?0:Math.sqrt(o)},LN=[_h,nr,ui],jN=e=>LN.find(t=>t.test(e));function Uy(e){const t=jN(e);if(!t)return!1;let n=t.parse(e);return t===ui&&(n=PN(n)),n}const Fy=(e,t)=>{const n=Uy(e),s=Uy(t);if(!n||!s)return Bd(e,t);const o={...n};return r=>(o.red=of(n.red,s.red,r),o.green=of(n.green,s.green,r),o.blue=of(n.blue,s.blue,r),o.alpha=Dm(n.alpha,s.alpha,r),nr.transform(o))},ON=(e,t)=>n=>t(e(n)),_1=(...e)=>e.reduce(ON),Rh=new Set(["none","hidden"]);function DN(e,t){return Rh.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function UN(e,t){return n=>Dm(e,t,n)}function k1(e){return typeof e=="number"?UN:typeof e=="string"?g8(e)?Bd:gl.test(e)?Fy:VN:Array.isArray(e)?B5:typeof e=="object"?gl.test(e)?Fy:FN:Bd}function B5(e,t){const n=[...e],s=n.length,o=e.map((r,c)=>k1(r)(r,t[c]));return r=>{for(let c=0;c<s;c++)n[c]=o[c](r);return n}}function FN(e,t){const n={...e,...t},s={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(s[o]=k1(e[o])(e[o],t[o]));return o=>{for(const r in s)n[r]=s[r](o);return n}}function BN(e,t){var n;const s=[],o={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const c=t.types[r],l=e.indexes[c][o[c]],u=(n=e.values[l])!==null&&n!==void 0?n:0;s[r]=u,o[c]++}return s}const VN=(e,t)=>{const n=j5.createTransformer(t),s=Ud(e),o=Ud(t);return s.indexes.var.length===o.indexes.var.length&&s.indexes.color.length===o.indexes.color.length&&s.indexes.number.length>=o.indexes.number.length?Rh.has(e)&&!o.values.length||Rh.has(t)&&!s.values.length?DN(e,t):_1(B5(BN(s,o),o.values),n):Bd(e,t)};function V5(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Dm(e,t,n):k1(e)(e,t)}const HN=5;function H5(e,t,n){const s=Math.max(t-HN,0);return w1(n-e(s),t-s)}const kt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},By=.001;function zN({duration:e=kt.duration,bounce:t=kt.bounce,velocity:n=kt.velocity,mass:s=kt.mass}){let o,r,c=1-t;c=Sa(kt.minDamping,kt.maxDamping,c),e=Sa(kt.minDuration,kt.maxDuration,yi(e)),c<1?(o=m=>{const p=m*c,f=p*e,h=p-n,g=Ph(m,c),y=Math.exp(-f);return By-h/g*y},r=m=>{const f=m*c*e,h=f*n+n,g=Math.pow(c,2)*Math.pow(m,2)*e,y=Math.exp(-f),b=Ph(Math.pow(m,2),c);return(-o(m)+By>0?-1:1)*((h-g)*y)/b}):(o=m=>{const p=Math.exp(-m*e),f=(m-n)*e+1;return-.001+p*f},r=m=>{const p=Math.exp(-m*e),f=(n-m)*(e*e);return p*f});const l=5/e,u=GN(o,r,l);if(e=I1(e),isNaN(u))return{stiffness:kt.stiffness,damping:kt.damping,duration:e};{const m=Math.pow(u,2)*s;return{stiffness:m,damping:c*2*Math.sqrt(s*m),duration:e}}}const WN=12;function GN(e,t,n){let s=n;for(let o=1;o<WN;o++)s=s-e(s)/t(s);return s}function Ph(e,t){return e*Math.sqrt(1-t*t)}const $N=["duration","bounce"],qN=["stiffness","damping","mass"];function Vy(e,t){return t.some(n=>e[n]!==void 0)}function KN(e){let t={velocity:kt.velocity,stiffness:kt.stiffness,damping:kt.damping,mass:kt.mass,isResolvedFromDuration:!1,...e};if(!Vy(e,qN)&&Vy(e,$N))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),o=s*s,r=2*Sa(.05,1,1-(e.bounce||0))*Math.sqrt(o);t={...t,mass:kt.mass,stiffness:o,damping:r}}else{const n=zN(e);t={...t,...n,mass:kt.mass},t.isResolvedFromDuration=!0}return t}function z5(e=kt.visualDuration,t=kt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:o}=n;const r=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],l={done:!1,value:r},{stiffness:u,damping:m,mass:p,duration:f,velocity:h,isResolvedFromDuration:g}=KN({...n,velocity:-yi(n.velocity||0)}),y=h||0,b=m/(2*Math.sqrt(u*p)),x=c-r,v=yi(Math.sqrt(u/p)),S=Math.abs(x)<5;s||(s=S?kt.restSpeed.granular:kt.restSpeed.default),o||(o=S?kt.restDelta.granular:kt.restDelta.default);let C;if(b<1){const w=Ph(v,b);C=I=>{const A=Math.exp(-b*v*I);return c-A*((y+b*v*x)/w*Math.sin(w*I)+x*Math.cos(w*I))}}else if(b===1)C=w=>c-Math.exp(-v*w)*(x+(y+v*x)*w);else{const w=v*Math.sqrt(b*b-1);C=I=>{const A=Math.exp(-b*v*I),E=Math.min(w*I,300);return c-A*((y+b*v*x)*Math.sinh(E)+w*x*Math.cosh(E))/w}}const T={calculatedDuration:g&&f||null,next:w=>{const I=C(w);if(g)l.done=w>=f;else{let A=0;b<1&&(A=w===0?I1(y):H5(C,w,I));const E=Math.abs(A)<=s,R=Math.abs(c-I)<=o;l.done=E&&R}return l.value=l.done?c:I,l},toString:()=>{const w=Math.min(F5(T),Mh),I=oN(A=>T.next(w*A).value,w,30);return w+"ms "+I}};return T}function Hy({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:o=10,bounceStiffness:r=500,modifyTarget:c,min:l,max:u,restDelta:m=.5,restSpeed:p}){const f=e[0],h={done:!1,value:f},g=E=>l!==void 0&&E<l||u!==void 0&&E>u,y=E=>l===void 0?u:u===void 0||Math.abs(l-E)<Math.abs(u-E)?l:u;let b=n*t;const x=f+b,v=c===void 0?x:c(x);v!==x&&(b=v-f);const S=E=>-b*Math.exp(-E/s),C=E=>v+S(E),T=E=>{const R=S(E),U=C(E);h.done=Math.abs(R)<=m,h.value=h.done?v:U};let w,I;const A=E=>{g(h.value)&&(w=E,I=z5({keyframes:[h.value,y(h.value)],velocity:H5(C,E,h.value),damping:o,stiffness:r,restDelta:m,restSpeed:p}))};return A(0),{calculatedDuration:null,next:E=>{let R=!1;return!I&&w===void 0&&(R=!0,T(E),A(E)),w!==void 0&&E>=w?I.next(E-w):(!R&&T(E),h)}}}const ZN=$l(.42,0,1,1),YN=$l(0,0,.58,1),W5=$l(.42,0,.58,1),QN=e=>Array.isArray(e)&&typeof e[0]!="number",JN={linear:ka,easeIn:ZN,easeInOut:W5,easeOut:YN,circIn:E1,circInOut:dN,circOut:uN,backIn:T1,backInOut:cN,backOut:_5,anticipate:lN},zy=e=>{if(sN(e)){n5(e.length===4);const[t,n,s,o]=e;return $l(t,n,s,o)}else if(typeof e=="string")return JN[e];return e};function XN(e,t,n){const s=[],o=n||V5,r=e.length-1;for(let c=0;c<r;c++){let l=o(e[c],e[c+1]);if(t){const u=Array.isArray(t)?t[c]||ka:t;l=_1(u,l)}s.push(l)}return s}function N1(e,t,{clamp:n=!0,ease:s,mixer:o}={}){const r=e.length;if(n5(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const c=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=XN(t,s,o),u=l.length,m=p=>{if(c&&p<e[0])return t[0];let f=0;if(u>1)for(;f<e.length-2&&!(p<e[f+1]);f++);const h=Om(e[f],e[f+1],p);return l[f](h)};return n?p=>m(Sa(e[0],e[r-1],p)):m}function eM(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const o=Om(0,t,s);e.push(Dm(n,1,o))}}function G5(e){const t=[0];return eM(t,e.length-1),t}function tM(e,t){return e.map(n=>n*t)}function nM(e,t){return e.map(()=>t||W5).splice(0,e.length-1)}function Vd({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const o=QN(s)?s.map(zy):zy(s),r={done:!1,value:t[0]},c=tM(n&&n.length===t.length?n:G5(t),e),l=N1(c,t,{ease:Array.isArray(o)?o:nM(t,o)});return{calculatedDuration:e,next:u=>(r.value=l(u),r.done=u>=e,r)}}const sM=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Un.update(t,!0),stop:()=>Lm(t),now:()=>fl.isProcessing?fl.timestamp:rr.now()}},oM={decay:Hy,inertia:Hy,tween:Vd,keyframes:Vd,spring:z5},aM=e=>e/100;class rM extends RN{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:s,element:o,keyframes:r}=this.options,c=(o==null?void 0:o.KeyframeResolver)||AN,l=(u,m)=>this.onKeyframesResolved(u,m);this.resolver=new c(r,l,n,s,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:r,velocity:c=0}=this.options,l=I5(n)?n:oM[n]||Vd;let u,m;l!==Vd&&typeof t[0]!="number"&&(u=_1(aM,V5(t[0],t[1])),t=[0,100]);const p=l({...this.options,keyframes:t});r==="mirror"&&(m=l({...this.options,keyframes:[...t].reverse(),velocity:-c})),p.calculatedDuration===null&&(p.calculatedDuration=F5(p));const{calculatedDuration:f}=p,h=f+o,g=h*(s+1)-o;return{generator:p,mirroredGenerator:m,mapPercentToKeyframes:u,calculatedDuration:f,resolvedDuration:h,totalDuration:g}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:o,generator:r,mirroredGenerator:c,mapPercentToKeyframes:l,keyframes:u,calculatedDuration:m,totalDuration:p,resolvedDuration:f}=s;if(this.startTime===null)return r.next(0);const{delay:h,repeat:g,repeatType:y,repeatDelay:b,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-p/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const v=this.currentTime-h*(this.speed>=0?1:-1),S=this.speed>=0?v<0:v>p;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let C=this.currentTime,T=r;if(g){const E=Math.min(this.currentTime,p)/f;let R=Math.floor(E),U=E%1;!U&&E>=1&&(U=1),U===1&&R--,R=Math.min(R,g+1),!!(R%2)&&(y==="reverse"?(U=1-U,b&&(U-=b/f)):y==="mirror"&&(T=c)),C=Sa(0,1,U)*f}const w=S?{done:!1,value:u[0]}:T.next(C);l&&(w.value=l(w.value));let{done:I}=w;!S&&m!==null&&(I=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return A&&o!==void 0&&(w.value=U5(u,this.options,o)),x&&x(w.value),A&&this.finish(),w}get duration(){const{resolved:t}=this;return t?yi(t.calculatedDuration):0}get time(){return yi(this.currentTime)}set time(t){t=I1(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=yi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=sM,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),n&&n();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}function iM(e){return new rM(e)}function $5(e,t,n){var s;if(e instanceof EventTarget)return[e];if(typeof e=="string"){let o=document;t&&(o=t.current);const r=(s=n==null?void 0:n[e])!==null&&s!==void 0?s:o.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}function q5(e,t){let n;const s=()=>{const{currentTime:o}=t,c=(o===null?0:o.value)/100;n!==c&&e(c),n=c};return Un.update(s,!0),()=>Lm(s)}const bd=new WeakMap;let oa;function cM(e,t){if(t){const{inlineSize:n,blockSize:s}=t[0];return{width:n,height:s}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function lM({target:e,contentRect:t,borderBoxSize:n}){var s;(s=bd.get(e))===null||s===void 0||s.forEach(o=>{o({target:e,contentSize:t,get size(){return cM(e,n)}})})}function uM(e){e.forEach(lM)}function dM(){typeof ResizeObserver>"u"||(oa=new ResizeObserver(uM))}function mM(e,t){oa||dM();const n=$5(e);return n.forEach(s=>{let o=bd.get(s);o||(o=new Set,bd.set(s,o)),o.add(t),oa==null||oa.observe(s)}),()=>{n.forEach(s=>{const o=bd.get(s);o==null||o.delete(t),o!=null&&o.size||oa==null||oa.unobserve(s)})}}const vd=new Set;let sl;function pM(){sl=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};vd.forEach(n=>n(t))},window.addEventListener("resize",sl)}function fM(e){return vd.add(e),sl||pM(),()=>{vd.delete(e),!vd.size&&sl&&(sl=void 0)}}function hM(e,t){return typeof e=="function"?fM(e):mM(e,t)}const gM=50,Wy=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),bM=()=>({time:0,x:Wy(),y:Wy()}),vM={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function Gy(e,t,n,s){const o=n[t],{length:r,position:c}=vM[t],l=o.current,u=n.time;o.current=e[`scroll${c}`],o.scrollLength=e[`scroll${r}`]-e[`client${r}`],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=Om(0,o.scrollLength,o.current);const m=s-u;o.velocity=m>gM?0:w1(o.current-l,m)}function yM(e,t,n){Gy(e,"x",t,n),Gy(e,"y",t,n),t.time=n}function CM(e,t){const n={x:0,y:0};let s=e;for(;s&&s!==t;)if(s instanceof HTMLElement)n.x+=s.offsetLeft,n.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const o=s.getBoundingClientRect();s=s.parentElement;const r=s.getBoundingClientRect();n.x+=o.left-r.left,n.y+=o.top-r.top}else if(s instanceof SVGGraphicsElement){const{x:o,y:r}=s.getBBox();n.x+=o,n.y+=r;let c=null,l=s.parentNode;for(;!c;)l.tagName==="svg"&&(c=l),l=s.parentNode;s=c}else break;return n}const Lh={start:0,center:.5,end:1};function $y(e,t,n=0){let s=0;if(e in Lh&&(e=Lh[e]),typeof e=="string"){const o=parseFloat(e);e.endsWith("px")?s=o:e.endsWith("%")?e=o/100:e.endsWith("vw")?s=o/100*document.documentElement.clientWidth:e.endsWith("vh")?s=o/100*document.documentElement.clientHeight:e=o}return typeof e=="number"&&(s=t*e),n+s}const xM=[0,0];function SM(e,t,n,s){let o=Array.isArray(e)?e:xM,r=0,c=0;return typeof e=="number"?o=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?o=e.split(" "):o=[e,Lh[e]?e:"0"]),r=$y(o[0],n,s),c=$y(o[1],t),r-c}const wM={All:[[0,0],[1,1]]},IM={x:0,y:0};function TM(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function EM(e,t,n){const{offset:s=wM.All}=n,{target:o=e,axis:r="y"}=n,c=r==="y"?"height":"width",l=o!==e?CM(o,e):IM,u=o===e?{width:e.scrollWidth,height:e.scrollHeight}:TM(o),m={width:e.clientWidth,height:e.clientHeight};t[r].offset.length=0;let p=!t[r].interpolate;const f=s.length;for(let h=0;h<f;h++){const g=SM(s[h],m[c],u[c],l[r]);!p&&g!==t[r].interpolatorOffsets[h]&&(p=!0),t[r].offset[h]=g}p&&(t[r].interpolate=N1(t[r].offset,G5(s),{clamp:!1}),t[r].interpolatorOffsets=[...t[r].offset]),t[r].progress=Sa(0,1,t[r].interpolate(t[r].current))}function AM(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let s=t;for(;s&&s!==e;)n.x.targetOffset+=s.offsetLeft,n.y.targetOffset+=s.offsetTop,s=s.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function _M(e,t,n,s={}){return{measure:()=>AM(e,s.target,n),update:o=>{yM(e,n,o),(s.offset||s.target)&&EM(e,n,s)},notify:()=>t(n)}}const Nc=new WeakMap,qy=new WeakMap,af=new WeakMap,Ky=e=>e===document.documentElement?window:e;function M1(e,{container:t=document.documentElement,...n}={}){let s=af.get(t);s||(s=new Set,af.set(t,s));const o=bM(),r=_M(t,e,o,n);if(s.add(r),!Nc.has(t)){const l=()=>{for(const h of s)h.measure()},u=()=>{for(const h of s)h.update(fl.timestamp)},m=()=>{for(const h of s)h.notify()},p=()=>{Un.read(l,!1,!0),Un.read(u,!1,!0),Un.update(m,!1,!0)};Nc.set(t,p);const f=Ky(t);window.addEventListener("resize",p,{passive:!0}),t!==document.documentElement&&qy.set(t,hM(t,p)),f.addEventListener("scroll",p,{passive:!0})}const c=Nc.get(t);return Un.read(c,!1,!0),()=>{var l;Lm(c);const u=af.get(t);if(!u||(u.delete(r),u.size))return;const m=Nc.get(t);Nc.delete(t),m&&(Ky(t).removeEventListener("scroll",m),(l=qy.get(t))===null||l===void 0||l(),window.removeEventListener("resize",m))}}function kM({source:e,container:t,axis:n="y"}){e&&(t=e);const s={value:0},o=M1(r=>{s.value=r[n].progress*100},{container:t,axis:n});return{currentTime:s,cancel:o}}const rf=new Map;function K5({source:e,container:t=document.documentElement,axis:n="y"}={}){e&&(t=e),rf.has(t)||rf.set(t,{});const s=rf.get(t);return s[n]||(s[n]=tN()?new ScrollTimeline({source:t,axis:n}):kM({source:t,axis:n})),s[n]}function NM(e){return e.length===2}function Z5(e){return e&&(e.target||e.offset)}function MM(e,t){return NM(e)||Z5(t)?M1(n=>{e(n[t.axis].progress,n)},t):q5(e,K5(t))}function RM(e,t){if(e.flatten(),Z5(t))return e.pause(),M1(n=>{e.time=e.duration*n[t.axis].progress},t);{const n=K5(t);return e.attachTimeline?e.attachTimeline(n,s=>(s.pause(),q5(o=>{s.time=s.duration*o},n))):ka}}function PM(e,{axis:t="y",...n}={}){const s={axis:t,...n};return typeof e=="function"?MM(e,s):RM(e,s)}function Zy(e,t){G9(!!(!t||t.current))}const LM=()=>({scrollX:li(0),scrollY:li(0),scrollXProgress:li(0),scrollYProgress:li(0)});function jM({container:e,target:t,layoutEffect:n=!0,...s}={}){const o=Eo(LM);return(n?Hl:d.useEffect)(()=>(Zy("target",t),Zy("container",e),PM((c,{x:l,y:u})=>{o.scrollX.set(l.current),o.scrollXProgress.set(l.progress),o.scrollY.set(u.current),o.scrollYProgress.set(u.progress)},{...s,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[e,t,JSON.stringify(s.offset)]),o}function Y5(e){const t=Eo(()=>li(e)),{isStatic:n}=d.useContext(lr);if(n){const[,s]=d.useState(e);d.useEffect(()=>t.on("change",s),[])}return t}function Q5(e,t){const n=Y5(t()),s=()=>n.set(t());return s(),Hl(()=>{const o=()=>Un.preRender(s,!1,!0),r=e.map(c=>c.on("change",o));return()=>{r.forEach(c=>c()),Lm(s)}}),n}function J5(e,t={}){const{isStatic:n}=d.useContext(lr),s=d.useRef(null),o=Eo(()=>Ao(e)?e.get():e),r=Eo(()=>typeof o=="string"?o.replace(/[\d.-]/g,""):void 0),c=Y5(o),l=d.useRef(o),u=d.useRef(ka),m=()=>{p(),s.current=iM({keyframes:[Qy(c.get()),Qy(l.current)],velocity:c.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:u.current})},p=()=>{s.current&&s.current.stop()};return d.useInsertionEffect(()=>c.attach((f,h)=>n?h(f):(l.current=f,u.current=g=>h(Yy(g,r)),Un.postRender(m),c.get()),p),[JSON.stringify(t)]),Hl(()=>{if(Ao(e))return e.on("change",f=>c.set(Yy(f,r)))},[c,r]),c}function Yy(e,t){return t?e+t:e}function Qy(e){return typeof e=="number"?e:parseFloat(e)}const OM=e=>e&&typeof e=="object"&&e.mix,DM=e=>OM(e)?e.mix:void 0;function UM(...e){const t=!Array.isArray(e[0]),n=t?0:-1,s=e[0+n],o=e[1+n],r=e[2+n],c=e[3+n],l=N1(o,r,{mixer:DM(r[0]),...c});return t?l(s):l}function FM(e){tl.current=[],e();const t=Q5(tl.current,e);return tl.current=void 0,t}function Oi(e,t,n,s){if(typeof e=="function")return FM(e);const o=typeof t=="function"?t:UM(t,n,s);return Array.isArray(e)?Jy(e,o):Jy([e],([r])=>o(r))}function Jy(e,t){const n=Eo(()=>[]);return Q5(e,()=>{n.length=0;const s=e.length;for(let o=0;o<s;o++)n[o]=e[o].get();return t(n)})}const BM={some:0,all:1};function VM(e,t,{root:n,margin:s,amount:o="some"}={}){const r=$5(e),c=new WeakMap,l=m=>{m.forEach(p=>{const f=c.get(p.target);if(p.isIntersecting!==!!f)if(p.isIntersecting){const h=t(p.target,p);typeof h=="function"?c.set(p.target,h):u.unobserve(p.target)}else typeof f=="function"&&(f(p),c.delete(p.target))})},u=new IntersectionObserver(l,{root:n,rootMargin:s,threshold:typeof o=="number"?o:BM[o]});return r.forEach(m=>u.observe(m)),()=>u.disconnect()}function Um(e,{root:t,margin:n,amount:s,once:o=!1,initial:r=!1}={}){const[c,l]=d.useState(r);return d.useEffect(()=>{if(!e.current||o&&c)return;const u=()=>(l(!0),o?void 0:()=>l(!1)),m={root:t&&t.current||void 0,margin:n,amount:s};return VM(e.current,u,m)},[t,e,n,o,s]),c}const HM=e=>{const t="input"in e?e.input:"input",n="output"in e?e.output:"output",s="schema"in e?e.schema._input:e._input,o="schema"in e?e.schema._output:e._output;return{types:{input:t==="output"?o:s,output:n==="input"?s:o},parse:r=>"schema"in e?e.schema.parse(r):e.parse(r)}},X5=d.createContext(null),cf={didCatch:!1,error:null};class ew extends d.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=cf}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,s,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];(n=(s=this.props).onReset)===null||n===void 0||n.call(s,{args:r,reason:"imperative-api"}),this.setState(cf)}}componentDidCatch(t,n){var s,o;(s=(o=this.props).onError)===null||s===void 0||s.call(o,t,n)}componentDidUpdate(t,n){const{didCatch:s}=this.state,{resetKeys:o}=this.props;if(s&&n.error!==null&&zM(t.resetKeys,o)){var r,c;(r=(c=this.props).onReset)===null||r===void 0||r.call(c,{next:o,prev:t.resetKeys,reason:"keys"}),this.setState(cf)}}render(){const{children:t,fallbackRender:n,FallbackComponent:s,fallback:o}=this.props,{didCatch:r,error:c}=this.state;let l=t;if(r){const u={error:c,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")l=n(u);else if(s)l=d.createElement(s,u);else if(o!==void 0)l=o;else throw c}return d.createElement(X5.Provider,{value:{didCatch:r,error:c,resetErrorBoundary:this.resetErrorBoundary}},l)}}function zM(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,s)=>!Object.is(n,t[s]))}function WM(e){if(e==null||typeof e.didCatch!="boolean"||typeof e.resetErrorBoundary!="function")throw new Error("ErrorBoundaryContext not found")}function tw(){const e=d.useContext(X5);WM(e);const[t,n]=d.useState({error:null,hasError:!1}),s=d.useMemo(()=>({resetBoundary:()=>{e.resetErrorBoundary(),n({error:null,hasError:!1})},showBoundary:o=>n({error:o,hasError:!0})}),[e.resetErrorBoundary]);if(t.hasError)throw t.error;return s}var lf,Xy;function GM(){return Xy||(Xy=1,lf={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),lf}var $M=GM();const qM=U9($M);var KM=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function e2(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(qM[n[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var s=e.indexOf("-->");return{type:"comment",comment:s!==-1?e.slice(4,s):""}}for(var o=new RegExp(KM),r=null;(r=o.exec(e))!==null;)if(r[0].trim())if(r[1]){var c=r[1].trim(),l=[c,""];c.indexOf("=")>-1&&(l=c.split("=")),t.attrs[l[0]]=l[1],o.lastIndex--}else r[2]&&(t.attrs[r[2]]=r[3].trim().substring(1,r[3].length-1));return t}var ZM=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,YM=/^\s*$/,QM=Object.create(null);function nw(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(n){var s=[];for(var o in n)s.push(o+'="'+n[o]+'"');return s.length?" "+s.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(nw,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var JM={parse:function(e,t){t||(t={}),t.components||(t.components=QM);var n,s=[],o=[],r=-1,c=!1;if(e.indexOf("<")!==0){var l=e.indexOf("<");s.push({type:"text",content:l===-1?e:e.substring(0,l)})}return e.replace(ZM,function(u,m){if(c){if(u!=="</"+n.name+">")return;c=!1}var p,f=u.charAt(1)!=="/",h=u.startsWith("<!--"),g=m+u.length,y=e.charAt(g);if(h){var b=e2(u);return r<0?(s.push(b),s):((p=o[r]).children.push(b),s)}if(f&&(r++,(n=e2(u)).type==="tag"&&t.components[n.name]&&(n.type="component",c=!0),n.voidElement||c||!y||y==="<"||n.children.push({type:"text",content:e.slice(g,e.indexOf("<",g))}),r===0&&s.push(n),(p=o[r-1])&&p.children.push(n),o[r]=n),(!f||n.voidElement)&&(r>-1&&(n.voidElement||n.name===u.slice(2,-1))&&(r--,n=r===-1?s:o[r]),!c&&y!=="<"&&y)){p=r===-1?s:o[r].children;var x=e.indexOf("<",g),v=e.slice(g,x===-1?void 0:x);YM.test(v)&&(v=" "),(x>-1&&r+p.length>=0||v!==" ")&&p.push({type:"text",content:v})}}),s},stringify:function(e){return e.reduce(function(t,n){return t+nw("",n)},"")}};function yd(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ts(t[0])&&(t[0]=`react-i18next:: ${t[0]}`),console.warn(...t)}}const t2={};function Hd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ts(t[0])&&t2[t[0]]||(ts(t[0])&&(t2[t[0]]=new Date),yd(...t))}const sw=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},n2=(e,t,n)=>{e.loadNamespaces(t,sw(e,n))},s2=(e,t,n,s)=>{ts(n)&&(n=[n]),n.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,sw(e,s))},XM=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=t.languages[0],o=t.options?t.options.fallbackLng:!1,r=t.languages[t.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const c=(l,u)=>{const m=t.services.backendConnector.state[`${l}|${u}`];return m===-1||m===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!c(t.isLanguageChangingTo,e)?!1:!!(t.hasResourceBundle(s,e)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||c(s,e)&&(!o||c(r,e)))},eR=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!t.languages||!t.languages.length?(Hd("i18n.languages were undefined or empty",t.languages),!0):t.options.ignoreJSONStructure!==void 0?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(o,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!r(o.isLanguageChangingTo,e))return!1}}):XM(e,t,n)},ts=e=>typeof e=="string",di=e=>typeof e=="object"&&e!==null,tR=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,nR={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},sR=e=>nR[e],oR=e=>e.replace(tR,sR);let jh={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:oR};const aR=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};jh={...jh,...e}},ow=()=>jh;let aw;const rR=e=>{aw=e},R1=()=>aw,uf=(e,t)=>{if(!e)return!1;const n=e.props?e.props.children:e.children;return t?n.length>0:!!n},df=e=>{if(!e)return[];const t=e.props?e.props.children:e.children;return e.props&&e.props.i18nIsDynamicList?mi(t):t},iR=e=>Array.isArray(e)&&e.every(d.isValidElement),mi=e=>Array.isArray(e)?e:[e],cR=(e,t)=>{const n={...t};return n.props=Object.assign(e.props,t.props),n},rw=(e,t)=>{if(!e)return"";let n="";const s=mi(e),o=t.transSupportBasicHtmlNodes&&t.transKeepBasicHtmlNodesFor?t.transKeepBasicHtmlNodesFor:[];return s.forEach((r,c)=>{if(ts(r))n+=`${r}`;else if(d.isValidElement(r)){const{props:l,type:u}=r,m=Object.keys(l).length,p=o.indexOf(u)>-1,f=l.children;if(!f&&p&&!m)n+=`<${u}/>`;else if(!f&&(!p||m)||l.i18nIsDynamicList)n+=`<${c}></${c}>`;else if(p&&m===1&&ts(f))n+=`<${u}>${f}</${u}>`;else{const h=rw(f,t);n+=`<${c}>${h}</${c}>`}}else if(r===null)yd("Trans: the passed in value is invalid - seems you passed in a null child.");else if(di(r)){const{format:l,...u}=r,m=Object.keys(u);if(m.length===1){const p=l?`${m[0]}, ${l}`:m[0];n+=`{{${p}}}`}else yd("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",r)}else yd("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",r)}),n},lR=(e,t,n,s,o,r)=>{if(t==="")return[];const c=s.transKeepBasicHtmlNodesFor||[],l=t&&new RegExp(c.map(x=>`<${x}`).join("|")).test(t);if(!e&&!l&&!r)return[t];const u={},m=x=>{mi(x).forEach(S=>{ts(S)||(uf(S)?m(df(S)):di(S)&&!d.isValidElement(S)&&Object.assign(u,S))})};m(e);const p=JM.parse(`<0>${t}</0>`),f={...u,...o},h=(x,v,S)=>{const C=df(x),T=y(C,v.children,S);return iR(C)&&T.length===0||x.props&&x.props.i18nIsDynamicList?C:T},g=(x,v,S,C,T)=>{x.dummy?(x.children=v,S.push(d.cloneElement(x,{key:C},T?void 0:v))):S.push(...d.Children.map([x],w=>{const I={...w.props};return delete I.i18nIsDynamicList,d.createElement(w.type,{...I,key:C,ref:w.ref},T?null:v)}))},y=(x,v,S)=>{const C=mi(x);return mi(v).reduce((w,I,A)=>{const E=I.children&&I.children[0]&&I.children[0].content&&n.services.interpolator.interpolate(I.children[0].content,f,n.language);if(I.type==="tag"){let R=C[parseInt(I.name,10)];S.length===1&&!R&&(R=S[0][I.name]),R||(R={});const U=Object.keys(I.attrs).length!==0?cR({props:I.attrs},R):R,K=d.isValidElement(U),H=K&&uf(I,!0)&&!I.voidElement,te=l&&di(U)&&U.dummy&&!K,oe=di(e)&&Object.hasOwnProperty.call(e,I.name);if(ts(U)){const ne=n.services.interpolator.interpolate(U,f,n.language);w.push(ne)}else if(uf(U)||H){const ne=h(U,I,S);g(U,ne,w,A)}else if(te){const ne=y(C,I.children,S);g(U,ne,w,A)}else if(Number.isNaN(parseFloat(I.name)))if(oe){const ne=h(U,I,S);g(U,ne,w,A,I.voidElement)}else if(s.transSupportBasicHtmlNodes&&c.indexOf(I.name)>-1)if(I.voidElement)w.push(d.createElement(I.name,{key:`${I.name}-${A}`}));else{const ne=y(C,I.children,S);w.push(d.createElement(I.name,{key:`${I.name}-${A}`},ne))}else if(I.voidElement)w.push(`<${I.name} />`);else{const ne=y(C,I.children,S);w.push(`<${I.name}>${ne}</${I.name}>`)}else if(di(U)&&!K){const ne=I.children[0]?E:null;ne&&w.push(ne)}else g(U,E,w,A,I.children.length!==1||!E)}else if(I.type==="text"){const R=s.transWrapTextNodes,U=r?s.unescape(n.services.interpolator.interpolate(I.content,f,n.language)):n.services.interpolator.interpolate(I.content,f,n.language);R?w.push(d.createElement(R,{key:`${I.name}-${A}`},U)):w.push(U)}return w},[])},b=y([{dummy:!0,children:e||[]}],p,mi(e||[]));return df(b[0])};function uR(e){let{children:t,count:n,parent:s,i18nKey:o,context:r,tOptions:c={},values:l,defaults:u,components:m,ns:p,i18n:f,t:h,shouldUnescape:g,...y}=e;const b=f||R1();if(!b)return Hd("You will need to pass in an i18next instance by using i18nextReactModule"),t;const x=h||b.t.bind(b)||(H=>H),v={...ow(),...b.options&&b.options.react};let S=p||x.ns||b.options&&b.options.defaultNS;S=ts(S)?[S]:S||["translation"];const C=rw(t,v),T=u||C||v.transEmptyNodeValue||o,{hashTransKey:w}=v,I=o||(w?w(C||T):C||T);b.options&&b.options.interpolation&&b.options.interpolation.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...b.options.interpolation.defaultVariables}:{...b.options.interpolation.defaultVariables});const A=l||n!==void 0||!t?c.interpolation:{interpolation:{...c.interpolation,prefix:"#$?",suffix:"?$#"}},E={...c,context:r||c.context,count:n,...l,...A,defaultValue:T,ns:S},R=I?x(I,E):T;m&&Object.keys(m).forEach(H=>{const te=m[H];if(typeof te.type=="function"||!te.props||!te.props.children||R.indexOf(`${H}/>`)<0&&R.indexOf(`${H} />`)<0)return;function oe(){return d.createElement(d.Fragment,null,te)}m[H]=d.createElement(oe)});const U=lR(m||t,R,b,v,E,g),K=s!==void 0?s:v.defaultTransParent;return K?d.createElement(K,y,U):U}const dR={type:"3rdParty",init(e){aR(e.options.react),rR(e)}},iw=d.createContext();class mR{constructor(){N(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}}function en(e){let{children:t,count:n,parent:s,i18nKey:o,context:r,tOptions:c={},values:l,defaults:u,components:m,ns:p,i18n:f,t:h,shouldUnescape:g,...y}=e;const{i18n:b,defaultNS:x}=d.useContext(iw)||{},v=f||b||R1(),S=h||v&&v.t.bind(v);return uR({children:t,count:n,parent:s,i18nKey:o,context:r,tOptions:c,values:l,defaults:u,components:m,ns:p||S&&S.ns||x||v&&v.options&&v.options.defaultNS,i18n:v,t:h,shouldUnescape:g,...y})}const pR=(e,t)=>{const n=d.useRef();return d.useEffect(()=>{n.current=e},[e,t]),n.current},cw=(e,t,n,s)=>e.getFixedT(t,n,s),fR=(e,t,n,s)=>d.useCallback(cw(e,t,n,s),[e,t,n,s]),V=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=t,{i18n:s,defaultNS:o}=d.useContext(iw)||{},r=n||s||R1();if(r&&!r.reportNamespaces&&(r.reportNamespaces=new mR),!r){Hd("You will need to pass in an i18next instance by using initReactI18next");const T=(I,A)=>ts(A)?A:di(A)&&ts(A.defaultValue)?A.defaultValue:Array.isArray(I)?I[I.length-1]:I,w=[T,{},!1];return w.t=T,w.i18n={},w.ready=!1,w}r.options.react&&r.options.react.wait!==void 0&&Hd("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const c={...ow(),...r.options.react,...t},{useSuspense:l,keyPrefix:u}=c;let m=e||o||r.options&&r.options.defaultNS;m=ts(m)?[m]:m||["translation"],r.reportNamespaces.addUsedNamespaces&&r.reportNamespaces.addUsedNamespaces(m);const p=(r.isInitialized||r.initializedStoreOnce)&&m.every(T=>eR(T,r,c)),f=fR(r,t.lng||null,c.nsMode==="fallback"?m:m[0],u),h=()=>f,g=()=>cw(r,t.lng||null,c.nsMode==="fallback"?m:m[0],u),[y,b]=d.useState(h);let x=m.join();t.lng&&(x=`${t.lng}${x}`);const v=pR(x),S=d.useRef(!0);d.useEffect(()=>{const{bindI18n:T,bindI18nStore:w}=c;S.current=!0,!p&&!l&&(t.lng?s2(r,t.lng,m,()=>{S.current&&b(g)}):n2(r,m,()=>{S.current&&b(g)})),p&&v&&v!==x&&S.current&&b(g);const I=()=>{S.current&&b(g)};return T&&r&&r.on(T,I),w&&r&&r.store.on(w,I),()=>{S.current=!1,T&&r&&T.split(" ").forEach(A=>r.off(A,I)),w&&r&&w.split(" ").forEach(A=>r.store.off(A,I))}},[r,x]),d.useEffect(()=>{S.current&&p&&b(h)},[r,u,p]);const C=[y,r,p];if(C.t=y,C.i18n=r,C.ready=p,p||!p&&!l)return C;throw new Promise(T=>{t.lng?s2(r,t.lng,m,()=>T()):n2(r,m,()=>T())})},lw=k([]),o2=new Map,oo=e=>{let t=o2.get(e);return t||(t=k(n=>n(lw).includes(e)),o2.set(e,t),t)};function D(e){return _(oo(e))}function ce(e){return De().get(oo(e))}function Sn(e){return _(oo(e))}function Zt(e){return De().get(oo(e))}function P1(){return Sn("kill-domain-referrer")?"noopener noreferrer":"noopener"}function uw(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=uw(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function F(){for(var e,t,n=0,s="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=uw(e))&&(s&&(s+=" "),s+=t);return s}const ql={Namibia:"NA","South Africa":"ZA",Cameroon:"CM",Japan:"JP",Ghana:"GH",Ethiopia:"ET","United States":"US","United Arab Emirates":"AE",Bahrain:"BH",Djibouti:"DJ",Algeria:"DZ",Egypt:"EG","Western Sahara":"EH",Eritrea:"ER",Israel:"IL",Iraq:"IQ",Jordan:"JO",Comoros:"KM",Kuwait:"KW",Lebanon:"LB",Libya:"LY",Morocco:"MA",Mauritania:"MR",Oman:"OM","Palestinian Territories":"PS",Qatar:"QA","Saudi Arabia":"SA",Sudan:"SD",Somalia:"SO","South Sudan":"SS",Syria:"SY",Chad:"TD",Tunisia:"TN",Yemen:"YE",Chile:"CL",India:"IN",Tanzania:"TZ",Spain:"ES",Azerbaijan:"AZ",Russia:"RU",Belarus:"BY",Zambia:"ZM",Bulgaria:"BG",Mali:"ML",Bangladesh:"BD","China mainland":"CN",France:"FR","Bosnia & Herzegovina":"BA",Andorra:"AD",Italy:"IT",Philippines:"PH",Uganda:"UG",Iran:"IR",Czechia:"CZ","United Kingdom":"GB",Denmark:"DK",Greenland:"GL",Kenya:"KE",Austria:"AT",Belgium:"BE",Switzerland:"CH",Germany:"DE",Liechtenstein:"LI",Luxembourg:"LU",Niger:"NE",Maldives:"MV",Senegal:"SN",Bhutan:"BT",Togo:"TG",Cyprus:"CY",Greece:"GR","Antigua & Barbuda":"AG",Anguilla:"AI",Albania:"AL",Argentina:"AR","American Samoa":"AS",Australia:"AU",Barbados:"BB",Burundi:"BI",Bermuda:"BM",Brunei:"BN",Brazil:"BR",Bahamas:"BS",Botswana:"BW",Belize:"BZ",Canada:"CA","Cocos (Keeling) Islands":"CC","Cook Islands":"CK",Colombia:"CO","Cape Verde":"CV","Christmas Island":"CX","Diego Garcia":"DG",Dominica:"DM",Estonia:"EE",Finland:"FI",Fiji:"FJ","Falkland Islands":"FK",Micronesia:"FM",Grenada:"GD",Guernsey:"GG",Gibraltar:"GI",Gambia:"GM",Guam:"GU",Guyana:"GY","Hong Kong":"HK",Hungary:"HU",Indonesia:"ID",Ireland:"IE","Isle of Man":"IM","Chagos Archipelago":"IO",Jersey:"JE",Jamaica:"JM",Kiribati:"KI","St. Kitts & Nevis":"KN","South Korea":"KR","Cayman Islands":"KY","St. Lucia":"LC",Liberia:"LR",Lesotho:"LS",Lithuania:"LT",Latvia:"LV",Madagascar:"MG","Marshall Islands":"MH","Myanmar (Burma)":"MM",Macao:"MO","Northern Mariana Islands":"MP",Montserrat:"MS",Malta:"MT",Mauritius:"MU",Malawi:"MW",Mexico:"MX",Malaysia:"MY","Norfolk Island":"NF",Nigeria:"NG",Netherlands:"NL",Norway:"NO",Nauru:"NR",Niue:"NU","New Zealand":"NZ","Papua New Guinea":"PG",Pakistan:"PK",Poland:"PL","Pitcairn Islands":"PN","Puerto Rico":"PR",Portugal:"PT",Palau:"PW",Rwanda:"RW","Solomon Islands":"SB",Seychelles:"SC",Sweden:"SE",Singapore:"SG","St. Helena":"SH",Slovenia:"SI",Slovakia:"SK","Sierra Leone":"SL","Sint Maarten":"SX",Eswatini:"SZ","Turks & Caicos Islands":"TC",Thailand:"TH",Tokelau:"TK",Tonga:"TO",Trkiye:"TR","Trinidad & Tobago":"TT",Tuvalu:"TV",Taiwan:"TW",Ukraine:"UA","U.S. Outlying Islands":"UM","St. Vincent & Grenadines":"VC","British Virgin Islands":"VG","U.S. Virgin Islands":"VI",Vanuatu:"VU",Samoa:"WS",Zimbabwe:"ZW",Bolivia:"BO","Caribbean Netherlands":"BQ","Costa Rica":"CR",Cuba:"CU",Curaao:"CW","Dominican Republic":"DO","Ceuta & Melilla":"EA",Ecuador:"EC","Equatorial Guinea":"GQ",Guatemala:"GT",Honduras:"HN",Haiti:"HT","Canary Islands":"IC",Nicaragua:"NI",Panama:"PA",Peru:"PE",Paraguay:"PY","El Salvador":"SV",Uruguay:"UY",Venezuela:"VE",Afghanistan:"AF","Burkina Faso":"BF",Guinea:"GN","Guinea-Bissau":"GW","Faroe Islands":"FO",Benin:"BJ","St. Barthlemy":"BL","Congo - Kinshasa":"CD","Central African Republic":"CF","Congo - Brazzaville":"CG","Cte d'Ivoire":"CI",Gabon:"GA","French Guiana":"GF",Guadeloupe:"GP",Monaco:"MC","St. Martin":"MF",Martinique:"MQ","New Caledonia":"NC","French Polynesia":"PF","St. Pierre & Miquelon":"PM",Runion:"RE","Wallis & Futuna":"WF",Mayotte:"YT",Croatia:"HR",Armenia:"AM",Iceland:"IS","San Marino":"SM","Vatican City":"VA",Georgia:"GE",Kazakhstan:"KZ",Cambodia:"KH","North Korea":"KP",Kyrgyzstan:"KG",Angola:"AO",Laos:"LA",Mozambique:"MZ","North Macedonia":"MK",Mongolia:"MN","Svalbard & Jan Mayen":"SJ",Nepal:"NP",Aruba:"AW",Suriname:"SR","So Tom & Prncipe":"ST","Timor-Leste":"TL",Moldova:"MD",Romania:"RO","Sri Lanka":"LK",Kosovo:"XK",Montenegro:"ME",Serbia:"RS","land Islands":"AX",Tajikistan:"TJ",Turkmenistan:"TM",Uzbekistan:"UZ",Vietnam:"VN"},dw=["blowing-dust","blowing-sand","blowing-snow","clear","clear-occasional-rain-or-thunderstorms","clear-then-cloudy","clear-then-occasional-rain","clear-then-occasional-snow","clear-then-rain","clear-then-rain-or-snow","clear-then-rain-or-thunderstorms","clear-then-snow","clear-then-snow-or-rain","clear-then-thunderstorms","clear-with-isolated-snow","clear-with-isolated-thunderstorms","clear-with-occasional-clouds","clear-with-occasional-rain","clear-with-occasional-rain-or-snow","clear-with-occasional-snow","clear-with-occasional-snow-or-rain","cloudy","cloudy-and-occasionally-clear","cloudy-occasional-rain-or-thunderstorms","cloudy-then-clear","cloudy-then-occasional-rain","cloudy-then-occasional-snow","cloudy-then-occasionally-clear","cloudy-then-rain","cloudy-then-rain-or-snow","cloudy-then-rain-or-thunderstorms","cloudy-then-snow","cloudy-then-snow-or-rain","cloudy-with-isolated-rain","cloudy-with-occasional-rain","cloudy-with-occasional-rain-or-snow","cloudy-with-occasional-snow","cloudy-with-occasional-snow-or-rain","cloudy-with-thundersnow-at-times","drifting-sand","drifting-snow","drizzle","duststorm","fair","fog","freezing-drizzle","freezing-fog","freezing-rain","hail","haze","heavy-drizzle","heavy-rain","heavy-snow","heavy-thunderstorms","ice-pellets","light-drizzle","light-fog","light-freezing-drizzle","light-freezing-rain","light-hail","light-rain","light-rain-and-snow","light-rain-and-snow-shower","light-rain-shower","light-snow","light-snow-shower","mostly-clear","mostly-cloudy","mostly-sunny","partly-cloudy","partly-sunny","patchy-fog","rain","rain-and-occasionally-clear","rain-and-occasionally-cloudy","rain-and-snow","rain-and-snow-shower","rain-or-snow","rain-or-snow-then-clear","rain-or-snow-then-cloudy","rain-showers","rain-then-clear","rain-then-cloudy","rain-then-occasional-snow","rain-turning-to-snow","rain-with-occasional-snow","severe-duststorm","sleet","smoke","snow","snow-and-occasionally-clear","snow-and-occasionally-cloudy","snow-or-rain","snow-or-rain-then-clear","snow-or-rain-then-cloudy","snow-showers","snow-then-clear","snow-then-cloudy","snow-then-rain","squalls","sunny","thundersnow","thunderstorms","unknown","windy-rainstorm","windy-with-heavy-snow"],hR=["adult","teen"],gR=["twenty-four-hours","one-day","five-days","one-week","one-month","one-year","five-years","max"],bR=["pro","m365-basic","m365-personal-classic","m365-family-classic-admin","m365-family-classic-guest","m365-personal","m365-family-admin","m365-family-guest","m365-premium-admin","m365-premium-guest"],vR=["direct","apple","google","retail"],yR=["guest","free","m365-personal","pro","m365-premium"],CR=["python"],xR=["ready","disconnected","disabled","sign-in-required","unavailable"],SR=["1p-onedrive","1p-outlook","google-drive","unknown"],wR=5,IR=10240,$ge=100,TR=15e3,ER=372,AR=352,oi=6,Ke={mediaViewer:"z-10",composer:"z-10",composerBottomSlot:"z-20",coachmark:"z-30",chatScrollToBottomButton:"z-10",babylonCharacter:"z-10",citations:"z-20",settings:"z-30",audioBase:"z-10",audioDisplayContent:"z-40",modalBackground:"z-30",modal:"z-40",sidebar:"z-40",tooltip:"z-40",toastNotification:"z-50",dropdownMenuOverModal:"z-50",pages:{warning:"z-10",chat:"z-20",chatSmallScreenOverlay:"z-50",floatingMenu:"z-50"},shopping:{navigation:"z-10"},stickyHeader:"z-20",headerIcon:"z-30",header:"z-[60]",default:"z-0",labs3d:{errorPage:"z-20"},composerDimmedBackground:"z-40",composerModalOnDimmedBackground:"z-50"},Fn={default:.15,slow:.5,composerButton:.2,settings:.1,audio:{available:.5,unavailable:2,deepLinkLanding:.5},suggestions:.2,dailyBriefing:{background:.5,sourcePopoverScale:.2,sourcePopoverOpacity:.15}},qge=.25,Kge=2,Zge=0,_R=1.5,mw=2e3,kR=1e3,NR=.25,Ce={opacity:0},Be={opacity:1},MR=.2,RR=.025,Yge={initial:Ce,animate:{...Be,transition:{delayChildren:MR,staggerChildren:RR}}},Qge={initial:Ce,animate:Be},zd={willChange:"auto"},Wd="9188040d-6c67-4c5b-b112-36a304b66dad",mf="copilot.cloud.microsoft",Jge=F("mt-px text-end uppercase text-foreground-450 text-2xs dark:text-foreground-600"),Xge="flex items-center justify-between text-start",PR=["Austria","Belgium","Brazil","Bulgaria","Canada","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Iceland","Ireland","Italy","Latvia","Liechtenstein","Lithuania","Luxembourg","Malta","Netherlands","Norway","China mainland","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden","Switzerland","Trkiye","United Kingdom"],Fm=PR.map(e=>ql[e]),LR=["Austria","Belgium","Bulgaria","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Ireland","Italy","Latvia","Lithuania","Luxembourg","Malta","Netherlands","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden"],jR=LR.map(e=>ql[e]),OR=["Belarus","China mainland","Lebanon","Macao","Russia","Venezuela","North Korea","Cuba","Syria","Iran"],L1=OR.map(e=>ql[e]),DR="https://account.live.com/ep",pw="Think Deeper",UR="Think Deeper (o4-mini)",fw="Smart",hw="Smart (GPT-5)",FR="Search",e1e=1500,Gd=24*60*60*1e3,BR=5,j1=451,gw="Not allowed child account",O1="LEGALLY_UNAVAILABLE_STATUS",Oh=3,pf=[80,100,110,125,150],Kl=100,VR=1e3,bw=!1,HR=!1,a2="/chats/private",$d=3,D1="userInput",zR="https://www.copilot.com",WR="https://www.copilot-stg.com";function vw(){return typeof window>"u"?!1:window.location.origin===zR||window.location.origin===WR}function yw(){return vw()?`${window.location.origin}/c/api`:"https://copilot.microsoft.com/c/api"}function ha(e){const t=e.split("://");return t.length===1?`https://${e}`:t[0]==="http"?`https://${t[1]}`:e}function GR(e){return e==="."||e==="!"||e==="?"}function $R(e){return e===" "||e===`
`||e==="	"}function qR(e){let t=e.length-1;for(;t>=0&&$R(e[t]);)t-=1;return[e.slice(0,t+1),e.slice(t+1)]}function KR(e,t,n){return e.slice(0,n)+t+e.slice(n)}const ZR="/static/cmc/assets/copilot-qr-dark-aggressive-banner-Dtr5ysxQ.webp",YR="/static/cmc/assets/copilot-qr-dark-aggressive-copied-popup-BRVm_KWU.webp",QR="/static/cmc/assets/copilot-qr-dark-aggressive-engaging-popup-YSBImXns.webp",JR="/static/cmc/assets/copilot-qr-dark-aggressive-secondday-popup--nxha975.webp",XR="/static/cmc/assets/copilot-qr-dark-aggressive-setting-TTFEOcbN.webp",eP="/static/cmc/assets/copilot-qr-dark-aggressive-think-deeper-popup-FHodYGgC.webp",tP="/static/cmc/assets/copilot-qr-dark-aggressive-thumbsup-card-DH3zTT3T.webp",nP="/static/cmc/assets/copilot-qr-dark-aggressive-thumbsup-popup-D7hBD_1Q.webp",sP="/static/cmc/assets/copilot-qr-dark-desktop-discover-strip-DnlsnV3g.webp",oP="/static/cmc/assets/copilot-qr-dark-desktop-setting-banner-CqsoJ8gk.webp",aP="/static/cmc/assets/copilot-qr-dark-desktop-setting-menu-item-C25mGU_p.webp",rP="/static/cmc/assets/copilot-qr-light-aggressive-banner-CKv2a8_f.webp",iP="/static/cmc/assets/copilot-qr-light-aggressive-copied-popup-M4nhJM3H.webp",cP="/static/cmc/assets/copilot-qr-light-aggressive-engaging-popup-B-vXLUhP.webp",lP="/static/cmc/assets/copilot-qr-light-aggressive-secondday-popup-DBikSjcg.webp",uP="/static/cmc/assets/copilot-qr-light-aggressive-setting-D2OBsvlS.webp",dP="/static/cmc/assets/copilot-qr-light-aggressive-think-deeper-popup-D5tA7N2r.webp",mP="/static/cmc/assets/copilot-qr-light-aggressive-thumbsup-card-CwLVOvcv.webp",pP="/static/cmc/assets/copilot-qr-light-aggressive-thumbsup-popup-DM6aMFdv.webp",fP="/static/cmc/assets/copilot-qr-light-desktop-discover-strip-flsYDh7H.webp",hP="/static/cmc/assets/copilot-qr-light-desktop-setting-banner-C2lNCEe_.webp",gP="/static/cmc/assets/copilot-qr-light-desktop-setting-menu-item-BzBe-XWV.webp",r2="/static/cmc/assets/copilot-qr-light-shopping-Dm2se5Rq.png",bP={appLayout:{showSettings:!0,showCookieBanner:!0,showSettingsRelyOnChatDetailLayout:!0,showMobileCrossSelling:!0},surfaceQueryParam:null,showScrollbarOnHover:!1,dailyBriefingOcid:"cp_web_daily",persistThemeChoice:!0,entraRedirectModalBehaviour:"replace",redirectBackEnabled:!0,crossPromotion:{discoverStrip:{dark:sP,light:fP,fontSize:"m"},settingMenuItem:{dark:aP,light:gP},settingBanner:{dark:oP,light:hP},aggressive:{banner:{dark:ZR,light:rP},setting:{dark:XR,light:uP},card:{thumbsUp:{dark:tP,light:mP}},popup:{secondDay:{dark:JR,light:lP},thumbsUp:{dark:nP,light:pP},copied:{dark:YR,light:iP},engaging:{dark:QR,light:cP},thinkDeeper:{dark:eP,light:dP}}}},connectorPlatform:{isGoogleDriveEnabled:!0},proSubscription:{enabled:!0,manageRefId:"cmc",urlParams:{client:"cmc",ocids:{ActionsLimit:{freeTrial:"cmmmcpyae96",buy:"cmm46gj0qnu"},VoiceLimit:{freeTrial:"cmm0ghcr8ka",buy:"cmmxki6wg02"},Settings:{freeTrial:"cmma4vbm2dq",buy:"cmmugsiwg58"},ChatReasoningLimit:{freeTrial:"cmmtjssvrv9",buy:"cmmzn5kdy9p"},MarketSelect:{freeTrial:"cmmxe0nad8b",buy:"cmmtbwi4652",market:"none"},PodcastLimit:{buy:"cmmtzkwxk60"},DeepResearchLimit:{buy:"cmmoe57pdco"}}},m365UrlParams:{ocids:{Management:{buy:"cmmuwkdmgrx"},"Management-FromWinNative":{buy:"cmm37as1oow"},Settings:{buy:"cmm7br2b8jz"},"Settings-FromWinNative":{buy:"cmmn7sj2u1h"},Unknown:{buy:"cmmquw3utd3"},VisionLimit:{buy:"cmmel7cuppc"},"VisionLimit-FromWinNative":{buy:"cmmkixaxk1s"},"VisionLimit-FromEdge":{buy:"cmm1jlg6uo0"},"VisionLimit-FromEdgeCopilotMode":{buy:"cmmrvmke5cp"},PodcastLimit:{buy:"cmmzh6u3s7s"},"PodcastLimit-FromWinNative":{buy:"cmmis92nwrv"},"PodcastLimit-FromEdgeCopilotMode":{buy:"cmmqak9uo3w"},ActionsLimit:{buy:"cmmmnsn10i7"},"ActionsLimit-FromWinNative":{buy:"cmmn7sj2u1h"},"ActionsLimit-FromEdgeCopilotMode":{buy:"cmmb2arb6s3"},DeepResearchLimit:{buy:"cmmfwtv3wop"},"DeepResearchLimit-FromWinNative":{buy:"cmm3x3vhgp4"},"DeepResearchLimit-FromEdgeCopilotMode":{buy:"cmm86lqbhrs"}}},upsellFromAuth0:{navigateToProSubPageAfterLogin:!0}},referralEnabled:!0,adsEnabled:!0,adsShowroomEnabled:!0,thinkDeeperFreemiumEnabled:!0,monitorAccountChangesAcrossTabs:!0,shopping:{upsell:{banner:{light:r2,dark:r2}},showPdpSidepane:!0},sidebarNavigation:!0,showChatDetail:!0,enableAuth0:!0,settingsOverrides:{shouldShowActivityHistory:!0,shouldShowMemoryDelete:!0},enableCustom1DS:!0,actions:{enableActions:()=>Promise.resolve(!0)},landingPage:{enableCentralComposer:!0,enableStarterPrompts:!0,enableAutoSuggest:!0,enableWidgets:!0,enablePromptedGreetings:!0,shouldFetchWidgetsData:!0,regexForAutoSuggest:/\S+\s+/},supportsYouTubeVideos:!0,useMSALPwBApp:!0,isBotDetectionEnabled:!0,enableLabs:!0,pages:{enableEditorImageUpload:!0}},Qa=class Qa{constructor(){N(this,"cfg",bP)}static instance(){return Qa.singleton||(Qa.singleton=new Qa),Qa.singleton}config(){return this.cfg}setConfig(t){this.cfg=t}};N(Qa,"singleton",null);let Z=Qa;const vP=/^(?:(?:https?):\/\/)?(?:(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\.))+[a-z]{2,}(?:\/[\w.-]*)*\/?(?:\?[^\s#]*)?(?:#[^\s]*)?$/,yP=/\b((https?:\/\/|www\.)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,})([/?#][\w\-._~:/?#@!$&'()*+,;=%]*)?(?=[\s<>()"'.,!?)}\]]|$)/gi;function Bm(e){return vP.test(e)}function CP(e){return e.startsWith("/attachments/onedrive/")}function t1e(e){return!!CP(e)}function xP(e){const[t,n]=qR(e),s=GR(t[t.length-1]),o=s?t.slice(0,-1):t;if(Bm(o)){const r=s?t[t.length-1]:"";return{url:ha(o),word:o,suffix:`${r}${n}`}}return{word:e}}function xs(e){let t="";try{t=new URL(e).hostname}catch{}return t}function i2(e){const t=xs(e),n=t.match(/^(?:https?:\/\/)?(?:www\.)?([^/]+)/i);return n&&n[1]?n[1]:t}function SP(e,t,n){const{overwrite:s}=n??{};try{const o=new URL(e);for(const[r,c]of Object.entries(t))s&&o.searchParams.delete(r),o.searchParams.append(r,c);return o.toString()}catch{}return e}function Cs(e){const{formCodeParamOnLinks:t}=Z.instance().config();return t?SP(e,{form:t}):e}function wP(e){return e.replace(/[.,!?]+$/,"")}function IP(e,t){return!e||t<=0?!1:e[t-1]==="@"||/[\w.-]+@/.test(e.slice(Math.max(0,t-20),t+1))}function n1e(e){const t=[];if(!e)return t;for(const n of e.matchAll(yP)){const s=n[0],{index:o}=n;if(o<0||IP(e,o))continue;const r=wP(s),c=ha(r),l=o+r.length;t.push({url:c,from:o,to:l})}return t}function s1e(e){return Bm(e)?e:yw()+e}function TP(e){return e.startsWith("guide://")}function EP(e){const t=e.match(/^(?:https?:\/\/)?(?:www\.)?(.+)/i);return(t&&t[1]?t[1]:e).replace(/\/$/,"")}function o1e(e){return e?Bm(e)?e.replace(/\/$/,"").replace(/\//g,"").replace("","//").replace(//g,"  "):e:""}const ws=d.forwardRef((e,t)=>{const{children:n,href:s,className:o,title:r,"aria-controls":c,"aria-expanded":l,"aria-haspopup":u,"aria-label":m,id:p,target:f,onClick:h,onPointerDown:g,onFocus:y}=e,b=P1();return i.jsx("a",{id:p,ref:t,"aria-controls":c,"aria-expanded":l,"aria-haspopup":u,"aria-label":m,className:o,title:r,href:s&&Cs(s),target:f??"_blank",rel:b,onClick:h,onPointerDown:g,onFocus:y,children:n})});ws.displayName="Link";const Dh=window.matchMedia("(hover: hover) and (pointer: fine)");function c2(){return Dh.matches}function AP(){const[e,t]=d.useState(c2);return d.useEffect(()=>{const n=()=>{t(c2())};return Dh.addEventListener("change",n),()=>{Dh.removeEventListener("change",n)}},[]),e}const U1="-",_P=e=>{const t=NP(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:c=>{const l=c.split(U1);return l[0]===""&&l.length!==1&&l.shift(),Cw(l,t)||kP(c)},getConflictingClassGroupIds:(c,l)=>{const u=n[c]||[];return l&&s[c]?[...u,...s[c]]:u}}},Cw=(e,t)=>{var c;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),o=s?Cw(e.slice(1),s):void 0;if(o)return o;if(t.validators.length===0)return;const r=e.join(U1);return(c=t.validators.find(({validator:l})=>l(r)))==null?void 0:c.classGroupId},l2=/^\[(.+)\]$/,kP=e=>{if(l2.test(e)){const t=l2.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},NP=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return RP(Object.entries(e.classGroups),n).forEach(([r,c])=>{Uh(c,s,r,t)}),s},Uh=(e,t,n,s)=>{e.forEach(o=>{if(typeof o=="string"){const r=o===""?t:u2(t,o);r.classGroupId=n;return}if(typeof o=="function"){if(MP(o)){Uh(o(s),t,n,s);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([r,c])=>{Uh(c,u2(t,r),n,s)})})},u2=(e,t)=>{let n=e;return t.split(U1).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},MP=e=>e.isThemeGetter,RP=(e,t)=>t?e.map(([n,s])=>{const o=s.map(r=>typeof r=="string"?t+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([c,l])=>[t+c,l])):r);return[n,o]}):e,PP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const o=(r,c)=>{n.set(r,c),t++,t>e&&(t=0,s=n,n=new Map)};return{get(r){let c=n.get(r);if(c!==void 0)return c;if((c=s.get(r))!==void 0)return o(r,c),c},set(r,c){n.has(r)?n.set(r,c):o(r,c)}}},xw="!",LP=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,o=t[0],r=t.length,c=l=>{const u=[];let m=0,p=0,f;for(let x=0;x<l.length;x++){let v=l[x];if(m===0){if(v===o&&(s||l.slice(x,x+r)===t)){u.push(l.slice(p,x)),p=x+r;continue}if(v==="/"){f=x;continue}}v==="["?m++:v==="]"&&m--}const h=u.length===0?l:l.substring(p),g=h.startsWith(xw),y=g?h.substring(1):h,b=f&&f>p?f-p:void 0;return{modifiers:u,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:b}};return n?l=>n({className:l,parseClassName:c}):c},jP=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},OP=e=>({cache:PP(e.cacheSize),parseClassName:LP(e),..._P(e)}),DP=/\s+/,UP=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:o}=t,r=[],c=e.trim().split(DP);let l="";for(let u=c.length-1;u>=0;u-=1){const m=c[u],{modifiers:p,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:g}=n(m);let y=!!g,b=s(y?h.substring(0,g):h);if(!b){if(!y){l=m+(l.length>0?" "+l:l);continue}if(b=s(h),!b){l=m+(l.length>0?" "+l:l);continue}y=!1}const x=jP(p).join(":"),v=f?x+xw:x,S=v+b;if(r.includes(S))continue;r.push(S);const C=o(b,y);for(let T=0;T<C.length;++T){const w=C[T];r.push(v+w)}l=m+(l.length>0?" "+l:l)}return l};function FP(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Sw(t))&&(s&&(s+=" "),s+=n);return s}const Sw=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=Sw(e[s]))&&(n&&(n+=" "),n+=t);return n};function BP(e,...t){let n,s,o,r=c;function c(u){const m=t.reduce((p,f)=>f(p),e());return n=OP(m),s=n.cache.get,o=n.cache.set,r=l,l(u)}function l(u){const m=s(u);if(m)return m;const p=UP(u,n);return o(u,p),p}return function(){return r(FP.apply(null,arguments))}}const bt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},ww=/^\[(?:([a-z-]+):)?(.+)\]$/i,VP=/^\d+\/\d+$/,HP=new Set(["px","full","screen"]),zP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,WP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,GP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,$P=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bo=e=>Ci(e)||HP.has(e)||VP.test(e),Xo=e=>Qi(e,"length",tL),Ci=e=>!!e&&!Number.isNaN(Number(e)),ff=e=>Qi(e,"number",Ci),Mc=e=>!!e&&Number.isInteger(Number(e)),KP=e=>e.endsWith("%")&&Ci(e.slice(0,-1)),He=e=>ww.test(e),ea=e=>zP.test(e),ZP=new Set(["length","size","percentage"]),YP=e=>Qi(e,ZP,Iw),QP=e=>Qi(e,"position",Iw),JP=new Set(["image","url"]),XP=e=>Qi(e,JP,sL),eL=e=>Qi(e,"",nL),Rc=()=>!0,Qi=(e,t,n)=>{const s=ww.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},tL=e=>WP.test(e)&&!GP.test(e),Iw=()=>!1,nL=e=>$P.test(e),sL=e=>qP.test(e),oL=()=>{const e=bt("colors"),t=bt("spacing"),n=bt("blur"),s=bt("brightness"),o=bt("borderColor"),r=bt("borderRadius"),c=bt("borderSpacing"),l=bt("borderWidth"),u=bt("contrast"),m=bt("grayscale"),p=bt("hueRotate"),f=bt("invert"),h=bt("gap"),g=bt("gradientColorStops"),y=bt("gradientColorStopPositions"),b=bt("inset"),x=bt("margin"),v=bt("opacity"),S=bt("padding"),C=bt("saturate"),T=bt("scale"),w=bt("sepia"),I=bt("skew"),A=bt("space"),E=bt("translate"),R=()=>["auto","contain","none"],U=()=>["auto","hidden","clip","visible","scroll"],K=()=>["auto",He,t],H=()=>[He,t],te=()=>["",bo,Xo],oe=()=>["auto",Ci,He],ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ge=()=>["solid","dashed","dotted","double","none"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],be=()=>["start","end","center","between","around","evenly","stretch"],we=()=>["","0",He],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ae=()=>[Ci,He];return{cacheSize:500,separator:":",theme:{colors:[Rc],spacing:[bo,Xo],blur:["none","",ea,He],brightness:ae(),borderColor:[e],borderRadius:["none","","full",ea,He],borderSpacing:H(),borderWidth:te(),contrast:ae(),grayscale:we(),hueRotate:ae(),invert:we(),gap:H(),gradientColorStops:[e],gradientColorStopPositions:[KP,Xo],inset:K(),margin:K(),opacity:ae(),padding:H(),saturate:ae(),scale:ae(),sepia:we(),skew:ae(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",He]}],container:["container"],columns:[{columns:[ea]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ne(),He]}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Mc,He]}],basis:[{basis:K()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",He]}],grow:[{grow:we()}],shrink:[{shrink:we()}],order:[{order:["first","last","none",Mc,He]}],"grid-cols":[{"grid-cols":[Rc]}],"col-start-end":[{col:["auto",{span:["full",Mc,He]},He]}],"col-start":[{"col-start":oe()}],"col-end":[{"col-end":oe()}],"grid-rows":[{"grid-rows":[Rc]}],"row-start-end":[{row:["auto",{span:[Mc,He]},He]}],"row-start":[{"row-start":oe()}],"row-end":[{"row-end":oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",He]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",He]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...be()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...be(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...be(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",He,t]}],"min-w":[{"min-w":[He,t,"min","max","fit"]}],"max-w":[{"max-w":[He,t,"none","full","min","max","fit","prose",{screen:[ea]},ea]}],h:[{h:[He,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[He,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[He,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ea,Xo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ff]}],"font-family":[{font:[Rc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",He]}],"line-clamp":[{"line-clamp":["none",Ci,ff]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",bo,He]}],"list-image":[{"list-image":["none",He]}],"list-style-type":[{list:["none","disc","decimal",He]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",bo,Xo]}],"underline-offset":[{"underline-offset":["auto",bo,He]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ne(),QP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",YP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},XP]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...ge(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:ge()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...ge()]}],"outline-offset":[{"outline-offset":[bo,He]}],"outline-w":[{outline:[bo,Xo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[bo,Xo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ea,eL]}],"shadow-color":[{shadow:[Rc]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...me(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":me()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",ea,He]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",He]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",He]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",He]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[Mc,He]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",He]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[bo,Xo,ff]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},aL=BP(oL);function W(...e){return aL(F(e))}const rL=40,iL=40;function cL(e={}){const{defaultOpen:t=!1,placement:n="top",gap:s=6,open:o,onOpenChange:r,openDelay:c=rL,closeDelay:l=iL,disabled:u=!1,disableOnTouch:m=!0,closeOnTrigger:p=!0}=e,[f,h]=d.useState(t),g=o??f,y=d.useCallback(K=>{r?r(K):h(K)},[r]),b=d.useMemo(()=>[Ca(s),Ki({crossAxis:n.includes("-"),fallbackAxisSideDirection:"start",padding:s}),xa({padding:s})],[n,s]),x=Zi({placement:n,open:u?!1:g,onOpenChange:u?void 0:y,whileElementsMounted:_a,middleware:b}),{context:v}=x,S=AP(),C=!u&&o===void 0&&(!m||S),T=m9(v,{move:!1,enabled:C,restMs:c,delay:{open:c,close:l}}),w=p9(v,{enabled:C}),I=S?p:!1,A=_m(v,{enabled:!u,escapeKey:!0,referencePress:I!==!1,referencePressEvent:typeof I=="string"?I:"pointerdown"}),E=km(v,{role:"tooltip"}),R=Nm(u?[]:[T,w,A,E]),U=d.useId();return d.useMemo(()=>({open:u?!1:g,setOpen:y,labelId:U,disabled:u,...R,...x}),[g,u,y,U,R,x])}const Tw=d.createContext(null),Ew=()=>{const e=d.useContext(Tw);if(e===null)throw new Error("Tooltip components must be wrapped in <Tooltip />");return e};function lL(e){const{children:t,...n}=e,s=cL(n);return i.jsx(Tw.Provider,{value:s,children:t})}const Aw=d.forwardRef((e,t)=>{const{children:n,asChild:s=!1,...o}=e,r=Ew(),c=d.isValidElement(n)&&"ref"in n?n.ref:void 0,l=wh([r.refs.setReference,t,c]),u=wh([g=>r.refs.setReference(g),t]),m={...o,...r.disabled?{}:{"aria-describedby":r.open?r.labelId:void 0}};let p;r.disabled?p=m:s&&d.isValidElement(n)?p=r.getReferenceProps({...m,...n.props,ref:l}):p=r.getReferenceProps(m);const f={...p,onBlur:g=>{var y;(y=p.onBlur)==null||y.call(p,g),r.setOpen(!1)}},h=()=>{if(!r.disabled)return r.open?"open":"closed"};if(s&&d.isValidElement(n)){const g=n;return d.cloneElement(g,{ref:l,...f,"data-tooltip-state":h()})}return i.jsx("button",{ref:u,type:"button",...f,"data-tooltip-state":h(),children:n})});Aw.displayName="TooltipTrigger";const _w=d.forwardRef((e,t)=>{const{style:n,className:s,...o}=e,r=Ew(),c=wh([r.refs.setFloating,t]);if(!(r.open&&!r.disabled))return null;const u=r.getFloatingProps({id:r.labelId,role:"tooltip",...o});return i.jsx(qi,{children:i.jsx("div",{ref:c,className:W("pointer-events-none w-max rounded-lg border border-white/20 bg-background-100 px-2 py-1 text-foreground-800 shadow-lg text-2xs-medium",Ke.tooltip,s),style:{...r.floatingStyles,...n},...u,"data-tooltip-state":"open"})})});_w.displayName="TooltipContent";const uL="SN:ROOT",dL=d.createContext(null);function mL(){return d.useContext(dL)}const Vm=d.createContext(uL);Vm.displayName="FocusContext";function pL(){return d.useContext(Vm)}function Pc(){}function fL({focusable:e=!0,saveLastFocusedChild:t=!0,trackChildren:n=!1,autoRestoreFocus:s=!0,forceFocus:o=!1,isFocusBoundary:r=!1,focusBoundaryDirections:c,focusKey:l,preferredChildFocusKey:u,onEnterPress:m=Pc,onEnterRelease:p=Pc,onArrowPress:f=()=>!0,onArrowRelease:h=Pc,onFocus:g=Pc,onBlur:y=Pc}){const b=mL(),x=d.useCallback(oe=>{oe&&m(oe)},[m]),v=d.useCallback(()=>{p()},[p]),S=d.useCallback((oe,ne)=>f(oe,ne),[f]),C=d.useCallback(oe=>{h(oe)},[h]),T=d.useCallback((oe,ne)=>{g(oe,ne)},[g]),w=d.useCallback((oe,ne)=>{y(oe,ne)},[y]),I=d.useRef(null),[A,E]=d.useState(!1),[R,U]=d.useState(!1),K=pL(),H=d.useMemo(()=>b?l??crypto.randomUUID():void 0,[l,b]),te=d.useCallback((oe={})=>{H&&(b==null||b.setFocus(H,oe))},[H,b]);return d.useEffect(()=>{const oe=I.current;return oe&&H&&(b==null||b.addFocusable({focusKey:H,node:oe,parentFocusKey:K,preferredChildFocusKey:u,onEnterPress:x,onEnterRelease:v,onArrowPress:S,onArrowRelease:C,onFocus:T,onBlur:w,onUpdateFocus:(ne=!1)=>E(ne),onUpdateHasFocusedChild:(ne=!1)=>U(ne),saveLastFocusedChild:t,trackChildren:n,isFocusBoundary:r,focusBoundaryDirections:c,autoRestoreFocus:s,forceFocus:o,focusable:e})),()=>{H&&(b==null||b.removeFocusable({focusKey:H}))}},[]),d.useEffect(()=>{const oe=I.current;oe&&H&&(b==null||b.updateFocusable(H,{node:oe,preferredChildFocusKey:u,focusable:e,isFocusBoundary:r,focusBoundaryDirections:c,onEnterPress:x,onEnterRelease:v,onArrowPress:S,onArrowRelease:C,onFocus:T,onBlur:w}))},[H,u,e,r,c,x,v,S,C,T,w,b]),{ref:I,focusSelf:te,focused:A,hasFocusedChild:R,focusKey:H}}function kw(...e){return t=>{for(const n of e)n&&(typeof n=="function"?n(t):n.current=t)}}function yr(e,...t){const n=fL({onEnterPress:()=>{var o;(o=n.ref.current)==null||o.click()},onFocus:()=>{var o,r;(o=n.ref.current)==null||o.focus(),e.scrollIntoViewOnFocus&&((r=n.ref.current)==null||r.scrollIntoView({block:"nearest"}))},onBlur:()=>{var o;(o=n.ref.current)==null||o.blur()},...e}),s=kw(...t,n.ref);return{focusable:n,refCallback:s}}const Zl="overflow-hidden",Oo="backdrop-blur-2xl backdrop-saturate-200",F1="bg-white/70 dark:bg-slate-800/70",kn=F(Zl,Oo,F1),hL=F(Zl,Oo),gL=F(Oo,F1),bL="bg-acrylic-default-fallback-light/[98] dark:bg-acrylic-default-fallback-dark/[98]",vL="dark:bg-white/70  bg-slate-800/70",yL=F(Zl,Oo,vL);F(Oo,F1);const Nw="bg-accent-100/60 dark:bg-slate-800/50",CL=F(Oo,Nw),ua=F(Zl,Oo,Nw),xL="bg-acrylic-thin-fallback-light/95 dark:bg-acrylic-thin-fallback-dark/[92]",Mw="dark:bg-accent-900/60 bg-slate-800/50";F(Oo,Mw);const SL=F(Zl,Oo,Mw),bl="relative flex items-center",ps="text-foreground-800 fill-foreground-800 active:text-foreground-600 active:fill-foreground-600 dark:active:text-foreground-650 dark:active:fill-foreground-650",d2="text-slate-200 fill-slate-200 active:text-slate-300 active:fill-slate-300 dark:text-stone-800 dark:fill-stone-800 dark:active:text-stone-600 dark:active:fill-stone-600",wL="text-foreground-250 fill-foreground-250 active:text-foreground-350 active:fill-foreground-350 dark:text-foreground-750 dark:fill-foreground-750 dark:active:text-foreground-650 dark:active:fill-foreground-650",IL="text-accent-550 fill-accent-550 active:text-accent-450/80 active:fill-accent-450/80 dark:text-accent-850 dark:fill-accent-850 dark:active:text-accent-700 dark:active:fill-accent-700",Lc="shadow-sm",m2="shadow-with-highlight-sm",TL="text-cocoa-550 safe-hover:text-caramel-450 dark:text-slate-300 dark:active:text-slate-200",EL="bg-white/70 safe-hover:bg-caramel-200 active:bg-caramel-200/20 dark:bg-slate-450/30 dark:safe-hover:bg-midnight-800 dark:active:bg-midnight-800/20",AL="border-[0.5px] border-transparent safe-hover:border-caramel-400 dark:safe-hover:border-midnight-350",_L="text-caramel-600 fill-caramel-600 active:text-caramel-400 active:fill-caramel-400 dark:text-slate-200 dark:fill-text-slate-200 dark:active:text-slate-100 dark:active:fill-slate-100",kL="bg-caramel-200 safe-hover:bg-caramel-300 active:bg-caramel-300 dark:bg-slate-650 dark:safe-hover:bg-slate-400 dark:active:bg-slate-400",hf="bg-transparent safe-hover:bg-white/50 active:bg-white/35 dark:safe-hover:bg-black/30 dark:active:bg-black/20",ur={default:`${ps} ${m2} bg-white/70 safe-hover:bg-white active:bg-white/60 dark:bg-slate-450/30 dark:safe-hover:bg-slate-450/40 dark:active:bg-slate-450/20`,strong:`${wL} ${Lc} bg-stone-800 safe-hover:bg-black active:bg-stone-750 dark:bg-slate-600 dark:safe-hover:bg-slate-550 dark:active:bg-slate-600/80`,accent:`${IL} bg-accent-250 safe-hover:bg-accent-300 active:bg-accent-200 dark:bg-accent-550 dark:safe-hover:bg-accent-450 dark:active:bg-accent-600/80`,"overlay-bright":`${ps} bg-white/40 safe-hover:bg-white/70 active:bg-white/30 dark:bg-white/8 dark:safe-hover:bg-white/10 dark:active:bg-white/5`,"overlay-bright-inverted":`${ps} bg-white/40 safe-hover:bg-white/70 active:bg-white/30 dark:bg-black/35 dark:safe-hover:bg-black/60 dark:active:bg-black/25`,"overlay-dimmed":`${ps} bg-black/8 safe-hover:bg-black/10 active:bg-black/5 dark:bg-black/35 dark:safe-hover:bg-black/60 dark:active:bg-black/25`,"overlay-dimmed-inverted":`${ps} bg-black/8 safe-hover:bg-black/10 active:bg-black/5 dark:bg-white/8 dark:safe-hover:bg-white/10 dark:active:bg-white/5`,"subtle-bright":`${ps} bg-transparent safe-hover:bg-white/50 active:bg-white/35 dark:safe-hover:bg-white/8 dark:active:bg-white/5`,"subtle-bright-inverted":`${ps} ${hf}`,"subtle-dimmed":`${ps} bg-transparent safe-hover:bg-black/5 active:bg-black/3 dark:safe-hover:bg-black/30 dark:active:bg-black/20`,"subtle-dimmed-inverted":`${ps} bg-transparent safe-hover:bg-black/5 active:bg-black/3 dark:safe-hover:bg-white/8 dark:active:bg-white/5`,acrylic:`${ps} ${Lc} ${hf}`,"acrylic-inverted":`${d2} ${Lc} bg-transparent dark:safe-hover:bg-white/50 dark:active:bg-white/35 safe-hover:bg-black/30 active:bg-black/20`,"acrylic-thin":`${ps} ${Lc} ${hf}`,"acrylic-thin-inverted":`${d2} ${Lc} bg-transparent dark:safe-hover:bg-white/50 dark:active:bg-white/35 safe-hover:bg-black/30 active:bg-black/20`,chip:`${TL} ${EL} ${m2} ${AL}`,alert:"bg-system-red-600 safe-hover:bg-system-red-650 active:bg-system-red-550","composer-selected":`${_L} ${kL}`},Rw={acrylic:`${kn}`,"acrylic-inverted":`${yL}`,"acrylic-thin":`${ua}`,"acrylic-thin-inverted":`${SL}`};function NL(e){return e in Rw}const ML={start:"justify-start",center:"justify-center",end:"justify-end"},B1={"28-xxs":"text-xs","32-xs":"text-xs","36-sm":"text-xs","40-base":"text-sm","48-lg":"text-base","56-xl":"text-base","64-xxl":"text-base"},aa={"28-xxs":"gap-x-1.5","32-xs":"gap-x-1.5","36-sm":"gap-x-1.5","40-base":"gap-x-2","48-lg":"gap-x-3","56-xl":"gap-x-3","64-xxl":"gap-x-3"},V1={"28-xxs":`min-h-7 min-w-8 px-3 py-1 ${aa["28-xxs"]}`,"32-xs":`min-h-8 min-w-8 px-2.5 py-1 ${aa["32-xs"]}`,"36-sm":`min-h-9 min-w-9 px-2.5 py-1 ${aa["36-sm"]}`,"40-base":`min-h-10 min-w-10 px-3 py-2 ${aa["40-base"]}`,"48-lg":`min-h-12 min-w-12 px-3 py-2.5 ${aa["48-lg"]}`,"56-xl":`min-h-14 min-w-14 px-4 py-3.5 ${aa["56-xl"]}`,"64-xxl":`min-h-16 min-w-16 p-4 ${aa["64-xxl"]}`},RL={"28-xxs":"size-7","32-xs":"size-8","36-sm":"size-9","40-base":"size-10","48-lg":"size-12","56-xl":"size-14","64-xxl":"size-16"},Fh={"28-xxs":"rounded-lg before:rounded-lg","32-xs":"rounded-lg before:rounded-lg","36-sm":"rounded-xl before:rounded-xl","40-base":"rounded-xl before:rounded-xl","48-lg":"rounded-3xl before:rounded-3xl","56-xl":"rounded-4xl before:rounded-4xl","64-xxl":"rounded-4xl before:rounded-4xl"},PL={none:"",regular:"border border-solid border-stone-350 dark:border-slate-600",strong:"border border-solid border-2 border-stroke-750"},p2="rounded-full before:rounded-full",LL="opacity-40 pointer-events-none",Yl="before:absolute before:inset-0 before:pointer-events-none before:border before:border-transparent before:contrast-more:border-2 outline-2 outline-offset-1 focus-visible:z-[1] focus-visible:outline focus-visible:outline-stroke-900",$=d.forwardRef((e,t)=>{const{children:n,onClick:s,onFocus:o,onBlur:r,onKeyDown:c,onKeyUp:l,onMouseEnter:u,onMouseLeave:m,href:p,className:f,title:h,variant:g="rect",alignment:y="center",color:b="default",outline:x="none",size:v="40-base",disabled:S,id:C,role:T,testId:w,tabIndex:I,spatialNavigationAutofocus:A=!1,"aria-controls":E,"aria-expanded":R,"aria-haspopup":U,"aria-pressed":K,"aria-label":H,"aria-selected":te,"aria-describedby":oe,onPointerDown:ne,tooltip:ge}=e,me=g==="circle"||g==="square",be=g==="circle"||g==="pill",we=W(bl,ur[b],B1[v],ML[y],me?RL[v]:V1[v],be?p2:Fh[v],Yl,S&&LL,PL[x],f);let se=n;if(NL(b)){const he=W(Rw[b],be?p2:Fh[v]);se=i.jsxs(i.Fragment,{children:[i.jsx("div",{className:W("absolute inset-0",he)}),i.jsx("div",{className:`relative ${bl} ${aa[v]}`,children:n})]})}const{refCallback:ae,focusable:fe}=yr({autoRestoreFocus:!0,forceFocus:!0},t),re=!!ge,ke=typeof ge=="boolean"?void 0:ge,q=re?void 0:h;let G=H;re&&!(H!=null&&H.trim())&&(G=h);let J;if(p!==void 0?J=i.jsx(ws,{id:C,onPointerDown:ne,"aria-controls":E,"aria-describedby":oe,"aria-expanded":R,"aria-haspopup":U,"aria-label":G,"aria-selected":te,href:p,ref:fe.ref,onClick:s,title:q,className:we,"data-testid":w,children:se}):J=i.jsx("button",{onPointerDown:ne,ref:ae,id:C,"aria-controls":E,"aria-describedby":oe,"aria-expanded":R,"aria-haspopup":U,"aria-label":G,"aria-pressed":K,"aria-selected":te,type:"button",className:we,title:q,role:T,disabled:S,onClick:s,onFocus:o,onBlur:r,onKeyDown:c,onKeyUp:l,onMouseEnter:u,onMouseLeave:m,"data-testid":w,"data-spatial-navigation-autofocus":A,"data-spatial-focus-key":fe.focusKey,tabIndex:I,children:se}),!re)return J;const{tooltipContentProps:Ie,...X}=ke??{};return i.jsxs(lL,{...X,children:[i.jsx(Aw,{asChild:!0,children:J}),i.jsx(_w,{...Ie,children:h})]})});$.displayName="Button";function jL({reason:e,onReload:t}){const{t:n}=V();return i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"pb-3 text-lg",children:n("authentication.accountChanged")}),i.jsx("p",{className:"pb-7",children:n(e==="login"?"authentication.signedInOtherTab":"authentication.signedOutOtherTab")}),i.jsx($,{onClick:t,title:n("authentication.reloadToContinue"),variant:"pill",size:"48-lg",className:"w-full",children:n("authentication.reloadToContinue")})]})}const H1=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...e},d.createElement("path",{fill:"currentColor",d:"M15.144 5.885c.62-.777 1.042-1.82.931-2.885-.909.045-2.018.6-2.66 1.377-.576.665-1.087 1.752-.954 2.772 1.02.089 2.04-.51 2.683-1.264ZM16.064 7.349c-1.482-.089-2.742.84-3.45.84-.707 0-1.79-.796-2.963-.774-1.525.022-2.94.884-3.714 2.256-1.592 2.744-.42 6.814 1.128 9.049.752 1.105 1.658 2.323 2.852 2.279 1.128-.044 1.57-.73 2.94-.73 1.371 0 1.77.73 2.963.708 1.238-.022 2.013-1.106 2.764-2.213.863-1.26 1.216-2.477 1.238-2.544-.022-.022-2.388-.93-2.41-3.65-.022-2.28 1.858-3.363 1.946-3.43-1.061-1.57-2.72-1.747-3.294-1.791Z"})),a1e=Object.freeze(Object.defineProperty({__proto__:null,default:H1},Symbol.toStringTag,{value:"Module"})),z1=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 25 24",...e},d.createElement("g",{clipPath:"url(#a)"},d.createElement("path",{fill:"#4285F4",d:"M20.5 12.2a8 8 0 0 0-.2-1.8h-8.1v3.3H17c-.1.8-.7 2-1.8 3l2.5 2 .2.1a9 9 0 0 0 2.6-6.6Z"}),d.createElement("path",{fill:"#34A853",d:"M12.2 21c2.3 0 4.3-.8 5.7-2.2l-2.7-2.2a5.2 5.2 0 0 1-8-2.8l-2.7 2.1v.1c1.4 3 4.3 5 7.7 5Z"}),d.createElement("path",{fill:"#FBBC05",d:"M7.2 13.8a5.7 5.7 0 0 1 0-3.6L4.5 7.8a9.2 9.2 0 0 0 0 8.1l2.7-2.2Z"}),d.createElement("path",{fill:"#EB4335",d:"M12.2 6.5c1.6 0 2.7.7 3.3 1.3L18 5.4A8.2 8.2 0 0 0 12.2 3C8.8 3 5.9 5 4.4 8l2.8 2.2a5.3 5.3 0 0 1 5-3.7Z"})),d.createElement("defs",null,d.createElement("clipPath",{id:"a"},d.createElement("path",{fill:"#fff",d:"M3.5 3h17v18h-17z"})))),r1e=Object.freeze(Object.defineProperty({__proto__:null,default:z1},Symbol.toStringTag,{value:"Module"})),Hm=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 25 24",...e},d.createElement("path",{fill:"#F25022",d:"M12.05 3H3.5v8.55h8.55V3Z"}),d.createElement("path",{fill:"#7FBA00",d:"M21.5 3h-8.55v8.55h8.55V3Z"}),d.createElement("path",{fill:"#00A4EF",d:"M12.05 12.45H3.5V21h8.55v-8.55Z"}),d.createElement("path",{fill:"#FFB900",d:"M21.5 12.45h-8.55V21h8.55v-8.55Z"})),i1e=Object.freeze(Object.defineProperty({__proto__:null,default:Hm},Symbol.toStringTag,{value:"Module"})),Pw="140e65af-45d1-4427-bf08-3e7295db6836/ChatAI.ReadWrite",OL={auth:{clientId:"14638111-3389-403d-b206-a6a71d9f8f16",authority:"https://login.microsoftonline.com/common",navigateToLoginRequestUrl:!1},system:{allowPlatformBroker:!1},cache:{cacheLocation:"localStorage"}},DL={auth:{clientId:"14638111-3389-403d-b206-a6a71d9f8f16",authority:"https://login.microsoftonline.com/common",navigateToLoginRequestUrl:!1},system:{allowNativeBroker:!1},cache:{cacheLocation:"localStorage"}},Ql={scopes:[Pw],extraQueryParameters:{lw:"1",coa:"1",nopa:"2",fl:"easi2_nowld",cobrandid:"8c0b039e-5a73-4399-9b56-7e237be2cd06"},prompt:"select_account",redirectUri:typeof window<"u"?window.location.origin:void 0},UL={scopes:[Pw],prompt:"none",authority:"https://login.microsoftonline.com/consumers",redirectUri:typeof window<"u"?window.location.origin:void 0},f2={scopes:["User.Read"]},FL={scopes:["OneDrive.ReadWrite"],authority:"https://login.microsoftonline.com/consumers"},W1={graphMeApiSuffix:"/me",graphMeImageApiSuffix:"/me/photo/$value",graphMeLicenseDetails:"/me/licenseDetails"},h2={appName:"copilot_studio",enableMATS:!0,appVersion:"0.0.0"},BL="IalDS3vRtEI5X0zvsmGG7zJP9UrHTcei",VL="auth.copilot.microsoft.com",Lw="https://copilot.microsoft.com",HL={clientId:BL,domain:VL,cacheLocation:"localstorage",useRefreshTokens:!0,useRefreshTokensFallback:!0},jw="openid profile email offline_access ChatAI.ReadWrite",Ow=typeof window<"u"?window.location.origin:void 0,vl={authorizationParams:{audience:Lw,scope:jw,redirect_uri:Ow}},zL={authorizationParams:{audience:Lw,scope:jw,redirect_uri:Ow,prompt:"select_account"}},Bh="cp-pro";function WL(e){switch(e){case"login":return Ql;case"graph":return f2;case"oneDrive":return FL;default:return f2}}const GL={actAsBroker:!0,preferredInteractionType:"redirect"};function Cr(){return!!Z.instance().config().enableAuth0}function $L(){const e=h1();return d.useCallback(n=>{n?e.removeQueries({queryKey:n}):e.clear()},[e])}var Dw=f9();const da=()=>{},Ft=da(),gf=Object,je=e=>e===Ft,Jn=e=>typeof e=="function",ns=(e,t)=>({...e,...t}),qL=e=>Jn(e.then),Xu=new WeakMap;let KL=0;const yl=e=>{const t=typeof e,n=e&&e.constructor,s=n==Date;let o,r;if(gf(e)===e&&!s&&n!=RegExp){if(o=Xu.get(e),o)return o;if(o=++KL+"~",Xu.set(e,o),n==Array){for(o="@",r=0;r<e.length;r++)o+=yl(e[r])+",";Xu.set(e,o)}if(n==gf){o="#";const c=gf.keys(e).sort();for(;!je(r=c.pop());)je(e[r])||(o+=r+":"+yl(e[r])+",");Xu.set(e,o)}}else o=s?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return o},zs=new WeakMap,bf={},ed={},G1="undefined",zm=typeof window!=G1,Vh=typeof document!=G1,ZL=()=>zm&&typeof window.requestAnimationFrame!=G1,$1=(e,t)=>{const n=zs.get(e);return[()=>!je(t)&&e.get(t)||bf,s=>{if(!je(t)){const o=e.get(t);t in ed||(ed[t]=o),n[5](t,ns(o,s),o||bf)}},n[6],()=>!je(t)&&t in ed?ed[t]:!je(t)&&e.get(t)||bf]};let Hh=!0;const YL=()=>Hh,[zh,Wh]=zm&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[da,da],QL=()=>{const e=Vh&&document.visibilityState;return je(e)||e!=="hidden"},JL=e=>(Vh&&document.addEventListener("visibilitychange",e),zh("focus",e),()=>{Vh&&document.removeEventListener("visibilitychange",e),Wh("focus",e)}),XL=e=>{const t=()=>{Hh=!0,e()},n=()=>{Hh=!1};return zh("online",t),zh("offline",n),()=>{Wh("online",t),Wh("offline",n)}},ej={isOnline:YL,isVisible:QL},tj={initFocus:JL,initReconnect:XL},Cl=!Yi.useId,dr=!zm||"Deno"in window,Uw=e=>ZL()?window.requestAnimationFrame(e):setTimeout(e,1),ga=dr?d.useEffect:d.useLayoutEffect,vf=typeof navigator<"u"&&navigator.connection,g2=!dr&&vf&&(["slow-2g","2g"].includes(vf.effectiveType)||vf.saveData),Jl=e=>{if(Jn(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?yl(e):"",[e,t]};let nj=0;const Di=()=>++nj,Fw=0,Bw=1,Vw=2,sj=3;var Ws={__proto__:null,ERROR_REVALIDATE_EVENT:sj,FOCUS_EVENT:Fw,MUTATE_EVENT:Vw,RECONNECT_EVENT:Bw};async function q1(...e){const[t,n,s,o]=e,r=ns({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let c=r.populateCache;const l=r.rollbackOnError;let u=r.optimisticData;const m=h=>typeof l=="function"?l(h):l!==!1,p=r.throwOnError;if(Jn(n)){const h=n,g=[],y=t.keys();for(const b of y)!/^\$(inf|sub)\$/.test(b)&&h(t.get(b)._k)&&g.push(b);return Promise.all(g.map(f))}return f(n);async function f(h){const[g]=Jl(h);if(!g)return;const[y,b]=$1(t,g),[x,v,S,C]=zs.get(t),T=()=>{const te=x[g];return(Jn(r.revalidate)?r.revalidate(y().data,h):r.revalidate!==!1)&&(delete S[g],delete C[g],te&&te[0])?te[0](Vw).then(()=>y().data):y().data};if(e.length<3)return T();let w=s,I;const A=Di();v[g]=[A,0];const E=!je(u),R=y(),U=R.data,K=R._c,H=je(K)?U:K;if(E&&(u=Jn(u)?u(H,U):u,b({data:u,_c:H})),Jn(w))try{w=w(H)}catch(te){I=te}if(w&&qL(w))if(w=await w.catch(te=>{I=te}),A!==v[g][0]){if(I)throw I;return w}else I&&E&&m(I)&&(c=!0,b({data:H,_c:Ft}));if(c&&!I)if(Jn(c)){const te=c(w,H);b({data:te,error:Ft,_c:Ft})}else b({data:w,error:Ft,_c:Ft});if(v[g][1]=Di(),Promise.resolve(T()).then(()=>{b({_c:Ft})}),I){if(p)throw I;return}return w}}const b2=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},oj=(e,t)=>{if(!zs.has(e)){const n=ns(tj,t),s={},o=q1.bind(Ft,e);let r=da;const c={},l=(p,f)=>{const h=c[p]||[];return c[p]=h,h.push(f),()=>h.splice(h.indexOf(f),1)},u=(p,f,h)=>{e.set(p,f);const g=c[p];if(g)for(const y of g)y(f,h)},m=()=>{if(!zs.has(e)&&(zs.set(e,[s,{},{},{},o,u,l]),!dr)){const p=n.initFocus(setTimeout.bind(Ft,b2.bind(Ft,s,Fw))),f=n.initReconnect(setTimeout.bind(Ft,b2.bind(Ft,s,Bw)));r=()=>{p&&p(),f&&f(),zs.delete(e)}}};return m(),[e,o,m,r]}return[e,zs.get(e)[4]]},aj=(e,t,n,s,o)=>{const r=n.errorRetryCount,c=o.retryCount,l=~~((Math.random()+.5)*(1<<(c<8?c:8)))*n.errorRetryInterval;!je(r)&&c>r||setTimeout(s,l,o)},rj=(e,t)=>yl(e)==yl(t),[Hw,ij]=oj(new Map),cj=ns({onLoadingSlow:da,onSuccess:da,onError:da,onErrorRetry:aj,onDiscarded:da,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:g2?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:g2?5e3:3e3,compare:rj,isPaused:()=>!1,cache:Hw,mutate:ij,fallback:{}},ej),lj=(e,t)=>{const n=ns(e,t);if(t){const{use:s,fallback:o}=e,{use:r,fallback:c}=t;s&&r&&(n.use=s.concat(r)),o&&c&&(n.fallback=ns(o,c))}return n},uj=d.createContext({}),dj="$inf$",zw=zm&&window.__SWR_DEVTOOLS_USE__,mj=zw?window.__SWR_DEVTOOLS_USE__:[],pj=()=>{zw&&(window.__SWR_DEVTOOLS_REACT__=Yi)},Ww=e=>Jn(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],K1=()=>ns(cj,d.useContext(uj)),fj=e=>(t,n,s)=>e(t,n&&((...r)=>{const[c]=Jl(t),[,,,l]=zs.get(Hw);if(c.startsWith(dj))return n(...r);const u=l[c];return je(u)?n(...r):(delete l[c],u)}),s),hj=mj.concat(fj),Gw=e=>function(...n){const s=K1(),[o,r,c]=Ww(n),l=lj(s,c);let u=e;const{use:m}=l,p=(m||[]).concat(hj);for(let f=p.length;f--;)u=p[f](u);return u(o,r||l.fetcher||null,l)},$w=(e,t,n)=>{const s=t[e]||(t[e]=[]);return s.push(n),()=>{const o=s.indexOf(n);o>=0&&(s[o]=s[s.length-1],s.pop())}},gj=(e,t)=>(...n)=>{const[s,o,r]=Ww(n),c=(r.use||[]).concat(t);return e(s,o,{...r,use:c})};pj();const v2=Yi.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),yf={dedupe:!0},bj=(e,t,n)=>{const{cache:s,compare:o,suspense:r,fallbackData:c,revalidateOnMount:l,revalidateIfStale:u,refreshInterval:m,refreshWhenHidden:p,refreshWhenOffline:f,keepPreviousData:h}=n,[g,y,b,x]=zs.get(s),[v,S]=Jl(e),C=d.useRef(!1),T=d.useRef(!1),w=d.useRef(v),I=d.useRef(t),A=d.useRef(n),E=()=>A.current,R=()=>E().isVisible()&&E().isOnline(),[U,K,H,te]=$1(s,v),oe=d.useRef({}).current,ne=je(c)?n.fallback[v]:c,ge=(ie,ve)=>{for(const Pe in oe){const _e=Pe;if(_e==="data"){if(!o(ie[_e],ve[_e])&&(!je(ie[_e])||!o(q,ve[_e])))return!1}else if(ve[_e]!==ie[_e])return!1}return!0},me=d.useMemo(()=>{const ie=!v||!t?!1:je(l)?E().isPaused()||r?!1:je(u)?!0:u:l,ve=O=>{const pe=ns(O);return delete pe._k,ie?{isValidating:!0,isLoading:!0,...pe}:pe},Pe=U(),_e=te(),Oe=ve(Pe),Ve=Pe===_e?Oe:ve(_e);let j=Oe;return[()=>{const O=ve(U());return ge(O,j)?(j.data=O.data,j.isLoading=O.isLoading,j.isValidating=O.isValidating,j.error=O.error,j):(j=O,O)},()=>Ve]},[s,v]),be=Dw.useSyncExternalStore(d.useCallback(ie=>H(v,(ve,Pe)=>{ge(Pe,ve)||ie()}),[s,v]),me[0],me[1]),we=!C.current,se=g[v]&&g[v].length>0,ae=be.data,fe=je(ae)?ne:ae,re=be.error,ke=d.useRef(fe),q=h?je(ae)?ke.current:ae:fe,G=se&&!je(re)?!1:we&&!je(l)?l:E().isPaused()?!1:r?je(fe)?!1:u:je(fe)||u,J=!!(v&&t&&we&&G),Ie=je(be.isValidating)?J:be.isValidating,X=je(be.isLoading)?J:be.isLoading,he=d.useCallback(async ie=>{const ve=I.current;if(!v||!ve||T.current||E().isPaused())return!1;let Pe,_e,Oe=!0;const Ve=ie||{},j=!b[v]||!Ve.dedupe,O=()=>Cl?!T.current&&v===w.current&&C.current:v===w.current,pe={isValidating:!1,isLoading:!1},Re=()=>{K(pe)},xe=()=>{const Le=b[v];Le&&Le[1]===_e&&delete b[v]},qe={isValidating:!0};je(U().data)&&(qe.isLoading=!0);try{if(j&&(K(qe),n.loadingTimeout&&je(U().data)&&setTimeout(()=>{Oe&&O()&&E().onLoadingSlow(v,n)},n.loadingTimeout),b[v]=[ve(S),Di()]),[Pe,_e]=b[v],Pe=await Pe,j&&setTimeout(xe,n.dedupingInterval),!b[v]||b[v][1]!==_e)return j&&O()&&E().onDiscarded(v),!1;pe.error=Ft;const Le=y[v];if(!je(Le)&&(_e<=Le[0]||_e<=Le[1]||Le[1]===0))return Re(),j&&O()&&E().onDiscarded(v),!1;const Je=U().data;pe.data=o(Je,Pe)?Je:Pe,j&&O()&&E().onSuccess(Pe,v,n)}catch(Le){xe();const Je=E(),{shouldRetryOnError:Dt}=Je;Je.isPaused()||(pe.error=Le,j&&O()&&(Je.onError(Le,v,Je),(Dt===!0||Jn(Dt)&&Dt(Le))&&(!E().revalidateOnFocus||!E().revalidateOnReconnect||R())&&Je.onErrorRetry(Le,v,Je,cs=>{const Tn=g[v];Tn&&Tn[0]&&Tn[0](Ws.ERROR_REVALIDATE_EVENT,cs)},{retryCount:(Ve.retryCount||0)+1,dedupe:!0})))}return Oe=!1,Re(),!0},[v,s]),Ue=d.useCallback((...ie)=>q1(s,w.current,...ie),[]);if(ga(()=>{I.current=t,A.current=n,je(ae)||(ke.current=ae)}),ga(()=>{if(!v)return;const ie=he.bind(Ft,yf);let ve=0;const _e=$w(v,g,(Oe,Ve={})=>{if(Oe==Ws.FOCUS_EVENT){const j=Date.now();E().revalidateOnFocus&&j>ve&&R()&&(ve=j+E().focusThrottleInterval,ie())}else if(Oe==Ws.RECONNECT_EVENT)E().revalidateOnReconnect&&R()&&ie();else{if(Oe==Ws.MUTATE_EVENT)return he();if(Oe==Ws.ERROR_REVALIDATE_EVENT)return he(Ve)}});return T.current=!1,w.current=v,C.current=!0,K({_k:S}),G&&(je(fe)||dr?ie():Uw(ie)),()=>{T.current=!0,_e()}},[v]),ga(()=>{let ie;function ve(){const _e=Jn(m)?m(U().data):m;_e&&ie!==-1&&(ie=setTimeout(Pe,_e))}function Pe(){!U().error&&(p||E().isVisible())&&(f||E().isOnline())?he(yf).then(ve):ve()}return ve(),()=>{ie&&(clearTimeout(ie),ie=-1)}},[m,p,f,v]),d.useDebugValue(q),r&&je(fe)&&v){if(!Cl&&dr)throw new Error("Fallback data is required when using suspense in SSR.");I.current=t,A.current=n,T.current=!1;const ie=x[v];if(!je(ie)){const ve=Ue(ie);v2(ve)}if(je(re)){const ve=he(yf);je(q)||(ve.status="fulfilled",ve.value=!0),v2(ve)}else throw re}return{mutate:Ue,get data(){return oe.data=!0,q},get error(){return oe.error=!0,re},get isValidating(){return oe.isValidating=!0,Ie},get isLoading(){return oe.isLoading=!0,X}}},xr=Gw(bj);function vj(){const{cache:e,mutate:t}=K1(),n=d.useCallback(async()=>{for(const o of e.keys())await t(o,void 0,{revalidate:!1})},[e,t]),s=d.useCallback(async o=>{await t(o,void 0,{revalidate:!1})},[t]);return{clearAllSWRCache:n,clearOneSWRCache:s}}const Z1=k(!1),xt=k(null),Sr=k(e=>{const t=e(xt);return t?t.accountType==="AAD":!1}),c1e=k(e=>{const t=e(xt);return t?t.accountType==="MSA":!1}),qw=k(e=>e(xt)!==null),Hs=k(null),yj=k(!0);var Kw=Symbol.for("immer-nothing"),y2=Symbol.for("immer-draftable"),st=Symbol.for("immer-state");function Xn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ui=Object.getPrototypeOf;function Fi(e){return!!e&&!!e[st]}function _o(e){var t;return e?Zw(e)||Array.isArray(e)||!!e[y2]||!!((t=e.constructor)!=null&&t[y2])||Gm(e)||$m(e):!1}var Cj=Object.prototype.constructor.toString();function Zw(e){if(!e||typeof e!="object")return!1;const t=Ui(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Cj}function xl(e,t){Wm(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,s)=>t(s,n,e))}function Wm(e){const t=e[st];return t?t.type_:Array.isArray(e)?1:Gm(e)?2:$m(e)?3:0}function Gh(e,t){return Wm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Yw(e,t,n){const s=Wm(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function xj(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Gm(e){return e instanceof Map}function $m(e){return e instanceof Set}function Kt(e){return e.copy_||e.base_}function $h(e,t){if(Gm(e))return new Map(e);if($m(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Zw(e);if(t===!0||t==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(e);delete s[st];let o=Reflect.ownKeys(s);for(let r=0;r<o.length;r++){const c=o[r],l=s[c];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[c]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[c]})}return Object.create(Ui(e),s)}else{const s=Ui(e);if(s!==null&&n)return{...e};const o=Object.create(s);return Object.assign(o,e)}}function Y1(e,t=!1){return qm(e)||Fi(e)||!_o(e)||(Wm(e)>1&&(e.set=e.add=e.clear=e.delete=Sj),Object.freeze(e),t&&Object.entries(e).forEach(([n,s])=>Y1(s,!0))),e}function Sj(){Xn(2)}function qm(e){return Object.isFrozen(e)}var qh={};function mr(e){const t=qh[e];return t||Xn(0,e),t}function wj(e,t){qh[e]||(qh[e]=t)}var Sl;function qd(){return Sl}function Ij(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function C2(e,t){t&&(mr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Kh(e){Zh(e),e.drafts_.forEach(Tj),e.drafts_=null}function Zh(e){e===Sl&&(Sl=e.parent_)}function x2(e){return Sl=Ij(Sl,e)}function Tj(e){const t=e[st];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function S2(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[st].modified_&&(Kh(t),Xn(4)),_o(e)&&(e=Kd(t,e),t.parent_||Zd(t,e)),t.patches_&&mr("Patches").generateReplacementPatches_(n[st].base_,e,t.patches_,t.inversePatches_)):e=Kd(t,n,[]),Kh(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Kw?e:void 0}function Kd(e,t,n){if(qm(t))return t;const s=t[st];if(!s)return xl(t,(o,r)=>w2(e,s,t,o,r,n)),t;if(s.scope_!==e)return t;if(!s.modified_)return Zd(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const o=s.copy_;let r=o,c=!1;s.type_===3&&(r=new Set(o),o.clear(),c=!0),xl(r,(l,u)=>w2(e,s,o,l,u,n,c)),Zd(e,o,!1),n&&e.patches_&&mr("Patches").generatePatches_(s,n,e.patches_,e.inversePatches_)}return s.copy_}function w2(e,t,n,s,o,r,c){if(Fi(o)){const l=r&&t&&t.type_!==3&&!Gh(t.assigned_,s)?r.concat(s):void 0,u=Kd(e,o,l);if(Yw(n,s,u),Fi(u))e.canAutoFreeze_=!1;else return}else c&&n.add(o);if(_o(o)&&!qm(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Kd(e,o),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,s)&&Zd(e,o)}}function Zd(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Y1(t,n)}function Ej(e,t){const n=Array.isArray(e),s={type_:n?1:0,scope_:t?t.scope_:qd(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=s,r=Q1;n&&(o=[s],r=wl);const{revoke:c,proxy:l}=Proxy.revocable(o,r);return s.draft_=l,s.revoke_=c,l}var Q1={get(e,t){if(t===st)return e;const n=Kt(e);if(!Gh(n,t))return Aj(e,n,t);const s=n[t];return e.finalized_||!_o(s)?s:s===Cf(e.base_,t)?(xf(e),e.copy_[t]=Il(s,e)):s},has(e,t){return t in Kt(e)},ownKeys(e){return Reflect.ownKeys(Kt(e))},set(e,t,n){const s=Qw(Kt(e),t);if(s!=null&&s.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const o=Cf(Kt(e),t),r=o==null?void 0:o[st];if(r&&r.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(xj(n,o)&&(n!==void 0||Gh(e.base_,t)))return!0;xf(e),xo(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Cf(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,xf(e),xo(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Kt(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty(){Xn(11)},getPrototypeOf(e){return Ui(e.base_)},setPrototypeOf(){Xn(12)}},wl={};xl(Q1,(e,t)=>{wl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});wl.deleteProperty=function(e,t){return wl.set.call(this,e,t,void 0)};wl.set=function(e,t,n){return Q1.set.call(this,e[0],t,n,e[0])};function Cf(e,t){const n=e[st];return(n?Kt(n):e)[t]}function Aj(e,t,n){var o;const s=Qw(t,n);return s?"value"in s?s.value:(o=s.get)==null?void 0:o.call(e.draft_):void 0}function Qw(e,t){if(!(t in e))return;let n=Ui(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=Ui(n)}}function xo(e){e.modified_||(e.modified_=!0,e.parent_&&xo(e.parent_))}function xf(e){e.copy_||(e.copy_=$h(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _j=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,s)=>{if(typeof t=="function"&&typeof n!="function"){const r=n;n=t;const c=this;return function(u=r,...m){return c.produce(u,p=>n.call(this,p,...m))}}typeof n!="function"&&Xn(6),s!==void 0&&typeof s!="function"&&Xn(7);let o;if(_o(t)){const r=x2(this),c=Il(t,void 0);let l=!0;try{o=n(c),l=!1}finally{l?Kh(r):Zh(r)}return C2(r,s),S2(o,r)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===Kw&&(o=void 0),this.autoFreeze_&&Y1(o,!0),s){const r=[],c=[];mr("Patches").generateReplacementPatches_(t,o,r,c),s(r,c)}return o}else Xn(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(c,...l)=>this.produceWithPatches(c,u=>t(u,...l));let s,o;return[this.produce(t,n,(c,l)=>{s=c,o=l}),s,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){_o(e)||Xn(8),Fi(e)&&(e=kj(e));const t=x2(this),n=Il(e,void 0);return n[st].isManual_=!0,Zh(t),n}finishDraft(e,t){const n=e&&e[st];(!n||!n.isManual_)&&Xn(9);const{scope_:s}=n;return C2(s,t),S2(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const s=mr("Patches").applyPatches_;return Fi(e)?s(e,t):this.produce(e,o=>s(o,t))}};function Il(e,t){const n=Gm(e)?mr("MapSet").proxyMap_(e,t):$m(e)?mr("MapSet").proxySet_(e,t):Ej(e,t);return(t?t.scope_:qd()).drafts_.push(n),n}function kj(e){return Fi(e)||Xn(10,e),Jw(e)}function Jw(e){if(!_o(e)||qm(e))return e;const t=e[st];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=$h(e,t.scope_.immer_.useStrictShallowCopy_)}else n=$h(e,!0);return xl(n,(s,o)=>{Yw(n,s,Jw(o))}),t&&(t.finalized_=!1),n}function Nj(){class e extends Map{constructor(u,m){super(),this[st]={type_:2,parent_:m,scope_:m?m.scope_:qd(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:u,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Kt(this[st]).size}has(u){return Kt(this[st]).has(u)}set(u,m){const p=this[st];return c(p),(!Kt(p).has(u)||Kt(p).get(u)!==m)&&(n(p),xo(p),p.assigned_.set(u,!0),p.copy_.set(u,m),p.assigned_.set(u,!0)),this}delete(u){if(!this.has(u))return!1;const m=this[st];return c(m),n(m),xo(m),m.base_.has(u)?m.assigned_.set(u,!1):m.assigned_.delete(u),m.copy_.delete(u),!0}clear(){const u=this[st];c(u),Kt(u).size&&(n(u),xo(u),u.assigned_=new Map,xl(u.base_,m=>{u.assigned_.set(m,!1)}),u.copy_.clear())}forEach(u,m){const p=this[st];Kt(p).forEach((f,h,g)=>{u.call(m,this.get(h),h,this)})}get(u){const m=this[st];c(m);const p=Kt(m).get(u);if(m.finalized_||!_o(p)||p!==m.base_.get(u))return p;const f=Il(p,m);return n(m),m.copy_.set(u,f),f}keys(){return Kt(this[st]).keys()}values(){const u=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const m=u.next();return m.done?m:{done:!1,value:this.get(m.value)}}}}entries(){const u=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const m=u.next();if(m.done)return m;const p=this.get(m.value);return{done:!1,value:[m.value,p]}}}}[Symbol.iterator](){return this.entries()}}function t(l,u){return new e(l,u)}function n(l){l.copy_||(l.assigned_=new Map,l.copy_=new Map(l.base_))}class s extends Set{constructor(u,m){super(),this[st]={type_:3,parent_:m,scope_:m?m.scope_:qd(),modified_:!1,finalized_:!1,copy_:void 0,base_:u,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Kt(this[st]).size}has(u){const m=this[st];return c(m),m.copy_?!!(m.copy_.has(u)||m.drafts_.has(u)&&m.copy_.has(m.drafts_.get(u))):m.base_.has(u)}add(u){const m=this[st];return c(m),this.has(u)||(r(m),xo(m),m.copy_.add(u)),this}delete(u){if(!this.has(u))return!1;const m=this[st];return c(m),r(m),xo(m),m.copy_.delete(u)||(m.drafts_.has(u)?m.copy_.delete(m.drafts_.get(u)):!1)}clear(){const u=this[st];c(u),Kt(u).size&&(r(u),xo(u),u.copy_.clear())}values(){const u=this[st];return c(u),r(u),u.copy_.values()}entries(){const u=this[st];return c(u),r(u),u.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(u,m){const p=this.values();let f=p.next();for(;!f.done;)u.call(m,f.value,f.value,this),f=p.next()}}function o(l,u){return new s(l,u)}function r(l){l.copy_||(l.copy_=new Set,l.base_.forEach(u=>{if(_o(u)){const m=Il(u,l);l.drafts_.set(u,m),l.copy_.add(m)}else l.copy_.add(u)}))}function c(l){l.revoked_&&Xn(3,JSON.stringify(Kt(l)))}wj("MapSet",{proxyMap_:t,proxySet_:o})}var Bn=new _j,yn=Bn.produce;Bn.produceWithPatches.bind(Bn);Bn.setAutoFreeze.bind(Bn);Bn.setUseStrictShallowCopy.bind(Bn);Bn.applyPatches.bind(Bn);Bn.createDraft.bind(Bn);Bn.finishDraft.bind(Bn);function Km(e){const t=k(e,(n,s,o)=>s(t,yn(n(t),typeof o=="function"?o:()=>o)));return t}function Xl(e,t){const n=z(e);return d.useCallback(s=>n(yn(s)),[n])}const I2="mobileCrossSellingLastClosed",Sf="mobilePromoCountClose",Yd="hasBeenAuthenticated",ma="colorTheme",Zm="newConversationsStarted",Bi="timeOfNewConversationThreshold",Yh="hasResetConversationDisclaimer",Qh="banAppealSubmitted",Mj="hideDeleteConversationModal",Rj="hasBeenPromptedForLocation",Pj="hasSeenCharacter",T2="voiceAppearanceId",Lj="disableAppearanceOnHomeScreen",jj="hasSeenAppearance",Oj="hasSeenAppearanceEducationPopup",Xw="hasSeenAppearanceOnVoiceCall",E2="actionOnAppearanceDiscoveryCta",Dj="hasDismissedAppearanceModal",Jh="crossPromoFirstVisit",J1="crossPromoDiscoverStripLastClosed",Qd="crossPromoDiscoverStripCountClose",l1e="crossPromoStripGetAppIsClicked",A2="reviewActiveDays",Xh="reviewPromptResponse",Jd="userSidebarOpen",u1e="referralEligibilityStatus",d1e="referralHasSeenEntryNewBadge",Uj="coachmark",eg="isMsalSilentSsoEnabled",tg="isStartRetryEnabled",eI="user.UserFirstName",ng="loginStartTime",sg="reauthLoginFlag",m1e="subscription.m365SubscriberFRE",_2="userConversationVoiceSpeed",k2="authModuleRefactor",og="authRfInitAuthAccount",ag="authRfMsalEventRemoval",rg="tokenRetryMax2",ig="tokenRetryMax2Auth0",Fj="copilotBeta",Bj="copilotBetaAnnouncementRequired",cg="isMsalV4Upgrade",wo="copilotMsalLoginHint",Xd="msalLoginSdkVersion",Vj="copilotVisionLastClicked",p1e="hasEnteredGalleryDetailFromHome",lg="isReauthRedirectEnabled";function tn(e,t){typeof window<"u"&&localStorage.setItem(e,t)}function Mt(e){return typeof window<"u"?localStorage.getItem(e):null}function ct(e){typeof window<"u"&&localStorage.removeItem(e)}function St(e,t){const n=Mt(e);if(!n)return null;try{const s=JSON.parse(n);return t.parse(s)}catch{return null}}function Xt(e,t,n){try{t.parse(n),tn(e,JSON.stringify(n))}catch{}}function Do(e){const{key:t,schema:n,initialValue:s}=e;return qS(t,s,{getItem:()=>St(t,n)??s,setItem:(r,c)=>{c===void 0?ct(t):Xt(t,n,c)},removeItem:()=>ct(t)},{getOnInit:!0})}async function Hj(e){return new Promise(t=>{let n=!1;e==null||e.catch(s=>{s instanceof Error?(n=!0,t(`Type: ${s.name}, Message: ${s.message}, Stack: ${s.stack}`)):(n=!0,t(`Type: ${typeof s}, Value: ${JSON.stringify(s)}`))}),setTimeout(()=>{n||t("Promise.catch wasn't called. The Promise is not rejected.")},1e3)})}const zj={ocid:"OCID",OCID:"OCID",msclkid:"msclkid",gclid:"gclid",rdt_cid:"rdtCid",fbclid:"fbclid",ttclid:"ttclid",li_fat_id:"liFatId",vmcid:"vmcid",ttd_clk:"ttdClk"},N2={gclid:"Google",msclkid:"Bing",rdt_cid:"Reddit",fbclid:"Meta",ttclid:"TikTok",li_fat_id:"LinkedIn",vmcid:"Yahoo",ttd_clk:"TradeDesk"};class Wj{constructor(){N(this,"latestClientExperimentationAssignmentRequestId",null);N(this,"latestApiExperimentationAssignmentRequestId",null)}getTraceIdAnalytics(){return{TraceId_LastClientAssignment:this.latestClientExperimentationAssignmentRequestId,TraceId_Latest:this.latestApiExperimentationAssignmentRequestId}}trackClientExperimentationAssignment(t){const n=this.getTraceIdFromResponseHeaders(t);n&&(this.latestClientExperimentationAssignmentRequestId=n)}trackLatestApiAssignment(t){const n=this.getTraceIdFromResponseHeaders(t);n&&(this.latestApiExperimentationAssignmentRequestId=n)}trackLatestChatConnectedAssignment(t){const{requestId:n}=t;this.latestApiExperimentationAssignmentRequestId=n}getTraceIdFromResponseHeaders(t){return(t.get("x-ceto-ref")??"").split("|")[0]??null}}const Tl=new Wj;function X1(){return"af3299f"}function Gj(){return`mscmc@${X1().substring(0,7)}`}function ft(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ug(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Ym(e,t){const n=ft(e);return isNaN(t)?ug(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function $j(e){return document.cookie.split(";").find(t=>t.trim().startsWith(`${e}=`))}function pr(e){const t=$j(e),n=t==null?void 0:t.split("=")[1];if(n)return decodeURIComponent(n)}function El(e,t,n={}){const{expireDays:s,path:o="/",domain:r,secure:c=!0,host:l}=n;let u=e;c&&!r&&o==="/"&&l&&(u=`__Host-${e}`);let m=`${u}=${encodeURIComponent(t)}; path=${o}`;if(s){const p=Ym(new Date,s);m+=`; expires=${p.toUTCString()}`}r&&(m+=`; domain=${r}`),c&&(m+="; secure"),document.cookie=m}function tI(e,t={}){El(e,"",{...t,expireDays:-1})}const ai={name:"CMCCP",expirationDays:365},Qm={name:"BCP"},qj="3PAdsOptOut";function e0(){return pr(ai.name)??pr(Qm.name)}function M2(e,t){const{analytics:n,advertising:s,socialMedia:o}=e,r=new URLSearchParams;r.set("AD",s?"1":"0"),r.set("AL",n?"1":"0"),r.set("SM",o?"1":"0");const c=Ym(new Date,t);return r.set("expires",c.getTime().toString()),r.toString()}function Kj(e){El(ai.name,M2(e,ai.expirationDays),{expireDays:ai.expirationDays}),El(Qm.name,M2(e,ai.expirationDays),{expireDays:ai.expirationDays})}function wr(){const e=pr(Qm.name);if(!e)return{advertising:!1,analytics:!1,socialMedia:!1};const t=new URLSearchParams(e),n=t.get("AD")==="1",s=t.get("AL")==="1",o=t.get("SM")==="1";return{advertising:n,analytics:s,socialMedia:o}}function nI(){const e=pr(qj)!=="1";return navigator.globalPrivacyControl?!1:e}const Ja=class Ja{constructor(){N(this,"listeners",new Map)}static getInstance(){return Ja.instance||(Ja.instance=new Ja),Ja.instance}on(t,n){var s;this.listeners.has(t)||this.listeners.set(t,[]),(s=this.listeners.get(t))==null||s.push(n)}emit(t,n){const s=this.listeners.get(t);if(s)for(const o of s)o(n)}off(t,n){const s=this.listeners.get(t);s&&this.listeners.set(t,s.filter(o=>o!==n))}};N(Ja,"instance",null);let dg=Ja;const Ge=dg.getInstance();function Zj(e){let t="unknown";try{const n=/(?:CopilotNative|BingNative|MicrosoftLauncher)\/([0-9]+(?:\.[0-9]+)*(?:-[a-zA-Z0-9]+)?)/,s=e==null?void 0:e.match(n);if(s!=null&&s[1]){const[,o]=s;t=o}return t}catch{return t}}function wa(e,t){sessionStorage.setItem(e,t)}function ko(e){return sessionStorage.getItem(e)}function f1e(e){return ko(e)==="true"}function Yj(e){sessionStorage.removeItem(e)}const sI=["ActionsLimit","ActionsLimit-FromWinNative","ActionsLimit-FromEdgeCopilotMode","DeepResearchLimit","DeepResearchLimit-FromWinNative","DeepResearchLimit-FromEdgeCopilotMode","VisionLimit","VisionLimit-FromWinNative","VisionLimit-FromEdge","VisionLimit-FromEdgeCopilotMode","PodcastLimit","PodcastLimit-FromWinNative","PodcastLimit-FromEdgeCopilotMode","Management","Management-FromWinNative","MarketSelect","Settings","Settings-FromWinNative","ChatReasoningLimit","ProfileUpdateRequired","VoiceLimit","Unknown"],h1e={Pageseditor:"pageseditor-supported-features"},Qj=a.discriminatedUnion("eventName",[a.object({eventName:a.literal("auth0.accountAdded")}),a.object({eventName:a.literal("auth0.accountRemoved")})]),Jj=["imagegeneration","f1","school"],pa={OPENED:0,RECENT:1,HISTORY:2};let mg=null;function Bt(e){return new URLSearchParams(window.location.search).get(e)}function Ia(e){t0([e])}function t0(e){const t=new URL(window.location.href);for(const n of e)t.searchParams.delete(n);window.history.replaceState(null,"",t)}function Xj(){return Object.entries(zj).reduce((e,[t,n])=>{const s=Bt(t);return s?{...e,[n]:s}:e},{})}function oI(){t0(["ocid","OCID","msclkid","gclid","rdt_cid","fbclid","ttclid","li_fat_id","vmcid","ttd_clk"])}function eO(){const e=Bt("form");if(e)return Ia("form"),e;const t=Bt("FORM");return t&&Ia("FORM"),t}function tO(){return Bt("alias")}function nO(){const e=Bt("chat-mode");return e&&Ia("chat-mode"),e}function sO(){const e=Bt("q");return e&&Ia("q"),e}function oO(){const e=Bt("prompt");return e&&Ia("prompt"),e}function aO(){const e=Bt("sandbox");return e&&Ia("sandbox"),e==="1"}function rO(){if(typeof window>"u")return!1;const e=Bt("disable-all-features");return e!==null&&e!=="0"&&e!=="false"}function g1e(){return Bt("payflow-correlationId")}function b1e(){return Bt("entry-point")??""}function v1e(){const e=Bt("campaign");return e?(wa("campaignId",e),e):null}function y1e(){const e=Bt("referral-code");return e?(wa("referralCode",e),e):null}function iO(){const e=Bt("windows");return e&&Ia("windows"),e==="1"}function cO(){return Bt("charid")}const lO=[["payflowCorrelationId","pfcid"],["payflowFrom","pff"],["payflowAuthHint","pfah"],["payflowEntry","pfe"],["payflowRequiresPremium","pfrp"]];function C1e(){const e={payflowCorrelationId:"",payflowFrom:"",payflowAuthHint:"",payflowEntry:"",payflowRequiresPremium:""};for(const[t,n]of lO){const s=Bt(n);s&&(e[t]=s)}return e}function uO(){const e=Bt("intent");return mg===null&&(mg=e),e}function dO(){return mg}function mO(e){const t=e.toLowerCase();return Jj.includes(t)}const pO=["text","queryParam"];function fO(e){return pO.includes(e)}function hO(){const e=Bt("input-method");return e?(Ia("input-method"),fO(e)?e:"queryParam"):"queryParam"}function x1e(){return[]}function S1e(){return[]}function Na(e){const t=typeof navigator<"u"?navigator.userAgent:null;return t?e.test(t):!1}function gO(){return Na(/BingSapphire/gi)}function bO(){return Na(/NewsSapphire/gi)}function n0(){return!!(navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Macintosh/i.test(navigator.userAgent)&&"ontouchend"in document)}function s0(){return n0()||Na(/iPad|iPhone|Android|iPod/gi)}function vO(){return Na(/macintosh|mac os x/gi)&&!n0()&&!o0()}function yO(){return Na(/Android/gi)}function o0(){return n0()||Na(/iPhone|iPad|iPod/gi)}function aI(){return Na(/Windows|Win32|WOW64/i)}function CO(){return Na(/CopilotNative.*macOS/gi)}const a0=k(!1),xO=a.boolean().optional(),Vi=Do({key:Fj,schema:xO,initialValue:void 0}),SO=a.boolean().optional(),wf=Do({key:Bj,schema:SO,initialValue:void 0});function ue(e){return De().get(e)}function wO(){return ue(a0)&&!!ue(Vi)}const IO={"thumbs-up":"thumbsUp","thumbs-down":"thumbsDown",report:"reportMessage"},R2="homepage";function TO(){return Zt("kill-analytics-custom-batch")?{instrumentationKey:"be6e4c19699f4fdf9f8c0ec9f9b398ef-25d58bb9-9926-4df7-8e36-bc7afb4b2c34-7563",channelConfiguration:{eventsLimitInMem:5e3},propertyConfiguration:{populateBrowserInfo:!0},disableCookiesUsage:!0}:{instrumentationKey:"be6e4c19699f4fdf9f8c0ec9f9b398ef-25d58bb9-9926-4df7-8e36-bc7afb4b2c34-7563",channelConfiguration:{eventsLimitInMem:5e3,autoFlushEventsLimit:5},propertyConfiguration:{populateBrowserInfo:!0},disableCookiesUsage:!0,extensionConfig:{PostChannel:{maxBatchInterval:1e4,maxBatchCount:20,immediateEventLimit:100}}}}class EO{constructor(t={}){N(this,"analytics",null);N(this,"features");N(this,"picassoId",null);N(this,"anid",null);N(this,"formCode",null);N(this,"landingPage",R2);N(this,"trafficAlias",null);N(this,"settings",null);N(this,"isAADUser",null);N(this,"isNewUser",null);N(this,"isCopilotMode",null);N(this,"accountType",null);N(this,"referrer",null);N(this,"deviceInfo",null);N(this,"anaheimId",null);N(this,"pluginProvider",null);N(this,"pluginCache",null);N(this,"publisherInfo",null);N(this,"isInitializing",!1);N(this,"pendingEvents",[]);N(this,"initRetryCount",0);N(this,"maxRetries");N(this,"maxPendingEvents");N(this,"delay");N(this,"onInitializeError");this.maxRetries=t.maxRetries??3,this.maxPendingEvents=t.maxPendingEvents??1e3,this.delay=t.delay??0,this.onInitializeError=t.onInitializeError}getSurface(){return this.getPlatformSurface("cmc")}getAppName(){return`CopilotN-${this.currentEnv}-web-${this.getSurface()}`}ensureInitialized(t){!this.isInitialized&&!this.isInitializing&&(this.pluginProvider=t,this.isInitializing=!0,this.initialize())}get plugin(){return this.pluginCache===null&&this.pluginProvider!==null&&this.analytics!==null&&(this.pluginCache=this.pluginProvider(),this.pluginCache&&this.analytics.addNotificationListener(this.pluginCache)),this.pluginCache}get isInitialized(){return this.analytics!==null&&this.analytics.isInitialized()}get currentEnv(){return"prod"}get initializationFailed(){return this.initRetryCount>=this.maxRetries}setFeatures(t){this.features=t.join(",")}setAnid(t){this.anid=t}getAnid(){return this.anid}setIsNewUser(t){this.isNewUser===null&&(this.isNewUser=t)}setIsAad(t){this.isAADUser=t}setCopilotMode(t){this.isCopilotMode=t}setSettings(t){this.settings={...this.settings,...t}}getPicassoId(){return this.picassoId}setPicassoId(t){this.picassoId=t}setFormCode(t){this.formCode=t}getFormCode(){return this.formCode}setDeviceInfo(t){this.deviceInfo=t}setLandingPage(t){this.landingPage===R2&&(this.landingPage=t)}getLandingPage(){return this.landingPage}isValidLowercaseUserAccountType(t){return["msa","aad","apple","google"].includes(t)}setUserAccountType(t){if(!t){this.accountType=null;return}const n=t.toLowerCase();this.isValidLowercaseUserAccountType(n)?this.accountType=n:this.accountType=null}getUserAccountType(){return this.accountType}processFormCode(){const t=eO();this.formCode=t}processAlias(){const t=tO();t&&(this.trafficAlias=t)}processReferrer(){this.referrer===null&&typeof document<"u"&&(this.referrer=document.referrer)}getAnaheimIdFromHTML(){try{const t=document.querySelector("meta[name='x-client-data']");if(!t)return null;const n=t.getAttribute("content");if(!n)return null;const s=atob(n),o=JSON.parse(s);if(typeof o!="object"||o===null)return null;const r=o;if(!("4"in r))return null;const c=r[4];return typeof c=="string"?c:null}catch{return null}}processAnaheimId(){const t=this.getAnaheimIdFromHTML();t&&(this.anaheimId=t)}initialize(){this.isInitialized||(this.processFormCode(),this.processAlias(),this.processReferrer(),this.processAnaheimId(),this.processPublisherFromUrl(),this.dynamicInitialization().catch(()=>{}))}async dynamicInitialization(){var n,s;this.delay>0&&await new Promise(o=>{setTimeout(o,this.delay)});const t=await P(()=>import("./vendor-Dmlf5KxN.js").then(o=>o.at),__vite__mapDeps([0,1])).catch(o=>o instanceof Error?o:new Error(`Failed to load @microsoft/1ds-analytics-js: ${o}`));if(t instanceof Error)(n=this.onInitializeError)==null||n.call(this,t),this.initRetryCount+=1,this.initRetryCount>=this.maxRetries&&((s=this.onInitializeError)==null||s.call(this,new Error("ApplicationInsights initialization: Max retries reached")),this.pendingEvents.length=0);else{const{ApplicationInsights:o}=t;this.analytics=new o;const r=TO();this.analytics.initialize(r,[]),this.flushPendingEvents()}this.isInitializing=!1}flushPendingEvents(){for(let t=0,n=this.pendingEvents.length;t<n;t+=1){const s=this.pendingEvents[t];s&&this.trackEventInternal(s)}this.pendingEvents.length=0}getPlatformSurface(t){if(t==="pageseditor"){if(yO())return"android";if(o0())return"ios";if(CO())return"mac"}return t}getAppFlavor(){return wO()?{eventInfo_appFlavor:"beta"}:null}processPublisherFromUrl(){const t=new URLSearchParams(window.location.search),n=Object.keys(N2).find(s=>t.has(s));n&&(this.publisherInfo={publisher:N2[n]})}getFixEventProperties(){return{appName:this.getAppName(),appVersion:X1(),surface:this.getSurface(),surfaceVersion:Zj(navigator.userAgent),accountType:this.accountType,userMuid:pr("MUID"),userAnid:this.anid,userPicassoId:this.picassoId,userFlightIds:this.features,trafficAlias:this.trafficAlias,eventInfo_entryPoint:this.formCode,eventInfo_surfaceVisible:document.visibilityState==="visible",eventInfo_isCopilotMode:this.isCopilotMode,isAADUser:this.isAADUser,isNewUser:this.isNewUser,pathname:window.location.pathname,referrer:this.referrer,anaheimId:this.anaheimId,"UserInfo.Id":this.picassoId,...Tl.getTraceIdAnalytics(),...this.settings,...this.deviceInfo,...this.getAppFlavor(),...this.publisherInfo}}trackEvent(t){if(!this.initializationFailed){if(this.pendingEvents.length>=this.maxPendingEvents){console.warn(`Analytics pending events queue is full (${this.maxPendingEvents}). Dropping event: ${JSON.stringify(t)}`);return}if(this.ensureInitialized(this.pluginProvider),this.isInitializing||!this.isInitialized){this.pendingEvents.push(t);return}this.trackEventInternal(t)}}trackEventInternal(t){var l,u;const n=this.getFixEventProperties(),s=wr(),o=nI(),r=((l=this.plugin)==null?void 0:l.generateClientEventId(t))??void 0;if(!this.analytics){console.error("Failed to initialize AnalyticsService.");return}const c={name:t.name,data:{...n,eventInfo_clientEventId:r,...t.data},ext:{web:{consentDetails:JSON.stringify({Required:!0,Analytics:s.analytics,SocialMedia:s.socialMedia,Advertising:s.advertising,GPC_DataSharingOptIn:o})}}};(t.data.eventName==="copilotCompose"||t.data.eventName==="copilotAudioInput")&&Ge.emit("composer:send-query",{isNewUser:this.isNewUser,event:t.data}),(u=this.plugin)==null||u.onBeforeTrackEvent(c),this.analytics.track(c)}}const M=new EO({maxRetries:3,maxPendingEvents:1e3,delay:200,onInitializeError:e=>{console.error("AnalyticsService initialization error:",e)}});function rI(e,t){M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ErrorBoundary",eventInfo_errorName:e.name,eventInfo_errorMessage:e.message,eventInfo_errorStack:e.stack??"",eventInfo_componentStack:t.componentStack??""}}),P(async()=>{const{captureReactException:n}=await import("./vendor-Dmlf5KxN.js").then(s=>s.au);return{captureReactException:n}},__vite__mapDeps([0,1])).then(({captureReactException:n})=>n(e,t))}function Al(e,t,n=!1){M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"APIResponseParseError",eventInfo_apiUrl:t,eventInfo_errors:JSON.stringify(e.format()),eventInfo_safe:n}})}async function P2(e){const t=await Hj(e.promise);M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"UnhandledRejection",eventInfo_reason:`${e.reason}`,eventInfo_customData:t}})}function AO(e,t,n){try{new URL(ha(e)).hostname}catch(s){M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"invalidCitationURL",eventInfo_url:e,eventInfo_errorMessage:s instanceof Error?s.message:"",eventInfo_conversationId:t,eventInfo_messageId:n}})}}function iI(e){M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"PlaybackApiError",eventInfo_errorMessage:e instanceof Error?e.message:"",eventInfo_details:"An error occurred during media playback tracking api call."}})}function _O(e,t,n=void 0){M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"InvalidJsonResponse",eventInfo_apiUrl:n,eventInfo_errorMessage:e.message,eventInfo_errorCode:t.statusText,eventInfo_details:JSON.stringify(Object.fromEntries(t.headers.entries()))}})}const kO=25,NO=25,MO=6e3,RO=12,PO=["mica","aqua","erin"];function cI(e){switch(e){case"mica":case"aqua":case"erin":return e;default:return null}}function LO(e,t){switch(e){case"mica":return t("characterAnimation.characterNameMica");case"aqua":return t("characterAnimation.characterNameAqua");case"erin":return t("characterAnimation.characterNameErin");default:return""}}function jO(e,t){return(n,s)=>{M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CharacterError",eventInfo_details:`animatingMessageId: ${e}, characterId: ${t}, name: ${n.name}, info: ${s.componentStack}`,eventInfo_errorMessage:n.message}}),rI(n,s)}}Nj();const Ma=k(!1),lI=k(!1),OO=k(!1),DO=k(!1),Jm=k(void 0),Ct=k(new Map),Ae=k(void 0),em=k(null),If=k(void 0),r0=k(e=>e(If),(e,t,n)=>{const s=e(If);s!==n&&(t(Ct,o=>{const r=new Map(o);return s&&r.delete(s),r}),t(If,n))}),uI=k(null),wn=k(e=>{const t=e(Ae);if(t)return e(Ct).get(t)}),UO=g1(wn,e=>(e==null?void 0:e.streamingState)==="streaming",(e,t)=>e===t),w1e=e=>g1(Ct,t=>{var n;return((n=t.get(e))==null?void 0:n.streamingState)==="streaming"},(t,n)=>t===n),xi=k(!1),Is=k(new Map),I1e=k([]);k([]);const T1e=e=>k(t=>t(Is).get(e)),ao=k(e=>{var t;return((t=e(wn))==null?void 0:t.history)??[]}),i0=k(e=>{const t=e(Ct);for(const n of t.values())if(!n.title&&!n.history.length&&n.isNew)return n.id}),c0=k(new Map),FO=k(new Map),Kc=k(void 0),Xm=k([]),dI=k(!1),l0=k(e=>{var t;return cI((t=e(wn))==null?void 0:t.characterId)}),cr=k("idle"),mI=k(!1),zn=k(null),BO=k("idle"),ol=k("checking-availability"),VO=k(null),pI=k([]),fr=k(null),u0=k(null),d0=k([]),HO=k([]),fI=k(null),zO=k(e=>e(fr)===0),m0=k(null),p0=k(null),WO=k(null),al=k(!1),hI=k(!1),gI=k(IR),_l=k(void 0),GO=k(!0),bI=k(null),$O=k(e=>!!e(bI)),qO=k(void 0);k(null);const Ji=k(!1),ep=k(void 0),KO=k(void 0),ZO=k(void 0),YO=k(e=>{const t=e(wn);return t==null?void 0:t.suggestedFollowup}),E1e=k(void 0),vI=k(null),A1e=k(!1),QO=k(!1),f0=k(void 0),_1e=k(!1),k1e=k(void 0);k(null);const h0=k(!1),No=k(void 0),N1e=Km({}),tp=k(void 0),nn=k("chat-only"),M1e=k(null),R1e=k(null),P1e=k(null),eu=k(null),yI=k({}),g0=k(!1),Io=k(null),CI=k({data:void 0,isLoading:!1}),JO=k(e=>e(CI).data),xI=k(e=>e(CI).isLoading),Cd=k(!1),SI=k(null);k(e=>{const t=e(SI);return(t==null?void 0:t.lcp)??null});const b0=k(null),wI=k(null),XO=Do({key:Uj,schema:a.record(a.string()),initialValue:{}}),II=k(null),TI=k(!1),eD=k([]),L1e=k(null),tD=["m365-family-classic-guest","m365-family-guest","m365-premium-guest"],nD="App Store",sD="Google Play",oD=["m365-personal","m365-family-admin"],v0=["m365-family-guest","m365-premium-guest","m365-premium-admin"],EI=["m365-personal","m365-family-admin"],AI=["m365-personal-classic","m365-premium-guest","m365-family-guest","m365-family-classic-admin","m365-family-classic-guest","m365-basic"],_I=["m365-family-admin","m365-personal"],y0=["pro","m365-premium-admin"],L2=[...y0,..._I,...AI];function aD(e,t=!1){return e.length===0?t?"buypremium":"buym365":e.some(n=>n.tier==="pro")?"buypremium":e.some(n=>v0.includes(n.tier))?null:e.some(n=>EI.includes(n.tier))||t?"upgradepremium":"upgradem365"}function rD(e,t=[]){return t.length===0?null:e.length===0?t.includes("pro")?"gopremium":t.includes("m365-personal")?"buym365":t.includes("m365-premium")?"buypremium":null:t.includes("pro")?e.some(n=>n.tier==="pro")?null:"gopremium":t.includes("m365-personal")?e.some(n=>AI.includes(n.tier))?"upgradem365":null:t.includes("m365-premium")?e.some(n=>y0.includes(n.tier))?null:"upgradepremium":null}function j1e(e){return e.length>0&&!e.some(t=>t.tier==="pro")}function O1e(e){return e.some(t=>oD.includes(t.tier))&&!e.some(t=>v0.includes(t.tier))}function iD(e){return e.slice().sort((t,n)=>L2.indexOf(t.tier)-L2.indexOf(n.tier))}function D1e(e){const t=e.find(n=>n.tier==="pro");return(t==null?void 0:t.isAutoRenew)??!1}function cD(e){const t=e==null?void 0:e.tier,n=e==null?void 0:e.channel,s=t!==void 0&&!tD.includes(t)&&(n==="apple"||n==="google");return{shouldRedirectMobile:s,redirectMobileSource:s?n:null}}function U1e({isM365SkuEnabled:e,isPro:t,subscriptions:n}){return e?n.length===0&&!t:!t}function lD(e){return e.toLowerCase()==="zh-hant"?"zh-TW":e}function F1e(e,t){const n=t?`${e}-From${t}`:e;return sI.find(s=>s.toLowerCase()===n.toLowerCase())??"Unknown"}const Ir="ellie",kI=[Ir],j2=a.union([a.enum(kI),a.undefined()]),uD=a.object({model:a.literal("vasa"),eyesOpenRatio:a.array(a.number()).min(1),eyesPose:a.array(a.number()).min(6),jawPose:a.array(a.number()).length(3),neckPose:a.array(a.number()).length(3),rotation:a.array(a.number()).length(3),translation:a.array(a.number()).length(3),viseme:a.array(a.number()).min(10)}),dD=a.object({model:a.literal("spda2e"),poseDiffusion:a.array(a.number())}),Nn=a.object({partId:a.string()}),tu=a.object({event:a.literal("invokeAction"),actionId:a.string()}),mD=a.enum(CR),pD=a.object({type:a.literal("code"),language:mD,content:a.string()}),fD=a.object({type:a.literal("file"),url:a.string().refine(e=>e.startsWith("/")||a.string().url().safeParse(e).success,{message:"Must be a valid URL or relative path"}),name:a.string(),contentType:a.string()}),hD=a.object({type:a.literal("browser"),screenshot:a.string().optional(),tabIds:a.number().array().optional(),activeTabId:a.number().optional()}),gD=a.discriminatedUnion("type",[pD,fD,hD]),NI=a.union([a.literal("running"),a.literal("completed"),a.literal("failed")]),bD=a.object({title:a.string(),status:NI}),MI=a.object({status:NI,title:a.string(),steps:a.array(bD),artifacts:a.array(gD)}),RI=Nn.extend({type:a.literal("activity"),activity:MI}),Lt=a.object({amount:a.number(),currency:a.string().nullable(),currencySymbol:a.string().nullable()}),vD=a.enum(["current-search-term","recent-searches","age","gender","website-visits","interests","custom-audience","similar-audience","profile-targeting"]);a.enum(["multimedia","product","tourActivity","propertyPromotion","text","miniShowroom","mainShowroom"]);const yD=a.enum(["top","bottom","left","right"]),PI=a.object({adDomain:a.string(),advertiser:a.object({name:a.string(),country:a.string()}),isVerified:a.boolean(),selectionReasons:a.array(vD)}),Tr=a.object({url:a.string(),urlPingSuffix:a.string()}),Uo=a.object({url:a.string(),width:a.number().nullish(),height:a.number().nullish(),link:Tr.nullish(),impressionToken:a.string().nullish()}),LI=a.object({downPayment:a.string(),description:a.string()}),CD=a.object({rating:a.number(),link:Tr,impressionToken:a.string()}),nu=a.object({businessName:a.string(),image:Uo,impressionToken:a.string().nullish()}),jI=a.object({text:a.string(),url:a.string(),urlPingSuffix:a.string()}),xD=a.object({title:a.string(),text:a.string(),url:a.string(),layout:a.enum(["inline","overlay"])}),Xi=a.object({impressionToken:a.string(),selectionCriteria:PI}),OI=a.object({rowIndex:a.number().int(),columnIndex:a.number().int(),textPosition:yD,imagesPerRow:a.number().int()}),SD=Xi.extend({type:a.literal("multimedia"),description:a.string(),title:a.string(),displayUrl:a.string(),link:Tr,image:Uo.nullish(),logo:nu.nullish(),action:jI.nullish()}),su=a.object({category:a.string(),value:a.string()}),DI=a.object({seller:a.string(),link:Tr,price:Lt,lowPrice:Lt.nullish(),item:a.object({name:a.string(),image:Uo})}),UI=a.object({isFree:a.boolean(),description:a.string()}),FI=Xi.extend({type:a.literal("product"),offer:DI,tags:a.array(su).nullish(),shipping:UI.nullish(),productRating:CD.nullish(),installment:LI.nullish(),pricePerUnit:a.string().nullish(),energyRating:a.string().nullish()}),BI=Xi.extend({type:a.literal("tourActivity"),title:a.string(),domain:a.string(),startingPrice:Lt,image:Uo,link:Tr,tags:a.array(su).nullish()}),VI=Xi.extend({type:a.literal("propertyPromotion"),title:a.string(),domain:a.string(),price:Lt,image:Uo,link:Tr,tags:a.array(su).nullish()}),wD=Xi.extend({type:a.literal("text"),title:a.string(),description:a.string(),displayUrl:a.string(),link:Tr,image:Uo.nullish(),logo:nu.nullish(),disclaimer:xD.nullish()}),ID=Xi.extend({type:a.literal("miniShowroom"),title:a.string(),description:a.string(),displayUrl:a.string(),image:Uo,logo:nu.nullish(),brandId:a.string().nullish(),brandBackground:a.number().int().nullish()}),HI=a.object({impressionToken:a.string(),layout:OI,selectionCriteria:PI.nullish()}),TD=HI.extend({type:a.literal("multimedia"),image:Uo,title:a.string(),description:a.string()}),ED=HI.extend({type:a.literal("product"),offer:DI,shipping:UI.nullish(),installment:LI.nullish(),pricePerUnit:a.string().nullish()}),AD=a.union([ED,TD]),_D=a.object({ad:AD,adId:a.string().nullish()}),kD=a.object({isLoading:a.boolean().nullish(),loadErrorCount:a.number().int().nullish()}),zI=kD.extend({type:a.literal("mainShowroom"),id:a.string(),impressionToken:a.string(),brandId:a.string().nullish(),title:a.string().nullish(),description:a.string().nullish(),backgroundColor:a.number().int().nullish(),images:a.array(Uo).nullish(),logo:nu.nullish(),slotAds:a.array(_D).nullish(),action:jI.nullish(),layout:OI.nullish()}),WI=a.union([SD,FI,BI,VI,wD,ID,zI]),ND=a.union([FI,BI,VI]),C0=a.object({pageLoadPingUrl:a.string(),visibilityPingUrlBase:a.string(),clickPingUrlBase:a.string()}),Tf=a.object({tagsSupported:a.boolean()});a.object({supportedTypes:a.array(a.enum(["multimedia","product","tourActivity","propertyPromotion","text","showroom","miniShowroom","mainShowroom"])),product:Tf.nullish(),propertyPromotion:Tf.nullish(),tourActivity:Tf.nullish(),optOutOfPersonalization:a.boolean().nullish()});const GI=a.enum(["open","expand","chat"]);a.object({showroom:a.object({scenario:GI.nullish(),brandId:a.string(),brandName:a.string().nullish(),adId:a.string().nullish()})});const MD=a.object({brandBackground:a.number().int().nullish(),brandLogo:nu.nullish(),conversationId:a.string(),miniShowroomAd:a.object({messageId:a.string(),partId:a.string(),rguid:a.string()}),openAt:a.number(),theme:a.enum(["light","dark"]).nullish(),viewMode:a.enum(["cardView","extendedView"]),activeCardRguid:a.string().nullish(),lastUserMessageRguid:a.string().nullish()});MD.extend({brandId:a.string(),adId:a.string().nullish(),scenario:GI.nullish()});a.object({brandId:a.string(),brandName:a.string().nullish(),messageId:a.string(),conversationId:a.string(),visible:a.boolean()});const RD=a.object({requestId:a.string(),ads:a.array(zI),instrumentation:C0}),PD=a.object({selectedTag:su.nullish(),collapsed:a.boolean().nullish(),filteredAds:a.array(ND).nullish(),showroomData:a.array(a.object({fetchKey:a.string(),response:RD})).nullish()}),LD=PD.extend({type:a.literal("ads"),requestId:a.string(),summary:a.string(),ads:a.array(WI).nullish(),instrumentation:C0,adsSessionId:a.string().nullish(),adTags:a.array(su).nullish()}),B1e=a.object({requestId:a.string(),ads:a.array(WI).nullish(),instrumentation:C0}),Ef={OneDriveAccess:"one-drive-access",BrowserActions:"browser-actions",OutlookAccess:"outlook-access"},jD=a.enum([Ef.OneDriveAccess,Ef.BrowserActions,Ef.OutlookAccess]),O2={active:"active",rejected:"rejected"},OD=a.enum([O2.active,O2.rejected]),DD=a.object({type:a.literal("consent"),consentTypes:a.array(jD),status:OD});a.object({type:a.literal("command"),command:a.object({type:a.literal("updateCard"),messageId:a.string(),partId:a.string(),update:a.object({type:a.literal("consent"),status:a.literal("rejected")})})});const UD=a.object({type:a.literal("computerUseFeedback")}),Er=a.union([a.literal("startTask"),a.literal("pauseTask"),a.literal("resumeTask"),a.literal("cancelTask"),a.literal("takeTaskControl"),a.literal("releaseTaskControl")]),FD=a.union([a.literal("bringAgentTabsToForeground"),a.literal("failedTask"),a.literal("completedTask"),a.literal("moveAgentTabsToBackground"),a.literal("showConsentDialog")]);a.union([Er,FD]);const BD=a.union([a.literal("allSessionInfo"),a.literal("activeSessionInfo"),a.literal("failedTask"),a.literal("completedTask")]);a.union([Er,BD]);const VD=a.union([a.literal("allSessionInfo"),a.literal("activeSessionInfo"),a.literal("failedTask"),a.literal("completedTask")]);a.union([Er,VD]);const $I=a.union([a.literal("askUserInput"),a.literal("safetyRiskDetected"),a.literal("userTakeControl"),a.literal("giveBackControl"),a.literal("resumeFromInput"),a.literal("resumeFromRisk"),a.literal("pauseByClick"),a.literal("resumeByClick"),a.literal("taskCompleted")]),HD=a.object({reason:$I,title:a.string().optional(),text:a.string().optional()}),ec=a.object({taskId:a.string()}),zD=ec.extend({type:a.literal("startTask")}),WD=ec.extend({type:a.literal("pauseTask")}),GD=ec.extend({type:a.literal("resumeTask")}),$D=ec.extend({type:a.literal("cancelTask")}),qD=ec.extend({type:a.literal("takeTaskControl")}),KD=ec.extend({type:a.literal("releaseTaskControl")}),qI=a.object({title:a.string(),instruction:a.object({text:a.string(),websites:a.array(a.object({url:a.string().url(),iconUrl:a.string().url().optional()}))})}),V1e=qI.extend({id:a.string()});qI.extend({isActive:a.boolean()});const ZD=a.enum(["choose","replay"]),YD=a.enum(["2","1","0.5"]),QD=a.object({isRunning:a.boolean().nullish(),speed:YD.nullish()}),JD=a.object({name:a.string(),url:a.string().nullish(),description:a.string().nullish(),phoneNumber:a.string().nullish(),smsNumber:a.string().nullish(),chatUrl:a.string().nullish(),whatsAppUrl:a.string().nullish()}),XD=a.object({type:a.literal("safetyHelpline"),countryEmergencyNumber:a.string().nullable(),helplines:a.array(JD)}),eU=a.object({type:a.literal("document"),attachmentId:a.string(),fileName:a.string(),contentType:a.string()}),tU=a.object({type:a.literal("file"),url:a.string().url(),name:a.string(),contentType:a.string()}),nU=a.object({name:a.string(),disclaimerUrl:a.string(),url:a.string()}),KI=a.object({price:a.number().nullish(),changeInPercentage:a.number().nullish(),changeInAmount:a.number().nullish()}),sU=a.enum(["unavailable","upcoming","beat","miss","inline"]),oU=a.object({releaseAt:a.string().nullish(),status:sU}),ZI=a.object({id:a.string(),symbol:a.string(),displayName:a.string(),price:a.number(),previousClosePrice:a.number(),changeInPercentage:a.number(),changeInAmount:a.number(),updatedAt:a.string(),iconUrl:a.string(),provider:nU,isFollowed:a.boolean().nullish()}),aU=a.object({priceOpen:a.number().nullish(),priceHigh:a.number().nullish(),priceLow:a.number().nullish(),price52wHigh:a.number().nullish(),price52wLow:a.number().nullish()}),ou=ZI.extend({intradayPricing:aU,isMarketLastSale:a.boolean(),exchangeTimeZoneId:a.string().nullish(),isMarketRegularHours:a.boolean().optional(),lastUpdatedAt:a.string(),tradingDayEndAt:a.string(),accumulatedVolume:a.number().nullish()}),rU=ou.extend({securityType:a.literal("stock"),marketCap:a.number().nullish(),marketCapCurrency:a.string().nullish(),averageVolume:a.number().nullish(),peRatio:a.number().nullish(),postMarket:KI.nullish(),earnings:oU.nullish()}),iU=ou.extend({securityType:a.literal("etf"),netAssets:a.number().nullish(),expenseRatio:a.number().nullish(),yieldPercent:a.number().nullish(),postMarket:KI.nullish()}),cU=ou.extend({securityType:a.literal("index")}),lU=ZI.extend({securityType:a.literal("fund"),price52wHigh:a.number().nullish(),price52wLow:a.number().nullish(),netAssets:a.number().nullish(),expenseRatio:a.number().nullish(),yieldPercent:a.number().nullish(),oneYearReturn:a.number().nullish()}),YI=a.object({amount:a.number().nullish(),currency:a.string().nullish(),currencySymbol:a.string().nullish()}),D2=a.object({value:YI,fullName:a.string().nullish()}),uU=a.object({oneMonth:a.number().nullish(),sixMonths:a.number().nullish(),oneYear:a.number().nullish()}),dU=ou.extend({securityType:a.literal("currencyExchange"),fromCurrency:D2,toCurrency:D2,percentageReturns:uU}),mU=ou.extend({securityType:a.literal("cryptocurrency"),marketDominancePercentage:a.number().nullish(),circulatingSupply:a.number().nullish(),maxSupply:a.number().nullish(),oneYearReturn:a.number().nullish(),marketCap:YI,marketCapCurrency:a.string().nullish()}),pU=a.enum(gR),fU=a.object({price:a.number(),volume:a.number(),at:a.string()}),U2=a.array(fU),hU=a.object({afterHoursSeries:U2,series:U2,chartType:pU}),gU=a.discriminatedUnion("securityType",[rU,iU,cU,lU,dU,mU]),bU=a.object({currency:a.string(),instrument:gU,chart:hU.optional()}),vU=bU.extend({type:a.literal("financeChart")}),yU=a.discriminatedUnion("type",[vU]),CU=a.object({id:a.string()}),xU=a.array(CU),H1e=a.object({entities:xU}),SU=a.object({type:a.literal("basic"),front:a.string(),back:a.string()}),wU=a.object({type:a.literal("flashcard"),title:a.string(),flashcards:a.array(SU)}),IU=a.object({type:a.literal("generativeUI"),markup:a.string(),data:a.record(a.string(),a.any())}),TU=a.object({latitude:a.number(),longitude:a.number()}),tm=a.object({name:a.string(),location:TU}),EU=a.enum(["does-not-accept","some-insurance-accepted","accepts-insurance-plan-unknown","accepts-insurance-and-plan","accepts-insurance-out-of-network"]),AU=a.object({value:a.number(),count:a.number().nullish(),maxRating:a.number().nullish()}),_U=tm.extend({npi:a.string(),name:a.string(),primarySpecialtyTitle:a.string(),rating:AU.nullish(),professionalCredentials:a.array(a.string()).nullish(),location:tm.shape.location.extend({uuid:a.string(),address:a.string(),name:a.string().nullish()}),insuranceStatus:EU,insuranceCarrierName:a.string().nullish(),url:a.string().nullish()}),kU=a.object({type:a.literal("healthcareEntity"),entities:a.array(_U)}),NU=a.object({name:a.string(),type:a.string().nullish(),year:a.number().int().nullish()}),MU=a.object({carrierName:a.string().nullish(),planName:a.string().nullish(),planType:a.string().nullish(),state:a.string().nullish()}),RU=a.object({name:a.string().nullish(),address:a.string(),latitude:a.number(),longitude:a.number(),phoneNumber:a.string().nullish()}),PU=a.object({npi:a.string(),name:a.string(),professionalCredentials:a.array(a.string()).nullish(),location:RU.nullish(),url:a.string().nullish(),primarySpecialtyTitle:a.string().nullish(),otherSpecialtyTitles:a.array(a.string()).nullish(),educations:a.array(NU).nullish(),insurances:a.array(MU).nullish()}),LU=a.object({title:a.string(),content:a.string()}),jU=a.object({title:a.string().nullish(),content:a.string().nullish()}),OU=a.object({name:a.string(),subtitle:a.string(),thumbnailId:a.string().nullish()}),DU=a.object({previewCardContent:LU,detailedCardContent:jU.nullish(),informationSource:OU}),UU=a.object({type:a.literal("healthcareInfo"),content:DU}),FU=a.union([kU,UU]),QI=a.object({image:a.object({url:a.string(),thumbnailUrl:a.string(),altText:a.string(),width:a.number(),height:a.number()}),source:a.object({title:a.string(),url:a.string(),iconUrl:a.string().nullable()})}),BU=a.object({type:a.literal("image"),images:a.array(QI)}),VU=a.object({type:a.literal("inlineImage"),title:a.string(),description:a.string()}).merge(QI),HU=a.object({type:a.literal("inlineVideo"),title:a.string(),description:a.string(),video:a.object({url:a.string(),thumbnailUrl:a.string(),title:a.string(),isShort:a.boolean()}),source:a.object({url:a.string(),iconUrl:a.string().optional()})}),zU=a.object({name:a.string(),logoUrl:a.string().nullable(),postUrl:a.string()}),WU=a.object({title:a.string(),companyName:a.string(),companyLogoUrl:a.string().nullable(),postedAt:a.string(),location:a.string(),providers:a.array(zU),description:a.string(),salary:a.string().nullable(),type:a.string().nullable(),locationType:a.string().nullable(),tags:a.array(a.string()).nullable()}),GU=a.object({type:a.literal("job"),jobs:a.array(WU)}),$U=a.object({type:a.literal("localEntity"),entities:a.array(tm.extend({phoneNumber:a.string().nullish(),url:a.string().nullish(),reviews:a.array(a.object({count:a.number(),rating:a.number(),providerName:a.string(),providerIconUrl:a.string().nullish(),url:a.string()})),location:tm.shape.location.extend({address:a.string().nullish()}),photos:a.array(a.object({url:a.string(),altText:a.string().nullish(),providerName:a.string().nullish(),providerUrl:a.string()})),openState:a.string().nullish(),category:a.string().nullish(),price:a.string().nullish()}))}),qU=a.object({providerName:a.string(),url:a.string().nullish(),thumbnailUrl:a.string(),providerOptions:a.array(a.string()).nullish(),source:a.object({url:a.string(),name:a.string()}).nullish()}),KU=a.object({sourceName:a.string(),maxRating:a.number(),rating:a.number(),url:a.string()}),ZU=a.object({url:a.string(),source:a.object({url:a.string(),name:a.string()}).nullish()}),pg=a.object({url:a.string().nullish(),name:a.string().nullish()}),YU={thumbnail:a.object({url:a.string(),source:pg.nullish()}),source:pg.nullish()},QU=a.object({type:a.literal("mediaSpotlight"),title:a.string(),label:a.string().nullish(),description:a.string(),thumbnail:ZU,facts:a.record(a.string(),a.string()).nullish(),criticRatings:a.array(KU).nullish(),watchLinks:a.array(qU).nullish(),featuredVideo:a.object(YU).nullish(),sources:a.array(pg).nullish()}),JU=a.object({entityId:a.string(),title:a.string(),subtitle:a.string(),thumbnailUrl:a.string()}),XU=a.object({type:a.literal("mediaCarousel"),items:a.array(JU)}),eF=a.object({name:a.string(),thumbnailUrl:a.string()}),tF=a.object({provider:eF,title:a.string(),url:a.string(),thumbnailUrl:a.string(),updatedAt:a.string()}),nF=a.object({title:a.string(),articles:a.array(tF)}),sF=nF.extend({type:a.literal("newsCarousel")}),oF=a.object({id:a.string(),type:a.literal("oneDrive"),name:a.string(),lastModifiedAt:a.string(),url:a.string(),webDavUrl:a.string().optional(),contentType:a.string(),size:a.number()}),aF=a.object({type:a.literal("m365"),items:a.array(oF)}),rF=a.object({type:a.literal("linkedin"),firstName:a.string().optional(),lastName:a.string().optional(),profileUrl:a.string().url().optional(),backgroundPictureUrl:a.string().url().optional(),profilePictureUrl:a.string().url().optional(),headline:a.string().optional(),location:a.string().optional(),followerCount:a.number().optional()}),iF=a.object({type:a.literal("entity"),title:a.string().optional(),label:a.string().optional(),description:a.string().optional(),thumbnail:a.object({url:a.string().url(),source:a.string().optional()}),facts:a.record(a.string(),a.string()).optional(),sources:a.array(a.object({url:a.string().url(),name:a.string()})).optional()}),cF=a.discriminatedUnion("type",[rF,iF]),lF=a.object({type:a.literal("person"),results:a.array(cF)}),uF=a.enum(["one-drive","google-drive","outlook-calendar","google-calendar"]),x0=a.object({id:a.string(),source:uF}),dF=x0.extend({type:a.literal("document"),fileName:a.string(),url:a.string(),modifiedAt:a.string().nullish(),contentType:a.string().optional()}),mF=x0.extend({type:a.literal("image"),fileName:a.string(),url:a.string(),modifiedAt:a.string().nullish(),thumbnailUrl:a.string().optional()}),pF=x0.extend({type:a.literal("event"),subject:a.string().optional().nullish(),startsAt:a.string(),endsAt:a.string(),location:a.string().optional().nullish()}),fF=a.discriminatedUnion("type",[dF,mF,pF]),hF=a.object({type:a.literal("personalArtifacts"),artifacts:a.array(fF)}),gF=a.object({name:a.string(),url:a.string(),width:a.number().optional(),height:a.number().optional(),thumbnailUrl:a.string().optional()}),bF=a.object({images:a.array(gF)}),vF=bF.extend({type:a.literal("phoneImages")}),yF=a.object({qrCodeUrl:a.string(),linkDeviceUrl:a.string()}),CF=yF.extend({type:a.literal("phoneLinking")}),xF=a.union([a.literal("executing"),a.literal("completed"),a.literal("failed")]),S0=a.object({deviceName:a.string().optional(),state:xF.optional(),disabled:a.boolean().optional(),completedAt:a.string().optional()}),SF=a.enum(["sunday","monday","tuesday","wednesday","thursday","friday","saturday"]),wF=S0.extend({triggerAt:a.string(),repeatDays:a.array(SF).optional().nullable()}),IF=wF.extend({type:a.literal("phoneAlarm")}),TF=S0.extend({seconds:a.number()}),EF=TF.extend({type:a.literal("phoneTimer")}),AF=S0.extend({actionId:a.string(),text:a.string(),phoneNumber:a.string().nullable().optional(),contactName:a.string().nullable().optional(),deviceName:a.string().optional()}),_F=AF.extend({type:a.literal("phoneSendMessage")}),kF=tu.extend({actionName:a.literal("phone_send_message"),parameters:a.object({text:a.string(),phoneNumber:a.string().nullable().optional(),contactName:a.string().nullable().optional()})}),NF=a.discriminatedUnion("type",[CF,vF,IF,EF,_F]),MF=a.object({type:a.literal("quiz"),title:a.string(),quiz:a.array(a.object({type:a.literal("singleSelect"),question:a.string(),options:a.array(a.string()),answer:a.number(),topics:a.array(a.string()).nullable(),explanation:a.string()}))}),RF=a.object({value:a.number(),count:a.number().nullish(),maxRating:a.number().nullish()}),PF=a.object({hours:a.number(),minutes:a.number()}),JI=a.object({name:a.string(),quantity:a.number().nullish(),unit:a.string().nullish()}),LF=a.object({title:a.string(),url:a.string().url(),source:a.string(),imageUrl:a.string().url().nullish(),rating:RF.nullish(),serving:a.number().nullish(),calories:a.number().nullish(),cookingTime:PF.nullish(),instructions:a.array(a.string()).nullish(),ingredients:a.array(JI).nullish()}),jF=a.object({type:a.literal("recipe"),recipes:a.array(LF)});a.object({title:a.string(),url:a.string().url(),ingredients:a.array(JI),instructions:a.array(a.string()).nullish(),imageUrl:a.string().url().nullish(),messageId:a.string().nullish()});const w0=a.object({position:a.number(),url:a.string(),title:a.string(),iconUrl:a.string().nullish(),publisher:a.string().nullish(),snippet:a.string().nullish()}),XI=a.object({url:a.string(),name:a.string(),imageUrl:a.string(),images:a.array(a.string()).nullish(),price:Lt,seller:a.string().nullish()}),I0=a.object({value:a.number(),count:a.number()}).nullish(),OF=XI.extend({type:a.literal("shopping"),id:a.string(),rating:I0}),DF=a.object({emailEnabled:a.boolean(),anyRetailer:a.boolean()}),UF=XI.extend({isNotificationEnabled:a.boolean().nullish(),offerId:a.string(),currentPrice:Lt.nullish(),percentageDrop:a.number(),durationInWeeks:a.number(),notificationOptions:DF.nullish()}),T0=a.object({title:a.string().nullish(),url:a.string()}),FF=a.enum(["textual","visual"]),BF=a.object({displayName:a.string(),value:a.string(),isActive:a.boolean(),isSelected:a.boolean(),thumbnailImage:T0.nullish()}),eT=a.object({id:a.string(),displayName:a.string(),filterValues:a.array(BF),filterType:FF}),tT=a.object({id:a.string().nullish(),groupId:a.string().nullish(),brandGroupId:a.string().nullish()}),nT=a.object({displayName:a.string(),values:a.array(a.string())}),sT=a.object({offerUrl:a.string(),domain:a.string()}),oT=a.object({summary:a.string(),attributions:a.array(sT)}),aT=a.object({pros:a.array(a.string()).nullish(),cons:a.array(a.string()).nullish(),attributions:a.array(sT)}),rT=a.discriminatedUnion("type",[a.object({type:a.literal("buyWithMerchant"),checkoutUrl:a.string().nullish(),merchant:a.string().nullish()}),a.object({type:a.literal("buyWithCopilot"),merchantProvider:a.string().nullish(),storeId:a.string().nullish()})]),E0=a.object({product:tT,offerId:a.string(),url:a.string(),name:a.string(),description:a.string().nullish(),images:a.array(T0).nullish(),filters:a.array(eT).nullish(),specifications:a.array(nT).nullish(),review:oT.nullish(),prosAndCons:aT.nullish(),price:Lt,discountPrice:Lt.nullish(),seller:a.string(),sellerLogoUrl:a.string().nullish(),brandName:a.string().nullish(),rating:I0.nullish(),checkoutOption:rT.nullish(),curation:a.string().nullish(),canTrackPrice:a.boolean()}),VF=a.object({type:a.literal("shoppingProducts"),products:a.array(E0)}),A0=a.union([a.literal("lowest-price"),a.literal("free-shipping")]),iT=a.object({offerName:a.string(),offerId:a.string(),url:a.string(),price:Lt,discountPrice:Lt.nullish(),seller:a.string(),sellerLogoUrl:a.string().nullish(),tags:a.array(A0).nullish(),canTrackPrice:a.boolean()}),z1e=a.object({error:a.string(),message:a.string()}),cT=a.object({minPrice:Lt,maxPrice:Lt,averagePrice:Lt,timePeriodInDays:a.number()}),lT=a.object({date:a.coerce.date(),price:Lt}),uT=a.object({daily:lT.array()}),dT=a.object({label:a.string(),prompt:a.string()}),HF=a.union([a.literal("nudge"),a.literal("flyout")]),zF=a.object({edgeEntryPoint:HF.optional()}),WF=zF.extend({scenario:a.literal("priceHistory"),priceHistory:a.object({dailyPrices:lT.array(),type:a.union([a.literal("increase"),a.literal("decrease")]),percentage:a.number()})}),mT=a.discriminatedUnion("scenario",[WF]);a.object({muid:a.string(),anid:a.string().nullish()});const GF=a.object({type:a.literal("percentage"),percentage:a.number()}),$F=a.object({type:a.literal("flat"),cashback:Lt}),qF=a.discriminatedUnion("type",[GF,$F]),KF=a.object({rebate:qF,name:a.string()}),ZF=a.object({type:a.literal("affiliate"),categories:a.array(KF),exclusions:a.string(),seller:a.string(),sellerLogoUrl:a.string().nullish(),isRebatesActive:a.boolean()}),YF=a.object({type:a.literal("percentage"),percentage:a.number(),maxCashback:Lt}),QF=a.object({type:a.literal("flat"),cashback:Lt,minPurchaseRequired:Lt}),JF=a.discriminatedUnion("type",[YF,QF]),XF=a.object({type:a.literal("product"),cashback:Lt,expiresAt:a.string(),seller:a.string(),sellerLogoUrl:a.string().nullish()}),eB=a.object({type:a.literal("storewide"),rebate:JF,expiresAt:a.string(),seller:a.string(),sellerLogoUrl:a.string().nullish()}),tB=a.discriminatedUnion("type",[XF,eB]),nB=a.object({type:a.literal("ads"),offer:tB,activatedOffersCount:a.number()}),sB=a.discriminatedUnion("type",[nB,ZF]),W1e=E0.extend({otherBuyingOptions:a.array(iT).nullish(),priceInsight:cT.nullish(),tags:a.array(A0).nullish(),priceHistory:uT.nullish(),conversationStarters:a.array(dT).nullish(),insights:mT.nullish(),supportsPriceInsights:a.boolean()}),oB=a.object({product:tT.nullish(),offerId:a.string().nullish(),url:a.string().nullish(),name:a.string().nullish(),description:a.string().nullish(),images:a.array(T0).nullish(),filters:a.array(eT).nullish(),specifications:a.array(nT).nullish(),review:oT.nullish(),prosAndCons:aT.nullish(),price:Lt.nullish(),discountPrice:Lt.nullish(),seller:a.string().nullish(),sellerLogoUrl:a.string().nullish(),brandName:a.string().nullish(),rating:I0.nullish(),checkoutOption:rT.nullish(),curation:a.string().nullish(),canTrackPrice:a.boolean().nullish(),otherBuyingOptions:a.array(iT).nullish(),priceInsight:cT.nullish(),tags:a.array(A0).nullish(),priceHistory:uT.nullish(),conversationStarters:a.array(dT).nullish(),insights:mT.nullish()});a.object({metadata:oB.nullish(),cashbackOffers:a.array(sB).nullish()});const G1e=a.object({products:UF.array()}),aB=a.object({category:a.string(),curationGroupId:a.string(),position:a.union([a.literal("top"),a.literal("middle"),a.literal("bottom")]).nullish()}),xd=E0.extend({curationInfo:aB.nullish()});a.object({product:xd,messageId:a.string(),allProducts:a.array(xd).nullish(),accessories:a.array(xd).nullish()});const rB=a.object({type:a.literal("shoppingCurated"),title:a.string().optional(),products:a.array(xd),groupType:a.string().nullish()}),iB=a.discriminatedUnion("type",[OF,VF,rB]),$1e=a.object({emailNotificationEnabled:a.boolean()}),cB=a.object({name:a.string(),url:a.string(),offerId:a.string()}),lB=a.object({url:a.string(),source:a.string()}),uB=a.object({reason:a.string(),references:a.array(lB)}),dB=a.enum(["buy-now","buy-later"]),q1e=a.object({whenToBuy:dB,seller:cB,supportingReasons:a.array(uB)}),mB=a.union([a.literal("top-highlight"),a.literal("buying-tip"),a.literal("ideal-for"),a.literal("review-snapshot")]),K1e=a.object({title:a.string(),content:a.string(),type:mB,citations:a.array(w0)});a.object({isPDP:a.boolean(),name:a.string().nullish(),image:a.string().url().nullish(),base64_image:a.string().nullish(),price_currency:a.string().nullish(),price_value:a.coerce.number().nullish(),"aggregateRating/ratingValue":a.union([a.string(),a.nan()]).nullish(),"aggregateRating/reviewCount":a.union([a.string(),a.nan()]).nullish(),"offers/price":a.string().nullish()});a.object({name:a.string().optional(),rating:a.object({value:a.number(),count:a.number()}).optional(),images:a.array(a.object({url:a.string()})).optional(),price:a.object({amount:a.number(),currency:a.string().nullable(),currencySymbol:a.string().nullable()}).optional(),offerPrice:a.string().optional(),isPDP:a.boolean().optional()});const pB=a.enum(["home","away"]),Ts=a.enum(["win","loss","tie","no-game"]),pT=a.enum(["pre-game","in-progress","final","postponed","delayed","abandoned","cancelled"]),fB=a.enum(["test","odi","t20"]),hB=a.enum(["test","limited-overs","super-over"]),gB=a.enum([...pT.options,"drinks","dinner","tea","lunch","innings-break","super-over","toss","stumps","strategic-timeout","forfeited"]),bB=a.enum([...pT.options,"bye","retired","forfeited","unscheduled","suspended"]),vB=a.enum(["men-singles","men-doubles","women-singles","women-doubles","mixed-doubles"]),yB=a.enum(["round-of256","round-of128","round-of64","round-of32","round-of16","quarter-final","semi-final","final"]),fT=a.object({name:a.string(),city:a.string().nullish()}),CB=a.object({name:a.string(),thumbnailUrl:a.string().nullish(),seasonPhase:a.string().nullish(),seasonStartsAt:a.string().nullish(),seasonEndsAt:a.string().nullish(),leagueId:a.string()}),xB=a.object({type:a.literal("league"),league:CB}),nm=a.object({name:a.string(),thumbnailUrl:a.string().nullish()}),SB=a.object({type:a.literal("team"),team:nm}),wB=a.object({type:a.literal("matchup"),matchup:a.object({teamA:nm,teamB:nm})}),au=a.discriminatedUnion("type",[xB,SB,wB]),IB=a.object({name:a.string(),alias:a.string().nullish(),thumbnailUrl:a.string().nullish()}),TB=a.object({playerName:a.string(),clock:a.object({minutes:a.number(),seconds:a.number()})}),EB=a.object({ballPossessionPercentage:a.number().nullish(),goals:a.array(TB).nullish()}),np=a.object({wins:a.number(),losses:a.number(),overtimeLosses:a.number().nullish()}),AB=a.enum(["quarter","half","halftime","extra","penalties","shoot-out","overtime","inning","period"]),_B=a.enum(["top","bottom"]),Fo=a.object({type:AB,period:a.number().nullish(),division:_B.nullish()}),ru=a.object({playingPeriod:Fo,score:a.string()}),In=IB.extend({primaryColorHex:a.string().nullish(),venueType:pB.nullish(),previousGameOutcomes:a.array(Ts).nullish(),seed:a.number().nullish(),gameOutcome:Ts.nullish(),score:a.string().nullish(),record:np.nullish(),winProbability:a.number().nullish(),playingPeriodScores:a.array(ru).nullish()}),_0=In.extend({winProbability:a.number().nullish()}),hT=In.extend({score:a.string(),gameStats:EB.nullish()}),kB=hT.extend({gameOutcome:Ts}),NB=a.object({wins:a.number(),participantName:a.string()}),MB=a.enum(["final","not-started","in-progress"]),RB=a.enum(["national-championship","first-four","first-round","second-round","conference-semifinal","conference-final","sweet16","sweet-sixteen","elite-eight","final-four","final"]),PB=a.object({state:MB,winsInfo:a.array(NB).nullish(),gameNumber:a.number().nullish(),conference:a.string().nullish()}),gT=PB.extend({phase:RB}),k0=a.object({name:a.string(),score:a.string()}),LB=a.object({current:a.number(),total:a.number(),aggregatedScores:a.array(k0).nullish()}),N0=a.object({startsAt:a.string(),status:a.string(),leagueName:a.string(),legInfo:LB.nullish(),leagueId:a.string().nullish(),gameId:a.string().nullish(),startTimeToBeAnnounced:a.boolean().nullish(),seasonPhase:a.string().nullish()}),Ar=a.object({minutes:a.number(),seconds:a.number()}),jB=_0.extend({record:np.nullish(),gameOutcome:Ts.nullish(),score:a.string().nullish(),playingPeriodScores:a.array(ru).nullish(),gameStats:a.null().nullish()}),_r=N0.extend({name:a.string().nullish(),week:a.number().nullish(),clock:Ar.nullish(),bracket:a.null().nullish(),currentPlayingPeriod:Fo.nullish()}),kr=N0.extend({name:a.string().nullish(),bracket:gT.nullish(),week:a.number().nullish(),clock:Ar.nullish(),currentPlayingPeriod:Fo.nullish()}),OB=_r.extend({status:a.literal("pre-game"),participants:a.array(_0)}),M0=a.object({clock:Ar,description:a.string(),team:nm,participantScores:a.array(k0).nullish()}),bT=M0.extend({type:a.enum(["score-change","yellow-card","red-card"])}),R0=M0.extend({type:a.enum(["three-point-made","two-point-made","touchdown","field-goal","extra-point","safety","two-point-conversion","blocked-punt-safety","blocked-field-goal-safety","fumble-safety"])}),Nr=a.object({url:a.string(),thumbnailUrl:a.string(),title:a.string(),durationInSeconds:a.number().nullish()}),DB=kr.extend({status:a.literal("pre-game"),participants:a.array(jB),timeline:a.object({events:a.array(R0)}).nullish(),videos:a.array(Nr).nullish()}),UB=_r.extend({status:a.literal("in-progress"),participants:a.array(hT),clock:Ar,currentPlayingPeriod:Fo.nullish(),timeline:a.object({events:a.array(bT)}).nullish(),videos:a.array(Nr).nullish()}),FB=_r.extend({status:a.literal("final"),participants:a.array(kB),videos:a.array(Nr).nullish(),timeline:a.object({events:a.array(bT)}).nullish()}),BB=_r.extend({status:a.literal("postponed"),participants:a.array(In)}),VB=_r.extend({status:a.literal("delayed"),participants:a.array(In)}),HB=_r.extend({status:a.literal("abandoned"),participants:a.array(In)}),zB=_r.extend({status:a.literal("cancelled"),participants:a.array(In)}),fg=a.discriminatedUnion("status",[OB,UB,FB,HB,zB,VB,BB]),vT=In.extend({playingPeriodScores:a.array(ru).nullish(),score:a.string(),record:np.nullish(),gameOutcome:Ts.nullish(),winProbability:a.number().nullish(),gameStats:a.null().nullish()}),WB=vT.extend({gameOutcome:Ts}),GB=kr.extend({status:a.literal("in-progress"),participants:a.array(vT),clock:Ar,currentPlayingPeriod:Fo,timeline:a.object({events:a.array(R0)}).nullish(),videos:a.array(Nr).nullish()}),$B=kr.extend({status:a.literal("final"),participants:a.array(WB),videos:a.array(Nr).nullish(),clock:Ar.nullish(),currentPlayingPeriod:Fo.nullish(),timeline:a.object({events:a.array(R0)}).nullish()}),qB=kr.extend({status:a.literal("postponed"),participants:a.array(In)}),KB=kr.extend({status:a.literal("delayed"),participants:a.array(In)}),ZB=kr.extend({status:a.literal("abandoned"),participants:a.array(In)}),YB=kr.extend({status:a.literal("cancelled"),participants:a.array(In)}),hg=a.discriminatedUnion("status",[DB,GB,$B,ZB,YB,KB,qB]),QB=a.object({type:a.literal("sportsSchedule"),sport:a.enum(["basketball","ice-hockey","football"]),games:a.array(hg),header:au.nullish(),heroGame:hg.nullish()}),JB=a.object({type:a.literal("sportsSchedule"),sport:a.literal("soccer"),games:a.array(fg),header:au.nullish(),heroGame:fg.nullish()}),XB=a.object({type:a.literal("sportsGame"),sport:a.enum(["basketball","ice-hockey","football"]),game:hg}),eV=a.object({type:a.literal("sportsGame"),sport:a.literal("soccer"),game:fg}),Mr=N0.extend({name:a.string().nullish(),week:a.number().nullish(),videos:a.array(Nr).nullish(),bracket:gT.nullish(),clock:Ar.nullish(),currentPlayingPeriod:Fo.nullish()}),yT=a.object({hits:a.number(),errors:a.number(),runs:a.number()}),P0=M0.extend({type:a.enum(["conversion","bat"]),playingPeriod:Fo,participantScores:a.array(k0)}),CT=_0.extend({record:np.nullish(),gameOutcome:Ts.nullish(),score:a.string().nullish(),playingPeriodScores:a.array(ru).nullish(),gameStats:yT.nullish()}),xT=CT.extend({playingPeriodScores:a.array(ru).nullish(),score:a.string(),gameStats:yT.nullish()}),tV=xT.extend({gameOutcome:Ts}),nV=Mr.extend({status:a.literal("pre-game"),participants:a.array(CT),timeline:a.object({events:a.array(P0)}).nullish()}),sV=Mr.extend({status:a.literal("in-progress"),participants:a.array(xT),currentPlayingPeriod:Fo.nullish(),timeline:a.object({events:a.array(P0)}).nullish()}),oV=Mr.extend({status:a.literal("final"),participants:a.array(tV),videos:a.array(Nr).nullish(),timeline:a.object({events:a.array(P0)}).nullish()}),aV=Mr.extend({status:a.literal("postponed"),participants:a.array(In)}),rV=Mr.extend({status:a.literal("delayed"),participants:a.array(In)}),iV=Mr.extend({status:a.literal("abandoned"),participants:a.array(In)}),cV=Mr.extend({status:a.literal("cancelled"),participants:a.array(In)}),gg=a.discriminatedUnion("status",[nV,sV,oV,aV,rV,iV,cV]),lV=a.object({type:a.literal("sportsSchedule"),sport:a.literal("baseball"),games:a.array(gg),header:au.nullish(),heroGame:gg.nullish()}),uV=a.object({type:a.literal("sportsGame"),sport:a.literal("baseball"),game:gg}),dV=a.object({ballsFaced:a.number(),runsScored:a.number(),isBatting:a.boolean()}),mV=a.object({oversBowled:a.string(),wicketsTaken:a.number(),runsConceded:a.number(),isBowling:a.boolean()}),pV=dV.extend({type:a.literal("batting")}),fV=mV.extend({type:a.literal("bowling")}),ST=a.discriminatedUnion("type",[pV,fV]),hV=a.object({name:a.string(),stats:ST}),gV=a.object({playerName:a.string(),teamName:a.string(),gameStats:a.array(ST).nullish()}),bV=a.object({current:a.number(),required:a.number().nullish()}),vV=a.object({name:a.string(),currentMatch:a.number(),totalMatches:a.number(),roundName:a.string().nullish(),equation:a.string().nullish()}),wT=a.object({type:hB,runs:a.number(),wickets:a.number(),oversPlayed:a.string(),isFollowedOn:a.boolean(),isDeclared:a.boolean(),duckworthLewisEquation:a.object({target:a.number(),revisedOvers:a.string()}).nullish()}),L0=a.object({name:a.string(),alias:a.string().nullish(),thumbnailUrl:a.string().nullish()}),yV=L0.extend({previousGameOutcomes:a.array(Ts).nullish()}),CV=L0.extend({inningScores:a.array(wT).nullish(),playersStats:a.array(hV).nullish(),yetToBat:a.boolean()}),xV=L0.extend({gameOutcome:Ts,didNotBat:a.boolean(),inningScores:a.array(wT).nullish()}),SV=a.object({startsAt:a.string(),startTimeToBeAnnounced:a.boolean(),tossInfo:a.string().nullish(),participants:a.array(yV),type:a.literal("pre")}),wV=a.object({gameSummary:a.string(),runRate:bV.nullish(),participants:a.array(CV),type:a.literal("live")}),IV=a.object({startsAt:a.string(),gameSummary:a.string(),playerOfTheMatch:gV.nullish(),participants:a.array(xV),type:a.literal("final")}),TV=a.discriminatedUnion("type",[SV,wV,IV]),bg=a.object({gameId:a.string(),leagueId:a.string(),venue:fT.nullish(),format:fB,status:gB,seriesInfo:vV,phase:TV}),EV=a.object({type:a.literal("sportsGame"),sport:a.literal("cricket"),game:bg}),AV=a.object({type:a.literal("sportsSchedule"),sport:a.literal("cricket"),games:a.array(bg),header:au.nullish(),heroGame:bg.nullable()}),_V=a.object({name:a.string(),countryFlagThumbnailUrl:a.string().nullish(),seed:a.number().nullish()}),kV=a.object({points:a.number(),isServing:a.boolean(),tieBreakerPoints:a.number().nullish(),currentGamePoints:a.string().nullish(),setWon:a.boolean().nullish()}),IT=a.object({players:a.array(_V)}),NV=IT,TT=IT.extend({setPoints:a.array(kV)}),MV=TT.extend({gameOutcome:Ts}),RV=a.object({type:a.literal("pre"),participants:a.array(NV)}),PV=a.object({type:a.literal("live"),participants:a.array(TT)}),LV=a.object({type:a.literal("final"),participants:a.array(MV)}),jV=a.discriminatedUnion("type",[RV,PV,LV]),F2=a.object({gameId:a.string(),leagueId:a.string(),status:bB,startsAt:a.string().nullish(),startTimeToBeAnnounced:a.boolean(),venue:fT.nullish(),matchType:vB,round:yB.nullish(),phase:jV}),OV=a.object({type:a.literal("sportsSchedule"),sport:a.literal("tennis"),games:a.array(F2),header:au.nullish(),heroGame:F2.nullish()}),DV=a.union([QB,JB,lV,AV,OV]),UV=a.discriminatedUnion("sport",[eV,XB,uV,EV]),FV=a.union([DV,UV]),BV=a.object({title:a.string(),description:a.string(),startTime:a.number(),endTime:a.number()}),VV=a.object({video:a.object({url:a.string(),thumbnailUrl:a.string(),duration:a.number(),title:a.string(),isShort:a.boolean()}),source:a.object({url:a.string(),iconUrl:a.string().optional()}),bestMomentIndex:a.number().optional(),moments:a.array(BV).optional()}),HV=a.object({type:a.literal("video"),videos:a.array(VV)}),zV=a.enum(["c","f"]),WV=a.enum(["mm","cm","in"]),GV=a.enum(["hPa","inHg","mb","mmHg"]),$V=a.enum(["bft","kph","mph","ms"]),qV=a.enum(["m","km","mi"]),KV=a.object({temperature:zV,height:WV,pressure:GV.optional(),speed:$V.optional(),distance:qV.optional()}),j0=a.enum(dw),ZV=a.enum(["rain","snow"]),O0=a.object({type:ZV.nullish(),amount:a.number().nullish(),chance:a.number()}),YV=a.object({current:a.number(),high:a.number().optional(),low:a.number().optional()}),QV=a.object({at:a.string(),state:j0,summary:a.string(),description:a.string().optional(),temperature:YV,precipitation:O0.optional()}),ET=a.object({high:a.number(),low:a.number()}),JV=a.object({date:a.string(),state:j0,temperature:ET,precipitation:O0.optional()}),XV=a.object({at:a.string(),state:j0,temperature:ET,precipitation:O0.optional()}),eH=a.object({daily:a.array(JV),hourly:a.array(XV).nullish().optional()}),tH=a.object({type:a.literal("weather"),location:a.string(),units:KV,spotlight:QV.optional(),forecast:eH}),kl=a.enum(dw),nH=a.object({type:a.literal("weatherTemperatureHourly"),location:a.string(),unit:a.union([a.literal("f"),a.literal("c")]),spotlight:a.object({date:a.string(),state:kl,summary:a.string(),temperature:a.number().optional(),high:a.number(),low:a.number()}),forecast:a.array(a.object({at:a.string(),state:kl,temperature:a.number(),precipitationChance:a.number()}))}),sH=a.object({type:a.literal("weatherTemperatureDaily"),location:a.string(),unit:a.union([a.literal("f"),a.literal("c")]),forecast:a.array(a.object({date:a.string(),state:kl,high:a.number(),low:a.number(),precipitationChance:a.number()}))}),AT=a.union([a.literal("rain"),a.literal("snow")]),_T=a.union([a.literal("in"),a.literal("mm")]),oH=a.object({type:a.literal("weatherPrecipitationHourly"),location:a.string(),unit:_T,precipitationType:AT,spotlight:a.object({date:a.string(),summary:a.string(),amount:a.number(),chance:a.number()}),forecast:a.array(a.object({at:a.string(),state:kl,amount:a.number(),chance:a.number()}))}),aH=a.object({type:a.literal("weatherPrecipitationDaily"),location:a.string(),unit:_T,precipitationType:AT,forecast:a.array(a.object({date:a.string(),state:kl,amount:a.number(),chance:a.number()}))}),rH=a.union([tH,nH,sH,oH,aH]),kT=a.object({url:a.string().url(),title:a.string(),snippet:a.string().optional(),publisher:a.string().optional(),iconUrl:a.union([a.string().url(),a.literal("")]).optional()}),iH=a.array(kT),cH=a.object({relatedResults:iH}),lH=a.object({type:a.literal("webResult"),result:kT}),NT=a.union([LD,DD,yU,IU,FU,BU,VU,GU,$U,aF,QU,XU,lF,NF,MF,tU,XD,iB,HU,FV,HV,rH,jF,UD,eU,sF,hF,wU,lH]),MT=a.object({userId:a.string(),displayName:a.string().optional()}),uH=a.array(MT),dH=MT.extend({isYou:a.boolean(),email:a.string().optional(),avatar:a.string().optional()}),Z1e=a.object({participants:a.array(dH)}),mH=a.object({id:a.string(),imageUrl:a.string(),voiceId:a.string()});a.discriminatedUnion("type",[a.object({type:a.literal("media"),delta:a.string()}),a.object({type:a.literal("remainingTime"),seconds:a.number()}),a.object({type:a.literal("startFailed"),startFailedType:a.union([a.literal("time-expired"),a.literal("throttled")])}),a.object({type:a.literal("terminated"),reason:a.union([a.literal("time-expired-day"),a.literal("interrupted")])})]);const ta=a.object({light:a.string(),dark:a.string()}),pH=a.object({foreground1:ta,foreground2:ta,accent:ta,shape:ta,shapeInverse:ta,background1:ta,background2:ta,background3:ta}),B2=a.object({name:a.enum(["ginto-copilot-nord-bold","ginto-copilot-nord-medium-italic","ginto-copilot-480","kari-regular"]),url:a.string().url()}),fH=a.object({name:a.string(),url:a.string().url()}),Hi=a.object({url:a.string().url()}),zi=a.object({urlLight:a.string().url(),urlDark:a.string().url()}),vg=a.object({url:a.string().url()}),tc=a.object({type:a.string(),title:a.string()}),hH=tc.extend({type:a.literal("coverPage"),content:a.string(),template:a.enum(["image-background","fuzzy-image"]),image0:Hi,sticker0:zi.nullish(),sticker1:zi.nullish()}),gH=tc.extend({type:a.literal("heroImage"),content:a.string(),template:a.enum(["noisy-circle","macaron","wavy-shape"]),image0:Hi}),bH=tc.extend({type:a.literal("stickerSheet"),content:a.string(),template:a.enum(["sticker1","sticker2"]),sticker0:zi,sticker1:zi,accent0:vg,accent1:vg}),vH=tc.extend({type:a.literal("simpleText"),content:a.string(),template:a.string().nullish()}),yH=tc.extend({type:a.literal("photoJournal"),content:a.string().nullish(),template:a.enum(["shapes-only","shapes-accents"]),variation:a.enum(["shape-group1","shape-group2"]),label0:a.string(),label1:a.string(),image0:Hi,image1:Hi,sticker0:zi.nullish(),accent0:vg.nullish()}),CH=tc.extend({type:a.literal("endPage"),content:a.string(),template:a.enum(["wide-cards","tall-cards"]),variation:a.enum(["shape-group1","shape-group2"]),questions:a.array(a.string()),image0:Hi,image1:Hi.nullish(),sticker0:zi}),xH=a.object({type:a.literal("shareDefault"),template:a.string().nullish()}),SH=a.discriminatedUnion("type",[hH,gH,bH,vH,yH,CH,xH]),wH=a.object({id:a.string(),modifiedAt:a.string(),theme:pH,font:B2,fontHandwriting:B2.nullish(),masks:a.array(fH),sections:a.array(SH)}),IH=a.object({type:a.literal("chatAboutNarrative"),narrativeId:a.string(),messageIndex:a.number()}),TH=a.object({id:a.string(),text:a.string(),createdAt:a.string()}),EH=a.object({results:a.array(TH),next:a.string().nullable()}),AH=a.object({type:a.literal("provideImageFeedback"),messageId:a.string(),feedbackTypes:a.array(a.string())}),_H=a.object({type:a.literal("createPage"),messageId:a.string()}),kH=a.object({type:a.literal("appendToPage"),messageId:a.string(),pageId:a.string()}),NH=a.object({id:a.string(),conversationId:a.string()}),MH=a.object({id:a.string(),fileName:a.string(),contentType:a.string()}),Y1e=a.object({title:a.string().nullish(),content:a.string().nullish(),conversationId:a.string(),attachments:a.array(MH).optional().nullable()}),RH=Nn.extend({type:a.literal("page"),page:a.object({id:a.string(),conversationId:a.string(),title:a.string().nullish()})}),PH=a.object({id:a.string(),title:a.string().nullish(),updatedAt:a.string(),conversationId:a.string().optional(),type:a.enum(["page","sharedPage"]).optional(),previewContent:a.string().nullish()}),LH=a.object({results:a.array(PH),next:a.string().nullish()}),Q1e=a.object({title:a.string().nullish(),content:a.string().nullish(),shareLink:a.string(),page:a.object({id:a.string()}).nullable()}),J1e=a.object({id:a.string(),url:a.string()}),jH=a.enum(["page-count-exceeded","page-content-length-exceeded"]),OH=a.object({errorCode:jH}),X1e=a.enum(["public","user"]),e0e=a.object({id:a.string(),url:a.string()});a.object({type:a.literal("podcast"),id:a.string().min(1)});const RT=a.literal("generatePodcast"),DH=a.object({type:RT,taskId:a.string().min(1)}),UH=a.object({prompt:a.string()}),sp=a.literal("executeTask"),FH=a.object({type:sp,taskId:a.string(),context:UH.optional()}),BH=a.string(),VH=a.object({currentConversationId:a.string().nullable(),isNewUser:a.boolean(),banExpiresAt:a.string().nullable(),remainingTurns:a.number().nullable(),features:a.array(BH),allowBeta:a.boolean().nullish(),userId:a.string().nullish(),inDataUseWaitingPeriod:a.boolean().nullish()}),HH=a.object({id:a.string(),name:a.string(),previewUrl:a.string(),voicemails:a.array(a.string())}),zH=a.object({id:a.string(),backgroundImageUrl:a.string()}),WH=a.object({id:a.string(),name:a.string(),location:zH.nullish()}),Ss=a.object({type:a.string(),label:a.string()}),GH=a.array(Ss),$H=a.object({positive:a.array(Ss),negative:a.array(Ss)}),fs=a.union([GH,$H]),za=a.object({type:a.string(),label:a.string(),subOptions:a.array(Ss).nullish()}),PT=a.object({local:fs,ads:fs,video:fs,image:fs,sports:fs,job:fs,shopping:fs,recipe:fs,finance:fs,quiz:fs,weather:fs}),qH=a.object({positive:a.array(Ss).nullish(),negative:a.array(Ss)});PT.keyof();const LT=a.object({newsArticle:a.array(za),newsVideo:a.array(za),newsGem:a.array(za),chat:a.array(za),dailyBriefing:a.array(za),podcast:a.array(za),default:a.array(za)});LT.keyof();const KH=a.object({computerUse:a.array(Ss)}),ZH=a.object({text:a.array(Ss),image:a.array(Ss),call:a.array(Ss),appearance:a.array(Ss),card:PT,showroom:qH.nullish(),discover:LT.nullish(),task:KH.nullish()}),YH=a.object({maxFilesPerMessage:a.number(),maxFileNameLength:a.number(),image:a.object({mimeTypes:a.array(a.string()),maxBytes:a.number()}),document:a.object({mimeTypes:a.array(a.string()),maxBytes:a.number()}),binary:a.object({mimeTypes:a.array(a.string()),maxBytes:a.number()})}),QH=a.object({minTextLength:a.number().min(0),textDeltaPercent:a.number().min(0).max(100),debounceInMilliseconds:a.number().min(0)}),JH=a.object({signInPrompts:a.array(a.number()),voices:a.array(HH),maxTextMessageLength:a.number(),feedbackOptions:ZH,characters:a.array(WH).nullish(),pageLimit:a.number(),maxPageContentLength:a.number(),maxPageTitleLength:a.number(),messagePreview:QH,attachments:YH,portraits:a.array(mH).nullish()});a.object({hasVisionAccess:a.boolean(),allowedDomains:a.array(a.string()).nullable(),allowedDomainSuffixes:a.array(a.string()).nullable(),blockedDomains:a.array(a.string()).nullable(),blockedDomainSuffixes:a.array(a.string()).nullable()});const XH=a.object({startTime:a.string(),text:a.string()}),ez=a.object({startTime:a.string(),text:a.string(),words:a.array(XH)}),V2=a.object({url:a.string(),duration:a.number(),transcript:a.array(ez).nullish()}),tz=a.object({title:a.string(),image:a.string(),url:a.string(),createdAt:a.string()}),nz=a.object({publisherName:a.string(),publisherIcon:a.string(),articles:a.array(tz)}),H2=a.object({url:a.string(),foregroundColor:a.string(),backgroundColor:a.string()}),z2=a.object({name:a.string(),foregroundColor:a.string(),backgroundColor:a.string(),altText:a.string().nullish(),url:a.string()}),sz=a.object({landscape:z2,portrait:z2}),oz=a.object({id:a.string(),title:a.string(),image:a.object({landscape:H2,portrait:H2}),audio:a.record(a.string(),V2),transitionMusic:V2.nullable(),sources:a.array(nz)}),jT=a.object({topics:a.array(a.object({id:a.string(),label:a.string(),imageUrl:a.string(),isFollowed:a.boolean()}))}),az=a.object({position:a.number(),chapterId:a.string()}),OT=a.object({isAvailable:a.boolean(),podcastId:a.string(),chapters:a.array(oz),topics:jT.optional(),playback:az}),rz=a.object({positionInSeconds:a.number(),chapterId:a.string()}),iz=a.object({id:a.string(),title:a.string(),topic:a.string().nullable().optional(),image:sz,audio:a.object({name:a.string(),duration:a.number()})}),sm=a.object({isAvailable:a.boolean(),podcastId:a.string(),chapters:a.array(iz),playback:rz}),cz=a.enum(yR),lz=a.enum(bR),uz=a.enum(vR),dz=a.object({channel:uz,tier:lz,isAutoRenew:a.boolean()}),mz=a.object({portrait:a.object({consentType:a.literal("portrait"),version:a.string().nullable()}).nullable()}),DT=a.object({id:a.string(),firstName:a.string().nullable(),anid:a.string().nullable(),isPro:a.boolean(),isDeprecated:a.boolean().nullish(),inEeaPlusRegion:a.boolean(),regionCode:a.enum(Object.values(ql)),isHistoryMigrationPending:a.boolean(),isEligibleForFreeTrial:a.boolean().optional(),phoneLink:a.object({deviceName:a.string().nullable()}).nullable(),ageGroup:a.enum(hR).nullable(),allowedToggles:a.object({textTraining:a.boolean(),voiceTraining:a.boolean(),personalization:a.boolean(),browserActions:a.boolean(),computerUseActions:a.boolean()}),remainingCalls:a.object({reasoning:a.number(),podcastGeneration:a.number(),research:a.number()}).nullish(),accountTier:cz.nullish(),subscriptions:a.array(dz).nullish(),requiredConsents:mz}),pz=a.object({preferredVoice:a.string().nullable(),preferredCharacter:a.string().nullable().optional(),optOutOfTraining:a.boolean(),optInToVoiceTraining:a.boolean(),optOutOfPersonalization:a.boolean(),optOutOfPhoneConnection:a.boolean(),optInToGenerativeUI:a.boolean().optional(),allowBiometricDataUse:a.boolean().optional(),allowOneDriveAccess:a.boolean().optional(),allowBrowserActions:a.boolean().optional(),allowComputerUseActions:a.boolean().optional(),allowOutlookAccess:a.boolean().optional(),features:a.object({suggestedFollowups:a.boolean().optional()}).nullish()}),UT=a.object({errorCode:a.union([a.literal("attachment-too-large"),a.literal("unsupported-content-type"),a.literal("empty-attachment"),a.literal("content-blocked"),a.literal("rate-limit-exceeded"),a.literal("not-signed-in")])}),fz=a.union([a.object({url:a.string()}),UT]),FT=a.union([a.object({id:a.string()}),UT]),hz=a.object({id:a.string(),title:a.string().optional(),updatedAt:a.string(),characterId:a.string().nullable().optional(),continuedAt:a.string().nullable(),group:uH.nullish()}),gz=a.object({results:a.array(hz),next:a.string().nullable()}),bz=a.object({id:a.string()}),BT=a.union([a.literal("thumbs-down"),a.literal("thumbs-up"),a.null()]),op=a.union([a.literal("running"),a.literal("completed"),a.literal("failed"),a.literal("cancelled"),a.literal("pending"),a.literal("paused")]),vz=a.union([a.literal("research"),a.literal("computerUse"),a.literal("podcast")]),yz=a.object({type:a.literal("chainOfThought"),text:a.string()}),Cz=a.object({type:a.literal("query"),text:a.string()}),xz=a.object({type:a.literal("citation"),title:a.string(),url:a.string()}),Sz=a.discriminatedUnion("type",[yz,Cz,xz]),VT=a.object({id:a.string(),title:a.string().nullish(),contents:a.array(Sz).nullish(),inlineCitations:a.array(w0).nullish(),partialOutput:a.array(a.string()).nullish(),finalResponse:a.string().nullish(),type:a.literal("research"),status:op,prompt:a.string().optional()}),t0e=VT.omit({id:!0}).extend({shareId:a.string()}),HT=a.object({url:a.string(),createdAt:a.string()}),wz=a.object({type:a.literal("computerUse"),title:a.string().nullish(),conversationId:a.string().nullish(),id:a.string(),status:op,lastScreenshot:HT.nullish(),updatedAt:a.string().nullish()}),zT=a.object({id:a.string(),title:a.string().nullish(),thumbnail:a.object({name:a.string().nullish()}).nullish()}),Iz=a.object({type:a.literal("podcast"),id:a.string(),podcast:zT.nullish(),status:op,updatedAt:a.string().nullish()}),WT=a.discriminatedUnion("type",[VT,wz,Iz]),D0=a.object({id:a.string(),title:a.string().optional(),conversationId:a.string().optional(),updatedAt:a.string(),status:op,type:vz}),Tz=D0.extend({type:a.literal("research")}),Ez=D0.extend({type:a.literal("computerUse"),screenshot:a.string().nullish(),lastScreenshot:HT.nullish(),chainOfThought:a.array(a.string()).nullish(),computerAction:a.string().nullish(),statusChange:HD.optional(),lastUserCommand:Er.optional(),reaction:BT.optional(),activeTabFaviconUrl:a.string().nullish(),activeTabTitle:a.string().nullish(),viewMode:ZD.nullish(),replay:QD.nullish()}),Az=D0.extend({type:a.literal("podcast"),podcast:zT.nullish()}),_z=a.discriminatedUnion("type",[Tz,Ez,Az]),n0e=a.object({results:a.array(_z),next:a.string().nullable()}),Rr=a.union([a.literal("report"),...BT.options]),kz=a.union([a.literal("generating"),a.literal("generated"),a.literal("failed"),a.literal("non-complete")]),GT=a.object({id:a.string(),createdAt:a.string()}),Nz=a.object({index:a.string(),title:a.string(),url:a.string(),iconUrl:a.string().nullable(),publisher:a.string().nullable(),snippet:a.string().nullish()}),Mz=Nn.extend({type:a.literal("image"),url:a.string().optional(),prompt:a.string().optional().nullable(),isPartiallyLoading:a.boolean().optional(),reaction:Rr.optional(),partialGenerationStep:a.number().optional(),status:kz.optional(),progressionText:a.string().nullable().optional()}),Rz=Nn.extend({type:a.literal("citation"),...w0.shape}),Pz=Nn.extend({type:a.literal("text"),text:a.string(),citations:a.array(Nz).optional(),reaction:Rr.optional()}),Lz=Nn.extend({type:a.literal("task"),task:WT.nullish(),reaction:Rr.optional()}),jz=Nn.extend({type:a.literal("card"),card:NT,reaction:Rr.optional()}),Oz=a.union([a.literal("loading"),a.literal("success"),a.literal("failed")]),Dz=Nn.extend({type:a.literal("indicator-ai-response"),text:a.string(),state:Oz}),Uz=Nn.extend({type:a.literal("document"),attachmentId:a.string(),fileName:a.string(),contentType:a.string(),reaction:Rr.optional()}),Fz=Nn.extend({type:a.literal("deleted"),partType:a.enum(["page","task"])}),Bz=Nn.extend({type:a.literal("error"),text:a.string()});a.object({text:a.string(),title:a.string().optional(),lastSubActionScreenshotUrl:a.string().nullish()});const $T=Nn.extend({type:a.literal("chainOfThought"),text:a.string(),title:a.string().optional(),screenshotUrl:a.string().nullish(),reaction:Rr.optional(),partId:a.string()}),Vz=a.union([$T,RI]),Hz=Nn.extend({type:a.literal("chainOfThoughtGroup"),items:a.array(Vz).optional(),isComplete:a.boolean()}),zz=Nn.extend({type:a.literal("memorySignal"),text:a.string(),signalType:a.union([a.literal("remember"),a.literal("forget")]).nullish()}),Wz=a.object({position:a.union([a.literal("left"),a.literal("right")]),isDefault:a.boolean(),isStreamingComplete:a.boolean().optional()}),Gz=a.discriminatedUnion("type",[Pz,Mz,RH,Rz,Bz,jz,Uz,Lz,Fz,$T,Hz,RI,zz,Dz]),$z=a.object({type:a.literal("text"),text:a.string()}),qz=a.object({type:a.literal("browserTabs"),tabs:a.array(a.object({title:a.string().optional(),url:a.string().optional(),id:a.number().optional(),favIconUrl:a.string().optional(),windowId:a.number()}))}),Kz=a.object({type:a.literal("image"),url:a.string()}),Zz=a.object({type:a.literal("document"),partId:a.string(),fileName:a.string(),contentType:a.string()});a.object({type:a.literal("document"),attachmentId:a.string()});const U0=a.literal("startProductCheckoutActions"),Yz=a.object({type:U0,offerId:a.string().nullish()});a.union([Er,sp,U0]);a.union([a.literal("provideImageFeedback"),a.literal("createPage"),a.literal("appendToPage"),a.literal("promptCharacterSpeech"),a.literal("chatAboutNarrative"),a.literal("topicClick"),Er,sp,RT,U0]);const Qz=a.object({type:a.literal("promptCharacterSpeech")}),Jz=a.object({type:a.literal("topicClick"),content:a.string()}),Xz=a.discriminatedUnion("type",[AH,_H,kH,zD,WD,GD,$D,qD,KD,Qz,IH,FH,DH,Jz,Yz]),eW=a.object({type:a.literal("command"),command:Xz}),tW=a.object({type:a.literal("dailyBriefing"),chapterId:a.string()}),nW=a.object({type:a.literal("greeting"),greetingMessage:a.string()}),sW=a.object({type:a.literal("news"),articleId:a.string()}),oW=a.object({type:a.literal("newsGem"),gemId:a.string(),snapshotKey:a.string()}),aW=a.discriminatedUnion("type",[tW,nW,sW,oW]);a.object({type:a.literal("reference"),reference:aW});const rW=a.discriminatedUnion("type",[$z,Kz,Zz,eW,qz]),qT=a.enum(["chat","smart","study","reasoning","research","computerUse","search"]),iW=GT.extend({author:a.literal("ai"),content:a.array(Gz),mode:qT.optional(),sideBySideConfig:Wz.optional(),reaction:Rr.optional()}),cW=GT.extend({author:a.literal("human"),content:a.array(rW)}),KT=a.discriminatedUnion("author",[iW,cW]),ZT=a.object({results:a.array(KT),next:a.string().nullable()}),lW=a.object({messages:a.array(KT),conversationTitle:a.string()}),s0e=a.object({url:a.string()}),uW=a.object({conversation:a.object({id:a.string(),title:a.string()})});a.object({qc:a.object({q:a.string(),gt:a.string(),sc:a.string()}),s:a.array(a.object({st:a.string(),t:a.string()}))});const F0=a.union([a.literal("active"),a.literal("banned"),a.literal("ineligible")]),B0=a.union([a.literal("active"),a.literal("not-started"),a.literal("expired"),a.literal("paused")]),dW=a.union([a.literal("not-started"),a.literal("completed"),a.literal("ineligible")]),mW=a.object({id:a.string(),type:a.string(),points:a.number()}),pW=a.object({redeemableCount:a.number(),redeemedCount:a.number(),skus:a.array(mW)}),o0e=a.object({userStatus:F0,status:B0,startAt:a.string(),endAt:a.string(),referralCode:a.string().nullish(),referralTaskStatus:dW.nullish(),rewards:pW.nullish()}),a0e=a.object({userStatus:F0.nullish(),programStatus:B0}),r0e=a.object({userStatus:F0.nullish(),programStatus:B0,lastRequestTime:a.string(),userId:a.string()}),Af=a.enum(["prefillComposer","sendMessage","deepLink"]),V0=a.discriminatedUnion("type",[a.object({type:a.literal(Af.enum.prefillComposer),prompt:a.string()}),a.object({type:a.literal(Af.enum.sendMessage),prompt:a.string()}),a.object({type:a.literal(Af.enum.deepLink),uri:a.string()})]),YT=a.object({id:a.string(),text:a.string(),action:V0}),fW=a.object({id:a.string(),text:a.string(),thumbnail:a.object({url:a.string(),altText:a.string()}),action:V0}),hW=a.object({id:a.string(),text:a.string(),action:V0}),gW=a.object({id:a.string(),label:a.string(),items:a.array(YT)}),bW=a.discriminatedUnion("type",[a.object({type:a.literal("text"),id:a.literal("conversation-starter"),title:a.string().nullish(),items:a.array(YT)}),a.object({type:a.literal("textAndImage"),id:a.union([a.literal("feature-discovery"),a.literal("kickstarter"),a.literal("image-generation")]),title:a.string().nullish(),items:a.array(fW)}),a.object({type:a.literal("textAndGreeting"),id:a.string(),title:a.string().nullish(),greeting:a.string().nullish(),items:a.array(hW)}),a.object({type:a.literal("categories"),id:a.literal("categorized-conversation-starter"),title:a.string().nullish(),categories:a.array(gW)})]),vW=a.object({widgets:a.array(bW)});a.object({Questions:a.array(a.string()),Url:a.string(),NormalizedUrl:a.string().optional(),DebugInfo:a.string().optional()});a.object({tabId:a.number(),windowId:a.number(),url:a.string(),title:a.string(),content:a.string().optional()});const QT=a.object({id:a.string(),type:a.enum(SR),status:a.enum(xR)}),yW=a.object({connections:a.array(QT)}),CW=a.object({connection:QT,loginUrl:a.string()}),xW=a.object({encrypted:a.object({keyName:a.string(),blob:a.string()}),unencryptedMetadata:a.object({url:a.string(),blacklisted:a.boolean().optional(),dateLastUsedWindowsEpochMicros:a.number().optional(),passwordIssues:a.record(a.any()).optional(),type:a.number()}),encryptedNotesBackup:a.object({keyName:a.string(),blob:a.string()}).optional()});a.object({passwords:a.array(xW),count:a.number(),hasMore:a.boolean().optional()});const SW=a.object({type:a.literal("summary"),text:a.string()}),wW=a.object({type:a.literal("topicList"),id:a.string(),topics:a.array(a.object({text:a.string()})).nullable(),selectedIndex:a.number().nullable()}),IW=a.discriminatedUnion("type",[wW,SW]).nullable(),TW=a.union([a.string(),a.number(),a.boolean(),a.null()]),Nl=a.lazy(()=>a.union([TW,a.array(Nl),a.record(Nl)])),EW=a.object({op:a.literal("add"),path:a.string(),value:Nl}),AW=a.object({op:a.literal("remove"),path:a.string()}),_W=a.object({op:a.literal("replace"),path:a.string(),value:Nl}),kW=a.object({op:a.literal("move"),from:a.string(),path:a.string()}),NW=a.object({op:a.literal("copy"),from:a.string(),path:a.string()}),MW=a.object({op:a.literal("test"),path:a.string(),value:Nl}),RW=a.discriminatedUnion("op",[EW,AW,_W,kW,NW,MW]),_f=a.array(RW),PW=a.union([a.literal("event-not-recognized"),a.literal("over-turn-limit"),a.literal("unknown-error"),a.literal("message-too-large"),a.literal("invalid-event"),a.literal("empty-message"),a.literal("empty-text"),a.literal("text-too-long"),a.literal("multiple-text-parts"),a.literal("multiple-image-parts"),a.literal("too-many-messages"),a.literal("over-reasoning-quota"),a.literal("over-lifetime-task-quota"),a.literal("over-task-quota"),a.literal("page-content-length-exceeded"),a.literal("page-count-exceeded"),a.literal("character-out-of-capacity"),a.string()]),LW=a.union([a.literal("blocked"),a.literal("not-signed-in"),a.literal("failed"),a.string()]),JT=a.union([a.literal("quiz"),a.literal("generative-ui")]),XT=a.union([a.literal("throttled"),a.literal("throttled-non-pro"),a.literal("time-expired"),a.literal("time-expired-non-pro"),a.literal("not-in-flight"),a.literal("error"),a.literal("signed-out"),a.literal("region-not-available"),a.literal("time-expired-month"),a.literal("time-expired-month-non-pro")]),jW=a.object({voice:a.string().optional(),speed:a.number().min(50).max(200).optional()}).partial(),W2=a.number().min(0).max(200).default(100),G2=a.union([a.literal("standard"),a.literal("character")]),$2=a.discriminatedUnion("event",[tu,a.object({event:a.literal("pong"),id:a.string()}),a.object({event:a.literal("connected"),id:a.string(),requestId:a.string()}),a.object({event:a.literal("received"),conversationId:a.string(),messageId:a.string(),createdAt:a.string()}),a.object({event:a.literal("emojiReaction"),messageId:a.string(),emoji:a.string()}),a.object({event:a.literal("startMessage"),conversationId:a.string(),messageId:a.string(),createdAt:a.string()}),a.object({event:a.literal("appendText"),messageId:a.string(),text:a.string(),partId:a.string()}),a.object({event:a.literal("replaceText"),messageId:a.string(),text:a.string(),partId:a.string()}),a.object({event:a.literal("titleUpdate"),conversationId:a.string(),title:a.string()}),a.object({event:a.literal("generatingImage"),messageId:a.string(),prompt:a.string(),partId:a.string(),progressionText:a.string().nullable().optional()}),a.object({id:a.string(),event:a.literal("generatingImages"),messageId:a.string(),partIds:a.array(a.string()),prompt:a.string()}),a.object({event:a.literal("imageGenerated"),messageId:a.string(),url:a.string(),partId:a.string()}),a.object({event:a.literal("partialImageGenerated"),messageId:a.string(),url:a.string(),partId:a.string(),content:a.string()}),a.object({event:a.literal("page"),messageId:a.string(),partId:a.string(),page:a.object({id:a.string(),conversationId:a.string(),title:a.string().nullish()})}),a.object({event:a.literal("challenge"),method:a.literal("copilot").nullish(),parameter:a.string().nullish()}),a.object({event:a.literal("imageGenerationFailed"),messageId:a.string(),errorCode:LW,partId:a.string()}),a.object({id:a.string(),event:a.literal("generatingCard"),messageId:a.string(),partId:a.string(),type:JT}),a.object({id:a.string(),event:a.literal("cardGenerationFailed"),messageId:a.string(),partId:a.string()}),a.object({event:a.literal("transcriptEvent")}),a.object({event:a.literal("audioStart"),conversationId:a.string()}),a.object({event:a.literal("audio"),audio:a.string()}),a.object({event:a.literal("audioStartFailed"),reason:XT}),a.object({event:a.literal("audioTimeRemaining"),seconds:a.number()}),a.object({event:a.literal("callTerminated"),reason:a.string().optional()}),a.object({event:a.literal("audioEnd")}),a.object({event:a.literal("callEnded"),id:a.string()}),a.object({event:a.literal("audioConfig"),options:jW}),a.object({event:a.literal("interruptAudio")}),a.object({event:a.literal("speechEndDetected")}),a.object({event:a.literal("citation"),messageId:a.string(),url:a.string(),title:a.string(),partId:a.string(),iconUrl:a.string().nullable(),publisher:a.string().nullable(),snippet:a.string().nullish()}),a.object({event:a.literal("chainOfThought"),messageId:a.string(),partId:a.string(),text:a.string()}),a.object({event:a.literal("turnLimitReached"),id:a.string()}),a.object({event:a.literal("done"),messageId:a.string()}),a.object({event:a.literal("error"),errorCode:PW}),a.object({event:a.literal("card"),messageId:a.string(),partId:a.string(),card:NT}),a.object({event:a.literal("document"),messageId:a.string(),partId:a.string(),attachmentId:a.string(),fileName:a.string(),contentType:a.string()}),a.object({event:a.literal("callUI"),id:a.string(),callUI:IW}),a.object({event:a.literal("callUIUpdate"),id:a.string(),update:_f}),a.object({event:a.literal("banned"),expiresAt:a.string()}),a.object({id:a.string(),event:a.literal("suggestedFollowups"),messageId:a.string(),suggestions:a.array(a.string())}),a.object({event:a.literal("taskStart"),id:a.string(),messageId:a.string(),partId:a.string(),task:WT}),a.object({event:a.literal("taskUpdate"),id:a.string().nullish(),taskId:a.string(),update:_f}),a.object({event:a.literal("startSuggestion"),id:a.string(),pageId:a.string(),suggestionId:a.string(),editTargets:a.array(a.object({startIndex:a.number(),endIndex:a.number()}))}),a.object({event:a.literal("appendSuggestion"),id:a.string(),pageId:a.string(),suggestionId:a.string(),text:a.string()}),a.object({event:a.literal("characterAnimation"),id:a.string(),offsetInMilliseconds:a.number().nullable().optional(),frame:a.discriminatedUnion("model",[uD,dD]).nullable().optional()}),a.object({event:a.literal("characterAnimationEnd"),messageId:a.string()}),a.object({event:a.literal("setCallType"),callType:G2}),a.object({event:a.literal("callTypeChanged"),callType:G2}),a.object({event:a.literal("activityStart"),activity:MI,id:a.string(),messageId:a.string(),partId:a.string()}),a.object({event:a.literal("activityUpdate"),id:a.string(),messageId:a.string(),partId:a.string(),update:_f}),a.object({event:a.literal("memorySignal"),messageId:a.string(),partId:a.string(),text:a.string(),signalType:a.union([a.literal("remember"),a.literal("forget")]).nullish()}),a.object({event:a.literal("sideBySideComparison"),id:a.string(),conversationId:a.string(),sideBySideComparisonId:a.string(),defaultMessageId:a.string(),options:a.array(a.object({messageId:a.string(),position:a.union([a.literal("left"),a.literal("right")])}))}),a.object({event:a.literal("characterEmotion"),emotion:a.string(),bodyReaction:a.string()}),a.object({event:a.literal("modeSelected"),id:a.string(),messageId:a.string(),mode:a.union([a.literal("chat"),a.literal("reasoning")])}),a.object({event:a.literal("partCompleted"),id:a.string(),messageId:a.string(),partId:a.string()}),a.object({event:a.literal("characterAppearance"),body:a.object({primaryColor:a.string().nullable(),secondaryColor:a.string().nullable(),leftAccentColor:a.string().nullable(),rightAccentColor:a.string().nullable(),colorParticles:a.string().nullable().optional(),shape:a.string().nullable().optional()}),props:a.object({hat:a.string().nullable().optional(),glasses:a.string().nullable().optional(),accessory:a.string().nullable().optional()}).optional(),id:a.string()}),a.object({event:a.literal("browserAutomate"),messageId:a.string(),partId:a.string(),tabIds:a.array(a.number()),activeTabId:a.number().optional()}),a.object({event:a.literal("relatedSearchResultsAvailable"),messageId:a.string()})]),eE={kNotPresent:0,kAccepted:1},i0e={kNoError:0,kUnknownError:1,kNoConsent:2,kBlockedByDlp:3,kNotSupportedError:4,kNetworkError:5,kNoVideoTranscript:6,kNoWebContents:7,kNoDocumentHelper:8},c0e={kNotYetDetermined:0,kWeb:1,kVideoTranscript:4};function l0e(e){return typeof e=="object"&&e!==null&&"eventName"in e&&"requestId"in e&&(!("isOutgoing"in e)||!e.isOutgoing)&&"args"in e}const wt=k(void 0),iu=k(e=>e(wt)!==void 0),tE=Do({key:eI,schema:a.string().optional(),initialValue:void 0}),nE=k(e=>{const t=e(wt),n=e(tE);return t===void 0?n:t.firstName??t.givenName}),sE=k(e=>{var t;return(t=e(wt))==null?void 0:t.id}),cu=k(void 0),u0e=k(e=>e(Xm).find(t=>t.id===e(cu))),d0e=k(e=>{var s,o;const t=e(Xm),n=e(cu)??((s=t[0])==null?void 0:s.id);return(o=t.find(r=>r.id===n))==null?void 0:o.voicemails}),OW=Do({key:_2,schema:W2,initialValue:St(_2,W2)??Kl}),ro=Do({key:T2,schema:j2,initialValue:St(T2,j2)??void 0}),DW=Do({key:Lj,schema:a.boolean().optional(),initialValue:void 0}),oE=k(null),lu=k(null),aE=k(e=>e(d0).find(t=>t.id===e(lu))),m0e=k(!1),p0e=k(eE.kNotPresent),f0e=k(eE.kNotPresent),rE=k(void 0),H0=k(!1),ap=k(void 0),UW=k(!1),iE=k(void 0),FW=k(!1),BW=k(!1),cE=k(void 0),VW=k(void 0),rp=k(null),uu=k(null),HW=k(!0),h0e=k(!1),g0e=k(!1),Ra=k(e=>{const t=e(wt),n=e(oo("cmc-m365-sku")),s=!!(t!=null&&t.isPro),o=(t==null?void 0:t.subscriptions)??[];return n?o.some(r=>r.tier==="pro"):s}),zW=k(e=>{var t;return(t=e(wt))==null?void 0:t.isStudent}),lE=k(e=>{var t;return(t=e(wt))==null?void 0:t.inEeaPlusRegion}),sn=k(void 0),WW=k(!1);k(e=>{const t=e(sn);return t&&jR.includes(t)});const uE=k(void 0),z0=k(e=>{var t;return((t=e(wt))==null?void 0:t.isEligibleForFreeTrial)??!1}),dE=k(void 0),nc=k(e=>{var t;return((t=e(wt))==null?void 0:t.ageGroup)==="teen"}),b0e=k(e=>{var t;return(t=e(wt))==null?void 0:t.allowedToggles.browserActions}),v0e=k(e=>{var t;return(t=e(wt))==null?void 0:t.allowedToggles.computerUseActions}),GW=k(e=>{var t;return(t=e(wt))==null?void 0:t.allowedToggles.personalization}),$W=k(e=>{var t;return(t=e(wt))==null?void 0:t.allowedToggles.textTraining}),qW=k(e=>{var t;return(t=e(wt))==null?void 0:t.allowedToggles.voiceTraining}),mE=k(!1),pE=k(null),W0=k(e=>{var t;return((t=e(wt))==null?void 0:t.subscriptions)??[]}),sc=k(e=>{const t=e(W0);return iD(t)[0]}),KW=k(null),G0=k(null);k(e=>{var t;return((t=e(wt))==null?void 0:t.accountTier)??null});const ZW=k(e=>{var s;if(!e(oo("cmc-m365-sku")))return!1;const n=(s=e(sc))==null?void 0:s.tier;return n!==void 0&&_I.includes(n)}),YW=k(e=>{var s;if(!e(oo("cmc-m365-sku"))){const o=e(wt);return!!(o!=null&&o.isPro)}const n=(s=e(sc))==null?void 0:s.tier;return n!==void 0&&y0.includes(n)});k(e=>{const t=e(ZW),n=e(YW);return t||n});function fE(e,t,n){return n!==void 0?n:t&&!e}function Gt(){const e=_(uE),t=_(Sr),n=!!_(xt);return fE(t,n,e)}function Ml(){const e=De(),t=e.get(uE),n=e.get(Sr),s=!!e.get(xt);return fE(n,s,t)}const $0="shouldPerformUserMerge";function QW(e){wa($0,String(e))}function JW(){Yj($0)}function XW(){return ko($0)!=="false"}function y0e(){const e=_(ao),t=Gt(),[n,s]=Ee(yj),o=D("user-conversation-merge"),r=o&&!t&&e.length>0;return d.useEffect(()=>{o&&QW(n)},[o,n]),{shouldShowMergeCheckbox:r,shouldMerge:n,setShouldMerge:s}}const Ya={UNDEFINED:"0",CHILD:"1",ADULT:"3",NOT_ADULT:"4",CHILD_NO_PARENTAL_CONSENT_REQUIRED:"5"},eG=a.object({name:a.string(),email:a.string(),ageGroup:a.enum([Ya.UNDEFINED,Ya.CHILD,Ya.ADULT,Ya.NOT_ADULT,Ya.CHILD_NO_PARENTAL_CONSENT_REQUIRED]),sub:a.string()}),vn={LOGIN_START:"auth0:loginStart",LOGIN_SUCCESS:"auth0:loginSuccess",LOGIN_FAILURE:"auth0:loginFailure",LOGOUT_SUCCESS:"auth0:logoutSuccess",LOGOUT_FAILURE:"auth0:logoutFailure",ACQUIRE_TOKEN_START:"auth0:acquireTokenStart",ACQUIRE_TOKEN_FAILURE:"auth0:acquireTokenFailure",REAUTH_START:"auth0:reauthStart",REAUTH_SUCCESS:"auth0:reauthSuccess",INITIALIZE_START:"auth0:initializeStart",INITIALIZE_END:"auth0:initializeEnd",ACQUIRE_TOKEN_OVERALL_SUCCESS:"auth0:acquireTokenOverallSuccess",ACQUIRE_TOKEN_OVERALL_FAILURE:"auth0:acquireTokenOverallFailure",ACQUIRE_TOKEN_TIMEOUT:"auth0:acquireTokenTimeout"},Js={ACQUIRE_TOKEN_OVERALL_SUCCESS:"msal:acquireTokenOverallSuccess",ACQUIRE_TOKEN_OVERALL_FAILURE:"msal:acquireTokenOverallFailure",ACQUIRE_TOKEN_TIMEOUT:"msal:acquireTokenTimeout",INTERACTION_IN_PROGRESS:"msal:interactionInProgress",REAUTH_ACQUIRETOKENREDIRECT_START:"msal:reauthAcquireTokenRedirectStart",REAUTH_ACQUIRETOKENREDIRECT_SUCCESS:"msal:reauthAcquireTokenRedirectSuccess",REAUTH_POPUP_SHOW:"msal:reauthPopupShow",RETRIEVE_LOGIN_WITH_LOGIN_HINT_START:"msal:retrieveLoginWithLoginHintStart",RETRIEVE_LOGIN_WITH_LOGIN_HINT_SUCCESS:"msal:retrieveLoginWithLoginHintSuccess"};function ot(e,t){De().set(e,t)}const tG=["token-retry-max-2-auth0","token-retry-max-2"],nG=1e4,sG=1e4;function yg(){return St(og,a.boolean().nullable())===!0}function oG(){return St(ag,a.boolean().nullable())===!0}function aG(){return St(cg,a.boolean().nullable())===!0}function rG(){return St(rg,a.boolean().nullable())===!0}function iG(){return St(ig,a.boolean().nullable())===!0}function cG(){return St(lg,a.boolean().nullable())===!0}function hE(e,t="all"){const n=d.useRef(e),s=d.useMemo(()=>{const o=n.current.map(oo);return k(r=>t==="all"?o.every(c=>r(c)):o.some(c=>r(c)))},[t]);return _(s)}function q0(e,t="all"){return t==="all"?e.every(n=>ce(n)):e.some(n=>ce(n))}function gE(){const e={initialDelayMs:100,maxDelayMs:500,backoffFactor:2};return q0(tG,"any")?{...e,maxRetries:2}:{...e,maxRetries:0}}const bE={connectorConsentFlowStartUrl:a.string(),parsedPayflowEntryPoint:a.enum(sI),payflowAuthHint:a.string(),payflowCorrelationId:a.string(),payflowInstanceId:a.string(),payflowRequiresPremium:a.string(),reauthAcquireTokenStartTime:a.string(),retrieveLoginWithLoginHintStartTime:a.string(),shouldStartSubscription:a.boolean(),"sticky-conversation-mode":qT};function Zs(e,t){try{return bE[e].parse(t),sessionStorage.setItem(e,JSON.stringify(t)),!0}catch{return!1}}function Ys(e){const t=sessionStorage.getItem(e);if(!t)return null;try{const n=JSON.parse(t);return bE[e].parse(n)}catch{return null}}function Cg(e){sessionStorage.removeItem(e)}async function lG(e){var s;const t=(s=e.body)==null?void 0:s.getReader();if(!t)return 0;let n=0;try{const o=performance.now();for(;performance.now()-o<2e3;){const{value:r,done:c}=await t.read();if(c)break;n+=r.byteLength}return n}catch{return 0}}function et(){return KS({select:t=>t.pathname})}const vE=k(null),yE=k(!1);function du(){const e=et(),t=_(vE),n=_(yE),s=D("labs-portrait-enabled")&&e.startsWith("/labs/portrait"),o=s&&t,r=o?t.id:void 0,c=o&&!n?t.voiceId:void 0;return{isPortraitEnabled:s,portraitId:r,portraitVoiceId:c}}const CE=["character-animation-spda2e","character-animation-vasa","tv-lumi"];function xE(){const{isPortraitEnabled:e}=du();return hE(CE,"any")&&!e}function uG(){const e=_(ro);return xE()&&!!e}function hs(){const e=De().get(ro);return q0(CE,"any")&&!!e}function td(e){return kI.includes(e)}const dG="/static/cmc/assets/meshopt_decoder-3Kt66jYv.js",zt=class zt{static async loadLibraries(){const[t,,n]=await Promise.all([P(()=>import("./index-DNw7SDtx.js").then(s=>s.c),__vite__mapDeps([2,3,4,0,1,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245])),P(()=>import("./index-CrTE8OQE.js").then(s=>s.b),__vite__mapDeps([246,247,0,1,3,4,18,6,7,24,248,249,119,15,25,42,250,251,190,64,21,16,17,252,144,253,202,254,255,256,257,201,23,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,9,10,11,280,281,282,283,66,67,284,285,286,287,288])),P(()=>import("./math.scalar.functions-C0i4R8fp.js").then(s=>s.f),[])]);t.MeshoptCompression.Configuration={decoder:{url:dG}},t.Logger.LogLevels=t.Logger.NoneLogLevel,zt.Core=t,zt.Math=n,zt.isInitialized=!0}static async loadViewerLibraries(){const t=await P(()=>import("./index-2j2srYFv.js"),__vite__mapDeps([289,0,1,14,3,4,8,62,290,248]));zt.Viewer=t}static async loadDebugLibraries(){await zt.loadLibraries(),await P(()=>import("./babylon.inspector.bundle-BnSFz7_u.js").then(t=>t.b),__vite__mapDeps([291,1,292,2,3,4,0,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,293,290,247,248,249,246,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,294,295,296]))}static isLoaded(){return zt.isInitialized}static getCore(){return zt.throwIfNotInitialized("Core"),zt.Core}static getMath(){return zt.throwIfNotInitialized("Core"),zt.Math}static getViewer(){return zt.throwIfNotInitialized("Viewer"),zt.Viewer}static throwIfNotInitialized(t){if(!zt.isInitialized)throw new Error(`Libraries ${t} are not loaded yet. Call loadLibraries first.`)}};N(zt,"Core"),N(zt,"Math"),N(zt,"Viewer"),N(zt,"isInitialized",!1);let os=zt;function C0e(e){const t=e.split(/[\\/]/),n=t.pop();return{basePath:`${t.join("/")}/`,fileName:n??""}}function x0e(e,t){M.trackEvent({name:"interaction",data:{eventName:"characterAnimation",eventInfo_characterAnimationState:e,eventInfo_characterId:t}})}function S0e(e,t){const{Texture:n}=os.getCore();return new Promise((s,o)=>{const r=new n(e,t,!1,!1,1,()=>{s(r)},o)})}function w0e(e){const{Vector3:t}=os.getCore();return new t(e[0],e[1]??0,e[2]??0)}function I0e(e){return Math.max(...e)-Math.min(...e)}function T0e(e){return e*Math.PI/180}function q2(e){const{Clamp:t}=os.getMath();return t(e,0,1)}function mG(e,t,n){return Math.abs(e-t)>n?t:e}function E0e(e,t,n=.01,s=.2){const{MoveTowards:o}=os.getMath();return o(e,mG(e,t,n),s)}let K2;function jc(...e){K2===void 0&&(K2=ce("babylon-debug"))}class pG{constructor(){N(this,"resourceObserver");N(this,"entries",[]);N(this,"keyword",null);this.resourceObserver=new PerformanceObserver(t=>{this.handleResources(t)})}trackStart(t){this.keyword=t,this.resourceObserver.observe({type:"resource",buffered:!1})}trackEnd(){const{entries:t}=this,n=t[t.length-1];return this.resourceObserver.disconnect(),this.entries=[],this.keyword=null,n?{name:n.name,duration:Math.round(n.duration)}:null}handleResources(t){if(this.keyword)for(const n of t.getEntries())n.name.includes(this.keyword)&&this.entries.push(n)}}class fG{constructor(t=!0){N(this,"interactTime",0);N(this,"voiceChatToggledTime",0);N(this,"speechEndDetectedTime",0);N(this,"startMessageTime",0);N(this,"mountedTime",0);N(this,"libsLoadedTime",0);N(this,"sceneInitializedTime",0);N(this,"interactSource","");N(this,"currentConversationId","");N(this,"currentMessageId","");N(this,"visualizerEnabled",!1);N(this,"loadedEnd",!1);N(this,"voiceChatToggledOn",!1);N(this,"resourceMonitor",new pG);N(this,"isFirstTime",!1);N(this,"isVoiceCall");N(this,"resetLoading",()=>{jc("%c[] -> resetAppearanceEvent"),this.interactTime=0,this.visualizerEnabled=!1,this.loadedEnd=!1});N(this,"isAvailable",()=>this.isVoiceCall?hs()&&this.voiceChatToggledOn&&this.interactTime>0:hs()&&this.mountedTime>0);N(this,"trackLoadingEvent",t=>{if(!this.isAvailable())return;const{eventName:n,duration:s,characterId:o,networkDuration:r}=t;if(o&&!td(o))return;const l=["voiceChatToggled","appearanceVisible","appearanceLoadingComplete"].includes(n);M.trackEvent({name:"system",data:{eventName:n,eventInfo_duration:Math.round(s),eventInfo_conversationId:this.currentConversationId,eventInfo_firstTime:this.isFirstTime,eventInfo_characterId:o,eventInfo_trigger:l?this.interactSource:void 0,eventInfo_networkDuration:r,eventInfo_customData:JSON.stringify({isVoiceCall:this.isVoiceCall})}}),jc(`%c[] -> ${n} : `,"color: #691dc6",Math.round(s),this.isFirstTime?"firstTime":"",o?`characterId: ${o}`:"",`isVoiceCall: ${this.isVoiceCall===!0}`)});N(this,"onUserInteract",t=>{this.resetLoading(),this.interactTime=performance.now(),this.interactSource=t,jc("%c[] -> onUserInteract","color: #222222")});N(this,"onVoiceChatToggled",(t,n)=>{if(t==="end")this.voiceChatToggledOn=!1,this.speechEndDetectedTime=0,this.resourceMonitor.trackEnd();else{this.voiceChatToggledOn=!0,this.voiceChatToggledTime=performance.now(),this.currentConversationId=n??"";const s=this.voiceChatToggledTime-this.interactTime;this.trackLoadingEvent({eventName:"voiceChatToggled",duration:s})}});N(this,"onMounted",()=>{this.mountedTime=performance.now();let t;this.isVoiceCall?t=this.mountedTime-this.voiceChatToggledTime:(this.interactTime=this.mountedTime,t=0),this.trackLoadingEvent({eventName:"appearanceMounted",duration:t})});N(this,"onUnmounted",()=>{this.resourceMonitor.trackEnd()});N(this,"onBabylonLibrariesLoaded",t=>{if(!td(t))return;this.libsLoadedTime=performance.now();const n=this.libsLoadedTime-this.mountedTime;this.trackLoadingEvent({eventName:"appearanceBabylonLoaded",duration:n,characterId:t})});N(this,"onSceneInitializationStart",t=>{td(t)&&this.resourceMonitor.trackStart(".glb")});N(this,"onSceneInitialized",t=>{if(!td(t))return;this.sceneInitializedTime=performance.now();const n=this.sceneInitializedTime-this.libsLoadedTime,s=this.resourceMonitor.trackEnd();jc("%c[] -> monitorResult : ","color: #5bb173",s),this.trackLoadingEvent({eventName:"appearanceSceneInitialized",duration:n,characterId:t,networkDuration:s?s.duration:void 0}),this.trackLoadingEvent({eventName:"appearanceLoadingComplete",duration:this.sceneInitializedTime-this.interactTime,characterId:t}),this.loadedEnd=!0,this.checkEnd()});N(this,"onVisualizerEnabled",()=>{if(this.visualizerEnabled)return;this.visualizerEnabled=!0;const t=Math.round(performance.now()-this.interactTime);this.trackLoadingEvent({eventName:"appearanceVisible",duration:t}),this.checkEnd()});N(this,"checkEnd",()=>{this.visualizerEnabled&&this.loadedEnd&&this.resetLoading()});N(this,"onStartMessage",(t,n)=>{this.currentMessageId=t,this.startMessageTime=n});N(this,"onSpeechEndDetected",t=>{this.speechEndDetectedTime=t});N(this,"onAnimationStart",()=>{const t=Math.round(performance.now()-(this.speechEndDetectedTime||this.startMessageTime));M.trackEvent({name:"system",data:{eventName:"copilotAnimationStart",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:t}}),jc("%c[] -> onAnimationStart : ","color: #691dc6",Math.round(t))});this.isVoiceCall=t,this.isFirstTime=!Mt(jj)}}const kf=new Map,hG=(e=!0)=>(kf.has(e)||kf.set(e,new fG(e)),kf.get(e)),om=hG(!0),gG=1e3;function SE(e){(e.source==="audioCallButton"||e.source==="characterTalkToggleButton"||e.source==="AppearanceTryNowModal")&&om.onUserInteract(e.source)}function yt(e){M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:e.source,eventInfo_clickScenario:e.scenario,eventInfo_clickDestination:e.destination,eventInfo_conversationId:e.conversationId,eventInfo_podcastId:e.podcastId,eventInfo_messageId:e.messageId,eventInfo_mode:e.chatMode,eventInfo_messageType:e.messageType,eventInfo_cardType:e.cardType,eventInfo_merchantPlatform:e.merchantPlatform,eventInfo_additionalData:e.additionalData?JSON.stringify(e.additionalData):void 0}}),SE(e)}function Se(e){M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_pageName:e.pageName,eventInfo_sectionName:e.sectionName,eventInfo_clickSource:e.source,eventInfo_clickScenario:e.scenario,eventInfo_clickDestination:e.destination,eventInfo_conversationId:e.conversationId,eventInfo_customData:e.customData}}),SE(e)}function _s(e){M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionScenario:e.scenario,eventInfo_impressionPage:e.page,eventInfo_impressionElement:e.element,eventInfo_status:e.status,eventInfo_customData:e.customData}})}function Xs(e){M.trackEvent({name:"health",data:{eventName:"copilotFeatureSuccess",eventInfo_feature:e.feature,eventInfo_scenario:e.scenario,eventInfo_duration:e.duration,eventInfo_customData:e.customData}})}function Nt(e){M.trackEvent({name:"health",data:{eventName:"copilotError",eventInfo_feature:e.feature,eventInfo_scenario:e.scenario,eventInfo_errorType:e.errorType,eventInfo_errorMessage:e.errorMessage,eventInfo_exception:e.exception,eventInfo_customData:e.customData}})}function bG(e){M.trackEvent({name:"interaction",data:{eventName:"copilotSettingChange",eventInfo_settingName:e.settingName,eventInfo_settingOldValue:e.oldValue,eventInfo_settingNewValue:e.newValue}})}function A0e(e,t=gG){let n;function s(){n=window.setTimeout(()=>{e()},t)}function o(){window.clearTimeout(n)}return{onHoverStart:s,onHoverEnd:o}}function wE(e,t,n,s){setTimeout(async()=>{try{const{status:o}=s,r=await lG(s),c=s.headers.get("x-ceto-ref")??"";M.trackEvent({name:"apiresponse",data:{eventName:"copilotApiResponse",eventInfo_path:e,eventInfo_method:t,eventInfo_status:o,eventInfo_duration:n,eventInfo_responseContentLength:r,eventInfo_cetoRef:c}})}catch{}},0)}function Z2(){performance.mark("userSession-end",{startTime:performance.now()});const{duration:e}=performance.measure("userSession-duration","startupTime-begin","userSession-end");M.trackEvent({name:"system",data:{eventName:"copilotExitEvent",eventInfo_duration:e}})}function vG(e,t,n){M.trackEvent({name:"interaction",data:{eventName:"copilotComposerInput",eventInfo_conversationId:e,eventInfo_inputMethod:t,eventInfo_customData:n}})}function yG(e){M.trackEvent({name:"interaction",data:{eventName:"copilotScroll",eventInfo_ScrollSource:e.scrollSource,eventInfo_ScrollStartX:e.scrollStartX,eventInfo_ScrollStartY:e.scrollStartY,eventInfo_ScrollEndX:e.scrollEndX,eventInfo_ScrollEndY:e.scrollEndY,eventInfo_ScrollDuration:e.scrollDuration,eventInfo_userInitiated:e.userInitiated,eventInfo_customData:e.customData}})}const xg="authInitStartTime";function IE(e,t){if(Ml()){const s=De().get(xt),o=s==null?void 0:s.accountType;Nt({feature:"api",scenario:t,errorType:"missingToken",errorMessage:`User is authenticated but no token was available for ${t==="getWssAPIUrl"?"WebSocket connection":"API request"}`,customData:JSON.stringify({path:e,accountType:o})})}}function TE(e,t){const s=De().get(xt),o=s==null?void 0:s.accountType,r=s==null?void 0:s.provider,c=s==null?void 0:s.tenantId;o||Nt({feature:"api",scenario:t,errorType:"emptyAccountTypeWithToken",errorMessage:`Can get the token but with no user account type ${t==="getWssAPIUrl"?"WebSocket connection":"API request"}`,customData:JSON.stringify({path:e,provider:r,tenantId:c})})}function EE(e){const{providerType:t,apiName:n,extraInfo:s}=e,o=Date.now().toString();wa(xg,o),M.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:n,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_providerType:t,...s})}})}function AE(e){const{providerType:t,apiName:n,extraInfo:s}=e,o=Date.now(),r=ko(xg);if(r){const c=parseFloat(r),l=o-c;sessionStorage.removeItem(xg),M.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:n,eventInfo_success:!0,eventInfo_duration:l,eventInfo_customData:JSON.stringify({eventInfo_providerType:t,...s})}})}}function _E(e){const{authWorkflowAccountType:t,interactionType:n,correlationId:s,prompt:o,redirectUri:r,apiName:c,extraInfo:l}=e,u=Date.now().toString();tn(ng,u),M.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:c,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_interactionType:n??"",eventInfo_correlationId:s??"",eventInfo_prompt:o??"",eventInfo_redirectUri:r??"",...l})}})}function Sg(e){const{authWorkflowAccountType:t,isMSA:n,authority:s,correlationId:o,interactionType:r,apiName:c,extraInfo:l}=e,u=Date.now(),m=Mt(ng);let p;if(m){const f=parseFloat(m);p=u-f,ct(ng)}M.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:c,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_interactionType:r,eventInfo_correlationId:o,eventInfo_authority:s,eventInfo_isMSA:n??!1,...l}),eventInfo_duration:p??0}})}function kE(e){const{providerType:t,apiName:n,extraInfo:s}=e;M.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_customData:JSON.stringify({eventInfo_providerType:t,...s})}})}function An(e){const{authWorkflowAccountType:t,apiName:n,duration:s,extraInfo:o}=e;M.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_duration:s??0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_wasInBackground:Z0(),...o})}})}function Mo(e){const{authWorkflowAccountType:t,apiName:n,errorMessage:s,errorType:o,errorExtraInfo:r,errorCode:c,extraInfo:l}=e;M.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!1,eventInfo_apiName:n,eventInfo_errorType:o,eventInfo_errorMessage:s,eventInfo_errorCode:c,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_wasInBackground:Z0(),...l,...r})}})}function Nf(e){const{authWorkflowAccountType:t,apiName:n}=e;tn(sg,"1"),M.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t})}})}function wg(e){const{authWorkflowAccountType:t,apiName:n,duration:s}=e,o=Mt(sg);o==="1"&&ct(sg),o==="1"&&M.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_duration:s??0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t})}})}function K0(e,t){return{eventInfo_requestType:t,eventInfo_retryAttemptCount:e.attemptCount,eventInfo_retryStartTime:e.startTime,eventInfo_retryEndDelay:e.endTime,eventInfo_retryDelayTimings:e.delayTimings.join(","),eventInfo_allErrors:JSON.stringify(e.errors),eventInfo_wasInBackground:Z0()}}function NE(e,t,n){An({authWorkflowAccountType:n,apiName:n==="microsoft"?Js.ACQUIRE_TOKEN_OVERALL_SUCCESS:vn.ACQUIRE_TOKEN_OVERALL_SUCCESS,extraInfo:K0(e,t)})}function ME(e,t,n){const s=K0(e,t),o=e.errors[e.errors.length-1];Mo({authWorkflowAccountType:n,apiName:n==="microsoft"?Js.ACQUIRE_TOKEN_OVERALL_FAILURE:vn.ACQUIRE_TOKEN_OVERALL_FAILURE,errorType:(o==null?void 0:o.errorType)??"unknown",errorMessage:(o==null?void 0:o.errorMessage)??"unknown error",extraInfo:{...s,eventInfo_exitReason:e.exitReason}})}function RE(e,t,n){const s=K0(e,t);Mo({authWorkflowAccountType:n,apiName:n==="microsoft"?Js.ACQUIRE_TOKEN_TIMEOUT:vn.ACQUIRE_TOKEN_TIMEOUT,errorType:"RequestTimeoutError",errorMessage:`Token acquisition timed out on attempt ${e.attemptCount}`,extraInfo:{...s,eventInfo_totalDuration:e.endTime-e.startTime}})}function CG(e){const t=e instanceof Error?e.message:String(e);M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"GraphAPITimeout",eventInfo_errorMessage:t,eventInfo_details:"Student status check failed or timed out"}})}function Z0(){return typeof document<"u"&&document.visibilityState==="hidden"}function Y2(){const e=Ys("reauthAcquireTokenStartTime"),t=Date.now();if(e){const n=t-parseInt(e,10);Zs("reauthAcquireTokenStartTime",""),An({apiName:Js.REAUTH_ACQUIRETOKENREDIRECT_SUCCESS,authWorkflowAccountType:"microsoft",extraInfo:{eventInfo_duration:n}})}}function xG(e){An({apiName:Js.REAUTH_POPUP_SHOW,authWorkflowAccountType:"microsoft",extraInfo:{eventInfo_errorMessage:e}})}function SG(){Zs("retrieveLoginWithLoginHintStartTime",Date.now().toString()),An({apiName:Js.RETRIEVE_LOGIN_WITH_LOGIN_HINT_START,authWorkflowAccountType:"microsoft"})}function wG(){const e=Ys("retrieveLoginWithLoginHintStartTime"),t=Date.now();if(e){const n=t-parseInt(e,10);Zs("retrieveLoginWithLoginHintStartTime",""),An({apiName:Js.RETRIEVE_LOGIN_WITH_LOGIN_HINT_SUCCESS,authWorkflowAccountType:"microsoft",extraInfo:{eventInfo_duration:n}})}}var Fl,la,Ei,So;class Pr{constructor(t,n){gt(this,Fl);gt(this,la,null);gt(this,Ei);gt(this,So,null);nt(this,Fl,t),nt(this,Ei,n)}async get(t){return(Y(this,So)===null||Y(this,Ei)&&(!Y(this,la)||Y(this,la)<Date.now()-Y(this,Ei)))&&(nt(this,So,Y(this,Fl).call(this,t)),nt(this,la,Date.now())),Y(this,So)}set(t){nt(this,So,t),nt(this,la,Date.now())}reset(){nt(this,So,null),nt(this,la,null)}get isInstantiated(){return Y(this,So)!==null}}Fl=new WeakMap,la=new WeakMap,Ei=new WeakMap,So=new WeakMap;function ip(e){return new Promise(t=>{setTimeout(t,e)})}class mu extends Error{constructor(n,s){super(s??`Request timed out after ${n}ms`);N(this,"name","RequestTimeoutError");N(this,"timeoutMs");this.timeoutMs=n,Object.setPrototypeOf(this,mu.prototype)}}async function IG(e,t){const n=new AbortController,s=setTimeout(()=>{n.abort()},t);try{const o=await e(n);return clearTimeout(s),o}catch(o){throw clearTimeout(s),n.signal.aborted||o instanceof Error&&o.name==="AbortError"?new mu(t):o}}async function PE(e,t){let n;const s=new Promise((r,c)=>{n=setTimeout(()=>{c(new mu(t))},t)}),o=e().then(r=>(clearTimeout(n),r)).catch(r=>{throw clearTimeout(n),r});return Promise.race([o,s])}function TG(e){return e instanceof mu}const EG={maxRetries:2,initialDelayMs:100,maxDelayMs:500,backoffFactor:2,jitterFactor:.1};function AG(e){return e instanceof Error?{errorType:e.name,errorMessage:e.message}:{errorType:"Unknown",errorMessage:String(e)}}function _G(e,t,n,s){const o=e.maxDurationMs!==void 0&&s>=e.maxDurationMs;return n>e.maxRetries?{shouldExit:!0,exitReason:"maxRetriesReached"}:o?{shouldExit:!0,exitReason:"maxDurationReached"}:e.shouldRetry&&!e.shouldRetry(t)?{shouldExit:!0,exitReason:"shouldRetryFalse"}:{shouldExit:!1,exitReason:null}}function kG(e,t){const n=t.jitterFactor?e*t.jitterFactor*(Math.random()*2-1):0,s=e+n;return Math.min(Math.max(s,0),t.maxDelayMs)}async function cp(e,t={}){var u,m,p,f;const n={...EG,...t},s=performance.now();let o=n.initialDelayMs,r=0;const c=[],l=[];for(let h=0;h<=n.maxRetries;h+=1)try{const g=await e(),y=performance.now();return(u=n.onSuccess)==null||u.call(n,{attemptCount:h+1,delayTimings:l,startTime:s,endTime:y,errors:c}),g}catch(g){r=h+1,c.push(AG(g));const y=performance.now(),b=TG(g);if(b&&n.onTimeout&&n.onTimeout({attemptCount:h+1,delayTimings:l,startTime:s,endTime:y,errors:c}),h===n.maxRetries)throw(m=n.onFailure)==null||m.call(n,{attemptCount:h+1,delayTimings:l,startTime:s,endTime:y,errors:c,exitReason:b?"requestTimeout":"maxRetriesReached"}),g;const x=y-s,{shouldExit:v,exitReason:S}=_G(n,g,r,x);if(v)throw(p=n.onFailure)==null||p.call(n,{attemptCount:h+1,delayTimings:l,startTime:s,endTime:y,errors:c,exitReason:S}),g;let C=kG(o,n);if(n.maxDurationMs!==void 0){const A=n.maxDurationMs-x;if(A<=0)throw(f=n.onFailure)==null||f.call(n,{attemptCount:h+1,delayTimings:l,startTime:s,endTime:y,errors:c,exitReason:"maxDurationReached"}),g;C=Math.min(C,A)}const T=performance.now();await ip(C);const I=performance.now()-T;l.push(I),o=Math.min(o*n.backoffFactor,n.maxDelayMs)}throw new Error("Unexpected end of retry loop")}const Yn=new Pr(NG);async function NG(){EE({apiName:vn.INITIALIZE_START,providerType:"auth0"});const e=await h9(HL);AE({apiName:vn.INITIALIZE_END,providerType:"auth0"});const t=new Map([["on",null],["off",null],["cache-only",null]]);async function n(r,c){const l=performance.now();An({authWorkflowAccountType:c,apiName:vn.ACQUIRE_TOKEN_START});const u=iG();try{if(!u){const g=await e.getTokenSilently(r),y=performance.now();return Xs({feature:"auth0SdkUsage",scenario:"getAuth0AccessToken",duration:y-l,customData:JSON.stringify({cacheMode:r.cacheMode??"on"})}),g}const p={...gE(),shouldRetry:g=>!(g instanceof wy&&g.error==="login_required"),onSuccess:g=>NE(g,"graph",c??"google"),onFailure:g=>ME(g,"graph",c??"google"),onTimeout:g=>RE(g,"graph",c??"google")},f=await cp(()=>PE(()=>e.getTokenSilently(r),sG),p),h=performance.now();return Xs({feature:"auth0SdkUsage",scenario:"getAuth0AccessToken",duration:h-l,customData:JSON.stringify({cacheMode:r.cacheMode??"on"})}),f}catch(m){m instanceof wy?(o({options:r,startTime:l,authWorkflowAccountType:c,errorType:m.error,errorMessage:m.error_description,exception:m.stack}),m.error==="login_required"&&ot(Hs,{reason:"token-expired",provider:"auth0"})):m instanceof Error?o({options:r,startTime:l,authWorkflowAccountType:c,errorType:m.name,errorMessage:m.message,exception:m.stack}):o({options:r,startTime:l,authWorkflowAccountType:c,errorType:"unknown",errorMessage:`${m}`});return}}async function s(r){const c=await e.getUser();if(!c)return;const l=c.sub&&c.sub.startsWith("google")?"google":"apple",u=r.cacheMode??"on",m=t.get(u);if(!m){const p=n(r,l);t.set(u,p);const f=await p;return t.set(u,null),f}return m}function o(r){const{startTime:c,options:l,authWorkflowAccountType:u,errorType:m,errorMessage:p,exception:f}=r;Mo({authWorkflowAccountType:u,apiName:vn.ACQUIRE_TOKEN_FAILURE,errorType:m,errorMessage:p,errorExtraInfo:{eventInfo_providerType:"auth0",eventInfo_exception:f??"",cacheMode:l.cacheMode??"on",duration:performance.now()-c}})}return{auth0:e,getAuth0AccessToken:s}}function Y0(e){const t=e.split(".")[1];if(t===void 0)return;const n=t.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(n).split("").map(o=>`%${`00${o.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));try{const o=JSON.parse(s);return eG.parse(o)}catch{return}}async function MG(e,t){const{getAuth0AccessToken:n}=await Yn.get(),{authorizationParams:s}=vl,o={...s,dob:e,ctry:t},r=await n({authorizationParams:o,cacheMode:"off"});if(!r)return;const c=Y0(r);if(c)return c}async function RG(){const{getAuth0AccessToken:e}=await Yn.get(),t=await e(vl);if(!t)return;const n=Y0(t);if(n){if(n.sub.startsWith("google"))return"Google";if(n.sub.startsWith("apple"))return"Apple"}}function PG(e){switch(e){case"apple":return"Apple";case"google":return"Google";case"msa":return"MSA";default:return}}const Sd=new BroadcastChannel("cp.broadcast");class LG{constructor(){N(this,"hasTrackedRedirectError",!1);N(this,"CODE_RE",/[?&]code=[^&]+/);N(this,"STATE_RE",/[?&]state=[^&]+/);N(this,"ERROR_RE",/[?&]error=[^&]+/)}async handleRedirect(){try{const{auth0:t}=await Yn.get();if(!this.hasAuthParams())return null;const n=performance.now();await t.handleRedirectCallback();const s=performance.now();Xs({feature:"auth0SdkUsage",scenario:"handleRedirect",duration:s-n});const o=await t.getUser();if(!o)return null;const r=o.sub?this.getTokenType(o.sub):void 0;return Sg({apiName:vn.LOGIN_SUCCESS,authWorkflowAccountType:r}),wg({apiName:vn.REAUTH_SUCCESS,authWorkflowAccountType:r}),Sd.postMessage({eventName:"auth0.accountAdded"}),{id:o.sub,tenantId:crypto.randomUUID(),provider:"auth0",accountType:this.getAccountType(o.sub)}}catch(t){this.trackRedirectErrorOncePerSession(t)}return null}async handleRedirectWithoutAccount(){try{const{auth0:t}=await Yn.get();if(this.hasAuthParams()){const n=performance.now();await t.handleRedirectCallback();const s=performance.now();Xs({feature:"auth0SdkUsage",scenario:"handleRedirect",duration:s-n});const o=await t.getUser();if(!o)return;const r=o.sub?this.getTokenType(o.sub):void 0;Sg({apiName:vn.LOGIN_SUCCESS,authWorkflowAccountType:r}),Sd.postMessage({eventName:"auth0.accountAdded"})}}catch(t){this.trackRedirectErrorOncePerSession(t)}}async getCurrentActiveUserAccount(){const{auth0:t}=await Yn.get(),n=await t.getUser();if(!n)return null;const{sub:s}=n;return s?{id:s,tenantId:crypto.randomUUID(),provider:"auth0",accountType:this.getAccountType(s)}:null}async maybeInitializeAccountWithToken(){const{auth0:t,getAuth0AccessToken:n}=await Yn.get(),s=await n(vl);if(!s)return null;const o=await t.getUser();if(!o)return null;const r=o.sub;return{userAccount:{id:r,tenantId:crypto.randomUUID(),provider:"auth0",accountType:this.getAccountType(r)},authToken:{accessToken:s,tokenType:this.getTokenType(r)}}}async logIn(t){const{connection:n}=t;if(!n)throw new Error("connection in LoginOpts are required");const{auth0:s}=await Yn.get();return _E({apiName:vn.LOGIN_START,authWorkflowAccountType:t.connection??void 0}),s.loginWithRedirect({authorizationParams:{...zL.authorizationParams,connection:this.getConnectionFromTokenType(n)}})}async logOut(){const{auth0:t}=await Yn.get(),n=await t.getUser(),s=n&&n.sub?this.getTokenType(n.sub):void 0;try{await t.logout({logoutParams:{returnTo:window.location.origin}}),Sd.postMessage({eventName:"auth0.accountRemoved"}),kE({apiName:vn.LOGOUT_SUCCESS,providerType:"auth0"})}catch(o){Mo({authWorkflowAccountType:s,apiName:vn.LOGOUT_FAILURE,errorMessage:`${o}`,errorExtraInfo:{eventInfo_providerType:"auth0"}}),console.error("Auth0 logout failed:",o)}}async getAuthToken(){try{const{auth0:t,getAuth0AccessToken:n}=await Yn.get(),s=await n(vl);if(!s)return;const o=await t.getUser();if(o){const r=o.sub,c=this.getTokenType(r);return{accessToken:s,tokenType:c}}}catch{return}}async getUserInfo(){const{auth0:t}=await Yn.get(),n=await t.getUser();if(n)return{mail:n.email??"",givenName:n.given_name??"",surname:n.surname??"",imgSrc:n.picture,isStudent:!1}}async getUserInfoFromToken(t){const n=Y0(t);if(!n)return;const{email:s,name:o}=n;return{mail:s,givenName:o.split(" ")[0]??"",surname:"",imgSrc:"",isStudent:!1}}supportsTokenType(t){return t==="apple"||t==="google"}getTokenType(t){return t.startsWith("google")?"google":"apple"}getAccountType(t){return t.startsWith("google")?"Google":"Apple"}getConnectionFromTokenType(t){return t==="apple"?"apple":"google-oauth2"}hasAuthParams(t=window.location.search){return(this.CODE_RE.test(t)||this.ERROR_RE.test(t))&&this.STATE_RE.test(t)}trackRedirectErrorOncePerSession(t){this.hasTrackedRedirectError||(M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"auth0HandleRedirectPromise",eventInfo_details:"Error handling redirect promise",eventInfo_errorMessage:`${t}`}}),Mo({apiName:vn.LOGIN_FAILURE,errorExtraInfo:{eventInfo_providerType:"auth0"},errorMessage:`${t}`})),this.hasTrackedRedirectError=!0}}var Ig=function(e,t){return Ig=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},Ig(e,t)};function _0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ig(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Q2=function(){return Q2=Object.assign||function(t){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Q2.apply(this,arguments)};function k0e(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]]);return n}function ut(e,t,n,s){function o(r){return r instanceof n?r:new n(function(c){c(r)})}return new(n||(n=Promise))(function(r,c){function l(p){try{m(s.next(p))}catch(f){c(f)}}function u(p){try{m(s.throw(p))}catch(f){c(f)}}function m(p){p.done?r(p.value):o(p.value).then(l,u)}m((s=s.apply(e,t||[])).next())})}function N0e(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,o,r,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=l(0),c.throw=l(1),c.return=l(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(m){return function(p){return u([m,p])}}function u(m){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(s=1,o&&(r=m[0]&2?o.return:m[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,m[1])).done)return r;switch(o=0,r&&(m=[m[0]&2,r.value]),m[0]){case 0:case 1:r=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,o=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!r||m[1]>r[0]&&m[1]<r[3])){n.label=m[1];break}if(m[0]===6&&n.label<r[1]){n.label=r[1],r=m;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(m);break}r[2]&&n.ops.pop(),n.trys.pop();continue}m=t.call(e,n)}catch(p){m=[6,p],o=0}finally{s=r=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function M0e(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function R0e(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),o,r=[],c;try{for(;(t===void 0||t-- >0)&&!(o=s.next()).done;)r.push(o.value)}catch(l){c={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(c)throw c.error}}return r}function P0e(e,t,n){if(n||arguments.length===2)for(var s=0,o=t.length,r;s<o;s++)(r||!(s in t))&&(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}var jn;(function(e){e.GET="GET",e.PATCH="PATCH",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"})(jn||(jn={}));const jG="v1.0",OG="https://graph.microsoft.com/",DG=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"]);class hr extends Error{static setGraphClientError(t){let n;return t instanceof Error?n=t:(n=new hr,n.customError=t),n}constructor(t){super(t),Object.setPrototypeOf(this,hr.prototype)}}const UG=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"],FG=e=>{const t=r=>r.replace(/\/+$/,""),n=r=>r.replace(/^\/+/,""),s=(r,c)=>[t(r),n(c)].join("/");return Array.prototype.slice.call(e).reduce(s)},Mf=e=>{const t=e&&e.constructor&&e.constructor.name;if(t==="Buffer"||t==="Blob"||t==="File"||t==="FormData"||typeof e=="string")return e;if(t==="ArrayBuffer")e=Buffer.from(e);else if(t==="Int8Array"||t==="Int16Array"||t==="Int32Array"||t==="Uint8Array"||t==="Uint16Array"||t==="Uint32Array"||t==="Uint8ClampedArray"||t==="Float32Array"||t==="Float64Array"||t==="DataView")e=Buffer.from(e.buffer);else try{e=JSON.stringify(e)}catch{throw new Error("Unable to stringify the content")}return e},LE=e=>OE(e),jE=(e,t)=>(t.forEach(n=>BG(n)),OE(e,t)),OE=(e,t=DG)=>{if(e=e.toLowerCase(),e.indexOf("https://")!==-1){e=e.replace("https://","");const n=e.indexOf(":"),s=e.indexOf("/");let o="";if(s!==-1)return n!==-1&&n<s?(o=e.substring(0,n),t.has(o)):(o=e.substring(0,s),t.has(o))}return!1},BG=e=>{if(e.indexOf("/")!==-1)throw new hr("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")};class gr{constructor(t=[]){this.middlewareOptions=new Map;for(const n of t){const s=n.constructor;this.middlewareOptions.set(s,n)}}getMiddlewareOptions(t){return this.middlewareOptions.get(t)}setMiddlewareOptions(t,n){this.middlewareOptions.set(t,n)}}const VG=()=>{let e="";for(let t=0;t<32;t++)(t===8||t===12||t===16||t===20)&&(e+="-"),e+=Math.floor(Math.random()*16).toString(16);return e},DE=(e,t,n)=>{let s=null;if(typeof Request<"u"&&e instanceof Request)s=e.headers.get(n);else if(typeof t<"u"&&t.headers!==void 0)if(typeof Headers<"u"&&t.headers instanceof Headers)s=t.headers.get(n);else if(t.headers instanceof Array){const o=t.headers;for(let r=0,c=o.length;r<c;r++)if(o[r][0]===n){s=o[r][1];break}}else t.headers[n]!==void 0&&(s=t.headers[n]);return s},UE=(e,t,n,s)=>{if(typeof Request<"u"&&e instanceof Request)e.headers.set(n,s);else if(typeof t<"u")if(t.headers===void 0)t.headers=new Headers({[n]:s});else if(typeof Headers<"u"&&t.headers instanceof Headers)t.headers.set(n,s);else if(t.headers instanceof Array){let o=0;const r=t.headers.length;for(;o<r;o++){const c=t.headers[o];if(c[0]===n){c[1]=s;break}}o===r&&t.headers.push([n,s])}else Object.assign(t.headers,{[n]:s})},FE=(e,t,n,s)=>{typeof Request<"u"&&e instanceof Request?e.headers.append(n,s):typeof t<"u"&&(t.headers===void 0?t.headers=new Headers({[n]:s}):typeof Headers<"u"&&t.headers instanceof Headers?t.headers.append(n,s):t.headers instanceof Array?t.headers.push([n,s]):t.headers===void 0?t.headers={[n]:s}:t.headers[n]===void 0?t.headers[n]=s:t.headers[n]+=`, ${s}`)},HG=(e,t)=>ut(void 0,void 0,void 0,function*(){const n=t.headers.get("Content-Type")?yield t.blob():yield Promise.resolve(void 0),{method:s,headers:o,referrer:r,referrerPolicy:c,mode:l,credentials:u,cache:m,redirect:p,integrity:f,keepalive:h,signal:g}=t;return new Request(e,{method:s,headers:o,body:n,referrer:r,referrerPolicy:c,mode:l,credentials:u,cache:m,redirect:p,integrity:f,keepalive:h,signal:g})});class zG{constructor(t,n){this.authenticationProvider=t,this.authenticationProviderOptions=n}}var Wi;(function(e){e[e.NONE=0]="NONE",e[e.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",e[e.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",e[e.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(Wi||(Wi={}));class ba{constructor(){this.featureUsage=Wi.NONE}static updateFeatureUsageFlag(t,n){let s;t.middlewareControl instanceof gr?s=t.middlewareControl.getMiddlewareOptions(ba):t.middlewareControl=new gr,typeof s>"u"&&(s=new ba,t.middlewareControl.setMiddlewareOptions(ba,s)),s.setFeatureUsage(n)}setFeatureUsage(t){this.featureUsage=this.featureUsage|t}getFeatureUsage(){return this.featureUsage.toString(16)}}class Rl{constructor(t){this.authenticationProvider=t}execute(t){return ut(this,void 0,void 0,function*(){const n=typeof t.request=="string"?t.request:t.request.url;if(LE(n)||t.customHosts&&jE(n,t.customHosts)){let s;t.middlewareControl instanceof gr&&(s=t.middlewareControl.getMiddlewareOptions(zG));let o,r;s&&(o=s.authenticationProvider,r=s.authenticationProviderOptions),o||(o=this.authenticationProvider);const l=`Bearer ${yield o.getAccessToken(r)}`;FE(t.request,t.options,Rl.AUTHORIZATION_HEADER,l),ba.updateFeatureUsageFlag(t,Wi.AUTHENTICATION_HANDLER_ENABLED)}else t.options.headers&&delete t.options.headers[Rl.AUTHORIZATION_HEADER];return yield this.nextMiddleware.execute(t)})}setNext(t){this.nextMiddleware=t}}Rl.AUTHORIZATION_HEADER="Authorization";class WG{execute(t){return ut(this,void 0,void 0,function*(){t.response=yield fetch(t.request,t.options)})}}class At{constructor(t=At.DEFAULT_DELAY,n=At.DEFAULT_MAX_RETRIES,s=At.defaultShouldRetry){if(t>At.MAX_DELAY&&n>At.MAX_MAX_RETRIES){const o=new Error(`Delay and MaxRetries should not be more than ${At.MAX_DELAY} and ${At.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(t>At.MAX_DELAY){const o=new Error(`Delay should not be more than ${At.MAX_DELAY}`);throw o.name="MaxLimitExceeded",o}else if(n>At.MAX_MAX_RETRIES){const o=new Error(`MaxRetries should not be more than ${At.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(t<0&&n<0){const o=new Error("Delay and MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}else if(t<0){const o=new Error("Delay should not be negative");throw o.name="MinExpectationNotMet",o}else if(n<0){const o=new Error("MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}this.delay=Math.min(t,At.MAX_DELAY),this.maxRetries=Math.min(n,At.MAX_MAX_RETRIES),this.shouldRetry=s}getMaxDelay(){return At.MAX_DELAY}}At.DEFAULT_DELAY=3;At.DEFAULT_MAX_RETRIES=3;At.MAX_DELAY=180;At.MAX_MAX_RETRIES=10;At.defaultShouldRetry=()=>!0;class va{constructor(t=new At){this.options=t}isRetry(t){return va.RETRY_STATUS_CODES.indexOf(t.status)!==-1}isBuffered(t,n){const s=typeof t=="string"?n.method:t.method;return!((s===jn.PUT||s===jn.PATCH||s===jn.POST)&&DE(t,n,"Content-Type")==="application/octet-stream")}getDelay(t,n,s){const o=()=>Number(Math.random().toFixed(3)),r=t.headers!==void 0?t.headers.get(va.RETRY_AFTER_HEADER):null;let c;return r!==null?Number.isNaN(Number(r))?c=Math.round((new Date(r).getTime()-Date.now())/1e3):c=Number(r):c=n>=2?this.getExponentialBackOffTime(n)+s+o():s+o(),Math.min(c,this.options.getMaxDelay()+o())}getExponentialBackOffTime(t){return Math.round(1/2*(Math.pow(2,t)-1))}sleep(t){return ut(this,void 0,void 0,function*(){const n=t*1e3;return new Promise(s=>setTimeout(s,n))})}getOptions(t){let n;return t.middlewareControl instanceof gr&&(n=t.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof n>"u"&&(n=Object.assign(new At,this.options)),n}executeWithRetry(t,n,s){return ut(this,void 0,void 0,function*(){if(yield this.nextMiddleware.execute(t),n<s.maxRetries&&this.isRetry(t.response)&&this.isBuffered(t.request,t.options)&&s.shouldRetry(s.delay,n,t.request,t.options,t.response)){++n,UE(t.request,t.options,va.RETRY_ATTEMPT_HEADER,n.toString());const o=this.getDelay(t.response,n,s.delay);return yield this.sleep(o),yield this.executeWithRetry(t,n,s)}else return})}execute(t){return ut(this,void 0,void 0,function*(){const s=this.getOptions(t);return ba.updateFeatureUsageFlag(t,Wi.RETRY_HANDLER_ENABLED),yield this.executeWithRetry(t,0,s)})}setNext(t){this.nextMiddleware=t}}va.RETRY_STATUS_CODES=[429,503,504];va.RETRY_ATTEMPT_HEADER="Retry-Attempt";va.RETRY_AFTER_HEADER="Retry-After";class es{constructor(t=es.DEFAULT_MAX_REDIRECTS,n=es.defaultShouldRedirect){if(t>es.MAX_MAX_REDIRECTS){const s=new Error(`MaxRedirects should not be more than ${es.MAX_MAX_REDIRECTS}`);throw s.name="MaxLimitExceeded",s}if(t<0){const s=new Error("MaxRedirects should not be negative");throw s.name="MinExpectationNotMet",s}this.maxRedirects=t,this.shouldRedirect=n}}es.DEFAULT_MAX_REDIRECTS=5;es.MAX_MAX_REDIRECTS=20;es.defaultShouldRedirect=()=>!0;class Dn{constructor(t=new es){this.options=t}isRedirect(t){return Dn.REDIRECT_STATUS_CODES.indexOf(t.status)!==-1}hasLocationHeader(t){return t.headers.has(Dn.LOCATION_HEADER)}getLocationHeader(t){return t.headers.get(Dn.LOCATION_HEADER)}isRelativeURL(t){return t.indexOf("://")===-1}shouldDropAuthorizationHeader(t,n){const s=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,o=s.exec(t);let r,c;o!==null&&(r=o[0]);const l=s.exec(n);return l!==null&&(c=l[0]),typeof r<"u"&&typeof c<"u"&&r!==c}updateRequestUrl(t,n){return ut(this,void 0,void 0,function*(){n.request=typeof n.request=="string"?t:yield HG(t,n.request)})}getOptions(t){let n;return t.middlewareControl instanceof gr&&(n=t.middlewareControl.getMiddlewareOptions(es)),typeof n>"u"&&(n=Object.assign(new es,this.options)),n}executeWithRedirect(t,n,s){return ut(this,void 0,void 0,function*(){yield this.nextMiddleware.execute(t);const o=t.response;if(n<s.maxRedirects&&this.isRedirect(o)&&this.hasLocationHeader(o)&&s.shouldRedirect(o)){if(++n,o.status===Dn.STATUS_CODE_SEE_OTHER)t.options.method=jn.GET,delete t.options.body;else{const r=this.getLocationHeader(o);!this.isRelativeURL(r)&&this.shouldDropAuthorizationHeader(o.url,r)&&delete t.options.headers[Dn.AUTHORIZATION_HEADER],yield this.updateRequestUrl(r,t)}yield this.executeWithRedirect(t,n,s)}else return})}execute(t){return ut(this,void 0,void 0,function*(){const s=this.getOptions(t);return t.options.redirect=Dn.MANUAL_REDIRECT,ba.updateFeatureUsageFlag(t,Wi.REDIRECT_HANDLER_ENABLED),yield this.executeWithRedirect(t,0,s)})}setNext(t){this.nextMiddleware=t}}Dn.REDIRECT_STATUS_CODES=[301,302,303,307,308];Dn.STATUS_CODE_SEE_OTHER=303;Dn.LOCATION_HEADER="Location";Dn.AUTHORIZATION_HEADER="Authorization";Dn.MANUAL_REDIRECT="manual";const GG="3.0.7";class On{execute(t){return ut(this,void 0,void 0,function*(){const n=typeof t.request=="string"?t.request:t.request.url;if(LE(n)||t.customHosts&&jE(n,t.customHosts)){let s=DE(t.request,t.options,On.CLIENT_REQUEST_ID_HEADER);s||(s=VG(),UE(t.request,t.options,On.CLIENT_REQUEST_ID_HEADER,s));let o=`${On.PRODUCT_NAME}/${GG}`,r;if(t.middlewareControl instanceof gr&&(r=t.middlewareControl.getMiddlewareOptions(ba)),r){const c=r.getFeatureUsage();o+=` (${On.FEATURE_USAGE_STRING}=${c})`}FE(t.request,t.options,On.SDK_VERSION_HEADER,o)}else delete t.options.headers[On.CLIENT_REQUEST_ID_HEADER],delete t.options.headers[On.SDK_VERSION_HEADER];return yield this.nextMiddleware.execute(t)})}setNext(t){this.nextMiddleware=t}}On.CLIENT_REQUEST_ID_HEADER="client-request-id";On.SDK_VERSION_HEADER="SdkVersion";On.PRODUCT_NAME="graph-js";On.FEATURE_USAGE_STRING="featureUsage";function $G(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var J2;(function(e){e[e.MANUAL=0]="MANUAL",e[e.RANDOM=1]="RANDOM"})(J2||(J2={}));var Fs;(function(e){e.ARRAYBUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.RAW="raw",e.STREAM="stream",e.TEXT="text"})(Fs||(Fs={}));var Tg;(function(e){e.TEXT_HTML="text/html",e.TEXT_XML="text/xml",e.APPLICATION_XML="application/xml",e.APPLICATION_XHTML="application/xhtml+xml"})(Tg||(Tg={}));var am;(function(e){e.TEXT_PLAIN="text/plain",e.APPLICATION_JSON="application/json"})(am||(am={}));var rm;(function(e){e.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",e.IMAGE="^image\\/.+"})(rm||(rm={}));class rl{static parseDocumentResponse(t,n){return typeof DOMParser<"u"?new Promise((s,o)=>{t.text().then(r=>{try{const l=new DOMParser().parseFromString(r,n);s(l)}catch(c){o(c)}})}):Promise.resolve(t.body)}static convertResponse(t,n){return ut(this,void 0,void 0,function*(){if(t.status===204)return Promise.resolve();let s;const o=t.headers.get("Content-type");switch(n){case Fs.ARRAYBUFFER:s=yield t.arrayBuffer();break;case Fs.BLOB:s=yield t.blob();break;case Fs.DOCUMENT:s=yield rl.parseDocumentResponse(t,Tg.TEXT_XML);break;case Fs.JSON:s=yield t.json();break;case Fs.STREAM:s=yield Promise.resolve(t.body);break;case Fs.TEXT:s=yield t.text();break;default:if(o!==null){const r=o.split(";")[0];new RegExp(rm.DOCUMENT).test(r)?s=yield rl.parseDocumentResponse(t,r):new RegExp(rm.IMAGE).test(r)?s=t.blob():r===am.TEXT_PLAIN?s=yield t.text():r===am.APPLICATION_JSON?s=yield t.json():s=Promise.resolve(t.body)}else s=Promise.resolve(t.body);break}return s})}static getResponse(t,n,s){return ut(this,void 0,void 0,function*(){if(n===Fs.RAW)return Promise.resolve(t);{const o=yield rl.convertResponse(t,n);if(t.ok)if(typeof s=="function")s(null,o);else return o;else throw o}})}}class qG{constructor(t){this.provider=t}getAccessToken(){return ut(this,void 0,void 0,function*(){return new Promise((t,n)=>{this.provider((s,o)=>ut(this,void 0,void 0,function*(){if(o)t(o);else{if(!s){const c="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md";s=new hr(c)}const r=yield hr.setGraphClientError(s);n(r)}}))})})}}class il extends Error{constructor(t=-1,n,s){super(n||s&&s.message),Object.setPrototypeOf(this,il.prototype),this.statusCode=t,this.code=null,this.requestId=null,this.date=new Date,this.body=null,this.stack=s?s.stack:this.stack}}class im{static constructError(t,n,s){const o=new il(n,"",t);return t.name!==void 0&&(o.code=t.name),o.body=t.toString(),o.date=new Date,o.headers=s==null?void 0:s.headers,o}static constructErrorFromResponse(t,n,s){const o=t.error,r=new il(n,o.message);return r.code=o.code,o.innerError!==void 0&&(r.requestId=o.innerError["request-id"],r.date=new Date(o.innerError.date)),r.body=JSON.stringify(o),r.headers=s==null?void 0:s.headers,r}static getError(t=null,n=-1,s,o){return ut(this,void 0,void 0,function*(){let r;if(t&&t.error?r=im.constructErrorFromResponse(t,n,o):t instanceof Error?r=im.constructError(t,n,o):(r=new il(n),r.body=t),typeof s=="function")s(r,null);else return r})}}class KG{constructor(t,n,s){this.parsePath=o=>{if(o.indexOf("https://")!==-1){o=o.replace("https://","");const c=o.indexOf("/");c!==-1&&(this.urlComponents.host="https://"+o.substring(0,c),o=o.substring(c+1,o.length));const l=o.indexOf("/");l!==-1&&(this.urlComponents.version=o.substring(0,l),o=o.substring(l+1,o.length))}o.charAt(0)==="/"&&(o=o.substr(1));const r=o.indexOf("?");if(r===-1)this.urlComponents.path=o;else{this.urlComponents.path=o.substr(0,r);const c=o.substring(r+1,o.length).split("&");for(const l of c)this.parseQueryParameter(l)}},this.httpClient=t,this.config=n,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(s)}addCsvQueryParameter(t,n,s){this.urlComponents.oDataQueryParams[t]=this.urlComponents.oDataQueryParams[t]?this.urlComponents.oDataQueryParams[t]+",":"";let o=[];s.length>1&&typeof n=="string"?o=Array.prototype.slice.call(s):typeof n=="string"?o.push(n):o=o.concat(n),this.urlComponents.oDataQueryParams[t]+=o.join(",")}buildFullUrl(){const t=FG([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(t),t}createQueryString(){const t=this.urlComponents,n=[];if(Object.keys(t.oDataQueryParams).length!==0)for(const s in t.oDataQueryParams)Object.prototype.hasOwnProperty.call(t.oDataQueryParams,s)&&n.push(s+"="+t.oDataQueryParams[s]);if(Object.keys(t.otherURLQueryParams).length!==0)for(const s in t.otherURLQueryParams)Object.prototype.hasOwnProperty.call(t.otherURLQueryParams,s)&&n.push(s+"="+t.otherURLQueryParams[s]);if(t.otherURLQueryOptions.length!==0)for(const s of t.otherURLQueryOptions)n.push(s);return n.length>0?"?"+n.join("&"):""}parseQueryParameter(t){if(typeof t=="string")if(t.charAt(0)==="?"&&(t=t.substring(1)),t.indexOf("&")!==-1){const n=t.split("&");for(const s of n)this.parseQueryParamenterString(s)}else this.parseQueryParamenterString(t);else if(t.constructor===Object)for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.setURLComponentsQueryParamater(n,t[n]);return this}parseQueryParamenterString(t){if(this.isValidQueryKeyValuePair(t)){const n=t.indexOf("="),s=t.substring(0,n),o=t.substring(n+1);this.setURLComponentsQueryParamater(s,o)}else this.urlComponents.otherURLQueryOptions.push(t)}setURLComponentsQueryParamater(t,n){if(UG.indexOf(t)!==-1){const s=this.urlComponents.oDataQueryParams[t],o=s&&(t==="$expand"||t==="$select"||t==="$orderby");this.urlComponents.oDataQueryParams[t]=o?s+","+n:n}else this.urlComponents.otherURLQueryParams[t]=n}isValidQueryKeyValuePair(t){const n=t.indexOf("=");return!(n===-1||t.indexOf("(")!==-1&&t.indexOf("(")<n)}updateRequestOptions(t){const n=Object.assign({},t.headers);if(this.config.fetchOptions!==void 0){const s=Object.assign({},this.config.fetchOptions);Object.assign(t,s),typeof this.config.fetchOptions.headers!==void 0&&(t.headers=Object.assign({},this.config.fetchOptions.headers))}Object.assign(t,this._options),t.headers!==void 0&&Object.assign(n,t.headers),Object.assign(n,this._headers),t.headers=n}send(t,n,s){var o;return ut(this,void 0,void 0,function*(){let r;const c=new gr(this._middlewareOptions);this.updateRequestOptions(n);const l=(o=this.config)===null||o===void 0?void 0:o.customHosts;try{return r=(yield this.httpClient.sendRequest({request:t,options:n,middlewareControl:c,customHosts:l})).response,yield rl.getResponse(r,this._responseType,s)}catch(u){if(u instanceof hr)throw u;let m;throw r&&(m=r.status),yield im.getError(u,m,s,r)}})}setHeaderContentType(){if(!this._headers){this.header("Content-Type","application/json");return}const t=Object.keys(this._headers);for(const n of t)if(n.toLowerCase()==="content-type")return;this.header("Content-Type","application/json")}header(t,n){return this._headers[t]=n,this}headers(t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this._headers[n]=t[n]);return this}option(t,n){return this._options[t]=n,this}options(t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this._options[n]=t[n]);return this}middlewareOptions(t){return this._middlewareOptions=t,this}version(t){return this.urlComponents.version=t,this}responseType(t){return this._responseType=t,this}select(t){return this.addCsvQueryParameter("$select",t,arguments),this}expand(t){return this.addCsvQueryParameter("$expand",t,arguments),this}orderby(t){return this.addCsvQueryParameter("$orderby",t,arguments),this}filter(t){return this.urlComponents.oDataQueryParams.$filter=t,this}search(t){return this.urlComponents.oDataQueryParams.$search=t,this}top(t){return this.urlComponents.oDataQueryParams.$top=t,this}skip(t){return this.urlComponents.oDataQueryParams.$skip=t,this}skipToken(t){return this.urlComponents.oDataQueryParams.$skipToken=t,this}count(t=!0){return this.urlComponents.oDataQueryParams.$count=t.toString(),this}query(t){return this.parseQueryParameter(t)}get(t){return ut(this,void 0,void 0,function*(){const n=this.buildFullUrl(),s={method:jn.GET};return yield this.send(n,s,t)})}post(t,n){return ut(this,void 0,void 0,function*(){const s=this.buildFullUrl(),o={method:jn.POST,body:Mf(t)};return(t&&t.constructor&&t.constructor.name)==="FormData"?o.headers={}:(this.setHeaderContentType(),o.headers=this._headers),yield this.send(s,o,n)})}create(t,n){return ut(this,void 0,void 0,function*(){return yield this.post(t,n)})}put(t,n){return ut(this,void 0,void 0,function*(){const s=this.buildFullUrl();this.setHeaderContentType();const o={method:jn.PUT,body:Mf(t)};return yield this.send(s,o,n)})}patch(t,n){return ut(this,void 0,void 0,function*(){const s=this.buildFullUrl();this.setHeaderContentType();const o={method:jn.PATCH,body:Mf(t)};return yield this.send(s,o,n)})}update(t,n){return ut(this,void 0,void 0,function*(){return yield this.patch(t,n)})}delete(t){return ut(this,void 0,void 0,function*(){const n=this.buildFullUrl(),s={method:jn.DELETE};return yield this.send(n,s,t)})}del(t){return ut(this,void 0,void 0,function*(){return yield this.delete(t)})}getStream(t){return ut(this,void 0,void 0,function*(){const n=this.buildFullUrl(),s={method:jn.GET};return this.responseType(Fs.STREAM),yield this.send(n,s,t)})}putStream(t,n){return ut(this,void 0,void 0,function*(){const s=this.buildFullUrl(),o={method:jn.PUT,headers:{"Content-Type":"application/octet-stream"},body:t};return yield this.send(s,o,n)})}}class BE{constructor(...t){if(!t||!t.length){const n=new Error;throw n.name="InvalidMiddlewareChain",n.message="Please provide a default middleware chain or custom middleware chain",n}this.setMiddleware(...t)}setMiddleware(...t){t.length>1?this.parseMiddleWareArray(t):this.middleware=t[0]}parseMiddleWareArray(t){t.forEach((n,s)=>{s<t.length-1&&n.setNext(t[s+1])}),this.middleware=t[0]}sendRequest(t){return ut(this,void 0,void 0,function*(){if(typeof t.request=="string"&&t.options===void 0){const n=new Error;throw n.name="InvalidRequestOptions",n.message="Unable to execute the middleware, Please provide valid options for a request",n}return yield this.middleware.execute(t),t})}}const ZG=()=>typeof process=="object"&&typeof $G=="function";class Q0{static createWithAuthenticationProvider(t){const n=new Rl(t),s=new va(new At),o=new On,r=new WG;if(n.setNext(s),ZG()){const c=new Dn(new es);s.setNext(c),c.setNext(o)}else s.setNext(o);return o.setNext(r),Q0.createWithMiddleware(n)}static createWithMiddleware(...t){return new BE(...t)}}const YG=()=>{if(typeof Promise>"u"&&typeof fetch>"u"){const e=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw e.name="PolyFillNotAvailable",e}else if(typeof Promise>"u"){const e=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}else if(typeof fetch>"u"){const e=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}return!0};class cm{static init(t){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=s==="authProvider"?new qG(t[s]):t[s]);return cm.initWithMiddleware(n)}static initWithMiddleware(t){return new cm(t)}constructor(t){this.config={baseUrl:OG,debugLogging:!1,defaultVersion:jG},YG();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(this.config[s]=t[s]);let n;if(t.authProvider!==void 0&&t.middleware!==void 0){const s=new Error;throw s.name="AmbiguityInInitialization",s.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",s}else if(t.authProvider!==void 0)n=Q0.createWithAuthenticationProvider(t.authProvider);else if(t.middleware!==void 0)n=new BE(...[].concat(t.middleware));else{const s=new Error;throw s.name="InvalidMiddlewareChain",s.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",s}this.httpClient=n}api(t){return new KG(this.httpClient,this.config,t)}}const QG=["CAREERCOACH_STUDENTS","EXCHANGESTANDARD_STUDENT","M365EDU_A3_STUDENT","M365EDU_A3_STUUSEBNFT","M365EDU_A3_STUUSEBNFT_RPA1","M365EDU_A5_STUDENT","M365EDU_A5_STUUSEBNFT","M365EDU_A5_NOPSTNCONF_STUUSEBNFT","OFFICESUBSCRIPTION_STUDENT","ATP_ENTERPRISE_STUDENT","ATP_ENTERPRISE_STUDENTS_USE_BENEFIT","POWER_BI_STANDARD_STUDENT","MCOEV_STUDENT","MEE_STUDENT","STANDARDWOFFPACK_STUDENT","STANDARDWOFFPACK_IW_STUDENT","ENTERPRISEPACKPLUS_STUDENT","ENTERPRISEPREMIUM_STUDENT","WIN10_ENT_A3_STU","MCO_TEAMS_EDU_HS_STUDENT","PROJECT_PROFESSIONAL_STUDENT","PROJECT_P1_STUDENT"];function JG(e){return cm.init({authProvider:t=>{t(null,e)}})}async function Rf(e,t){const n=performance.now(),s=await t;return M.trackEvent({name:"system",data:{eventName:"externalApiResponse",eventInfo_id:e,eventInfo_duration:performance.now()-n,eventInfo_service:"microsoft-graph"}}),s}async function XG(e){return e.api(W1.graphMeApiSuffix).get()}async function e$(e){try{const t=await e.api(W1.graphMeImageApiSuffix).get();return URL.createObjectURL(t)}catch{return}}async function t$(e){const t=ue(Sr);if(ce("aad-student")&&t)try{const n=await e.api(W1.graphMeLicenseDetails).get();return n&&n.value.some(o=>o.skuPartNumber&&QG.includes(o.skuPartNumber))}catch(n){return console.error("Error checking student status:",n),!1}else return!1}async function X2(e){const t=JG(e),[n,s,o]=await Promise.all([Rf("user",XG(t)),Rf("user_photo",e$(t)),Rf("is_student",t$(t))]);return{...n,imgSrc:s,isStudent:o}}class n${supportsNaa(){return!1}supportsPwBBroker(){return!1}async handleInteractionRequiredError(t,n,s){var o;ot(xt,null),ot(Hs,{reason:"token-expired",provider:"microsoft",loginHint:(o=n.account)==null?void 0:o.username,errorMessage:s})}}class s$ extends n${supportsPwBBroker(){return Z.instance().config().useMSALPwBApp??!1}async instantiateMsal(){let t,n,s;const o=St(Xd,a.string());if(aG()&&!(o!=null&&o.startsWith("3."))){const u=(await P(()=>import("./index-CDyqqyTx.js"),[])).default;window.msal=u;const{PublicClientApplication:m,PairwiseBrokerApplication:p}=u;t=m,n=p,s=OL}else{const l=await P(()=>import("./vendor-Dmlf5KxN.js").then(p=>p.av),__vite__mapDeps([0,1]));window.msal=l;const{PublicClientApplication:u,PairwiseBrokerApplication:m}=l;t=u,n=m,s=DL}const r=this.supportsPwBBroker();EE({apiName:window.msal.EventType.INITIALIZE_START,providerType:"microsoft",extraInfo:{eventInfo_isPwB:r}});let c;return r?(c=new n(s,GL,h2),await c.initialize(),await c.initializeBrokering()):c=await t.createPublicClientApplication(s,h2),AE({apiName:window.msal.EventType.INITIALIZE_END,providerType:"microsoft",extraInfo:{eventInfo_isPwB:r}}),c}}const o$=new Pr(a$);async function a$(){return new s$}function r$(e){return!(e instanceof window.msal.InteractionRequiredAuthError||e instanceof window.msal.AuthError&&(e.errorMessage===gw||parseInt(e.errorCode,10)===j1))}const bn=new Pr(i$);async function i$(){const e=await o$.get(),t=await e.instantiateMsal(),n=new Map([["login",null],["graph",null],["oneDrive",null]]);async function s(r,c){var p,f;const l=WL(r),u={account:c,...l},m=rG();try{if(!m)return{accessToken:(await t.acquireTokenSilent(u)).accessToken};const g={...gE(),shouldRetry:b=>r$(b),onSuccess:b=>NE(b,r,"microsoft"),onFailure:b=>ME(b,r,"microsoft"),onTimeout:b=>RE(b,r,"microsoft")};return await cp(async()=>PE(async()=>({accessToken:(await t.acquireTokenSilent(u)).accessToken}),nG),g)}catch(h){if(h instanceof window.msal.InteractionRequiredAuthError)return M.trackEvent({name:"system",data:{eventName:"copilotWebAcquireTokenRedirect",eventInfo_requestType:r,eventInfo_traceId:h.traceId,eventInfo_errorMessage:h.errorMessage,eventInfo_errorCode:h.errorCode,eventInfo_correlationId:h.correlationId,eventInfo_timeSinceStartMs:performance.now()-window.appStart}}),cG()&&(Zs("reauthAcquireTokenStartTime",Date.now().toString()),An({apiName:Js.REAUTH_ACQUIRETOKENREDIRECT_START,authWorkflowAccountType:"microsoft",extraInfo:{eventInfo_errorMessage:h.errorMessage,eventInfo_correlationId:h.correlationId}}),await t.acquireTokenRedirect({...Ql,loginHint:(f=(p=u.account)==null?void 0:p.idTokenClaims)==null?void 0:f.login_hint,account:u.account,prompt:void 0})),e.handleInteractionRequiredError(t,u,h.errorMessage);if(h instanceof window.msal.AuthError&&(h.errorMessage===gw||parseInt(h.errorCode,10)===j1))throw M.trackEvent({name:"system",data:{eventName:"copilotWebAcquireTokenUnderaged",eventInfo_requestType:r,eventInfo_errorMessage:h.errorMessage,eventInfo_errorCode:h.errorCode,eventInfo_correlationId:h.correlationId}}),new Error(O1);return}}return{msal:t,getMsalAccessToken:async r=>{const c=t.getActiveAccount();if(!c&&!e.supportsNaa())return;const l=n.get(r);if(!l){const u=s(r,c??void 0);n.set(r,u);const m=await u;return n.set(r,null),m}return l}}}function c$(e){var n;const t=(n=e.payload)==null?void 0:n.scopes;return Array.isArray(t)?t.some(s=>typeof s!="string"?!1:s==="ConsumerStore.Purchase"||s.endsWith("purchase.create")):!1}function l$(e){var n,s;const t=c$(e);if(e.eventType===window.msal.EventType.LOGIN_START){const o=e.payload;_E({apiName:window.msal.EventType.LOGIN_START,authWorkflowAccountType:"microsoft",interactionType:e.interactionType??void 0,correlationId:o.correlationId,prompt:o.prompt,redirectUri:o.redirectUri,extraInfo:{eventInfo_isBrokered:t}})}else if(e.eventType===window.msal.EventType.LOGIN_SUCCESS||e.eventType===window.msal.EventType.SSO_SILENT_SUCCESS){const o=e.payload&&"account"in e.payload?e.payload.account:null,r=o?!ys(o.tenantId):void 0,c=e.payload,l=(n=o==null?void 0:o.idTokenClaims)==null?void 0:n.login_hint;l&&Xt(wo,a.string(),l),Sg({apiName:e.eventType,authWorkflowAccountType:"microsoft",interactionType:e.interactionType??void 0,correlationId:c.correlationId,authority:c.authority,isMSA:r,extraInfo:{eventInfo_isBrokered:t}})}else if(e.eventType===window.msal.EventType.LOGOUT_SUCCESS)St(wo,a.string())&&ct(wo),St(Xd,a.string())&&ct(Xd),kE({apiName:window.msal.EventType.LOGOUT_SUCCESS,providerType:"microsoft",extraInfo:{eventInfo_isBrokered:t}});else if(e.eventType===window.msal.EventType.ACQUIRE_TOKEN_START||e.eventType===window.msal.EventType.ACQUIRE_TOKEN_NETWORK_START){wa("msalAcquireTokenStartTime",Date.now().toString());const o=e.payload;An({authWorkflowAccountType:"microsoft",apiName:e.eventType,extraInfo:{eventInfo_interactionType:e.interactionType??void 0,eventInfo_correlationId:o.correlationId,eventInfo_redirectUri:o.redirectUri,eventInfo_cacheLookupPolicy:o.cacheLookupPolicy,eventInfo_prompt:o.prompt,eventInfo_isBrokered:t}})}else if(e.eventType===window.msal.EventType.ACQUIRE_TOKEN_SUCCESS){const o=Date.now()-parseInt(ko("msalAcquireTokenStartTime")??"0",10);wa("msalAcquireTokenStartTime","");const r=e.payload,{account:c}=r,l=(s=c.idTokenClaims)==null?void 0:s.login_hint;l&&Xt(wo,a.string(),l),An({authWorkflowAccountType:"microsoft",apiName:e.eventType,extraInfo:{eventInfo_interactionType:e.interactionType??void 0,eventInfo_correlationId:r.correlationId,eventInfo_expiresOn:r.expiresOn,eventInfo_extExpiresOn:r.extExpiresOn,eventInfo_refreshOn:r.refreshOn,eventInfo_duration:o,eventInfo_fromCache:r.fromCache,eventInfo_isBrokered:t}})}else if(e.eventType===window.msal.EventType.LOGIN_FAILURE||e.eventType===window.msal.EventType.ACQUIRE_TOKEN_FAILURE||e.eventType===window.msal.EventType.SSO_SILENT_FAILURE||e.eventType===window.msal.EventType.ACQUIRE_TOKEN_BY_CODE_FAILURE||e.eventType===window.msal.EventType.LOGOUT_FAILURE){let o;e.eventType===window.msal.EventType.ACQUIRE_TOKEN_FAILURE&&(o=Date.now()-parseInt(ko("msalAcquireTokenStartTime")??"0",10)),e.eventType===window.msal.EventType.LOGIN_FAILURE&&ct(wo);const r=e.error;Mo({authWorkflowAccountType:"microsoft",apiName:e.eventType,errorType:(r==null?void 0:r.name)??"",errorMessage:(r==null?void 0:r.message)??"",extraInfo:{eventInfo_isBrokered:t},errorExtraInfo:{eventInfo_correlationId:r==null?void 0:r.correlationId,eventInfo_errorMessage:r==null?void 0:r.errorMessage,eventInfo_errorCode:r==null?void 0:r.errorCode,eventInfo_name:r==null?void 0:r.name,eventInfo_interactionType:e.interactionType??void 0,eventInfo_subError:r==null?void 0:r.subError,eventInfo_duration:o}})}else An({authWorkflowAccountType:"microsoft",apiName:e.eventType,extraInfo:{eventInfo_interactionType:e.interactionType??void 0,eventInfo_isBrokered:t}})}function ys(e){return e!==Wd}function u$(e){An({apiName:"msal:silentSSOCustomSuccess",authWorkflowAccountType:"microsoft",duration:e.duration,extraInfo:{eventInfo_accountUpdate:e.accountUpdate,eventInfo_accountType:e.accountType,eventInfo_message:e.message}})}function Pf(e){Mo({apiName:"msal:silentSsoCustomError",authWorkflowAccountType:"microsoft",errorMessage:e.message,errorCode:e.errorCode})}class d${constructor(){N(this,"hasTrackedRedirectError",!1);N(this,"isHandlingRedirect",!1)}async handleRedirect(){var t;try{const{msal:n}=await bn.get();this.isHandlingRedirect&&Mo({authWorkflowAccountType:"microsoft",apiName:Js.INTERACTION_IN_PROGRESS,errorType:"interaction_in_progress",errorMessage:"Attempted to call handleRedirectPromise while already handling a redirect"}),this.isHandlingRedirect=!0;try{await n.handleRedirectPromise()&&(Y2(),wg({authWorkflowAccountType:"microsoft",apiName:"msal:reauthSuccess"}));const o=await this.getAccount();return o?(n.setActiveAccount(o),{id:((t=o.idTokenClaims)==null?void 0:t.oid)??"",tenantId:o.tenantId,provider:"microsoft",accountType:ys(o.tenantId)?"AAD":"MSA"}):null}finally{this.isHandlingRedirect=!1}}catch(n){this.trackRedirectErrorOncePerSession(n)}return null}async handleRedirectWithoutAccount(){try{const{msal:t}=await bn.get();this.isHandlingRedirect&&Mo({authWorkflowAccountType:"microsoft",apiName:Js.INTERACTION_IN_PROGRESS,errorType:"interaction_in_progress",errorMessage:"Attempted to call handleRedirectPromise while already handling a redirect"}),this.isHandlingRedirect=!0;try{const n=await t.handleRedirectPromise();n&&(t.setActiveAccount(n.account),wG(),Y2(),wg({authWorkflowAccountType:"microsoft",apiName:"msal:reauthSuccess"}))}finally{this.isHandlingRedirect=!1}}catch(t){this.trackRedirectErrorOncePerSession(t)}}async maybeInitializeAccountWithToken(){var c;const{msal:t}=await bn.get(),n=t.getActiveAccount(),s=t.getAllAccounts(),o=ue(xt);An({authWorkflowAccountType:"microsoft",apiName:"msal:maybeInitializeAccountWithToken",extraInfo:{eventInfo_tenantId:n==null?void 0:n.tenantId,eventInfo_isAadTenant:n!=null&&n.tenantId?ys(n.tenantId):!1,eventInfo_accounts:s.map(l=>({type:ys(l.tenantId)?"AAD":"MSA"})),eventInfo_userAccount:o}});const r=await this.getAuthToken();if(r){const l=await this.getAccount();return l?(t.setActiveAccount(l),{userAccount:{id:((c=l.idTokenClaims)==null?void 0:c.oid)??"",tenantId:l.tenantId,provider:"microsoft",accountType:ys(l.tenantId)?"AAD":"MSA"},authToken:r}):null}return null}async logIn(){const{msal:t}=await bn.get(),n={...Ql};Xt(Xd,a.string(),window.msal.version);const s=this.buildRedirectUri();return s&&(n.redirectUri=s),t.loginRedirect(n)}buildRedirectUri(){const{surfaceQueryParam:t}=Z.instance().config(),n=new URLSearchParams;let s;if(t!=null&&t.useForLoginRedirect)for(const[r,c]of Object.entries(t.params))n.set(r,c);const o=new URLSearchParams(window.location.search).get("back");return o&&n.set("back",o),n.toString()&&(s=`${window.location.origin}?${n}`),s}async logOut(){const{msal:t}=await bn.get(),n=t.getAllAccounts(),s=t.getActiveAccount();try{if(ce("auth-rf-account-selection")){await t.logoutRedirect({account:s,onRedirectNavigate:()=>!1}),M.setPicassoId(null);return}for(const o of n)o.tenantId!==Wd&&(await t.logoutRedirect({account:o,onRedirectNavigate:()=>!1}),M.setPicassoId(null))}catch(o){console.error(o)}await t.logoutRedirect({account:s,onRedirectNavigate:()=>!1}),M.setPicassoId(null)}async getAuthToken(){return(await bn.get()).getMsalAccessToken("login")}async getUserInfo(){const t=await(await bn.get()).getMsalAccessToken("graph");if(t)return X2(t.accessToken)}async getUserInfoFromToken(t){return X2(t)}supportsTokenType(t){return t===void 0}trackRedirectErrorOncePerSession(t){this.hasTrackedRedirectError||M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"msalHandleRedirectPromise",eventInfo_details:"Error handling redirect promise",eventInfo_errorMessage:`${t}`}}),this.hasTrackedRedirectError=!0}async getAccount(){var o;const{msal:t}=await bn.get(),n=t.getAllAccounts(),s=t.getActiveAccount();if((n.length>1||n.length===1&&(s==null?void 0:s.homeAccountId)!==((o=n[0])==null?void 0:o.homeAccountId))&&An({authWorkflowAccountType:"microsoft",apiName:"msal:getAllAccounts",extraInfo:{eventInfo_accountCount:n.length,eventInfo_accountTypes:n.map(r=>ys(r.tenantId)?"AAD":"MSA")}}),n.length!==0){if(ce("auth-rf-account-selection"))return n.length===0?void 0:n.length===1?n[0]:n.length>1&&s?s:void 0;for(const r of n)if(r.tenantId===Wd)return r;return n[0]}}async getCurrentActiveUserAccount(){var n;const t=await this.getAccount();return t?{id:((n=t.idTokenClaims)==null?void 0:n.oid)??"",tenantId:t.tenantId,provider:"microsoft",accountType:ys(t.tenantId)?"AAD":"MSA"}:null}}class Ot{constructor(){N(this,"middlewares",[])}add(t){this.middlewares.push(t)}async run(t){let n={...t};for(const s of this.middlewares)try{n=await s(n)}catch{continue}return n}}const m$=new Ot,eC=new Ot,L0e=new Ot,j0e=new Ot,p$=new Ot,f$=new Ot,h$=new Ot,g$=new Ot,b$=new Ot,v$=new Ot,y$=new Ot,tC=new Ot,O0e=new Ot,C$=new Ot,x$=new Ot,S$=new Ot,w$=new Ot,I$=new Ot,T$=new Ot,VE=new Ot,E$=new Ot;var Ai;const Xa=class Xa{constructor(){N(this,"providers");this.providers={microsoft:new d$,auth0:new LG}}async handleRedirect(){const t=await this.providers.microsoft.handleRedirect();if(t)return t;if(!Z.instance().config().enableAuth0)return null;const n=await this.providers.auth0.handleRedirect();return n||null}async handleRedirectWithoutAccount(){await this.providers.microsoft.handleRedirectWithoutAccount(),Z.instance().config().enableAuth0&&await this.providers.auth0.handleRedirectWithoutAccount()}async getCurrentActiveUserAccountAndSetGlobalUserAccount(){const t=await this.providers.microsoft.getCurrentActiveUserAccount();if(t){this.setUserAccount(t);return}if(!Z.instance().config().enableAuth0)return;const n=await this.providers.auth0.getCurrentActiveUserAccount();n&&this.setUserAccount(n)}static instance(){return Y(Xa,Ai)||nt(Xa,Ai,new Xa),Y(Xa,Ai)}getCurrentProvider(){const t=ue(xt);return t?this.providers[t.provider]:null}async getAccountFromProviders(){var t;return yg()?((t=this.getCurrentProvider())==null?void 0:t.getCurrentActiveUserAccount())??null:this.handleRedirect()}async maybeInitialize(){try{const t=await this.providers.microsoft.maybeInitializeAccountWithToken();if(t)return t;if(!Z.instance().config().enableAuth0)return null;const n=await this.providers.auth0.maybeInitializeAccountWithToken();if(n)return n}catch(t){t instanceof Error&&Nt({feature:"accountInitialization",errorType:t.name,errorMessage:t.message,exception:t.stack})}return null}setUserAccount(t){ot(xt,t),M.setUserAccountType(t==null?void 0:t.accountType)}async getAuthToken(){var s;const t=await eC.run({type:"login"});if(t.isHandled){if(((s=t.authToken)==null?void 0:s.tokenType)!==void 0){const o=PG(t.authToken.tokenType);M.setUserAccountType(o)}return t.authToken}if(yg()){const o=this.getCurrentProvider();return o?o.getAuthToken():void 0}const n=this.getCurrentProvider();if(!n){const o=await this.handleRedirect();if(o)return this.setUserAccount(o),this.providers[o.provider].getAuthToken();const r=await this.maybeInitialize();if(r){const{authToken:c,userAccount:l}=r;return this.setUserAccount(l),c}return}return n.getAuthToken()}async getUserInfo(){const t=await eC.run({type:"graph"});if(t.isHandled){if(!t.authToken)return;const{tokenType:s,accessToken:o}=t.authToken,r=s!=="msa"?s:void 0;if(this.providers.microsoft.supportsTokenType(r))return this.providers.microsoft.getUserInfoFromToken(o);if(this.providers.auth0.supportsTokenType(r)){const c=await this.providers.auth0.getUserInfoFromToken(o);if(c)return c}return}const n=this.getCurrentProvider();if(n)return n.getUserInfo()}logIn(t,n){return this.providers[t].logIn(n)}async logOut(){const t=this.getCurrentProvider();return t&&(await t.logOut(),this.setUserAccount(null)),Promise.resolve()}async initAuthAccount(){await this.handleRedirectWithoutAccount(),await this.getCurrentActiveUserAccountAndSetGlobalUserAccount()}};Ai=new WeakMap,gt(Xa,Ai,null);let Ro=Xa;function HE(){ct(Yh),ct(Bi),ct(Zm)}function A$(){ct(eI),HE()}function zE(e){try{return new URL(e,window.location.origin).origin!==window.location.origin}catch{return!1}}function oc(e){ue(Ma)&&zE(e)?De().set(ep,e.toString()):window.location.href=e}function pu(){WE()}function WE(e){const{surfaceQueryParam:t}=Z.instance().config(),n=new URL(window.location.href);if(e&&(n.pathname=e),t)for(const[s,o]of Object.entries(t.params))n.searchParams.delete(s),n.searchParams.append(s,o);oc(n.href)}function Lr(){const{clearAllSWRCache:e}=vj(),t=$L(),n=async r=>{const{provider:c,opts:l={},onAuthComplete:u,onAuthError:m}=r;HE(),await Ro.instance().logIn(c,l).catch(p=>{console.error(p),m==null||m()})},s=async(r=!0)=>{await e(),t(),A$(),JW(),await Ro.instance().logOut().then(async()=>{r&&WE("/")})};return{login:n,logout:s,switchMicrosoftAccount:async()=>{await s(),await n({provider:"microsoft"})}}}function _$({accountActionRequired:e,onReload:t}){const{t:n}=V(),s=Cr(),{login:o}=Lr(),{reason:r,provider:c,loginHint:l}=e,u=async h=>{Se({source:"sessionExpired",scenario:"continueWithMicrosoftWithLoginHint",destination:"continueWithMicrosoftRedirect"}),Nf({authWorkflowAccountType:"microsoft",apiName:"msal:reauthStart"});const{msal:g}=await bn.get();await g.acquireTokenRedirect({...Ql,loginHint:h,account:g.getAccountByUsername(h)??void 0,prompt:void 0})},m=async()=>{if(r==="token-expired"&&e.provider==="microsoft"){const{msal:h}=await bn.get();if(ct(wo),!ce("auth-rf-logout-clear"))await h.clearCache();else{const g=h.getActiveAccount();await h.clearCache({account:g})}}},p=async(h,g)=>{await m();let y="";switch(h==="microsoft"?(y="MSA",Nf({authWorkflowAccountType:"microsoft",apiName:"msal:reauthStart"})):h==="auth0"&&(y=(g==null?void 0:g.connection)==="apple"?"Apple":"Google",Nf({authWorkflowAccountType:(g==null?void 0:g.connection)??"google",apiName:vn.REAUTH_START})),Se({source:"sessionExpired",scenario:`continueWith${y}`,destination:`continueWith${y}Redirect`}),h){case"microsoft":o({provider:h});break;case"auth0":o({provider:h,opts:g});break}},f=async()=>{yt({source:"signin",scenario:"sessionExpired"}),await m(),o({provider:"microsoft"})};return i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"pb-3 text-lg",children:n("authentication.sessionExpired")}),i.jsx("p",{className:"pb-7",children:n("authentication.sessionExpiredMessage")}),r==="token-expired"&&c==="microsoft"&&l&&i.jsx($,{onClick:()=>u(l),title:`${n("signInPrompt.continueAs",{name:l})}`,variant:"pill",size:"48-lg",className:"w-full",children:`${n("signInPrompt.continueAs",{name:l})}`}),s?i.jsxs(i.Fragment,{children:[i.jsxs($,{onClick:()=>p("microsoft"),title:n("signInPrompt.continueWithMicrosoft"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[i.jsx(Hm,{className:"size-6"}),n("signInPrompt.continueWithMicrosoft")]}),i.jsxs($,{onClick:()=>p("auth0",{connection:"apple"}),title:n("signInPrompt.continueWithApple"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[i.jsx(H1,{className:"size-6 text-black dark:text-white"}),n("signInPrompt.continueWithApple")]}),i.jsxs($,{onClick:()=>p("auth0",{connection:"google"}),title:n("signInPrompt.continueWithGoogle"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[i.jsx(z1,{className:"size-6"}),n("signInPrompt.continueWithGoogle")]})]}):i.jsx($,{onClick:f,title:n("common.loginText"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:n("common.loginText")}),i.jsx($,{onClick:t,title:n("signInPrompt.continueWithoutSignIn"),variant:"pill",color:"subtle-dimmed-inverted",size:"48-lg",className:"mt-3 w-full",children:n("signInPrompt.continueWithoutSignIn")})]})}const k$=e=>e;function lp(e=k$){const t=d.useRef(null);return d.useEffect(()=>{const n=typeof document<"u"?document:void 0,s=n==null?void 0:n.defaultView;if(!s)return()=>{};const o=g9(s,{autoRoot:{}});return t.current=e(o),()=>{b9(o),t.current=null}},[e]),t}const lm=e=>{lp();const t=v9(e,!0);return d.useMemo(()=>({[y9]:t}),[t])},N$="data-tabster-never-hide",M$=e=>e.hasAttribute(N$);function R$(e){C9(e,void 0,M$),x9(e)}const up=(e={})=>{const{trapFocus:t,alwaysFocusable:n,legacyTrapFocus:s}=e;lp(R$);const o=d.useId(),r=e.id??`modal-${o}`,c=lm({restorer:{type:Iy.Source},...t&&{modalizer:{id:r,isOthersAccessible:!t,isAlwaysAccessible:n,isTrapped:!!s&&!!t}}}),l=lm({restorer:{type:Iy.Target}});return{modalAttributes:c,triggerAttributes:l}},J0={type:"spring",mass:.5,stiffness:450,damping:35},P$={type:"spring",mass:.5,stiffness:450,damping:35},D0e={type:"spring",mass:1.8,stiffness:440,damping:40},Eg={type:"spring",mass:1.4,stiffness:320,damping:40},GE={type:"spring",mass:1,stiffness:1200,damping:40},$E={type:"spring",mass:1.8,stiffness:640,damping:40},U0e={type:"spring",mass:3.2,stiffness:640,damping:40},_t={type:"spring",mass:.5,stiffness:450,damping:35},nC={duration:1.2,ease:"easeInOut",repeat:3,repeatType:"reverse",type:"tween"},qE=.2,KE=.25,L$=1.5,j$=[.16,1,.3,1];function O$(e,t){const{children:n,id:s,eleId:o,labelById:r,role:c,className:l,mode:u="wait",duration:m=Fn.default,exitDuration:p=Fn.default,exitDelay:f=0,delay:h=0,delayChildren:g=0,onAnimationComplete:y,"data-testid":b,initial:x="initial"}=e;return i.jsx(at,{mode:u,children:n&&i.jsx(ee.div,{id:o,"aria-labelledby":r,animate:"animate",exit:"exit",ref:t,role:c,initial:x,variants:{initial:Ce,animate:Be,exit:{...Ce,transition:{duration:p,delay:f}}},transition:{duration:m,ease:"easeInOut",delay:h,delayChildren:g},className:l,onAnimationComplete:y,"data-testid":b,children:n},s)})}const jt=d.forwardRef(O$),fu=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M4.20889 10.7327C3.9232 11.0326 3.93475 11.5074 4.23467 11.7931C4.5346 12.0788 5.00933 12.0672 5.29502 11.7673L11.2495 5.516V20.25C11.2495 20.6642 11.5853 21 11.9995 21C12.4137 21 12.7495 20.6642 12.7495 20.25V5.51565L18.7043 11.7673C18.99 12.0672 19.4648 12.0788 19.7647 11.7931C20.0646 11.5074 20.0762 11.0326 19.7905 10.7327L12.7238 3.31379C12.5627 3.14474 12.3573 3.04477 12.1438 3.01386C12.0971 3.00477 12.0489 3 11.9995 3C11.9498 3 11.9012 3.00483 11.8543 3.01406C11.6412 3.04518 11.4363 3.14509 11.2756 3.31379L4.20889 10.7327Z"})),F0e=Object.freeze(Object.defineProperty({__proto__:null,default:fu},Symbol.toStringTag,{value:"Module"})),Yt=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M4.39705 4.55379L4.46967 4.46967C4.73594 4.2034 5.1526 4.1792 5.44621 4.39705L5.53033 4.46967L12 10.939L18.4697 4.46967C18.7626 4.17678 19.2374 4.17678 19.5303 4.46967C19.8232 4.76256 19.8232 5.23744 19.5303 5.53033L13.061 12L19.5303 18.4697C19.7966 18.7359 19.8208 19.1526 19.6029 19.4462L19.5303 19.5303C19.2641 19.7966 18.8474 19.8208 18.5538 19.6029L18.4697 19.5303L12 13.061L5.53033 19.5303C5.23744 19.8232 4.76256 19.8232 4.46967 19.5303C4.17678 19.2374 4.17678 18.7626 4.46967 18.4697L10.939 12L4.46967 5.53033C4.2034 5.26406 4.1792 4.8474 4.39705 4.55379L4.46967 4.46967L4.39705 4.55379Z",fill:"currentColor"})),B0e=Object.freeze(Object.defineProperty({__proto__:null,default:Yt},Symbol.toStringTag,{value:"Module"}));function hu(e,t=!0,n=!1){d.useEffect(()=>{var s;t&&((s=e.current)==null||s.focus({preventScroll:n}))},[e,t,n])}function ZE(){const e=d.useRef(null);return{captureFocus:()=>{document.activeElement instanceof HTMLElement&&(e.current=document.activeElement)},restoreFocus:()=>{e.current&&e.current.focus()}}}function jr(){const[e,t]=d.useState(document.body.dir==="rtl");return d.useEffect(()=>{const n=new MutationObserver(()=>{t(document.body.dir==="rtl")});return n.observe(document.body,{attributes:!0,attributeFilter:["dir"]}),()=>n.disconnect()},[]),e}const Lf=Fn.default,Es=d.forwardRef((e,t)=>{const{isOpen:n,onBack:s,headerText:o,children:r,onClose:c,className:l,disableCloseOutside:u,headerTextClassName:m,headerClassName:p,trapFocus:f=!1,variant:h="modal"}=e,{t:g}=V(),y=d.useId(),{modalAttributes:b}=up({trapFocus:f,legacyTrapFocus:f,alwaysFocusable:f}),x=f?b:{},v=jr()?-1:1,S=d.useRef(null),{captureFocus:C,restoreFocus:T}=ZE();d.useEffect(()=>{n?C():T()},[n,C,T]),hu(S,n),d.useEffect(()=>{const R=U=>{U.key==="Escape"&&n&&c&&(U.stopPropagation(),U.preventDefault(),c())};return n&&document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}},[n,c]);const w=R=>{(u??!c)||R.target===R.currentTarget&&c()},I=R=>{R.stopPropagation()},A=h==="drawer",E=A?{initial:{x:`${v*100}%`},animate:{x:0,transition:Eg},exit:{x:`${v*100}%`,transition:{duration:Lf}}}:void 0;return i.jsx(jt,{id:String(n),mode:"sync",duration:Lf,exitDuration:Lf,className:F("fixed inset-0",Ke.modal),children:n&&i.jsxs("div",{...x,role:"dialog","aria-modal":"true","aria-labelledby":o?y:void 0,children:[i.jsx("div",{className:F("fixed inset-0 bg-stone-850/30 backdrop-blur-[10px] dark:bg-midnight-850/70",Ke.modalBackground)}),i.jsx("div",{className:F("fixed inset-0 flex",A?"items-start justify-end":"items-center justify-center",Ke.modal),onClick:w,children:i.jsxs(ee.div,{...E,className:W("t-custom-scrollbar flex flex-col gap-3 border border-white/10 bg-background-150 p-6 shadow-xl dark:bg-background-250",A?"h-full w-96":"min-h-[150px] rounded-4xl",l),onClick:I,tabIndex:-1,ref:R=>{S.current!==R&&(S.current=R),typeof t=="function"?t(R):t&&(t.current=R)},children:[i.jsxs("div",{className:F("flex items-center justify-between gap-2",p),children:[s&&i.jsx($,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:g("common.backText"),"aria-label":g("common.backText"),onClick:s,children:i.jsx(fu,{className:"size-5 -rotate-90"})}),o&&i.jsx("h2",{id:y,className:F("text-foreground-800 text-md-strong",m),children:o}),c&&i.jsx($,{className:!s&&!o?"ms-auto":"",variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:g("common.closeText"),"aria-label":g("common.closeText"),onClick:c,children:i.jsx(Yt,{className:"size-5"})})]}),r]})})]})})});Es.displayName="Modal";function YE(e){const{accountActionRequired:t}=e;return i.jsx(Es,{isOpen:!0,children:i.jsx(D$,{accountActionRequired:t})})}function D$(e){const{accountActionRequired:t}=e,{reason:n,errorMessage:s}=t;d.useEffect(()=>{M.trackEvent({name:"system",data:{eventName:"copilotWebBackgroundAccountChange",eventInfo_action:"shown",eventInfo_reason:n}}),n==="token-expired"&&t.provider==="microsoft"&&xG(s)},[n,s,t.provider]);const o=async()=>{if(M.trackEvent({name:"system",data:{eventName:"copilotWebBackgroundAccountChange",eventInfo_action:"reload",eventInfo_reason:n}}),n==="token-expired"&&t.provider==="microsoft"){const{msal:r}=await bn.get();if(ct(wo),!ce("auth-rf-logout-clear"))await r.clearCache();else{const c=r.getActiveAccount();await r.clearCache({account:c})}}pu()};return n==="login"||n==="logout"?i.jsx("div",{className:"flex max-w-72 flex-col items-center p-1 text-center",children:i.jsx(jL,{reason:n,onReload:o})}):i.jsx("div",{className:"flex max-w-96 flex-col items-center p-1 text-center",children:i.jsx(_$,{accountActionRequired:t,onReload:o})})}function U$(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function F$(e){if(!U$(e)&&typeof e!="number")return!1;const t=ft(e);return!isNaN(Number(t))}function QE(e,t){const n=ft(e);if(isNaN(t))return ug(e,NaN);if(!t)return n;const s=n.getDate(),o=ug(e,n.getTime());o.setMonth(n.getMonth()+t+1,0);const r=o.getDate();return s>=r?o:(n.setFullYear(o.getFullYear(),o.getMonth(),s),n)}function B$(e,t){return QE(e,t*12)}function V$(e,t){return B$(e,-13)}function Qs(e,t,n="en-US"){var o,r;let s;if(e instanceof Date)s=e;else if(typeof e=="number")s=new Date(e<1e12?e*1e3:e);else if(typeof e=="string")s=new Date(e);else throw new Error(`Invalid date input: ${e}`);if(Number.isNaN(s.getTime()))throw new Error(`Invalid date: ${String(e)}`);switch(t){case"yyyyMMdd":{const c=s.getFullYear(),l=(s.getMonth()+1).toString().padStart(2,"0"),u=s.getDate().toString().padStart(2,"0");return`${c}${l}${u}`}case"yyyyMMdd_HHmmss":{const c=s.getFullYear(),l=(s.getMonth()+1).toString().padStart(2,"0"),u=s.getDate().toString().padStart(2,"0"),m=s.getHours().toString().padStart(2,"0"),p=s.getMinutes().toString().padStart(2,"0"),f=s.getSeconds().toString().padStart(2,"0");return`${c}${l}${u}_${m}${p}${f}`}case"h:mm aa":case"h:mm a":return new Intl.DateTimeFormat(n,{hour:"numeric",minute:"2-digit",hour12:!0}).format(s);case"h":return((o=new Intl.DateTimeFormat(n,{hour:"numeric",hour12:!0}).formatToParts(s).find(u=>u.type==="hour"))==null?void 0:o.value)??"";case"mm":return new Intl.DateTimeFormat(n,{minute:"2-digit"}).format(s).padStart(2,"0");case"a":return((r=new Intl.DateTimeFormat(n,{hour:"numeric",hour12:!0}).formatToParts(s).find(u=>u.type==="dayPeriod"))==null?void 0:r.value)??"";case"PP":return new Intl.DateTimeFormat(n,{year:"numeric",month:"short",day:"numeric"}).format(s);case"EEEE":return new Intl.DateTimeFormat(n,{weekday:"long"}).format(s);case"eeee":return new Intl.DateTimeFormat(n,{weekday:"long"}).format(s);case"MMMM":return new Intl.DateTimeFormat(n,{month:"long"}).format(s);case"d":return s.getDate().toString();case"MM/dd":{const c=(s.getMonth()+1).toString().padStart(2,"0"),l=s.getDate().toString().padStart(2,"0");return`${c}/${l}`}case"MMM d":return new Intl.DateTimeFormat(n,{month:"short",day:"numeric"}).format(s);case"MMM":return new Intl.DateTimeFormat(n,{month:"short"}).format(s);case"eee, MMM d":return new Intl.DateTimeFormat(n,{weekday:"short",month:"short",day:"numeric"}).format(s);case"eee":return new Intl.DateTimeFormat(n,{weekday:"short"}).format(s);case"EE":return new Intl.DateTimeFormat(n,{weekday:"short"}).format(s);case"h:mma":return new Intl.DateTimeFormat(n,{hour:"numeric",minute:"2-digit",hour12:!0}).format(s).replace(" ","");case"haaa":return new Intl.DateTimeFormat(n,{hour:"numeric",hour12:!0}).format(s).replace(/\s+/g,"").toLowerCase();case"yyyy":return s.getFullYear().toString();case"MM":return(s.getMonth()+1).toString().padStart(2,"0");case"dd":return s.getDate().toString().padStart(2,"0");case"HH":return s.getHours().toString().padStart(2,"0");case"HH:mm":{const c=s.getHours().toString().padStart(2,"0"),l=s.getMinutes().toString().padStart(2,"0");return`${c}:${l}`}case"HH:mm:ss":{const c=s.getHours().toString().padStart(2,"0"),l=s.getMinutes().toString().padStart(2,"0"),u=s.getSeconds().toString().padStart(2,"0");return`${c}:${l}:${u}`}case"ss":return s.getSeconds().toString().padStart(2,"0");case"xD":{const l=Math.floor((new Date().getTime()-s.getTime())/(1e3*3600*24));return B("dates.time.dayAbbrCapitalized",{dayNumber:l})}case"xh":{const l=Math.floor((new Date().getTime()-s.getTime())/(1e3*3600));return B("dates.time.hourAbbr",{hourNumber:Math.max(1,l)})}case"xw":{const l=Math.floor((new Date().getTime()-s.getTime())/(1e3*3600*24*7));return B("dates.time.weekAbbr",{weekNumber:l})}default:return s.toLocaleString(n)}}function JE(e,t){if(e){if(e.indexOf("-")!==-1)return e;if(t)return`${e}-${t}`}else if(t)return t;return"en-US"}const Vn=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("g",{id:"Chevron"},d.createElement("path",{id:"Shape",d:"M8.46967 4.21967C8.17678 4.51256 8.17678 4.98744 8.46967 5.28033L15.1893 12L8.46967 18.7197C8.17678 19.0126 8.17678 19.4874 8.46967 19.7803C8.76256 20.0732 9.23744 20.0732 9.53033 19.7803L16.7803 12.5303C17.0732 12.2374 17.0732 11.7626 16.7803 11.4697L9.53033 4.21967C9.23744 3.92678 8.76256 3.92678 8.46967 4.21967Z",fill:"currentColor"}))),V0e=Object.freeze(Object.defineProperty({__proto__:null,default:Vn},Symbol.toStringTag,{value:"Module"})),H$={top:36,bottom:36,left:24,right:24};function nd(e){const{ariaLabelId:t,options:n,renderOption:s,onSelect:o,value:r,id:c,actionLabel:l,placeholder:u,className:m,menuClassName:p,expandIconClassName:f,disabled:h=!1,isValid:g=!0,supportsBrowserAutofill:y,supportsTypeahead:b=!1,autoComplete:x,boundary:v,padding:S=H$}=e,[C,T]=d.useState(!1),[w,I]=d.useState(null),A=n.findIndex(G=>G.key===r),E=d.useRef([]),R=d.useRef([]),U=d.useCallback(G=>{var Ie;const J=(Ie=n[G])==null?void 0:Ie.key;J&&o(J)},[o,n]),{refs:K,floatingStyles:H,context:te}=Zi({placement:"bottom-start",strategy:"absolute",open:C,onOpenChange:T,whileElementsMounted:_a,middleware:[Ki({padding:S}),ZS({boundary:v,apply({rects:G,elements:J,availableHeight:Ie}){Object.assign(J.floating.style,{maxHeight:`${Ie}px`,minWidth:`${G.reference.width}px`})},padding:S})]}),oe=b1(te,{event:"mousedown",enabled:!h}),ne=_m(te),ge=km(te,{role:"listbox"}),me=S9(te,{listRef:E,activeIndex:w,selectedIndex:A,onNavigate:I,loop:!0,focusItemOnHover:!1,openOnArrowKeyDown:!h}),be=w9(te,{enabled:b,listRef:R,activeIndex:w,onMatch:C?I:U}),{getReferenceProps:we,getFloatingProps:se,getItemProps:ae}=Nm([ne,ge,me,oe,be]),fe=d.useCallback(G=>{o(G),T(!1)},[o]),re=A>-1?s(n[A]):i.jsx("div",{className:"truncate text-foreground-550 dark:text-slate-400",children:u}),ke=d.useCallback(G=>{h||o(G.currentTarget.value)},[o,h]),q=d.useRef(null);return i.jsxs(i.Fragment,{children:[y&&i.jsx("select",{"aria-hidden":!0,className:"hidden",onChange:ke,autoComplete:x,disabled:h,children:n.map(G=>i.jsx("option",{value:G.key,children:G.text},G.key))}),i.jsxs("button",{role:"combobox",type:"button",id:c,ref:K.setReference,"aria-labelledby":t,"aria-expanded":C,"aria-haspopup":"listbox","aria-autocomplete":"none","aria-invalid":!g,"aria-disabled":h,className:F("flex w-full cursor-pointer items-center justify-between gap-2 rounded-2xl bg-black/5 px-[1.125rem] py-4 dark:bg-midnight-550/25",m,h&&"pointer-events-none opacity-50"),...we(),children:[i.jsx("div",{className:"min-w-0",children:re}),i.jsxs("div",{className:F("flex min-h-[26px] shrink-0 grow items-center justify-end gap-2",f),children:[l&&i.jsx("span",{children:l}),i.jsx(Vn,{className:"size-6 rotate-90"})]})]}),i.jsx("div",{ref:q}),C&&i.jsx(qi,{root:q.current,children:i.jsx(Mm,{context:te,modal:!1,children:i.jsx("div",{ref:K.setFloating,style:H,className:F("flex overflow-hidden rounded-2xl shadow-md",p),...se(),children:i.jsx("div",{className:F("flex w-full flex-col p-2",gL),children:i.jsx("div",{className:F("vertical-scrollbar overflow-y-auto py-1 pe-1"),children:n.map((G,J)=>i.jsx("div",{ref:Ie=>{E.current[J]=Ie,R.current[J]=G.text},role:"option",tabIndex:J===w?0:-1,"aria-selected":J===A&&J===w,className:"relative cursor-default rounded-xl px-3 py-2 -outline-offset-2 hover:bg-black/5 dark:hover:bg-white/8",...ae({onClick(){fe(G.key)},onKeyDown(Ie){Ie.key==="Enter"&&(Ie.preventDefault(),fe(G.key))}}),children:s(G)},G.key))})})})})})]})}function sC(e){const{htmlFor:t,content:n,required:s,className:o,afterContent:r}=e;return i.jsxs("div",{className:"flex items-center",children:[i.jsxs("label",{htmlFor:t,className:F("flex items-center gap-0.5 text-foreground-900",o),children:[n,s&&i.jsx("span",{className:"text-system-red-550 dark:text-system-red-350",children:"*"})]}),r]})}const z$="/discover";function W$(e){return e.startsWith(z$)}function dp(){const e=et();return W$(e)}const um={CLOSE_BUTTON:"closeButton",ONE_LINE_COMPOSER:"oneLineComposer",IMAGE_VIEWER:"imageViewer"},ac=k(),G$=k(e=>{const t=e(ac);if(!(!t||!Array.isArray(t.media)||typeof t.currentMediaIndex!="number"))return t.media[t.currentMediaIndex]});function $$(){return _(G$)}function q$(e){const t=ue(Ae);yt({source:e.source??"defaultMediaViewerSource",scenario:"mediaViewerOpen",messageId:e.messageId,conversationId:t})}function K$(){const e=ue(ac),t=ue(Ae);e&&yt({source:"mediaViewer",scenario:"mediaViewerNext",messageId:e.messageId,conversationId:t})}function Z$(){const e=ue(ac),t=ue(Ae);e&&yt({source:"mediaViewer",scenario:"mediaViewerPrevious",messageId:e.messageId,conversationId:t})}function oC(){const e=ue(ac),t=ue(Ae);e&&yt({source:"mediaViewer",scenario:"mediaViewerClose",messageId:e.messageId,conversationId:t})}function Y$(e,t){return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}function X0(e){const t=typeof window<"u"?window.matchMedia(e):null,[n,s]=d.useState(t==null?void 0:t.matches);return d.useEffect(()=>{t&&Y$(t,o=>s(o.matches))},[e,t]),!!n}const XE={sm:"640",md:"768",lg:"1024",xl:"1280",xxl:"1920"};function lt(e){const{breakpoint:t}=e,n=XE[t];return!X0(`(min-width: ${n}px)`)}function gu(e){const{breakpoint:t}=e,s=`(min-width: ${XE[t]}px)`,o=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia(s):null;return!(o!=null&&o.matches)}const eA=a.union([a.literal("open"),a.literal("close")]),tA=a.object({sidebarVisibility:eA.optional()});function Q$(e){Xt(Jd,tA,{sidebarVisibility:e}),El(Jd,e,{expireDays:365*10})}function nA(){var n;const e=eA.safeParse(pr(Jd));return(e.success?e.data:void 0)??((n=St(Jd,tA))==null?void 0:n.sidebarVisibility)??"close"}function J$(){return!Z.instance().config().sidebarNavigation||gu({breakpoint:"md"})?!1:nA()!=="close"}const Si=k({left:J$(),right:!1}),eo=k(e=>e(Si).left,(e,t,n)=>{const s=e(Si);t(Si,{left:n,right:n&&gu({breakpoint:"xl"})?!1:s.right})}),rc=k(e=>e(Si).right,(e,t,n)=>{const s=e(Si);t(Si,{left:n&&gu({breakpoint:"xl"})?!1:s.left,right:n})}),X$=k();function sA(){const[e,t]=Ee(X$);return{isPictureInPictureOpen:e!==void 0,openPictureInPicture:o=>{t(o),Se({source:"mediaViewer",scenario:"PictureInPictureOpen"})},closePictureInPicture:()=>t(void 0)}}function io(){var f;const[e,t]=Ee(ac),n=z(rc),{openPictureInPicture:s}=sA(),o=d.useCallback(()=>{const{onClose:h}=e??{};oC(),n(!1),t(void 0),h==null||h()},[t,e,n]),r=d.useCallback(()=>{K$(),t(h=>{if(!h)return h;if(h.currentMediaIndex<h.media.length-1){const g=h.currentMediaIndex+1;return{...h,currentMediaIndex:g,isCurrentMediaLoading:jf(h.media[g])}}return h})},[t]),c=d.useCallback(()=>{Z$(),t(h=>{if(!h)return h;if(h.currentMediaIndex>0){const g=h.currentMediaIndex-1;return{...h,currentMediaIndex:g,isCurrentMediaLoading:jf(h.media[g])}}return h})},[t]),l=d.useCallback(h=>{q$(h),n(!1),t({...h,isCurrentMediaLoading:jf(h.media[h.currentMediaIndex])})},[t,n]),u=((f=e==null?void 0:e.media[e.currentMediaIndex])==null?void 0:f.type)==="video",m=d.useCallback(()=>{var g;const h=e==null?void 0:e.media[e.currentMediaIndex];if(h&&h.type==="video"){const{player:y}=h;s({url:h.url,title:((g=h.source)==null?void 0:g.title)??"",startTime:(y==null?void 0:y.getCurrentTime())??0}),oC(),t(void 0)}},[e,s,t]),p=(e==null?void 0:e.contentComposerType)??um.CLOSE_BUTTON;return d.useMemo(()=>({openMediaViewer:l,closeMediaViewer:o,isMediaViewerOpen:e!==void 0,next:r,previous:c,isPictureInPictureSupported:u,triggerPictureInPicture:m,contentComposerType:p,showOneLineComposerWhenMediaViewerOpen:p===um.ONE_LINE_COMPOSER,contentPageType:e==null?void 0:e.contentPageType}),[l,o,e,r,c,u,m,p])}function jf(e){if(e&&"initLoading"in e)return e.initLoading}const aC="bg-gradient-discover-light dark:bg-gradient-discover-dark",eq="bg-gradient-authentication-light dark:bg-gradient-authentication-dark";function tq(e={}){const{forceGradient:t=!1,gradientType:n}=e,{isMediaViewerOpen:s,contentPageType:o}=io(),r=dp(),c=et(),l=c==="/login"||c==="/e/sol",u=o==="newsArticle"||o==="newsVideo"||o==="newsGem",m=()=>t?!0:s&&u?!1:r||l,p=()=>n==="discover"?aC:n==="authentication"||l?eq:aC;return{shouldShowGradient:m(),gradientClass:p()}}const rC="absolute size-full";function Or(e){const{isBottomFade:t,forceGradient:n,isFixed:s,overrideGradientType:o,customColor:r}=e,c=et(),{shouldShowGradient:l,gradientClass:u}=tq({forceGradient:n,gradientType:o});return i.jsxs("div",{className:F(s?"fixed":"absolute",t?"-inset-x-4 bottom-0 h-dvh":"inset-0","overflow-hidden"),children:[i.jsx("div",{className:F(rC,"bg-none",r??"bg-background-150")}),i.jsx(at,{children:l&&i.jsx(ee.div,{className:F(rC,u),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Ce,animate:Be,exit:Ce},transition:J0},c)})]})}const oA=k(void 0),aA=k([]);function eb(){var u;const[e,t]=Ee(aA),n=d.useRef([]);d.useEffect(()=>{const m=n.current,p=e;if(m.length>p.length){const f=m.filter((g,y)=>y>=p.length),h=f.length;for(let g=h-1;g>=0;g-=1){const y=f[g];y!=null&&y.onPopPage&&y.onPopPage()}}n.current=e},[e]);const s=e.length>0?(u=e[e.length-1])==null?void 0:u.page:void 0,o=m=>r([m]),r=m=>{const p=m.map(f=>({page:f,onPopPage:void 0}));t(f=>[...f,...p])};return{currentPage:s,pushPage:o,pushPages:r,goBackOrClose:()=>{t(m=>m.length<=0?m:m.slice(0,-1))},closeSettings:()=>{t([])}}}function nq(e,t){const n={page:e,onPopPage:t==null?void 0:t.onPopPageCallback};De().set(aA,s=>[...s,n])}function sq(e){const{buttonClassName:t}=e,{t:n}=V(),{closeSettings:s}=eb(),o=z(oA),r=_(Ae);function c(){yt({source:"complianceLinks",scenario:"cookies",conversationId:r,destination:"#"}),o("more-options"),s()}return i.jsx($,{role:"menuitem",variant:"rect",size:"28-xxs",color:"subtle-dimmed-inverted",className:t,title:n("settings.cookies"),onClick:()=>c(),testId:"cookies-compliance-button",children:i.jsx("span",{children:n("settings.cookies")})})}function mp(e){const t=D("force-cookie-banner-location");return(e&&Fm.includes(e))===!0||t}function ks(e,t={}){const{preventReferrer:n=!1}=t,s=n?"noopener,noreferrer":"noopener";return window.open(e,"_blank",s)}const Pl="https://www.bing.com/new/termsofuse",Gi="https://go.microsoft.com/fwlink/?LinkId=521839",dm="https://www.microsoft.com/microsoft-copilot/learn/?form=MG0AUO&OCID=MG0AUO#faqs",wd="hover:underline focus:underline";function iC(e){var t,n;return((n=(t=Z.instance().config()).textOverrides)==null?void 0:n.call(t,e))??e}function H0e(e){const{component:t="link",buttonClassName:n}=e,s=_(Ae),{pushPage:o}=eb(),r=_(sn),c=mp(r),l=(m,p)=>{yt({source:"complianceLinks",scenario:m,conversationId:s,destination:p})},u=D("manage-cookies");return i.jsxs("div",{className:F("flex w-full flex-wrap justify-center gap-x-3 gap-y-1 text-black/80 text-2xs dark:text-white/80",t==="button"?"flex-col p-0":"px-5 py-2"),children:[t==="link"?i.jsx(oq,{handleAnalytics:l}):i.jsx(aq,{handleAnalytics:l,className:n??"",setPage:o}),u&&c&&i.jsx(sq,{buttonClassName:W(wd,{"text-2xs p-0 min-h-0 mx-0 min-w-0 gap-x-0 safe-hover:bg-transparent dark:safe-hover:bg-transparent dark:text-white/80":t==="link",[n??""]:t==="button"})})]})}function oq(e){const{handleAnalytics:t}=e;return i.jsxs(i.Fragment,{children:[i.jsx(ws,{href:Gi,title:B(iC("settings.privacyLink")),className:wd,onClick:()=>t("privacy",Gi),children:B(iC("settings.privacyLink"))}),i.jsx(ws,{href:Pl,title:B("settings.termsOfServiceLink"),className:wd,onClick:()=>t("terms",Pl),children:B("settings.termsOfServiceLink")}),i.jsx(ws,{href:dm,title:B("settings.faqLink"),className:wd,onClick:()=>t("faq",dm),children:B("settings.faqLink")})]})}function aq(e){const{handleAnalytics:t,className:n,setPage:s}=e,o=(r,c)=>{var p;t(r,c);const u=(p=Z.instance().config().settingsOverrides)==null?void 0:p.shouldShowPolicyTermsQRCodes,m={privacy:"privacyStatement",terms:"terms",faq:"faq",cookies:void 0};u&&r in m?s==null||s(m[r]):ks(c)};return i.jsxs(i.Fragment,{children:[i.jsx($,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:B("settings.privacyLink"),onClick:()=>o("privacy",Gi),children:i.jsx("span",{children:B("settings.privacyLink")})}),i.jsx($,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:B("settings.termsOfServiceLink"),onClick:()=>o("terms",Pl),children:i.jsx("span",{children:B("settings.termsOfServiceLink")})}),i.jsx($,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:B("settings.faqLink"),onClick:()=>o("faq",dm),children:i.jsx("span",{children:B("settings.faqLink")})})]})}const cC={...ql,"United Kingdom":"UK"},lC={termsLink:i.jsx(uC,{link:Pl}),privacyLink:i.jsx(uC,{link:Gi})};function uC(e){const{children:t,link:n}=e;return i.jsx(ws,{className:"underline",href:n,title:"",children:t})}function rq(e,t,n){const s=new Date(n,t-1,e);return F$(s)&&s.getFullYear()===n&&s.getMonth()===t-1&&s.getDate()===e}function iq(e,t,n){const s=new Date(n,t-1,e),o=V$(new Date);return s<=o}const Of="border-2 border-system-red-550/50 bg-system-red-550/10 text-system-red-550 dark:text-system-red-350";function cq(){const[e,t]=d.useState(!1),[n,s]=d.useState(void 0),[o,r]=d.useState(void 0);d.useEffect(()=>{async function E(){const R=await RG();r(R)}E()},[]),d.useEffect(()=>{const E=new URLSearchParams(window.location.search);E.delete("code"),E.delete("state"),E.delete("error"),window.history.replaceState({},document.title,`${window.location.pathname}?${E}`)},[]),d.useEffect(()=>{o&&_s({page:"auth0AccountVerificationPage",scenario:"auth0Verification",customData:JSON.stringify({accountType:o})})},[o]);const[c,l]=d.useState(""),[u,m]=d.useState(""),[p,f]=d.useState(""),[h,g]=d.useState(cC["United States"]),{i18n:y}=V(),b=JE(y.resolvedLanguage),x=new Intl.NumberFormat(b,{minimumIntegerDigits:2,useGrouping:!1}),v=new Intl.NumberFormat(b,{minimumIntegerDigits:4,useGrouping:!1});d.useEffect(()=>{t(!!!(u&&p&&c&&h))},[u,p,c,h]);const S=[{key:"01",text:B("common.date.month.january")},{key:"02",text:B("common.date.month.february")},{key:"03",text:B("common.date.month.march")},{key:"04",text:B("common.date.month.april")},{key:"05",text:B("common.date.month.may")},{key:"06",text:B("common.date.month.june")},{key:"07",text:B("common.date.month.july")},{key:"08",text:B("common.date.month.august")},{key:"09",text:B("common.date.month.september")},{key:"10",text:B("common.date.month.october")},{key:"11",text:B("common.date.month.november")},{key:"12",text:B("common.date.month.december")}],C=Object.entries(cC).sort().map(([E,R])=>({key:R,text:E})),T=Array.from({length:31},(E,R)=>{const U=R+1,K=x.format(U);return{key:U.toString(),text:K}}),w=Array.from({length:125},(E,R)=>{const U=new Date().getFullYear()-R,K=v.format(U);return{key:`${new Date().getFullYear()-R}`,text:K}}),I=E=>i.jsx("p",{children:E.text}),A=async()=>{const E=parseInt(c,10),R=parseInt(u,10),U=parseInt(p,10);if(!rq(U,R,E)){Se({source:"auth0AccountVerificationPage",scenario:"auth0VerificationInvalidDate",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),s(!1);return}if(!iq(U,R,E)){Se({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotAdult",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),s(!1);return}const te=Qs(new Date(E,R-1,U),"yyyy-MM-dd");s(!0);const oe=await MG(te,h);if(!oe){Se({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotSuccessfulInvalidToken",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),s(!1);return}const{ageGroup:ne}=oe,ge=ne===Ya.NOT_ADULT,me=ne===Ya.ADULT;if(!(ge||me)){Se({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotSuccessfulNotTeenOrAdult",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),s(!1);return}Se({source:"auth0AccountVerificationPage",scenario:"auth0VerificationSuccessful",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),pu()};return i.jsxs(i.Fragment,{children:[i.jsx(Or,{forceGradient:!0,overrideGradientType:"authentication"}),i.jsxs("section",{className:"relative m-auto flex min-h-dvh max-w-[500px] flex-col items-center justify-center gap-3 overflow-y-auto px-5 py-12 text-center",children:[i.jsx("h1",{className:"mb-4 text-center font-semibold text-xl sm:text-3xl",children:B("error.auth0VerificationTitle")}),i.jsx("p",{children:B("error.auth0VerificationDescription")}),i.jsxs("div",{className:"mt-12 w-full",children:[i.jsx(sC,{className:"mb-2 text-base",htmlFor:"birthdate-month",content:B("error.auth0VerificationBirthdate"),required:!0}),i.jsxs("div",{id:"birthdate-group",className:"flex gap-2",children:[i.jsx("span",{id:"month-label",className:"sr-only",children:u||B("dates.month")}),i.jsx("span",{id:"day-label",className:"sr-only",children:p||B("dates.day")}),i.jsx("span",{id:"year-label",className:"sr-only",children:c||B("dates.year")}),i.jsx(nd,{renderOption:I,options:S,onSelect:E=>m(E),id:"birthdate-month",ariaLabelId:"month-label",placeholder:B("dates.month"),className:F("flex-1",ua,n===!1&&Of),value:u,isValid:n,menuClassName:Ke.dropdownMenuOverModal}),i.jsx(nd,{renderOption:I,options:T,onSelect:E=>f(E),id:"birthdate-day",ariaLabelId:"day-label",placeholder:B("dates.day"),className:F("flex-1",ua,n===!1&&Of),value:p,menuClassName:Ke.dropdownMenuOverModal}),i.jsx(nd,{renderOption:I,options:w,onSelect:E=>l(E),id:"birthdate-year",ariaLabelId:"year-label",placeholder:B("dates.year"),className:F("flex-1",ua,n===!1&&Of),value:c,menuClassName:Ke.dropdownMenuOverModal})]}),n===!1&&i.jsx("div",{className:F("mt-2 text-start text-system-red-550 text-sm dark:text-system-red-350"),children:B("error.authh0VerificationAgeError")})]}),i.jsxs("div",{className:"mt-12 w-full",children:[i.jsx(sC,{className:"mb-2 text-base",htmlFor:"country",content:B("error.auth0VerificationCountryRegion"),required:!0}),i.jsx(nd,{renderOption:I,options:C,onSelect:E=>g(E),id:"country","aria-labelledby":"country-group",placeholder:B("error.auth0VerificationCountryRegion"),className:F("flex-1",ua),value:h,menuClassName:Ke.dropdownMenuOverModal})]}),i.jsxs("div",{className:"mt-12 w-full text-black text-2xs dark:text-white/90",children:[i.jsx(en,{i18nKey:B("error.auth0VerificationDisclaimer"),components:{termsLink:lC.termsLink,privacyLink:lC.privacyLink}}),i.jsx($,{className:"mt-4 w-full",color:"strong",size:"56-xl",variant:"rect",onClick:A,title:B("common.continue"),disabled:e,children:B("common.continue")})]})]})]})}function dC(e){var t,n;return((n=(t=Z.instance().config()).textOverrides)==null?void 0:n.call(t,e))??e}const Df="w-full";function lq(){const{switchMicrosoftAccount:e,logout:t,login:n}=Lr(),{t:s}=V(),o=Cr(),r=async()=>{await e()},c=async(m,p)=>{switch(await t(),m){case"microsoft":n({provider:m});break;case"auth0":n({provider:m,opts:p});break}},l=Z.instance().config().hideAgeVerificationButton!==!0,u=Z.instance().config().hideAgeVerificationSwitchAccountButton!==!0;return i.jsxs(i.Fragment,{children:[i.jsx(Or,{forceGradient:!0}),i.jsxs("section",{className:"relative z-10 m-auto flex h-dvh max-w-96 flex-col items-center justify-center gap-3 px-5 text-center",children:[i.jsx("h1",{className:"text-3xl",children:s(dC("error.ageVerificationTitle"))}),i.jsx("h2",{className:"text-foreground-600",children:s(dC("error.ageVerification"))}),l&&i.jsx($,{className:"mt-6 w-full",color:"default",size:"56-xl",variant:"rect",title:s("error.ageVerificationVerifyAge"),onClick:()=>{oc(DR)},children:s("error.ageVerificationVerifyAge")}),l&&i.jsx("div",{className:"text-balance text-foreground-600",children:s("error.ageVerificationOr")}),o?i.jsxs(i.Fragment,{children:[i.jsxs($,{onClick:()=>c("microsoft"),color:"default",title:s("signInPrompt.continueWithMicrosoft"),variant:"pill",size:"56-xl",className:F(Df),children:[i.jsx(Hm,{className:"size-6"}),s("signInPrompt.continueWithMicrosoft")]}),i.jsxs($,{onClick:()=>c("auth0",{connection:"apple"}),color:"default",variant:"pill",size:"56-xl",title:s("signInPrompt.continueWithApple"),className:F(Df),children:[i.jsx(H1,{className:"size-6 text-black dark:text-white"}),s("signInPrompt.continueWithApple")]}),i.jsxs($,{onClick:()=>c("auth0",{connection:"google"}),color:"default",variant:"pill",size:"56-xl",title:s("signInPrompt.continueWithGoogle"),className:F(Df),children:[i.jsx(z1,{className:"size-6"}),s("signInPrompt.continueWithGoogle")]})]}):u&&i.jsx($,{className:"w-full",color:"default",size:"56-xl",variant:"rect",title:s("error.ageVerificationSwitchAccount"),onClick:r,children:s("error.ageVerificationSwitchAccount")})]})]})}function uq(){const e=_(xt);return(e==null?void 0:e.provider)==="auth0"?i.jsx(cq,{}):i.jsx(lq,{})}const rA=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M12 4.5C7.85786 4.5 4.5 7.85786 4.5 12C4.5 16.1421 7.85786 19.5 12 19.5C16.1421 19.5 19.5 16.1421 19.5 12C19.5 11.6236 19.4723 11.2538 19.4188 10.8923C19.3515 10.4382 19.6839 10 20.1429 10C20.5138 10 20.839 10.2562 20.8953 10.6228C20.9642 11.0718 21 11.5317 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C14.3051 3 16.4077 3.86656 18 5.29168V4.25C18 3.83579 18.3358 3.5 18.75 3.5C19.1642 3.5 19.5 3.83579 19.5 4.25V7.25C19.5 7.66421 19.1642 8 18.75 8H15.75C15.3358 8 15 7.66421 15 7.25C15 6.83579 15.3358 6.5 15.75 6.5H17.0991C15.7609 5.25883 13.9691 4.5 12 4.5Z",fill:"currentColor"})),z0e=Object.freeze(Object.defineProperty({__proto__:null,default:rA},Symbol.toStringTag,{value:"Module"}));function dq(e){const{t}=V(),{btnTitle:n,onBtnClick:s=()=>{}}=e;return i.jsxs("section",{className:"relative z-10 m-auto flex h-full max-w-96 flex-col items-center justify-center gap-3 px-5 text-center",children:[i.jsx("h1",{className:"text-3xl",children:t("error.unhandledErrorTitle")}),i.jsx("h2",{className:"text-foreground-600",children:t("error.unhandledError")}),i.jsx($,{className:"mt-6 w-full",color:"default",size:"56-xl",variant:"rect",title:t("error.unhandledErrorReload"),onClick:s,children:n??i.jsxs(i.Fragment,{children:[i.jsx(rA,{className:"size-6"}),t("error.unhandledErrorReload")]})})]})}function tb(){return i.jsxs("main",{className:"relative size-full overflow-hidden",children:[i.jsx(Or,{forceGradient:!0}),i.jsx(dq,{onBtnClick:()=>{pu()}})]})}function nb(){const e=lt({breakpoint:"sm"});return(Z.instance().config().responsiveFullWidthSidebarEnabled??!1)&&e}function mq(e){return["/login","/e/so","/e/sol","/fang","/referrals","/referrals/rules","/memory/narrative"].includes(e)}function Wn(){const e=et();return(Z.instance().config().sidebarNavigation??!1)&&!mq(e)}function ic(){const e=Wn(),t=D("sidebar-narrow"),n=Z.instance().config().useCompactSidebarHeader??!1;return e&&t&&!n}function bu(){const e=Wn(),t=ic(),n=_(eo),s=lt({breakpoint:"md"});return e&&t&&!n&&!s}function iA({endDelay:e=200}={}){const[t,n]=d.useState(!1),s=d.useRef(null);return d.useEffect(()=>{if(typeof window>"u")return()=>{};const o=()=>{n(!0),s.current!==null&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{n(!1)},e)};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o),s.current!==null&&window.clearTimeout(s.current)}},[e]),t}function mm(e){const{className:t,text:n}=e;return i.jsx("p",{className:W("inline h-min flex-none rounded border px-0.5 uppercase text-3xs",t),children:n})}const cA=e=>d.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M10 19.25C15.1086 19.25 19.25 15.1086 19.25 10C19.25 4.89137 15.1086 0.75 10 0.75C4.89137 0.75 0.75 4.89137 0.75 10C0.75 11.6441 1.17894 13.188 1.93101 14.526L0.75 19.25L5.47404 18.069C6.81197 18.8211 8.35589 19.25 10 19.25Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"3 3"})),W0e=Object.freeze(Object.defineProperty({__proto__:null,default:cA},Symbol.toStringTag,{value:"Module"})),lA=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.3817 22 8.81782 21.6146 7.41286 20.888L3.58704 21.9553C2.92212 22.141 2.23258 21.7525 2.04691 21.0876C1.98546 20.8676 1.98549 20.6349 2.04695 20.4151L3.11461 16.5922C2.38637 15.186 2 13.6203 2 12C2 6.47715 6.47715 2 12 2ZM12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 13.4696 3.87277 14.8834 4.57303 16.1375L4.72368 16.4072L3.61096 20.3914L7.59755 19.2792L7.86709 19.4295C9.12006 20.1281 10.5322 20.5 12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5ZM8.75 13H13.2483C13.6625 13 13.9983 13.3358 13.9983 13.75C13.9983 14.1297 13.7161 14.4435 13.35 14.4932L13.2483 14.5H8.75C8.33579 14.5 8 14.1642 8 13.75C8 13.3703 8.28215 13.0565 8.64823 13.0068L8.75 13H13.2483H8.75ZM8.75 9.5H15.2545C15.6687 9.5 16.0045 9.83579 16.0045 10.25C16.0045 10.6297 15.7223 10.9435 15.3563 10.9932L15.2545 11H8.75C8.33579 11 8 10.6642 8 10.25C8 9.8703 8.28215 9.55651 8.64823 9.50685L8.75 9.5H15.2545H8.75Z"})),G0e=Object.freeze(Object.defineProperty({__proto__:null,default:lA},Symbol.toStringTag,{value:"Module"})),uA=e=>d.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{id:"Shape",d:"M12.9222 2.87317C14.1047 1.69077 16.0291 1.71505 17.1813 2.92689C18.2933 4.09631 18.27 5.939 17.129 7.08003L7.77103 16.4381C7.43243 16.7767 7.00432 17.0118 6.53689 17.1157L2.6105 17.9889C2.44362 18.026 2.26934 17.9753 2.14844 17.8544C2.02754 17.7335 1.97678 17.5592 2.01387 17.3923L2.89148 13.4424C2.99204 12.9899 3.21958 12.5754 3.54741 12.2475L12.9222 2.87317ZM16.4566 3.61596C15.6917 2.8115 14.4143 2.79538 13.6293 3.58029L12.958 4.25155L15.7507 7.04418L16.4219 6.37293C17.1793 5.61548 17.1948 4.39225 16.4566 3.61596ZM15.0436 7.7513L12.2509 4.95864L4.2545 12.9547C4.06117 13.148 3.92698 13.3924 3.86768 13.6593L3.1605 16.8421L6.31982 16.1396C6.60164 16.0769 6.85976 15.9352 7.06391 15.731L15.0436 7.7513ZM2.5 3L11.3792 3L10.3792 4L2.5 4C2.22386 4 2 3.77614 2 3.5C2 3.22386 2.22386 3 2.5 3ZM2.5 6L8.37907 6L7.37902 7L2.5 7C2.22386 7 2 6.77614 2 6.5C2 6.22386 2.22386 6 2.5 6ZM2.5 9H5.37893L4.37888 10H2.5C2.22386 10 2 9.77614 2 9.5C2 9.22386 2.22386 9 2.5 9Z",fill:"currentColor"})),$0e=Object.freeze(Object.defineProperty({__proto__:null,default:uA},Symbol.toStringTag,{value:"Module"}));function dA(){return null}function pq(){return null}function mA(){return null}function pA({featureOverrides:e,localFeatureOverrides:t,serverFeatures:n,surfaceConfig:s}){var r,c,l;const o=new Set([...n]);(r=s.settingsOverrides)!=null&&r.shouldHideShopping&&o.delete("shopping-card"),s.startInVoice&&o.add("start-in-voice"),(c=s.pages)!=null&&c.enabled?o.add("pages"):((l=s.pages)==null?void 0:l.enabled)===!1&&o.delete("pages");for(const u of e)o.add(u);for(const u of t)o.add(u);return Array.from(o)}function fA(){return[]}async function sb(){const{msal:e}=await bn.get();return e.getActiveAccount()}async function ob(){const e=await sb();return e?ys(e.tenantId):!1}async function mC(){const e=await sb();if(!(!e||!ys(e.tenantId)))return e}async function hA(){const e=await sb();if(!(!e||ys(e.tenantId)))return e}async function fq(){return(await bn.get()).getMsalAccessToken("oneDrive")}async function hq(){if(!await ob())return;ct(wo);const{msal:e}=await bn.get(),t=e.getActiveAccount();t&&e.clearCache({account:t})}const gA="urlFeatureOverrides";function gq(){return typeof window>"u"?null:sessionStorage.getItem(gA)}function bA(){const e=gq();return e?e.split(",").map(n=>n):[]}function bq(){const e=Bt("features");return e!=null&&e.trim()&&typeof window<"u"&&sessionStorage.setItem(gA,e.trim()),bA()}const vq={VITE_API_URL:"copilot.microsoft.com/c/api"};async function yq(e,t){try{return await e.json()}catch(n){throw(n instanceof SyntaxError||n instanceof TypeError||n instanceof DOMException)&&_O(n,e,t),n}}function vA(e={}){const{query:t={}}=e,n=new URLSearchParams;for(const[l,u]of Object.entries(t))n.append(l,u);const s=pA({featureOverrides:bA(),localFeatureOverrides:fA(),serverFeatures:[],surfaceConfig:Z.instance().config()}).join(",");s&&(n.append("features",s),n.append("setflight",s));const o=dA();o&&(n.append("promptBranch",o),pq()&&n.append("useSxs","true"));const r=mA();r&&n.append("sxsFeature",r);const{surfaceQueryParam:c}=Z.instance().config();if(c)for(const[l,u]of Object.entries(c.params))n.append(l,u);return n}function yA(e){return e!==void 0&&e.tokenType!==void 0&&e.tokenType!=="msa"}async function pC(e,t){const{VITE_API_URL:n}=vq;let s;if(vw()?s=`${window.location.host}/c/api`:s=n,!s)throw new Error("Cannot initialize websocket because the required env vars are not set: VITE_API_URL");const o={...t,"api-version":"2"},r=await Ro.instance().getAuthToken(),c=await ob();r&&!c&&(o.accessToken=r.accessToken,yA(r)&&(o["X-UserIdentityType"]=r.tokenType)),r===void 0?IE(e,"getWssAPIUrl"):TE(e,"getWssAPIUrl"),ue(Vi)&&(o.appFlavor="beta");const l=vA({query:o});return`wss://${s}/${e}?${l}`}function Cq(e,t){const n=[yw(),e],s=vA({query:t});return s.toString()&&n.push("?",String(s)),n.join("")}function xq(e,t,n){if(e.attemptCount>1){const s=e.errors.filter(o=>o.errorType==="RequestTimeoutError").length;M.trackEvent({name:"system",data:{eventName:"copilotFeatureSuccess",eventInfo_feature:"apiRetry",eventInfo_scenario:t,eventInfo_duration:e.endTime-e.startTime,eventInfo_customData:JSON.stringify({attemptCount:e.attemptCount,errorCount:e.errors.length,timeoutErrorCount:s,delayTimings:e.delayTimings})}})}n==null||n(e)}function Sq(e,t,n){var r,c;const s=e.exitReason==="requestTimeout",o={path:t,attemptCount:e.attemptCount,totalDuration:e.endTime-e.startTime,exitReason:e.exitReason,errorCount:e.errors.length,isTimeoutFailure:s,lastErrorType:(r=e.errors[e.errors.length-1])==null?void 0:r.errorType,lastErrorMessage:(c=e.errors[e.errors.length-1])==null?void 0:c.errorMessage,delayTimings:e.delayTimings};M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ApiRetryFailure",eventInfo_errorMessage:s?`API retry failed due to timeout after ${e.attemptCount} attempts`:`API retry failed after ${e.attemptCount} attempts. Exit reason: ${e.exitReason}`,eventInfo_details:JSON.stringify(o)}}),n==null||n(e)}function wq(e,t,n){M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ApiRetryTimeout",eventInfo_errorMessage:`Request timed out after ${e.timeoutMs}ms (attempt ${e.attemptCount})`,eventInfo_details:JSON.stringify({timeoutMs:e.timeoutMs,attemptCount:e.attemptCount,errorCount:e.errors.length,delayTimings:e.delayTimings,scenario:t,duration:e.endTime-e.startTime})}}),n==null||n(e)}async function Hn(e,t={}){const{options:n,query:s,analytics:o,retry:r,requestTimeoutMs:c}=t;if(r){const{onSuccess:l,onFailure:u,onTimeout:m}=r,p={...r,onSuccess:h=>{xq(h,(o==null?void 0:o.anonymousPath)??e,l)},onFailure:h=>{Sq(h,(o==null?void 0:o.anonymousPath)??e,u)},onTimeout:h=>{wq({...h,timeoutMs:c??-1},(o==null?void 0:o.anonymousPath)??e,m)}};return cp(c?()=>IG(h=>Uf({path:e,options:n,query:s,analytics:o,abortController:h}),c):()=>Uf({path:e,options:n,query:s,analytics:o}),p)}return Uf({path:e,options:n,query:s,analytics:o})}async function Uf(e){const{path:t,options:n,query:s,analytics:o,abortController:r}=e,c=new Headers(n==null?void 0:n.headers);Wt.resolvedLanguage?c.set("X-Search-UILang",Wt.resolvedLanguage.toLowerCase()):Wt.language&&c.set("X-Search-UILang",Wt.language.toLowerCase());const l=await Ro.instance().getAuthToken(),u=await ob();l&&!u&&(c.set("Authorization",`Bearer ${l.accessToken}`),yA(l)&&c.set("X-UserIdentityType",l.tokenType)),l===void 0?IE(t,"fetchApi"):TE(t,"fetchApi"),ue(Vi)&&c.set("X-Copilot-App-Flavor","beta");const m=performance.now(),p=await fetch(Cq(t,s),{...n,credentials:"include",headers:c,signal:r==null?void 0:r.signal}),f=performance.now();return wE((o==null?void 0:o.anonymousPath)??t,(n==null?void 0:n.method)??"GET",f-m,p.clone()),Tl.trackLatestApiAssignment(p.headers),p}async function cn({path:e,args:t={}}){var s;const n={method:"POST",...t.options,headers:{"Content-Type":"application/json",...(s=t.options)==null?void 0:s.headers},body:t.body?JSON.stringify(t.body):void 0};return Hn(e,{...t,options:n})}async function It(e,t,n={}){const{analytics:s,onFailedRequest:o}=n,r=(s==null?void 0:s.anonymousPath)??e,c=await Hn(e,n);let l=!0;if(!c.ok&&o&&(l=!!o(c)),!l)return{data:void 0,response:{ok:c.ok,status:c.status,headers:c.headers},zodError:void 0};const u=await yq(c,r);let m,p;const{safe:f}=n.parseOptions??{};if(f){const h=t.safeParse(u);h.error&&Al(h.error,r,!0),m=u,p=h.error}else try{m=t.parse(u)}catch(h){throw h instanceof jd&&Al(h,r,!1),h}return{data:m,response:{ok:c.ok,status:c.status,headers:c.headers},zodError:p}}function vu(e){const{data:t,error:n,isPending:s,isFetchingNextPage:o,hasNextPage:r,fetchNextPage:c,refetch:l}=I9({staleTime:6048e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,...e}),u=d.useCallback(async()=>{r&&await c()},[c,r]),m=t==null?void 0:t.pages,p=s||o,f=d.useCallback(async()=>{await l({cancelRefetch:!1})},[l]);return{loader:{loading:p,hasNextPage:r,error:n??void 0,onLoadMore:u,data:m},refetch:f}}function Iq(e={}){const{disabled:t=!1}=e,n=Sn("kill-shared-page"),s=d.useCallback(async o=>{const{pageParam:r}=o,{url:c,args:l}=r,u={...l,...n?{}:{"api-version":"2"}};return await It(c,LH,{query:u,analytics:{anonymousPath:"/pages"}}).then(p=>p.data)},[n]);return vu({queryKey:["pages"],queryFn:s,enabled:!t,initialPageParam:{url:"/pages",isFirstPage:!0},getNextPageParam:o=>o.next?{url:"/pages",args:{cursor:o.next}}:null})}function Tq(){const e=D("pages"),t=D("pages-anonymous"),n=Gt();return{canCreatePageForSignedOut:t&&e,canCreatePage:(n||t)&&e}}const CA=e=>d.createElement("svg",{viewBox:"0 0 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M27.9994 14.0514C27.9994 6.29111 21.7315 0 13.9997 0C6.26795 0 0 6.29111 0 14.0514C0 20.641 4.52023 26.1705 10.6179 27.6892V18.3455H7.73121V14.0514H10.6179V12.2011C10.6179 7.41859 12.7745 5.20184 17.4526 5.20184C18.3396 5.20184 19.8701 5.37664 20.4962 5.55088V9.44312C20.1658 9.40828 19.5918 9.39085 18.8789 9.39085C16.5835 9.39085 15.6965 10.2637 15.6965 12.5328V14.0514H20.2694L19.4837 18.3455H15.6965V28C22.6286 27.1597 28 21.2356 28 14.0514H27.9994Z"})),q0e=Object.freeze(Object.defineProperty({__proto__:null,default:CA},Symbol.toStringTag,{value:"Module"})),xA=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("g",{id:"Linkedin"},d.createElement("path",{id:"Shape",d:"M23.6999 2.75909C23.6999 1.39872 22.5971 0.295929 21.2368 0.295929H2.76308C1.40272 0.295929 0.299927 1.39872 0.299927 2.75909V21.2328C0.299927 22.5931 1.40272 23.6959 2.76308 23.6959H21.2368C22.5971 23.6959 23.6999 22.5931 23.6999 21.2328V2.75909ZM3.63848 9.12156H7.24935V20.6943H3.63848V9.12156ZM16.4313 8.83425C19.8921 8.83425 20.6797 10.9844 20.753 13.861L20.7589 14.3469V20.6942H17.1519L17.1517 14.9161C17.1477 13.5985 17.0603 11.9984 15.278 11.9984C13.4002 11.9984 13.1135 13.4611 13.1135 14.971V20.6942H9.51161V9.12143H12.9689V10.7028H13.0188L13.1052 10.5509C13.6314 9.68925 14.7739 8.83425 16.4313 8.83425ZM3.35125 5.45367C3.35125 4.30239 4.28565 3.36809 5.44404 3.36809C6.59732 3.36809 7.53556 4.30239 7.53556 5.45367C7.53556 6.60623 6.59732 7.54053 5.44404 7.54053C4.28565 7.54053 3.35125 6.60623 3.35125 5.45367Z",fill:"currentColor"}))),K0e=Object.freeze(Object.defineProperty({__proto__:null,default:xA},Symbol.toStringTag,{value:"Module"})),SA=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",...e},d.createElement("g",{clipPath:"url(#clip0_9013_4638)"},d.createElement("path",{d:"M14 0C6.26828 0 0 6.26828 0 14C0 17.8664 1.56734 21.3664 4.10047 23.8995L1.43391 26.5661C0.904531 27.0955 1.27969 28 2.02781 28H14C21.7317 28 28 21.7317 28 14C28 6.26828 21.7317 0 14 0Z",className:"fill-foreground-650"}),d.createElement("path",{d:"M16.8481 6.60187C17.091 7.63109 18.0152 8.39781 19.1188 8.39781C20.4072 8.39781 21.4517 7.35328 21.4517 6.06484C21.4517 4.7764 20.4072 3.73187 19.1188 3.73187C17.9922 3.73187 17.0527 4.53031 16.8339 5.59234C14.9472 5.79469 13.4739 7.39484 13.4739 9.33406C13.4739 9.33843 13.4739 9.34172 13.4739 9.34609C11.4221 9.4325 9.54846 10.0166 8.06096 10.9386C7.50861 10.5109 6.81518 10.2561 6.06268 10.2561C4.25689 10.2561 2.79346 11.7195 2.79346 13.5253C2.79346 14.8356 3.56346 15.9644 4.6758 16.4861C4.78408 20.2814 8.91955 23.3341 14.0066 23.3341C19.0936 23.3341 23.2346 20.2781 23.3374 16.4795C24.441 15.9545 25.2044 14.8291 25.2044 13.5264C25.2044 11.7206 23.741 10.2572 21.9352 10.2572C21.186 10.2572 20.4958 10.5098 19.9446 10.9342C18.4439 10.0056 16.5496 9.42156 14.4769 9.3439C14.4769 9.34062 14.4769 9.33844 14.4769 9.33515C14.4769 7.94609 15.5094 6.79328 16.8481 6.60406V6.60187ZM7.92971 15.6002C7.98439 14.4145 8.77189 13.5045 9.68736 13.5045C10.6028 13.5045 11.3028 14.4659 11.2481 15.6516C11.1935 16.8372 10.5099 17.2681 9.5933 17.2681C8.67674 17.2681 7.87502 16.7858 7.92971 15.6002ZM18.3269 13.5045C19.2435 13.5045 20.031 14.4145 20.0846 15.6002C20.1392 16.7858 19.3364 17.2681 18.421 17.2681C17.5055 17.2681 16.8208 16.8383 16.7661 15.6516C16.7114 14.4659 17.4103 13.5045 18.3269 13.5045ZM17.2375 18.3433C17.4092 18.3608 17.5186 18.5391 17.4519 18.6987C16.8886 20.0452 15.5586 20.9912 14.0066 20.9912C12.4546 20.9912 11.1256 20.0452 10.5613 18.6987C10.4946 18.5391 10.6039 18.3608 10.7756 18.3433C11.7819 18.2416 12.8702 18.1858 14.0066 18.1858C15.143 18.1858 16.2302 18.2416 17.2375 18.3433Z",style:{fill:"rgb(var(--color-foreground-100))"}})),d.createElement("defs",null,d.createElement("clipPath",{id:"clip0_9013_4638"},d.createElement("rect",{width:28,height:28,fill:"white"})))),Z0e=Object.freeze(Object.defineProperty({__proto__:null,default:SA},Symbol.toStringTag,{value:"Module"})),wA=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",fill:"currentColor",...e},d.createElement("g",null,d.createElement("path",{d:"M16.6638 11.85L27.0874 0H24.6174L15.5665 10.2892L8.33765 0H0L10.9315 15.5591L0 27.9856H2.47021L12.0281 17.1199L19.6623 27.9856H28L16.6632 11.85H16.6638ZM13.2805 15.6962L12.1729 14.1468L3.36026 1.81862H7.15435L14.2663 11.7679L15.3739 13.3172L24.6185 26.2497H20.8244L13.2805 15.6967V15.6962Z",fill:"currentColor"}))),Y0e=Object.freeze(Object.defineProperty({__proto__:null,default:wA},Symbol.toStringTag,{value:"Module"})),IA=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",fill:"currentColor",...e},d.createElement("path",{d:"M23.9202 4.06584C21.2885 1.44525 17.7882 0.00132957 14.0588 0C6.37397 0 0.119658 6.21909 0.116984 13.8635C0.115647 16.3072 0.758058 18.6925 1.97804 20.7946L0 27.9796L7.39072 26.0517C9.4269 27.1566 11.7198 27.7383 14.0528 27.739H14.0588C21.7423 27.739 27.9974 21.5192 28 13.8748C28.0013 10.17 26.5527 6.6871 23.9202 4.0665V4.06584ZM14.0588 25.3975H14.0541C11.9751 25.3969 9.93564 24.8411 8.15617 23.7914L7.73299 23.5415L3.34709 24.6856L4.5176 20.4329L4.24218 19.9968C3.08236 18.162 2.46937 16.0413 2.4707 13.8642C2.47338 7.51078 7.67149 2.34138 14.0635 2.34138C17.1586 2.34271 20.0678 3.54266 22.2557 5.72117C24.4437 7.89902 25.6476 10.7949 25.6463 13.8735C25.6436 20.2275 20.4455 25.3969 14.0588 25.3969V25.3975ZM20.4147 16.7673C20.0664 16.5938 18.3538 15.7561 18.0343 15.6405C17.7147 15.5248 17.4828 15.467 17.2508 15.814C17.0189 16.161 16.3511 16.9415 16.1478 17.1721C15.9446 17.4035 15.7414 17.4321 15.3931 17.2585C15.0449 17.085 13.9225 16.7194 12.5915 15.5394C11.5561 14.6206 10.8568 13.4866 10.6536 13.1395C10.4504 12.7925 10.6322 12.605 10.806 12.4329C10.9624 12.2773 11.1543 12.028 11.3287 11.8259C11.5033 11.6238 11.5607 11.4789 11.677 11.2482C11.7934 11.0168 11.7352 10.8148 11.6483 10.6412C11.5614 10.4677 10.8649 8.76253 10.574 8.06918C10.2912 7.39377 10.0039 7.48551 9.79059 7.47421C9.58736 7.46424 9.35542 7.46225 9.12279 7.46225C8.89016 7.46225 8.51309 7.54867 8.19358 7.89569C7.87407 8.24267 6.97426 9.08097 6.97426 10.7855C6.97426 12.49 8.22236 14.1381 8.39681 14.3694C8.57127 14.6008 10.8534 18.0995 14.3476 19.6006C15.1786 19.9576 15.8276 20.171 16.3336 20.3306C17.168 20.5945 17.9273 20.5573 18.5276 20.4682C19.1968 20.3685 20.5886 19.6299 20.8787 18.8208C21.1688 18.0117 21.1688 17.3177 21.0819 17.1734C20.995 17.0292 20.7624 16.9421 20.4141 16.7686L20.4147 16.7673Z"})),Q0e=Object.freeze(Object.defineProperty({__proto__:null,default:IA},Symbol.toStringTag,{value:"Module"}));function TA(){const e=Object.assign({"../../assets/lottie/chain-of-thought-dark.json":()=>P(()=>import("./chain-of-thought-dark-DAdrbVMG.js"),[]).then(t=>t.default),"../../assets/lottie/chain-of-thought-light.json":()=>P(()=>import("./chain-of-thought-light-Cr0oOWNN.js"),[]).then(t=>t.default),"../../assets/lottie/character-thinking-cloud-animation.json":()=>P(()=>import("./character-thinking-cloud-animation-BPHslFRh.js"),[]).then(t=>t.default),"../../assets/lottie/image-gen-dark.json":()=>P(()=>import("./image-gen-dark-Xe9QwJfO.js"),[]).then(t=>t.default),"../../assets/lottie/image-gen-light.json":()=>P(()=>import("./image-gen-light-CvTKvF-o.js"),[]).then(t=>t.default),"../../assets/lottie/loader-gradient.json":()=>P(()=>import("./loader-gradient-nOUtNO79.js"),[]).then(t=>t.default),"../../assets/lottie/loader-image-generating.json":()=>P(()=>import("./loader-image-generating-CXsAaCuT.js"),[]).then(t=>t.default),"../../assets/lottie/loader-reasoning-dark.json":()=>P(()=>import("./loader-reasoning-dark-BWb0u6bB.js"),[]).then(t=>t.default),"../../assets/lottie/loader-reasoning-light.json":()=>P(()=>import("./loader-reasoning-light-DeS5Bpum.js"),[]).then(t=>t.default),"../../assets/lottie/loader-spinner-dark.json":()=>P(()=>import("./loader-spinner-dark-OIzWyRIV.js"),[]).then(t=>t.default),"../../assets/lottie/loader-spinner-light.json":()=>P(()=>import("./loader-spinner-light-DwSZ3tXn.js"),[]).then(t=>t.default),"../../assets/lottie/loader-spinner-white.json":()=>P(()=>import("./loader-spinner-white-B1ATuHTQ.js"),[]).then(t=>t.default),"../../assets/lottie/pages-welcome-dark.json":()=>P(()=>import("./pages-welcome-dark-r64A2mUI.js"),[]).then(t=>t.default),"../../assets/lottie/pages-welcome-light.json":()=>P(()=>import("./pages-welcome-light-DDUDcHxX.js"),[]).then(t=>t.default),"../../assets/lottie/voicemail-dark.json":()=>P(()=>import("./voicemail-dark-BtARQIb1.js"),[]).then(t=>t.default),"../../assets/lottie/voicemail-light.json":()=>P(()=>import("./voicemail-light-DeMSWjpH.js"),[]).then(t=>t.default)});return{load:t=>{const n=e[t];return n?n():Promise.reject(new Error(`Lottie animation not found: ${t}`))},exists:t=>t in e,getPaths:()=>Object.keys(e)}}const Eq=d.lazy(()=>P(()=>import("./index.es-w3_8LO18.js"),__vite__mapDeps([297,1,0]))),Aq=TA();function $e(e){const{type:t,className:n,rendererSettings:s,colorTheme:o}=e,r=_(zn),c=o??r,[l,u]=d.useState(null),p=`../../assets/lottie/${d.useMemo(()=>{switch(t){case"gradient":return"loader-gradient.json";case"reasoning":return c==="dark"?"loader-reasoning-dark.json":"loader-reasoning-light.json";case"chainOfThought":return c==="dark"?"chain-of-thought-dark.json":"chain-of-thought-light.json";case"spinnerWhite":return"loader-spinner-white.json";case"imageGen":return c==="dark"?"image-gen-dark.json":"image-gen-light.json";case"spinnerThemed":default:return c==="dark"?"loader-spinner-dark.json":"loader-spinner-light.json"}},[t,c])}`;return d.useEffect(()=>{Aq.load(p).then(u).catch(()=>u(null))},[p]),l?i.jsx(d.Suspense,{fallback:i.jsx("div",{}),children:i.jsx(Eq,{animationData:l,loop:!0,className:n,rendererSettings:s})}):i.jsx("div",{})}const ab=Object.freeze(Object.defineProperty({__proto__:null,default:$e},Symbol.toStringTag,{value:"Module"})),J0e=["facebook","twitter","whatsapp","linkedin","reddit"],_q={facebook:"senderToFacebook",twitter:"senderToX",linkedin:"senderToLinkedIn",whatsapp:"senderToWhatsApp",reddit:"senderToReddit"},Id={facebook:{displayName:"Facebook",linkGenerator:e=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`,icon:i.jsx(CA,{})},twitter:{displayName:"X",linkGenerator:(e,t)=>`https://twitter.com/intent/tweet?url=${encodeURIComponent(e)}&text=${encodeURIComponent(t)}`,icon:i.jsx(wA,{})},whatsapp:{displayName:"WhatsApp",linkGenerator:(e,t)=>`https://api.whatsapp.com/send?text=${encodeURIComponent(`${t} ${e}`)}`,icon:i.jsx(IA,{})},linkedin:{displayName:"LinkedIn",linkGenerator:(e,t)=>`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(e)}&text=${encodeURIComponent(t)}`,icon:i.jsx(xA,{})},reddit:{displayName:"Reddit",linkGenerator:(e,t)=>`https://www.reddit.com/submit?url=${encodeURIComponent(e)}&title=${encodeURIComponent(t)}`,icon:i.jsx(SA,{})}};function X0e(e){const{socialMedia:t,className:n,loading:s,disabled:o,onClickSocialMedia:r,includeTitle:c,iconClassName:l="size-6"}=e,u=i.jsx("div",{className:l,children:Id[t].icon}),m="56-xl",p="subtle-dimmed-inverted",f=Id[t].displayName,h=W("flex-1 py-2",n);return i.jsxs($,{size:m,color:p,title:f,className:h,onClick:g=>r(t,g),disabled:o,children:[s?i.jsx($e,{className:"size-8"}):u,c&&i.jsx("span",{className:"font-medium text-foreground-550 text-3xs",children:Id[t].displayName})]})}function ebe(e,t,n){if(!t)return;const s=Id[e].linkGenerator(t,n??"");ks(s)}function EA(e){const{scenario:t,pageName:n,sectionName:s,customData:o}=e;Se({source:"shareMenu",scenario:t,pageName:n,sectionName:s,customData:o})}function tbe(e){const{conversationId:t,messageId:n}=e;M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"sharePreview",eventInfo_impressionElement:"shareBlockedBanner",eventInfo_conversationId:t,eventInfo_messageId:n}})}function nbe(e){const{conversationId:t,messageId:n,uploadedFileType:s}=e;M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"sharePreview",eventInfo_conversationId:t,eventInfo_messageId:n,eventInfo_uploadFileType:s}})}function sbe(e){const{scenario:t,uploadedFileType:n,conversationId:s,customData:o,clickDestination:r="copyLink"}=e;M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"shareButton",eventInfo_clickScenario:t,eventInfo_uploadFileType:n,eventInfo_clickDestination:r,eventInfo_customData:o,eventInfo_conversationId:s}})}function obe(e){const{scenario:t,socialMedia:n,customData:s,conversationId:o}=e;M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"shareButton",eventInfo_clickDestination:_q[n],eventInfo_clickScenario:t,eventInfo_customData:s,eventInfo_conversationId:o}})}function kq(e){const{shareId:t,sharedLevel:n,sharedDataType:s,impressionScenario:o}=e;M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"receivePreview",eventInfo_impressionScenario:o,eventInfo_customData:JSON.stringify({eventInfo_shareId:t,sharedLevel:n,sharedDataType:s})}})}function abe(){M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"talkToCopilot"}})}function rbe(e){const{cardType:t,messageId:n,conversationId:s,scenario:o}=e;yt({source:"shareMenu",scenario:o,messageId:n,conversationId:s,cardType:t})}function Nq(e){const{conversationId:t,messageId:n,errorName:s,errorMessage:o,errorStack:r}=e;M.trackEvent({name:"system",data:{eventName:"shareMessagesFailed",eventInfo_conversationId:t,eventInfo_messageId:n??"",eventInfo_error:s,eventInfo_errorMessage:o,eventInfo_errorStack:r}})}function Mq(){Se({source:"continueClicked"})}function Rq(e){const{shareId:t,error:n,conversationId:s}=e;Nt({feature:"share",scenario:"continueClickFailed",errorType:n==null?void 0:n.name,errorMessage:n==null?void 0:n.message,customData:JSON.stringify({eventInfo_shareId:t,eventInfo_conversationId:s})})}function ibe(){Se({source:"sharedLinkManagement"})}function Pq(e){Se({source:"delete",scenario:"deleteSingleSharedLink",customData:JSON.stringify({eventInfo_shareId:e})})}function Lq(e){const{details:t,errorMessage:n}=e;M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:t,eventInfo_errorMessage:n}})}function cbe(){Se({pageName:"chatPage",sectionName:"chatResponse",source:"addToPage"})}function lbe(e){Se({pageName:"addToPage",source:e})}function jq(){Se({sectionName:"actionMenu",source:"createNewPage"})}function Oq(e){Se({pageName:e,source:"openPage"})}function ube(){Se({pageName:"pages",sectionName:"editBar",source:"askCopilot"})}function dbe(e){const{action:t,pageId:n,conversationId:s,messageId:o,suggestionId:r}=e;Se({pageName:"pages",sectionName:"suggestions",source:t==="accept"?"applyRevision":"reject",conversationId:s,customData:JSON.stringify({eventInfo_pageId:n,eventInfo_messageId:o,eventInfo_suggestionId:r})})}function mbe(e){const{reaction:t,pageId:n,suggestionId:s,messageId:o,startIndex:r,endIndex:c,oldText:l,replacement:u,conversationId:m}=e;Se({pageName:"pages",sectionName:"suggestions",source:"pagesFeedback",scenario:t,conversationId:m,customData:JSON.stringify({eventInfo_pageId:n,eventInfo_reaction:t,eventInfo_suggestionId:s,eventInfo_messageId:o,eventInfo_startIndex:r,eventInfo_endIndex:c,eventInfo_oldText:l,eventInfo_replacement:u})})}function pbe(e){Nt({feature:"page",...e})}const fbe=["createPage","addToExistingPage","openPageOnChat","openPageOnHistory","openPageOnLibrary","copyPage"];function hbe(e,t,n){Xs({feature:"page",scenario:e,duration:Math.round(t),customData:JSON.stringify({eventInfo_pageId:n})})}function gbe(){Se({pageName:"pages",source:"hyperlinkInPages"})}function bbe({sectionName:e,pageId:t}){Se({sectionName:e,source:"deletePage",customData:JSON.stringify({eventInfo_pageId:t})})}function vbe({sectionName:e,pageId:t}){Se({sectionName:e,source:"renamePage",customData:JSON.stringify({eventInfo_pageId:t})})}function ybe(e){M.trackEvent({name:"interaction",data:{eventName:"copilotPagesEdited",eventInfo_customData:JSON.stringify({eventInfo_pageId:e})}})}function Cbe(e){const{pageName:t,sectionName:n,pageId:s}=e;Se({pageName:t,sectionName:n,source:"pagesSharing",customData:JSON.stringify({eventInfo_pageId:s})})}function xbe(e){const{pageName:t,sectionName:n,pageId:s,source:o}=e;Se({pageName:t,sectionName:n,source:o,customData:JSON.stringify({eventInfo_pageId:s})})}function Sbe(e){const{sectionName:t,pageId:n}=e;Se({sectionName:t,source:"removePagesSharing",customData:JSON.stringify({eventInfo_pageId:n})})}const wbe=["pagesHistory","direct"];function Ibe(e,t){M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"pagesSharing",eventInfo_impressionScenario:e}}),kq({shareId:t,sharedLevel:"singleAr",sharedDataType:"page",impressionScenario:"pages"})}const Tbe=["responsePreviewedPage","chatCreateNewPage","chatAddToExistingPage","chatDirectToNewPage","pagesHistory","actionMenuCreateNewPage","libraryMenuCreateNewPage","makeACopyViewerPage","makeACopyOwnerPage","makeACopyViewOnly","makeACopyPagesHistory","libraryPageItem"];function Ebe(e){M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"pages",eventInfo_impressionScenario:e}})}function Abe(e){const{pageName:t,sectionName:n,pageId:s}=e;Se({pageName:t,sectionName:n,source:"makePagesCopy",customData:JSON.stringify({eventInfo_pageId:s})})}function _be(){Se({pageName:"pages",source:"printPage"})}function Dq(e){M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"threePages",eventInfo_impressionScenario:e}})}async function Dr({from:e,to:t,params:n,search:s,state:o}){t.startsWith("/chats/")||De().set(em,null),await ip(0),await Pa.navigate({to:t,params:n,state:r=>({...r,from:e,...o}),search:s})}function Ns(){return Dr}function Uq(){const e=Ns(),t=Bl(),n=z(eo);return d.useCallback(async({pageId:s,pageType:o,closeSidebar:r,sourcePage:c,impressionScenario:l,featureLatencyInfo:u})=>{if(Oq(c),r&&n(!1),o==="sharedPage"){await e({to:"/shares/pages/$shareId",params:{shareId:s},from:t.state.location.pathname,state:{...u,impressionScenario:l}});return}await e({to:"/pages/$pageId",params:{pageId:s},from:t.state.location.pathname,state:{...u,impressionScenario:l}})},[e,t.state.location.pathname,n])}const pm=["completed","failed","cancelled"];function Fq(e){return e.content.find(t=>{var s;if(t.type!=="task")return!1;const n=(s=t.task)==null?void 0:s.status;return n&&!pm.includes(n)})}function Bq(e){for(let t=e.length-1;t>=0;t-=1){const n=e[t];if(n&&n.type==="task")return n}}function rb(e){for(const t of e){const n=Fq(t);if(n)return{message:t,part:n}}return null}const Vq=k(0),Hq=k(null),zq=k(null),pp=k("center"),AA=k(void 0),as=k(null),Wq=k(null),yu=k(null),fp=k(null),Gq=k(e=>{var s;const t=e(ao),n=rb(t);return((s=n==null?void 0:n.part.task)==null?void 0:s.type)==="research"}),$q=k(!1);k(new Map);const qq=k(!1),kbe=k(!1),ib=k(null),Ur=k(!1),Ag=k(!1),Kq=k(e=>e(Fr).isOpen||e(_A)),Fr=k({isOpen:!1,scenario:null}),_A=k(e=>{const t=e(fr);return t===null?!1:t===0||e(pI).includes(t)}),Zq=k(e=>{const t=e(_A),n=e(oo("location-prompt")),s=e(ao).filter(({author:r})=>r==="human").length,o=!!Mt(Rj);return t||!n||o?!1:s===wR}),is=k(null),Yq=De();function ia(e){e&&Yq.set(is,{title:e.title,subtitle:e.message,dismissable:!0,dismissAfter:10*1e3})}const fC="/pages";async function Qq(e,t){const n=await cn({path:"/pages",args:{body:{title:e,content:t},analytics:{anonymousPath:fC}}}),s=await n.json(),o=OH.safeParse(s);if(!n.ok&&o.success)throw new Error(o.data.errorCode);try{return NH.parse(s)}catch(r){throw r instanceof jd&&Al(r,fC,!1),r}}function Jq(){const{canCreatePage:e,canCreatePageForSignedOut:t}=Tq(),{t:n}=V(),[s,o]=d.useState(!1),r=Cr(),c=z(as),l=z(Fr),u=Uq();return{creatingPage:s,createPage:e?async({content:p,sourcePage:f,impressionScenario:h,featureLatencyInfo:g})=>{o(!0);try{const{id:y}=await Qq("",p);await u({pageId:y,closeSidebar:!0,sourcePage:f,impressionScenario:h,featureLatencyInfo:g})}catch(y){y instanceof Error&&y.message==="page-count-exceeded"&&t?(Dq(f),c(r?"prompt-3p-sign-in":"prompt-sign-in"),l({isOpen:!0,scenario:"sidebarActionCreatePage",reason:"pageLimitReached"})):ia({title:n("common.somethingWrong"),message:n("pages.errorCreatingMessage")})}finally{o(!1)}}:null}}function kA(e){const{callback:t,signInScenario:n,onShowSignIn:s,signInReason:o}=e,r=Gt(),c=z(Fr);return(...l)=>{if(!r){c({isOpen:!0,scenario:n,reason:o}),s&&typeof s=="function"&&s();return}t(...l)}}const hC=Yi.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),Ff={dedupe:!0},Xq=(e,t,n)=>{const{cache:s,compare:o,suspense:r,fallbackData:c,revalidateOnMount:l,revalidateIfStale:u,refreshInterval:m,refreshWhenHidden:p,refreshWhenOffline:f,keepPreviousData:h}=n,[g,y,b,x]=zs.get(s),[v,S]=Jl(e),C=d.useRef(!1),T=d.useRef(!1),w=d.useRef(v),I=d.useRef(t),A=d.useRef(n),E=()=>A.current,R=()=>E().isVisible()&&E().isOnline(),[U,K,H,te]=$1(s,v),oe=d.useRef({}).current,ne=je(c)?n.fallback[v]:c,ge=(ie,ve)=>{for(const Pe in oe){const _e=Pe;if(_e==="data"){if(!o(ie[_e],ve[_e])&&(!je(ie[_e])||!o(q,ve[_e])))return!1}else if(ve[_e]!==ie[_e])return!1}return!0},me=d.useMemo(()=>{const ie=!v||!t?!1:je(l)?E().isPaused()||r?!1:je(u)?!0:u:l,ve=O=>{const pe=ns(O);return delete pe._k,ie?{isValidating:!0,isLoading:!0,...pe}:pe},Pe=U(),_e=te(),Oe=ve(Pe),Ve=Pe===_e?Oe:ve(_e);let j=Oe;return[()=>{const O=ve(U());return ge(O,j)?(j.data=O.data,j.isLoading=O.isLoading,j.isValidating=O.isValidating,j.error=O.error,j):(j=O,O)},()=>Ve]},[s,v]),be=Dw.useSyncExternalStore(d.useCallback(ie=>H(v,(ve,Pe)=>{ge(Pe,ve)||ie()}),[s,v]),me[0],me[1]),we=!C.current,se=g[v]&&g[v].length>0,ae=be.data,fe=je(ae)?ne:ae,re=be.error,ke=d.useRef(fe),q=h?je(ae)?ke.current:ae:fe,G=se&&!je(re)?!1:we&&!je(l)?l:E().isPaused()?!1:r?je(fe)?!1:u:je(fe)||u,J=!!(v&&t&&we&&G),Ie=je(be.isValidating)?J:be.isValidating,X=je(be.isLoading)?J:be.isLoading,he=d.useCallback(async ie=>{const ve=I.current;if(!v||!ve||T.current||E().isPaused())return!1;let Pe,_e,Oe=!0;const Ve=ie||{},j=!b[v]||!Ve.dedupe,O=()=>Cl?!T.current&&v===w.current&&C.current:v===w.current,pe={isValidating:!1,isLoading:!1},Re=()=>{K(pe)},xe=()=>{const Le=b[v];Le&&Le[1]===_e&&delete b[v]},qe={isValidating:!0};je(U().data)&&(qe.isLoading=!0);try{if(j&&(K(qe),n.loadingTimeout&&je(U().data)&&setTimeout(()=>{Oe&&O()&&E().onLoadingSlow(v,n)},n.loadingTimeout),b[v]=[ve(S),Di()]),[Pe,_e]=b[v],Pe=await Pe,j&&setTimeout(xe,n.dedupingInterval),!b[v]||b[v][1]!==_e)return j&&O()&&E().onDiscarded(v),!1;pe.error=Ft;const Le=y[v];if(!je(Le)&&(_e<=Le[0]||_e<=Le[1]||Le[1]===0))return Re(),j&&O()&&E().onDiscarded(v),!1;const Je=U().data;pe.data=o(Je,Pe)?Je:Pe,j&&O()&&E().onSuccess(Pe,v,n)}catch(Le){xe();const Je=E(),{shouldRetryOnError:Dt}=Je;Je.isPaused()||(pe.error=Le,j&&O()&&(Je.onError(Le,v,Je),(Dt===!0||Jn(Dt)&&Dt(Le))&&(!E().revalidateOnFocus||!E().revalidateOnReconnect||R())&&Je.onErrorRetry(Le,v,Je,cs=>{const Tn=g[v];Tn&&Tn[0]&&Tn[0](Ws.ERROR_REVALIDATE_EVENT,cs)},{retryCount:(Ve.retryCount||0)+1,dedupe:!0})))}return Oe=!1,Re(),!0},[v,s]),Ue=d.useCallback((...ie)=>q1(s,w.current,...ie),[]);if(ga(()=>{I.current=t,A.current=n,je(ae)||(ke.current=ae)}),ga(()=>{if(!v)return;const ie=he.bind(Ft,Ff);let ve=0;const _e=$w(v,g,(Oe,Ve={})=>{if(Oe==Ws.FOCUS_EVENT){const j=Date.now();E().revalidateOnFocus&&j>ve&&R()&&(ve=j+E().focusThrottleInterval,ie())}else if(Oe==Ws.RECONNECT_EVENT)E().revalidateOnReconnect&&R()&&ie();else{if(Oe==Ws.MUTATE_EVENT)return he();if(Oe==Ws.ERROR_REVALIDATE_EVENT)return he(Ve)}});return T.current=!1,w.current=v,C.current=!0,K({_k:S}),G&&(je(fe)||dr?ie():Uw(ie)),()=>{T.current=!0,_e()}},[v]),ga(()=>{let ie;function ve(){const _e=Jn(m)?m(U().data):m;_e&&ie!==-1&&(ie=setTimeout(Pe,_e))}function Pe(){!U().error&&(p||E().isVisible())&&(f||E().isOnline())?he(Ff).then(ve):ve()}return ve(),()=>{ie&&(clearTimeout(ie),ie=-1)}},[m,p,f,v]),d.useDebugValue(q),r&&je(fe)&&v){if(!Cl&&dr)throw new Error("Fallback data is required when using suspense in SSR.");I.current=t,A.current=n,T.current=!1;const ie=x[v];if(!je(ie)){const ve=Ue(ie);hC(ve)}if(je(re)){const ve=he(Ff);je(q)||(ve.status="fulfilled",ve.value=!0),hC(ve)}else throw re}return{mutate:Ue,get data(){return oe.data=!0,q},get error(){return oe.error=!0,re},get isValidating(){return oe.isValidating=!0,Ie},get isLoading(){return oe.isLoading=!0,X}}},eK=Gw(Xq),gC=Cl?e=>{e()}:Yi.startTransition,tK=e=>{const[,t]=d.useState({}),n=d.useRef(!1),s=d.useRef(e),o=d.useRef({data:!1,error:!1,isValidating:!1}),r=d.useCallback(c=>{let l=!1;const u=s.current;for(const m in c){const p=m;u[p]!==c[p]&&(u[p]=c[p],o.current[p]&&(l=!0))}l&&!n.current&&t({})},[]);return ga(()=>(n.current=!1,()=>{n.current=!0})),[s,o.current,r]},nK=()=>(e,t,n={})=>{const{mutate:s}=K1(),o=d.useRef(e),r=d.useRef(t),c=d.useRef(n),l=d.useRef(0),[u,m,p]=tK({data:Ft,error:Ft,isMutating:!1}),f=u.current,h=d.useCallback(async(y,b)=>{const[x,v]=Jl(o.current);if(!r.current)throw new Error("Cant trigger the mutation: missing fetcher.");if(!x)throw new Error("Cant trigger the mutation: missing key.");const S=ns(ns({populateCache:!1,throwOnError:!0},c.current),b),C=Di();l.current=C,p({isMutating:!0});try{const T=await s(x,r.current(v,{arg:y}),ns(S,{throwOnError:!0}));return l.current<=C&&(gC(()=>p({data:T,isMutating:!1,error:void 0})),S.onSuccess==null||S.onSuccess.call(S,T,x,S)),T}catch(T){if(l.current<=C&&(gC(()=>p({error:T,isMutating:!1})),S.onError==null||S.onError.call(S,T,x,S),S.throwOnError))throw T}},[]),g=d.useCallback(()=>{l.current=Di(),p({data:Ft,error:Ft,isMutating:!1})},[]);return ga(()=>{o.current=e,r.current=t,c.current=n}),{trigger:h,reset:g,get data(){return m.data=!0,f.data},get error(){return m.error=!0,f.error},get isMutating(){return m.isMutating=!0,f.isMutating}}},cb=gj(eK,nK),_g=k(0),sK=k(0),NA=k(void 0),hp=k(!1),lb=k(e=>{const t=e(JO),n=e(xI),s=e(NA),o=e(hp);if(!(n||o))return t||s}),Br=k(e=>{const t=e(lb),n=e(_g);if(!t||t.length===0)return;const s=Math.max(0,Math.min(n,t.length-1));return t[s]}),ub=k(e=>{const t=e(Br),n=e(hp),s=e(lb);return n||!s?null:(t==null?void 0:t.type)==="textAndGreeting"?t.greeting??null:null}),MA=k(!1),oK=k(e=>{const t=e(Br);return t==null?void 0:t.title}),aK=k(e=>{const t=e(Br);return t==null?void 0:t.id}),rK=k(e=>{const t=e(Br),n=t==null?void 0:t.id;return n==="feature-discovery"||n==="image-generation"||n==="kickstarter"}),iK=k(null,(e,t)=>{const n=e(lb),s=e(_g);if(!n||n.length<=1)return;const o=(s+1)%n.length;t(_g,o)}),cK=k(void 0),Nbe=k(!1),lK=k(void 0),db=k(!1);k(void 0);const uK=Km(new Map),Mbe=k(e=>{const t=e(uK);return Array.from(t.values()).some(n=>n.isTracked)});k(void 0);const Rbe=k(null),Pbe=Km(void 0),Lbe=k(null);function Vr(){const e=_(ao),t=_(wn);return e.length===0&&!!(t!=null&&t.isNew)}function mb(){const e=_(db),t=_(lK),s=Vr()&&!!t,o=s&&!!(t!=null&&t.insights);return{isContextualShoppingCardExpanded:e,showShoppingCardInNewChat:s,shoppingProductMetadata:t,isCopilotOpenedViaEdgeCTAs:o}}function dK(e){if(!e.length)return;const t=ko("greetingIndex"),n=e.length,s=t?(parseInt(t,10)+1)%n:0;return wa("greetingIndex",s.toString()),e[s]}const pb=k(!1),mK=k(!1),RA=De(),pK=["chat.launchMessage.authenticatedV3Type1","chat.launchMessage.authenticatedV3Type2","chat.launchMessage.authenticatedV3Type3"],fK=["chat.launchMessage.unauthenticatedV3Type1","chat.launchMessage.unauthenticatedV3Type2","chat.launchMessage.unauthenticatedV3Type3"],hK=["chat.launchMessage.authenticatedV4Type1","chat.launchMessage.authenticatedV4Type2","chat.launchMessage.authenticatedV4Type3","chat.launchMessage.authenticatedV4Type4","chat.launchMessage.authenticatedV4Type5","chat.launchMessage.authenticatedV4Type6","chat.launchMessage.authenticatedV4Type7","chat.launchMessage.authenticatedV4Type8","chat.launchMessage.authenticatedV4Type9","chat.launchMessage.authenticatedV4Type10"],gK=["chat.launchMessage.unauthenticatedV4Type1","chat.launchMessage.unauthenticatedV4Type2","chat.launchMessage.unauthenticatedV4Type3","chat.launchMessage.unauthenticatedV4Type4","chat.launchMessage.unauthenticatedV4Type5","chat.launchMessage.unauthenticatedV4Type6","chat.launchMessage.unauthenticatedV4Type7","chat.launchMessage.unauthenticatedV4Type8","chat.launchMessage.unauthenticatedV4Type9","chat.launchMessage.unauthenticatedV4Type10"];function PA(){RA.set(pb,!0)}function bK(){RA.set(pb,!1)}function LA(){const{t:e}=V(),t=_(pb),n=_(nE),s=_(aK),o=_(ub),r=_(oK),c=D("landing-rotating-greeting"),{showShoppingCardInNewChat:l}=mb(),m=d.useCallback(()=>l?n?["chat.launchMessage.authenticatedShoppingType1"]:["chat.launchMessage.unauthenticatedShoppingType1"]:s&&s==="image-generation"?["chat.launchMessage.unauthenticatedImageWidgets"]:s&&s==="feature-discovery"?n?["chat.launchMessage.authenticatedWidgets"]:["chat.launchMessage.unauthenticatedWidgets"]:n?c?hK:pK:c?gK:fK,[n,c,l,s])(),p=d.useMemo(()=>dK(m),[m]),f=Number(ko("greetingIndex"))||0,h=d.useCallback(()=>r||(s==="feature-discovery"?e("chat.launchMessage.subheadingFeatureDiscoveryWidget"):s==="image-generation"?e("chat.launchMessage.subheadingImageGenWidget"):null),[r,s,e]);return{launchGreetingShown:t,greetingKey:p,widgetGreeting:o,widgetSubheading:h(),greetingIndex:f}}async function jA(e){const{conversationId:t=ue(Ae),talk:n=!1,location:s}=e;t&&await Dr({to:`/chats/$conversationId${n?"/talk":""}`,params:{conversationId:t},from:s.pathname,search:s.search?Object.fromEntries(new URLSearchParams(s.search)):{}})}async function Cu(e={}){await jA({conversationId:e.conversationId,talk:e.talk,location:Pa.state.location})}function OA(){const e=Bl(),{location:t}=e.state;return d.useCallback(async(n={})=>jA({conversationId:n.conversationId,talk:n.talk,location:{pathname:t.pathname,search:t.search}}),[t.search,t.pathname])}function DA(e){const{tasks:t,conversationId:n,taskType:s}=e;for(const o of t.values())if(o.conversationId===n){if(s&&o.type!==s)continue;return o.id}return""}function UA(e,t){return DA({tasks:e,conversationId:t,taskType:"computerUse"})!==""}function xu(e){ot(fb,e)}function FA(){return _(fb)}function vK(){return ue(fb)}const fb=k(null),ln=()=>ce("smart-mode-default")?"smart":"chat";function BA(e,t){let n=null;return(...s)=>{n!==null&&window.clearTimeout(n),n=window.setTimeout(()=>e(...s),t)}}const yK=300,jbe=2e3,Su=De(),CK=500,gp=k(""),VA=k("starter-prompts"),HA=k(!0),Bf=k(ln()),To=k(e=>e(Bf),(e,t,n)=>{if(e(Bf)===n)return;t(Bf,n),ce("sticky-conversation-mode")&&Zs("sticky-conversation-mode",n)}),cl=k(null);function kg(e){Su.set(gp,e)}function fm(){Su.set(gp,"")}function Td(e){Su.set(VA,e)}function qa(e){Su.set(HA,e)}function zA(e){Su.set(Ji,e)}function _n(e){const t=ue(To);switch((t==="computerUse"||t==="research")&&ot(cl,null),ot(To,e),e){case"computerUse":{ot(cl,"actions");break}case"research":{ot(cl,"researchReport");break}}}function hb(e){switch(ot(cl,e),e){case"image":ot(To,"chat");break;case"podcast":ot(To,"chat");break;case"researchReport":ot(To,"research");break;case"quiz":ot(To,"chat");break;case"actions":ot(To,"computerUse");break}}function gb(){return _(gp)}function xK(){return ue(gp)}function SK(){return _(VA)}function wK(){return _(HA)}function Bo(){return _(To)}function Vo(){return ue(To)}function WA(){return _(cl)}const IK=BA((e,t)=>{vG(ue(Ae),e,JSON.stringify(t))},CK);function TK(e,t){IK(e,t)}function EK(e,t){if(!t)return e;const[n,s,o]=e.slice(-3);if(!(Ta(o)&&Ta(s)&&(n==null?void 0:n.author)==="human"))return e;const c={left:o.sideBySideConfig.position==="left"?o:s,right:o.sideBySideConfig.position==="right"?o:s,createdAt:o.createdAt,id:t};return[n,c]}function AK(e){return GA(e)||Ta(e)}function GA(e){return"left"in e&&"right"in e}function Ta(e){return!e||e.author!=="ai"?!1:!!e.sideBySideConfig}const _K=g1(ao,e=>{if(!hm()||e.length===0)return!1;const t=e[e.length-1];return(t==null?void 0:t.author)==="ai"&&t.content.some(n=>n.type==="activity"&&n.activity.status==="running")}),kK=["ceo-thinkdeeper","ceo-smart-mode","ceo","webretrieval","webcontent","browser-actions"];function hm(){return kK.some(ce)}const cc=De();function Et(e,t,n=!1){const s=e.at(-1),o=e.find(({id:r})=>r===t);if((n||(s==null?void 0:s.id)===(o==null?void 0:o.id)||Ta(o))&&(o==null?void 0:o.author)==="ai")return o}function NK(e,t){const n=e.find(({author:s})=>s==="human");if((n==null?void 0:n.id)===t&&n.author==="human")return n}function bp(e){const t=e.at(-1);if((t==null?void 0:t.author)==="ai")return t}function yo(e,t){return e.find(n=>n.partId===t)}function MK(e){for(let t=e.length-1;t>=0;t-=1){const n=e[t];if(n&&n.type==="text")return n}}function Obe(e){return e.filter(t=>t.author==="ai").map(t=>({...t,content:t.content.filter(n=>n.type==="image")})).filter(t=>t.content.length>0)}function Dbe(e,t,n){const s=e.find(o=>o.id===t);if(!(!s||s.author!=="ai")){for(const o of s.content)if("partId"in o&&o.partId===n)return o}}function $A(e){if(!e)return null;const t=cc.get(Ct).get(e);if(!t)return null;const{history:n}=t;return rb(n)}function Qe(e,t){cc.set(Ct,n=>yn(n,s=>{const o=s.get(e);o&&t(o.history)}))}function bb(e,t){cc.set(Is,n=>yn(n,s=>{const o=s.get(e);o&&t(o)}))}function Bs(e,t){cc.set(Ct,n=>yn(n,s=>{const o=s.get(e);o&&t(o)}))}function ri(e,t){cc.set(c0,n=>yn(n,s=>{if(!t)return;const o=s.get(e);o?o.add(t):s.set(e,new Set([t]))}))}function RK(e){cc.set(FO,t=>yn(t,n=>{e&&n.set(e,!0)}))}function qA(e){_n(e)}function Zc(e,t){const n={type:"error",text:e,partId:"0"},s=Math.random().toString(),o={id:s,createdAt:new Date().toISOString(),author:"ai",content:[n],mode:ln()};ri(t,s),Qe(t,r=>{r.push(o)}),Bs(t,r=>{r.streamingState="idle"})}function PK(e){if(hm())for(const t of e.content)t.type==="activity"&&t.activity.status==="running"&&(t.activity.status="completed")}function KA(e){Bs(e,t=>{t.sideBySideComparisonId=void 0})}function ZA(e,t){const n=!t;Qe(e,s=>{const[o,r]=s.slice(-2);if(!(Ta(r)&&Ta(o)))return;const l=n?!r.sideBySideConfig.isDefault:r.id!==t,u=n?!o.sideBySideConfig.isDefault:o.id!==t;l?s.splice(s.length-1,1):u&&s.splice(s.length-2,1)})}function LK(e,t){ZA(e,t),KA(e)}function vb(e){ZA(e,void 0),KA(e)}function jK(e,t){const n=`indicator-ai-response-${Math.random().toString()}`;return Qe(e,s=>{const o=bp(s);o&&o.content.push({type:"indicator-ai-response",partId:n,state:"loading",text:t})}),n}function bC(e,t,n){t&&Qe(e,s=>{const o=bp(s);if(!o)return;const r=yo(o.content,t);!r||r.type!=="indicator-ai-response"||r.state!==n&&(o.content=o.content.map(c=>c.type==="indicator-ai-response"&&t===c.partId?{...c,state:n}:c))})}function YA(e){var l,u;const{id:t,shouldNavigateToChat:n=!0,shouldClearParentConversation:s=!0}=e;s&&ue(Ae)!==ue(em)&&ot(em,null),xu(null),ot(Ae,t),ot(Ji,!1),ot(Ct,m=>yn(m,p=>{const f=p.get(t);if(f!=null&&f.history.length&&(f.isNew=!1),f!=null&&f.history.some(h=>h.content.some(g=>g.type==="card"&&g.card.type==="ads"))){for(const h of f.history)if(h.author==="ai"&&h.content.some(g=>g.type==="card"&&g.card.type==="ads")){const g=h.content.filter(y=>y.type!=="card"||y.card.type!=="ads");h.content=g}}}));const o=ue(i0);if(o&&o!==t&&ot(Ct,m=>yn(m,p=>{p.delete(o)})),((u=(l=$A(t))==null?void 0:l.part.task)==null?void 0:u.type)==="research")_n("research");else{let m=ln();ce("sticky-conversation-mode")&&(m=Ys("sticky-conversation-mode")??ln()),_n(m)}const c=ue(Is);UA(c,t)?ot(nn,"side-by-side"):ot(nn,"chat-only"),n&&Cu({conversationId:t})}function OK(){return e=>YA(e)}const DK={headers:{"content-type":"application/json"},body:JSON.stringify({type:"private"})};function QA(e,{arg:t}={}){const s=(t==null?void 0:t.isPrivate)??!1?DK:void 0;return It(e,bz,{options:{method:"POST",...s}}).then(o=>o.data)}function yb(){const e=_(i0),{trigger:t}=cb("/conversations",QA),n=_(Ct),s=Xl(Ct),o=z(Jm),r=z(r0),c=z(iK),l=OK(),{portraitId:u}=du(),[m,p]=d.useState(!1);return{startConversationDisabled:m,createConversation:d.useCallback(async f=>{const{shouldNavigateToChat:h=!0,characterId:g,portraitId:y,isPrivate:b=!1}=f??{};if(e){const x=n.get(e);if(u!==void 0?u===y:(x==null?void 0:x.characterId)===g)return l({id:e,shouldNavigateToChat:h}),e}if(!m)try{p(!0);const{id:x}=await t({isPrivate:b}),v={id:x,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:g,streamingState:"idle",continuedAt:null};return b&&r(x),s(C=>{C.set(x,v)}),l({id:x,shouldNavigateToChat:!b&&h}),o(!0),bK(),c(),x}catch(x){console.error(x)}finally{p(!1)}},[e,m,n,u,l,t,s,r,o,c])}}function UK(){return Dr({to:"/",from:Pa.state.location.pathname})}function Ube(){const e=Ns(),t=Bl();return d.useCallback(async()=>{await e({to:"/",from:t.state.location.pathname})},[e,t.state.location.pathname])}const FK=k(!1),JA=k(!1),Ng=k(null),vC=k(null),BK=k(null),VK=k(!0),HK=k(-1),Fbe=k(!1),Bbe=qS("muteCoachmarkVisible",!0);k(!1);const zK=(e,t,n)=>{const s=e[t];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((o,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},{slice:WK,forEach:GK}=[];function $K(e){return GK.call(WK.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}const yC=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,qK=(e,t,n)=>{const s=n||{};s.path=s.path||"/";const o=encodeURIComponent(t);let r=`${e}=${o}`;if(s.maxAge>0){const c=s.maxAge-0;if(Number.isNaN(c))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(c)}`}if(s.domain){if(!yC.test(s.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${s.domain}`}if(s.path){if(!yC.test(s.path))throw new TypeError("option path is invalid");r+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");r+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(r+="; HttpOnly"),s.secure&&(r+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r},CC={create(e,t,n,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+n*60*1e3)),s&&(o.domain=s),document.cookie=qK(e,encodeURIComponent(t),o)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let s=0;s<n.length;s++){let o=n[s];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null},remove(e){this.create(e,"",-1)}};var KK={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return CC.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:s,cookieDomain:o,cookieOptions:r}=t;n&&typeof document<"u"&&CC.create(n,e,s,o,r)}},ZK={name:"querystring",lookup(e){var s;let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:o}=window.location;!window.location.search&&((s=window.location.hash)==null?void 0:s.indexOf("?"))>-1&&(o=window.location.hash.substring(window.location.hash.indexOf("?")));const c=o.substring(1).split("&");for(let l=0;l<c.length;l++){const u=c[l].indexOf("=");u>0&&c[l].substring(0,u)===t&&(n=c[l].substring(u+1))}}return n}};let Oc=null;const xC=()=>{if(Oc!==null)return Oc;try{Oc=window!=="undefined"&&window.localStorage!==null;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Oc=!1}return Oc};var YK={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&xC())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&xC()&&window.localStorage.setItem(n,e)}};let Dc=null;const SC=()=>{if(Dc!==null)return Dc;try{Dc=window!=="undefined"&&window.sessionStorage!==null;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Dc=!1}return Dc};var QK={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&SC())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&SC()&&window.sessionStorage.setItem(n,e)}},JK={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:s,language:o}=navigator;if(n)for(let r=0;r<n.length;r++)t.push(n[r]);s&&t.push(s),o&&t.push(o)}return t.length>0?t:void 0}},XK={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const s=t||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(n=s.getAttribute("lang")),n}},eZ={name:"path",lookup(e){var o;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(o=n[typeof t=="number"?t:0])==null?void 0:o.replace("/",""):void 0}},tZ={name:"subdomain",lookup(e){var o,r;let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,s=typeof window<"u"&&((r=(o=window.location)==null?void 0:o.hostname)==null?void 0:r.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(s)return s[n]}};function nZ(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}}class XA{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t||{languageUtils:{}},this.options=$K(n,this.options||{},nZ()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=o=>o.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(KK),this.addDetector(ZK),this.addDetector(YK),this.addDetector(QK),this.addDetector(JK),this.addDetector(XK),this.addDetector(eZ),this.addDetector(tZ)}addDetector(t){return this.detectors[t.name]=t,this}detect(t){t||(t=this.options.order);let n=[];return t.forEach(s=>{if(this.detectors[s]){let o=this.detectors[s].lookup(this.options);o&&typeof o=="string"&&(o=[o]),o&&(n=n.concat(o))}}),n=n.map(s=>this.options.convertDetectedLanguage(s)),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t,n){n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(t,this.options)}))}}XA.type="languageDetector";const e3=[{name:"Arabic",i18nCode:"ar",direction:"rtl"},{name:"Basque",i18nCode:"eu",direction:"ltr"},{name:"Bengali",i18nCode:"bn-IN",direction:"ltr"},{name:"Bulgarian",i18nCode:"bg",direction:"ltr"},{name:"Catalan",i18nCode:"ca",direction:"ltr"},{name:"Chinese (Simplified)",i18nCode:"zh-Hans",direction:"ltr"},{name:"Chinese (Traditional)",i18nCode:"zh-Hant",direction:"ltr"},{name:"Croatian",i18nCode:"hr",direction:"ltr"},{name:"Czech",i18nCode:"cs",direction:"ltr"},{name:"Danish",i18nCode:"da",direction:"ltr"},{name:"Dutch",i18nCode:"nl",direction:"ltr"},{name:"English (US)",i18nCode:"en-US",direction:"ltr"},{name:"English (UK)",i18nCode:"en-GB",direction:"ltr"},{name:"Estonian",i18nCode:"et",direction:"ltr"},{name:"Finnish",i18nCode:"fi",direction:"ltr"},{name:"French",i18nCode:"fr",direction:"ltr"},{name:"Galician",i18nCode:"gl",direction:"ltr"},{name:"German",i18nCode:"de",direction:"ltr"},{name:"Gujarati",i18nCode:"gu",direction:"ltr"},{name:"Hebrew",i18nCode:"he",direction:"rtl"},{name:"Hindi",i18nCode:"hi",direction:"ltr"},{name:"Hungarian",i18nCode:"hu",direction:"ltr"},{name:"Icelandic",i18nCode:"is",direction:"ltr"},{name:"Indonesian",i18nCode:"id",direction:"ltr"},{name:"Italian",i18nCode:"it",direction:"ltr"},{name:"Japanese",i18nCode:"ja",direction:"ltr"},{name:"Kannada",i18nCode:"kn",direction:"ltr"},{name:"Korean",i18nCode:"ko",direction:"ltr"},{name:"Latvian",i18nCode:"lv",direction:"ltr"},{name:"Lithuanian",i18nCode:"lt",direction:"ltr"},{name:"Malay",i18nCode:"ms",direction:"ltr"},{name:"Malayalam",i18nCode:"ml",direction:"ltr"},{name:"Marathi",i18nCode:"mr",direction:"ltr"},{name:"Norwegian (Bokml)",i18nCode:"nb-NO",direction:"ltr"},{name:"Polish",i18nCode:"pl",direction:"ltr"},{name:"Portuguese (Brazil)",i18nCode:"pt-BR",direction:"ltr"},{name:"Portuguese (Portugal)",i18nCode:"pt-PT",direction:"ltr"},{name:"Punjabi",i18nCode:"pa",direction:"ltr"},{name:"Romanian",i18nCode:"ro",direction:"ltr"},{name:"Russian",i18nCode:"ru",direction:"ltr"},{name:"Serbian (Latin)",i18nCode:"sr-Latn-RS",direction:"ltr"},{name:"Slovak",i18nCode:"sk",direction:"ltr"},{name:"Slovenian",i18nCode:"sl",direction:"ltr"},{name:"Spanish",i18nCode:"es",direction:"ltr"},{name:"Swedish",i18nCode:"sv",direction:"ltr"},{name:"Tamil",i18nCode:"ta",direction:"ltr"},{name:"Telugu",i18nCode:"te",direction:"ltr"},{name:"Thai",i18nCode:"th",direction:"ltr"},{name:"Turkish",i18nCode:"tr",direction:"ltr"},{name:"Ukrainian",i18nCode:"uk",direction:"ltr"},{name:"Vietnamese",i18nCode:"vi",direction:"ltr"}],t3=e3.map(e=>e.i18nCode);function sZ(e){return Cb(e)[0]??e}async function n3(e={}){const t=Wt.use(XA).use(dR);return Z.instance().config().useI18nHttpApi&&P(()=>import("./index-CUtnOa90.js"),__vite__mapDeps([298,1,0])).then(n=>{t.use(n.default)}),t.init({supportedLngs:e3.map(({i18nCode:n})=>n),fallbackLng:Cb,detection:{caches:["cookie"],cookieOptions:{expires:Ym(new Date,365*10)},convertDetectedLanguage:sZ,...e},interpolation:{escapeValue:!1}}).then(async n=>(await oZ(Wt.language),Wt.on("languageChanged",s=>{typeof document<"u"&&(document.body.dir=Wt.dir(s.toLowerCase()),document.documentElement.lang=s.toLowerCase())}),n))}async function oZ(e){e&&(await Promise.all(Cb(e).map(async t=>{try{const n=await zK(Object.assign({"../../config/strings/af/strings.json":()=>P(()=>import("./strings-B1PuzliI.js"),[]),"../../config/strings/am/strings.json":()=>P(()=>import("./strings-B7HEaUBH.js"),[]),"../../config/strings/ar/strings.json":()=>P(()=>import("./strings-BGs6Dynm.js"),[]),"../../config/strings/as/strings.json":()=>P(()=>import("./strings-CCJA6Rjg.js"),[]),"../../config/strings/az/strings.json":()=>P(()=>import("./strings-BzEffAmD.js"),[]),"../../config/strings/bg/strings.json":()=>P(()=>import("./strings-XFyNhW1e.js"),[]),"../../config/strings/bn-IN/strings.json":()=>P(()=>import("./strings-CFvtI4Im.js"),[]),"../../config/strings/bs/strings.json":()=>P(()=>import("./strings-RZTkrlnr.js"),[]),"../../config/strings/ca-Es-VALENCIA/strings.json":()=>P(()=>import("./strings-BigTc4vj.js"),[]),"../../config/strings/ca/strings.json":()=>P(()=>import("./strings-BMaAFrx1.js"),[]),"../../config/strings/cs/strings.json":()=>P(()=>import("./strings-nfKMEeYp.js"),[]),"../../config/strings/cy/strings.json":()=>P(()=>import("./strings-DITxy3s8.js"),[]),"../../config/strings/da/strings.json":()=>P(()=>import("./strings-3_h3-p1E.js"),[]),"../../config/strings/de/strings.json":()=>P(()=>import("./strings-D4xzGnHo.js"),[]),"../../config/strings/el/strings.json":()=>P(()=>import("./strings-C_n3BkOT.js"),[]),"../../config/strings/en-GB/strings.json":()=>P(()=>import("./strings-CrphS32r.js"),[]),"../../config/strings/en-US/strings.json":()=>P(()=>import("./strings-Dq4_pT2I.js"),[]),"../../config/strings/es-MX/strings.json":()=>P(()=>import("./strings-R9sB1o11.js"),[]),"../../config/strings/es/strings.json":()=>P(()=>import("./strings-yV3-KPrB.js"),[]),"../../config/strings/et/strings.json":()=>P(()=>import("./strings-CqxbiOyZ.js"),[]),"../../config/strings/eu/strings.json":()=>P(()=>import("./strings-S071AIUm.js"),[]),"../../config/strings/fa/strings.json":()=>P(()=>import("./strings-BAC68_Bx.js"),[]),"../../config/strings/fi/strings.json":()=>P(()=>import("./strings-CZpiS1dU.js"),[]),"../../config/strings/fil/strings.json":()=>P(()=>import("./strings-BoJV5pNN.js"),[]),"../../config/strings/fr-CA/strings.json":()=>P(()=>import("./strings-Dj4Hv5rf.js"),[]),"../../config/strings/fr/strings.json":()=>P(()=>import("./strings-CXhDcJir.js"),[]),"../../config/strings/ga/strings.json":()=>P(()=>import("./strings-CRGS0IZ9.js"),[]),"../../config/strings/gd/strings.json":()=>P(()=>import("./strings-BakSLhoh.js"),[]),"../../config/strings/gl/strings.json":()=>P(()=>import("./strings-CShf-Nt4.js"),[]),"../../config/strings/gu/strings.json":()=>P(()=>import("./strings-B06pmdqT.js"),[]),"../../config/strings/he/strings.json":()=>P(()=>import("./strings-DwbssGcK.js"),[]),"../../config/strings/hi/strings.json":()=>P(()=>import("./strings-D84jeIas.js"),[]),"../../config/strings/hr/strings.json":()=>P(()=>import("./strings-DgRFwXZ0.js"),[]),"../../config/strings/hu/strings.json":()=>P(()=>import("./strings-DRICm-3k.js"),[]),"../../config/strings/hy/strings.json":()=>P(()=>import("./strings-DV0mm4wQ.js"),[]),"../../config/strings/id/strings.json":()=>P(()=>import("./strings-CV0ldXlP.js"),[]),"../../config/strings/is/strings.json":()=>P(()=>import("./strings-C4fNuDZ2.js"),[]),"../../config/strings/it/strings.json":()=>P(()=>import("./strings-CCb-A_wu.js"),[]),"../../config/strings/ja/strings.json":()=>P(()=>import("./strings-DWMWt6RW.js"),[]),"../../config/strings/ka/strings.json":()=>P(()=>import("./strings-Da2dC4Hn.js"),[]),"../../config/strings/kk/strings.json":()=>P(()=>import("./strings-DNvza2xu.js"),[]),"../../config/strings/km-KH/strings.json":()=>P(()=>import("./strings-xnnSSz3Y.js"),[]),"../../config/strings/kn/strings.json":()=>P(()=>import("./strings-B6v4b1r0.js"),[]),"../../config/strings/ko/strings.json":()=>P(()=>import("./strings-BFMjHMbG.js"),[]),"../../config/strings/kok/strings.json":()=>P(()=>import("./strings-Di-Li2DK.js"),[]),"../../config/strings/lb/strings.json":()=>P(()=>import("./strings-aqCnkPW1.js"),[]),"../../config/strings/lo/strings.json":()=>P(()=>import("./strings-kijO5WFr.js"),[]),"../../config/strings/lt/strings.json":()=>P(()=>import("./strings-Dx71tskd.js"),[]),"../../config/strings/lv/strings.json":()=>P(()=>import("./strings-DXyhliMD.js"),[]),"../../config/strings/mi/strings.json":()=>P(()=>import("./strings-D7H5Kky6.js"),[]),"../../config/strings/mk/strings.json":()=>P(()=>import("./strings-ZQwGWfdk.js"),[]),"../../config/strings/ml/strings.json":()=>P(()=>import("./strings-CHN3t8uF.js"),[]),"../../config/strings/mr/strings.json":()=>P(()=>import("./strings-I9NQumeM.js"),[]),"../../config/strings/ms/strings.json":()=>P(()=>import("./strings-Dnr6520j.js"),[]),"../../config/strings/mt/strings.json":()=>P(()=>import("./strings-DdMZ4C_f.js"),[]),"../../config/strings/nb-NO/strings.json":()=>P(()=>import("./strings-DOotvFSp.js"),[]),"../../config/strings/ne/strings.json":()=>P(()=>import("./strings-BR2a3YUB.js"),[]),"../../config/strings/nl/strings.json":()=>P(()=>import("./strings-BUGA91El.js"),[]),"../../config/strings/nn-NO/strings.json":()=>P(()=>import("./strings-BymY3ZFH.js"),[]),"../../config/strings/or/strings.json":()=>P(()=>import("./strings-B2Xc76-O.js"),[]),"../../config/strings/pa/strings.json":()=>P(()=>import("./strings-D5WXEbVn.js"),[]),"../../config/strings/pl/strings.json":()=>P(()=>import("./strings-DO3fXQ8N.js"),[]),"../../config/strings/pt-BR/strings.json":()=>P(()=>import("./strings-XDosngoV.js"),[]),"../../config/strings/pt-PT/strings.json":()=>P(()=>import("./strings-CqWVRS21.js"),[]),"../../config/strings/quz/strings.json":()=>P(()=>import("./strings-r8mcHfKx.js"),[]),"../../config/strings/ro/strings.json":()=>P(()=>import("./strings-DjHE3Lg0.js"),[]),"../../config/strings/ru/strings.json":()=>P(()=>import("./strings-CSeZaRUl.js"),[]),"../../config/strings/sk/strings.json":()=>P(()=>import("./strings-CyZJEB7U.js"),[]),"../../config/strings/sl/strings.json":()=>P(()=>import("./strings-D1ELDbV4.js"),[]),"../../config/strings/sq/strings.json":()=>P(()=>import("./strings-NaR1J64p.js"),[]),"../../config/strings/sr-Cyrl-BA/strings.json":()=>P(()=>import("./strings-zPlEjHHo.js"),[]),"../../config/strings/sr-Cyrl-RS/strings.json":()=>P(()=>import("./strings-DmrGidSG.js"),[]),"../../config/strings/sr-Latn-RS/strings.json":()=>P(()=>import("./strings-BZoznI18.js"),[]),"../../config/strings/sv/strings.json":()=>P(()=>import("./strings-cDZ_2q8a.js"),[]),"../../config/strings/ta/strings.json":()=>P(()=>import("./strings-JQjEPQef.js"),[]),"../../config/strings/te/strings.json":()=>P(()=>import("./strings-CppFINzq.js"),[]),"../../config/strings/th/strings.json":()=>P(()=>import("./strings-7QZEh8RK.js"),[]),"../../config/strings/tr/strings.json":()=>P(()=>import("./strings-rPQpbZgk.js"),[]),"../../config/strings/tt/strings.json":()=>P(()=>import("./strings-COsYOQLC.js"),[]),"../../config/strings/ug/strings.json":()=>P(()=>import("./strings-DzpS3paQ.js"),[]),"../../config/strings/uk/strings.json":()=>P(()=>import("./strings-BQ8QuSar.js"),[]),"../../config/strings/ur/strings.json":()=>P(()=>import("./strings-BzztQs9o.js"),[]),"../../config/strings/uz-Latn-UZ/strings.json":()=>P(()=>import("./strings-BdMQj8YB.js"),[]),"../../config/strings/vi/strings.json":()=>P(()=>import("./strings-CWuTEJgw.js"),[]),"../../config/strings/zh-Hans/strings.json":()=>P(()=>import("./strings-D1WE3AO8.js"),[]),"../../config/strings/zh-Hant/strings.json":()=>P(()=>import("./strings-DtljOEpW.js"),[])}),`../../config/strings/${t}/strings.json`,6);Wt.addResourceBundle(t,"translation",n,!0,!0)}catch{console.warn(`Translation file for '${t}' not found.`)}})),await Wt.changeLanguage(e))}function Vbe(){return Wt.resolvedLanguage?Wt.resolvedLanguage.split("-")[0]==="en":!1}function Cb(e){const t="en-US";if(!e)return[t];const n=aZ(e),s=rZ(e),o=iZ(e);return[n,s,o,t].filter(r=>!!r).filter((r,c,l)=>l.indexOf(r)===c)}function aZ(e){return t3.find(t=>t.toLowerCase()===e.toLowerCase())}function rZ(e){if(["en-AU","en-NZ","en-IE"].includes(e))return"en-GB";if(e.startsWith("zh-")){const t=e.toLocaleLowerCase();return t==="zh-TW".toLocaleLowerCase()||t==="zh-HK".toLocaleLowerCase()?"zh-Hant":"zh-Hans"}}function iZ(e){var n;const t=(n=e.split("-")[0])==null?void 0:n.toLowerCase();if(t){const s=t3.find(o=>o.toLowerCase()===t||o.toLowerCase().startsWith(`${t}-`));if(s)return s}}const cZ=25,lZ=70,uZ=4,br=De(),Mg=k(null),s3=k("");let Vf=null;function dZ(e){br.set(s3,e)}function wC(){return br.get(s3)}function pi(e){br.set(ib,e)}function o3(){const e=br.get(Mg);e&&(e.abort(),br.set(Mg,null))}function mZ(){o3();const e=new AbortController;return br.set(Mg,e),e}function pZ(e,t){const n=new URL("https://www.bing.com/AS/Suggestions/V2?pt=page.chat"),s=Wt.resolvedLanguage,o=ue(sn);return n.searchParams.set("setlang",(s==null?void 0:s.toLowerCase())??"en"),n.searchParams.set("cc",(o==null?void 0:o.toLowerCase())??"us"),n.searchParams.set("qry",e.toLowerCase()),n.searchParams.set("cvid",t),ce("encacsc")&&n.searchParams.set("ascopilot1","1"),ce("enblsuggrndmzn")&&n.searchParams.set("ascopilot2","1"),ce("encpsrchdata")&&n.searchParams.set("ascopilot3","1"),n.toString()}async function fZ(e){const{query:t,conversationId:n,abortController:s}=e,o=pZ(t,n);return fetch(o,{signal:s.signal}).then(r=>r.json())}function hZ(e,t){const n=e.toLowerCase().split(/\s+/),s=t.st.toLowerCase().split(/\s+/);let o=0;for(let u=0;u<Math.min(n.length,s.length)&&n[u]===s[u];u+=1)o+=1;const r=t.st.split(/\s+/),c=r.slice(0,o).join(" "),l=r.slice(o).join(" ");return{original:t.st,sliced:l,prefill:c+(c?" ":"")}}async function gZ(e){var n;const t=ue(Ae);if(t)try{const s=mZ(),o=performance.now(),r=await fZ({query:e,conversationId:t,abortController:s});if(e===wC()){if(!r.s.length){pi(null),Nt({feature:"fetchChatAutoComplete",errorType:"NoSuggestions",customData:JSON.stringify({conversationId:t})});return}const c=r.s.map(l=>hZ(r.qc.q,l));if(!c.length){pi(null),Nt({feature:"fetchChatAutoComplete",errorType:"NoSuggestions",customData:JSON.stringify({conversationId:t})});return}pi({prefill:((n=c[0])==null?void 0:n.prefill)??e,conversationId:t,type:"BCT",suggestions:c.slice(0,uZ)}),Xs({feature:"fetchChatAutoComplete",duration:performance.now()-o})}}catch(s){s instanceof DOMException&&s.name==="AbortError"||M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"autosuggest",eventInfo_errorMessage:`${s}`,eventInfo_details:"Autosuggest API error"}}),e===wC()&&pi(null)}}function bZ(e){Vf&&clearTimeout(Vf),Vf=setTimeout(()=>{gZ(e)},cZ)}function a3(e){var o;let t=(o=Z.instance().config().landingPage)==null?void 0:o.regexForAutoSuggest;ce("one-char-autosuggest")&&(t=/\S+/);const n=ce("autosuggest")||ce("edge-autosuggest"),s=ue(Ae);if(!n||!t||!t.test(e)||e.length>=lZ){pi(null);return}dZ(e),!e||!s?pi(null):bZ(e)}function Yc(){o3(),br.set(ib,null)}const Hbe="https://aka.ms/copilot-ads/ads-settings",zbe="https://aka.ms/copilot-ads/verification-program",Wbe=["website-visits","interests","similar-audience"],Gbe="data-ad-part",$be={text:"textAd",multimedia:"multimediaAd",product:"productAd",propertyPromotion:"propertyPromotionAd",tourActivity:"tourActivityAd",miniShowroom:"miniShowroomAd",mainShowroom:"mainShowroomAd"},vZ=.05,qbe="focus:underline hover:underline group-focus/trackable-link:underline",yZ=128,CZ=188,xZ=147,SZ=95;function Kbe(e,t,n){const s=t==="product"?yZ:xZ,o=t==="product"?CZ:SZ;if(n.length===0||!e)return{width:s,height:o,resize:"object-contain"};const{maxDeviation:r,averageAspectRatio:c,count:l}=r3(n);return l===0||c===0?{width:s,height:o,resize:"object-contain"}:r>vZ?{width:s,height:wZ(n,s,o),resize:"object-contain"}:{width:s,height:s/c,resize:"object-cover"}}function wZ(e,t,n){const s=IZ(e,t);return s===-1?n:Math.min(n,s)}function IZ(e,t){const n=e.map(s=>{const o=s.type==="product"?s.offer.item.image:s.image;if(o.width&&o.height)return o.height/o.width*t}).filter(s=>typeof s=="number");return n.length>0?Math.max(...n):-1}function r3(e){if(e.length===0)return{maxDeviation:0,averageAspectRatio:0,count:0};const t=[];for(const o of e){const r=o.type==="product"?o.offer.item.image:o.image;if(r.width&&r.height){const c=r.width/r.height;t.push(c)}}if(t.length===0)return{maxDeviation:0,averageAspectRatio:0,count:0};const n=t.reduce((o,r)=>o+r,0)/t.length;return{maxDeviation:t.reduce((o,r)=>{const c=Math.abs(r/n-1);return Math.max(o,c)},0),averageAspectRatio:n,count:t.length}}function TZ(e){if(e.length===0)return{};const t=e.map(s=>{const o=s.type==="product"?s.offer.item.image:s.image;return{originalWidth:o.width,originalHeight:o.height}}),n=r3(e);return{imageSizes:t.length>0?t:void 0,imageAspectRatioVariance:n}}function EZ(e){var n;const t=[];for(const s of e){if(s.type!=="product"&&s.type!=="propertyPromotion"&&s.type!=="tourActivity")return null;if(!s.tags)continue;if(s.tags.length>1)return null;const o=s.tags[0];if(!(!o||!o.value))if(t.length===0)t.push(o);else{if(((n=t[0])==null?void 0:n.category)!==o.category)return null;t.find(r=>r.value===o.value)||t.push(o)}}return t}function Zbe(e,t){var n;return e!=null&&e.length?JSON.stringify({tagCategory:(n=e[0])==null?void 0:n.category,tagValue:(t==null?void 0:t.value)??"recommended",tagPosition:t?e.indexOf(t)+1:null,tagCount:e.length}):""}function AZ(e){return e.every(t=>t.type==="product"||t.type==="propertyPromotion"||t.type==="tourActivity")}function Ybe(e,t,n){let s=e;return t!=null&&t.length&&n?s=e.filter(o=>{var r;return o.tags&&((r=o.tags[0])==null?void 0:r.value)===n.value}):t!=null&&t.length&&!n&&(s=e.filter(o=>!o.tags)),s}class _Z{constructor(t){N(this,"startTime",0);N(this,"timeToFirstToken",0);N(this,"receivedFirstToken",!1);N(this,"receivedLastToken",!1);N(this,"currentAdditionalData");N(this,"currentMessageId","");N(this,"receivedMessageTime",0);N(this,"startMessageTime",0);N(this,"mostRecentTokenTime",0);this.startTime=t}resetStartTime(t){this.startTime=t,this.timeToFirstToken=0}onBeforeSend(){this.receivedFirstToken=!1,this.receivedLastToken=!1}onSent(t){this.currentAdditionalData=t}onReceived(t){this.receivedMessageTime=performance.now(),M.trackEvent({name:"system",data:{eventName:"copilotChatRequest",eventInfo_additionalData:this.currentAdditionalData,eventInfo_duration:this.receivedMessageTime-this.startTime,eventInfo_conversationId:t.conversationId,eventInfo_messageId:this.currentMessageId,eventInfo_mode:t.chatMode}})}onStartMessage(t){this.startMessageTime=performance.now(),this.currentMessageId=t.messageId,this.receivedMessageTime||(this.receivedMessageTime=this.startTime),M.trackEvent({name:"system",data:{eventName:"copilotChatReqToResp",eventInfo_duration:this.startMessageTime-this.receivedMessageTime,eventInfo_additionalData:this.currentAdditionalData,eventInfo_conversationId:t.conversationId,eventInfo_messageId:t.messageId,eventInfo_mode:t.chatMode}})}onFirstToken(t,n,s){if(!this.receivedFirstToken&&t===this.currentMessageId){const o=performance.now()-this.startTime;this.timeToFirstToken=o,this.receivedFirstToken=!0,M.trackEvent({name:"system",data:{eventName:"copilotChatRespToReceived",eventInfo_additionalData:this.currentAdditionalData,eventInfo_conversationId:s,eventInfo_duration:performance.now()-this.receivedMessageTime,eventInfo_messageId:t,eventInfo_mode:n}}),M.trackEvent({name:"system",data:{eventName:"copilotFirstTokenReceived",eventInfo_conversationId:s,eventInfo_messageId:t,eventInfo_duration:o,eventInfo_mode:n,eventInfo_additionalData:this.currentAdditionalData}})}this.mostRecentTokenTime=performance.now()}onLastToken(t){const{citationCount:n,imageCount:s,messageId:o,inputMethod:r,conversationId:c,chatMode:l,chainOfThoughtCount:u}=t;if(!this.receivedLastToken&&o===this.currentMessageId){const m=this.mostRecentTokenTime-this.startTime;this.receivedLastToken=!0,M.trackEvent({name:"system",data:{eventName:"copilotResponseRender",eventInfo_conversationId:c,eventInfo_messageId:o,eventInfo_numCitations:n,eventInfo_numImagesGenerated:s,eventInfo_numChainOfThoughts:u,eventInfo_inputMethod:r,eventInfo_responseMethod:"text",eventInfo_mode:l,eventInfo_additionalData:this.currentAdditionalData,eventInfo_landingPage:M.getLandingPage(),eventInfo_firstToLastTokenDuration:m-this.timeToFirstToken}}),M.trackEvent({name:"system",data:{eventName:"copilotLastTokenReceived",eventInfo_conversationId:c,eventInfo_messageId:o,eventInfo_duration:m,eventInfo_mode:l,eventInfo_additionalData:this.currentAdditionalData}}),M.trackEvent({name:"system",data:{eventName:"copilotChatE2E",eventInfo_conversationId:c,eventInfo_messageId:o,eventInfo_duration:performance.now()-this.startTime,eventInfo_mode:l,eventInfo_additionalData:this.currentAdditionalData}}),this.currentAdditionalData=void 0}}onAdsRender(t){const n=performance.now()-this.startTime,{ads:s}=t,o=s==null?void 0:s.find(g=>g.type==="miniShowroom"),r=o??(s&&s.length>0?s[0]:void 0),c=s&&AZ(s)?EZ(s):[],l=s==null?void 0:s.find(g=>g.type==="mainShowroom"),u=ue(No),m=ce("adsshowroombrandagent"),p=s&&s.length>0&&((r==null?void 0:r.type)==="product"||(r==null?void 0:r.type)==="tourActivity"||(r==null?void 0:r.type)==="propertyPromotion")?TZ(s):{};let f;o?f={brandId:o.brandId??(l==null?void 0:l.brandId),miniShowroom:{messageId:t.messageId,rguid:t.requestId}}:l&&u&&(f={brandId:u.brandId,brandLogo:u.brandLogo,brandBackground:u.brandBackground,viewMode:u.viewMode,brandAgentScenario:m?"chat":void 0,triggeredAtRguid:u.lastUserMessageRguid??void 0,miniShowroom:{messageId:u.miniShowroomAd.messageId,adId:u.adId},activeCard:{adId:l.id,rguid:t.requestId},previousCard:{adId:u.adId,rguid:u.activeCardRguid}});const h=JSON.stringify({eventType:t.eventType,adTags:c!=null&&c.length?c:void 0,showroom:f,...p});M.trackEvent({name:"system",data:{eventName:"copilotAdsSignal",eventInfo_scenario:"render",eventInfo_adType:r==null?void 0:r.type,eventInfo_adCount:s==null?void 0:s.length,eventInfo_rguid:t.requestId,eventInfo_messageId:t.messageId,eventInfo_conversationId:t.conversationId,eventInfo_duration:n,eventInfo_additionalData:h}})}onSubmitMessageBlocked(t,n,s){M.trackEvent({name:"interaction",data:{eventName:"copilotUserInputBlocked",eventInfo_inputMethod:n,eventInfo_mode:t,eventInfo_messageId:this.currentMessageId,eventInfo_conversationId:s,eventInfo_duration:performance.now()-this.startTime,eventInfo_additionalData:this.currentAdditionalData}})}onImageGenerationStart(t){const{messageId:n,conversationId:s,chatMode:o}=t,c=performance.now()-this.startTime;M.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"ImageGenStarted",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_mode:o,eventInfo_duration:c}})}onImageReceived(t){const{messageId:n,conversationId:s,chatMode:o}=t,r=performance.now()-this.startTime;M.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"ImageGenReceived",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_mode:o,eventInfo_duration:r}})}onPartialImageReceived(t){const{messageId:n,imageGenPhase:s,conversationId:o,chatMode:r}=t,c=performance.now()-this.startTime;M.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"PartialImageGenReceived",eventInfo_messageId:n,eventInfo_conversationId:o,eventInfo_mode:r,eventInfo_duration:c,eventInfo_customData:`${s}`}})}onMemorySignalReceived(t){const{messageId:n,conversationId:s}=t,r=performance.now()-this.startTime;M.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"MemorySignalReceived",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_duration:r}})}onChainOfThoughtReceived(t){const{messageId:n,conversationId:s,chatMode:o}=t,r=performance.now()-this.startTime;M.trackEvent({name:"system",data:{eventName:"copilotCoTFirstTokenReceived",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_mode:o,eventInfo_duration:r}})}}function kZ(e,t,n){switch(e.type){case"research":return{type:"task",task:{id:e.id,type:e.type,contents:[],partialOutput:[],inlineCitations:[],status:"pending",prompt:e.prompt},partId:t};case"computerUse":return{type:"task",task:{id:e.id,conversationId:e.conversationId,type:e.type,status:"running",updatedAt:n},partId:t};case"podcast":return{type:"task",task:{id:e.id,type:e.type,status:e.status,podcast:e.podcast,updatedAt:e.updatedAt??n},partId:t};default:return null}}const i3=e=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M3.28034 2.21968C2.98745 1.92678 2.51257 1.92677 2.21968 2.21966C1.92678 2.51255 1.92677 2.98743 2.21966 3.28032L3.48326 4.54395C3.17684 5.03983 3 5.62426 3 6.25V17.75C3 19.5449 4.45507 21 6.25 21H17.75C18.3757 21 18.96 20.8232 19.4559 20.5169L20.7194 21.7805C21.0123 22.0734 21.4872 22.0734 21.7801 21.7805C22.073 21.4876 22.073 21.0127 21.7801 20.7198L3.28034 2.21968ZM11.1189 12.1797C10.8678 12.2864 10.6322 12.4409 10.4258 12.643L4.60326 18.3437C4.53643 18.1583 4.5 17.9584 4.5 17.75V6.25C4.5 6.0437 4.5357 5.84574 4.60125 5.66196L11.1189 12.1797ZM19.5 6.25V16.3183L20.9993 17.8176C20.9998 17.7951 21 17.7726 21 17.75V6.25C21 4.45507 19.5449 3 17.75 3H6.25C6.2275 3 6.20505 3.00023 6.18265 3.00068L7.68194 4.5H17.75C18.7165 4.5 19.5 5.2835 19.5 6.25ZM18.3305 19.4014C18.1489 19.4653 17.9535 19.5 17.75 19.5H6.25C6.04613 19.5 5.8504 19.4651 5.66845 19.4011L11.4752 13.7148L11.5588 13.644C11.8501 13.4316 12.2596 13.4553 12.5247 13.7148L18.3305 19.4014ZM15.2521 6.5C16.4959 6.5 17.5042 7.50831 17.5042 8.75212C17.5042 9.99592 16.4959 11.0042 15.2521 11.0042C14.0083 11.0042 13 9.99592 13 8.75212C13 7.50831 14.0083 6.5 15.2521 6.5ZM15.2521 8C14.8367 8 14.5 8.33673 14.5 8.75212C14.5 9.1675 14.8367 9.50423 15.2521 9.50423C15.6675 9.50423 16.0042 9.1675 16.0042 8.75212C16.0042 8.33673 15.6675 8 15.2521 8Z",fill:"currentColor"})),Qbe=Object.freeze(Object.defineProperty({__proto__:null,default:i3},Symbol.toStringTag,{value:"Module"}));function NZ(e,t=200,n=50){const[s,o]=d.useState(!1),[r,c]=d.useState(null);return d.useEffect(()=>{let l;if(!e)l=setTimeout(()=>{o(!0),c(Date.now())},t);else if(s){const u=r?Date.now()-r:1/0,m=n-u;m>0?l=setTimeout(()=>{o(!1),c(null)},m):(o(!1),c(null))}return()=>{clearTimeout(l)}},[e,t,n,s,r]),s}function MZ(e={},t=!1){const[n,s]=d.useState(!1),[o,r]=d.useState(!1),{onFocus:c,onBlur:l,onPointerDown:u}=e;return[n,{onFocus:p=>{(!o||t)&&s(!0),c==null||c(p)},onBlur:p=>{s(!1),r(!1),l==null||l(p)},onPointerDown:p=>{r(!0),u==null||u(p)}}]}const xb="bg-stone-300/20 dark:bg-midnight-350/5",c3="border-black/8 dark:border-white/8";function RZ(e,t){return e?e===!0?{animate:{...t}}:{animate:e}:{style:t}}function PZ(e,t,n,s){const o=t?s:n;return e?{animate:o}:{style:o}}function vp(e){const{children:t,size:n="md",position:s="default",nested:o=!1,background:r="default",stroke:c,className:l,containerRef:u,interactable:m=!1,label:p,animate:f,onFocus:h,onBlur:g,onPointerDown:y,onAnimationStart:b,onAnimationComplete:x,focusOnPointerDown:v,isSelected:S=!1,...C}=e,[T,w]=MZ({onFocus:h,onBlur:g,onPointerDown:y},v),I=S||T,E=o&&(r==="acrylic"||r==="acrylic-thin"),R=E?Hf[`${n}-${s}`]:LZ[`${n}-${s}`],U=E?Hf[`${n}-${s}`]:jZ[`${n}-${s}`],K=E?Hf[`${n}-${s}`]:OZ[`${n}-${s}`],H={default:"bg-white/45 dark:bg-midnight-350/10",darker:xb,acrylic:kn,"acrylic-fallback":bL,"acrylic-thin":ua,"acrylic-thin-fallback":xL,transparent:"bg-transparent"},te=m?{"aria-label":p,role:"button",tabIndex:0,...w,onKeyDown:me=>{var be;(me.key==="Enter"||me.key===" ")&&(me.preventDefault(),(be=C.onClick)==null||be.call(C,me))}}:{onFocus:h,onBlur:g,onPointerDown:y},oe=RZ(f,R),ne=PZ(f,I,U,K),ge=l&&!l.includes("relative")&&!l.includes("absolute")&&!l.includes("fixed")&&"relative";return i.jsxs(ee.div,{className:F(H[r],l,ge,E&&"outline-1 outline-offset-2","isolate will-change-transform"),ref:u,onAnimationComplete:x,...oe,...te,...C,children:[t,i.jsx(ee.div,{className:F(I&&"border-foreground-750 dark:border-white",c&&!I&&c3,!c&&!I&&"border-transparent",!E&&"border-[20px]",E&&c&&!I&&"border",E&&c&&I&&"border-2","pointer-events-none absolute inset-0"),...ne})]})}const LZ={"xs-default":{clipPath:"var(--clip-path-squircle-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-24)"},"md-default":{clipPath:"var(--clip-path-squircle-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-48-60)"}},jZ={"xs-default":{clipPath:"var(--clip-path-squircle-stroke-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-stroke-24)"},"md-default":{clipPath:"var(--clip-path-squircle-stroke-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-stroke-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-stroke-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-stroke-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-stroke-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-stroke-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-stroke-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-stroke-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-stroke-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-stroke-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-stroke-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-stroke-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-stroke-48-60)"}},OZ={"xs-default":{clipPath:"var(--clip-path-squircle-stroke-focused-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-stroke-focused-24)"},"md-default":{clipPath:"var(--clip-path-squircle-stroke-focused-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-stroke-focused-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-stroke-focused-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-stroke-focused-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-stroke-focused-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-stroke-focused-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-stroke-focused-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-stroke-focused-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-48-60)"}},Hf={"xs-default":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:16,borderBottomRightRadius:16},"sm-default":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:24,borderBottomRightRadius:24},"md-default":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:36,borderBottomRightRadius:36},"lg-default":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xl-default":{borderTopLeftRadius:60,borderTopRightRadius:60,borderBottomLeftRadius:60,borderBottomRightRadius:60},"xs-top":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:12,borderBottomRightRadius:12},"sm-top":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:16,borderBottomRightRadius:16},"md-top":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:24,borderBottomRightRadius:24},"lg-top":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:36,borderBottomRightRadius:36},"xl-top":{borderTopLeftRadius:60,borderTopRightRadius:60,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xs-bottom":{borderTopLeftRadius:12,borderTopRightRadius:12,borderBottomLeftRadius:16,borderBottomRightRadius:16},"sm-bottom":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:24,borderBottomRightRadius:24},"md-bottom":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:36,borderBottomRightRadius:36},"lg-bottom":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xl-bottom":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:60,borderBottomRightRadius:60}};function Rg(e){const{onError:t,onLoad:n,loadingPlaceholder:s,alt:o,errorClass:r,className:c,src:l,fallbackSrc:u,stableKey:m,...p}=e,[f,h]=d.useState(!1),[g,y]=d.useState(!1),[b,x]=d.useState(!1),v=NZ(g);if(d.useEffect(()=>{h(!1),y(!1),x(!1)},[l]),f)return i.jsx(l3,{className:r});const S=b&&u?u:l;return i.jsxs(i.Fragment,{children:[v&&(s==null?void 0:s()),d.createElement("img",{...p,alt:o,key:m??S,src:S,className:F(c,!g&&s&&"absolute size-px opacity-0"),onLoad:C=>{y(!0),n==null||n(C)},onError:C=>{u&&!b?x(!0):h(!0),t==null||t(C)}})]})}function l3(e){const{className:t}=e;return i.jsx("div",{className:F("flex size-full items-center justify-center",xb,t),children:i.jsx(i3,{})})}function u3({path:e,args:t,onLoad:n,alt:s,...o}){const{data:r,isLoading:c}=xr(e,async u=>{const p=await(await Hn(u,t)).blob();return URL.createObjectURL(p)});d.useEffect(()=>{!c&&n&&n()},[c,n]);const l=()=>i.jsx("div",{...o});return i.jsx(Rg,{...o,alt:s,className:o.className,errorClass:o.className,loadingPlaceholder:c?l:void 0,src:c?void 0:r})}const IC=De();function DZ(e){var n,s;if(e.status!=="completed")return;const t=IC.get(Ae);Pa.latestLocation.pathname.startsWith("/chats")&&t&&e.conversationId===t||IC.set(is,{iconProvider:()=>{var o,r,c;return i.jsx(u3,{path:`/podcasts/user/${(o=e.podcast)==null?void 0:o.id}/Files/${(c=(r=e.podcast)==null?void 0:r.thumbnail)==null?void 0:c.name}`,className:"rounded-xl object-cover"})},title:B("podcasts.generationNotification.title"),subtitle:((n=e.podcast)==null?void 0:n.title)??"",action:()=>{var o;Dr({from:window.location.pathname,to:`/podcasts/user/${(o=e.podcast)==null?void 0:o.id}`})},trackingArgs:{scenario:"podcastGenerationNotification",customData:JSON.stringify({podcastId:(s=e.podcast)==null?void 0:s.id})},dismissAfter:3e4})}const UZ=k(!1),d3=k(void 0),FZ=k(!1),BZ=k(void 0),zf=De();function VZ(e,t){const n=zf.get(Ae);if(ce("ds-new-progress")&&e.status!=="completed"||!pm.includes(e.status)||(qA(ln()),!n||n===t))return;const o=e.id,r={title:B("research.generationNotification.title"),subtitle:B("research.generationNotification.subTitle"),link:B("research.generationNotification.subTitleLink"),action:()=>{Dr({from:window.location.pathname,to:`/chats/${t}`})},onClick:()=>{zf.set(BZ,o)},dismissable:!0,trackingArgs:{scenario:"researchCompletionNotification",customData:JSON.stringify({researchId:e.id,sourceConversationId:t})}};zf.set(is,r)}function HZ(){const e=_(Is),t=_(Ae);return d.useMemo(()=>{if(t){for(const n of e.values())if(n.conversationId===t)return n}},[t,e])}function zZ(){const e=De(),t=e.get(Is),n=e.get(Ae);if(n){for(const s of t.values())if(s.conversationId===n)return s}}const Gs=De(),WZ="MissingUrlFromApi",Jbe="https://aka.ms/copilot-actions-faq";function GZ(e,t){const n=Gs.get(Is).get(e);return(n==null?void 0:n.type)==="computerUse"&&!n.lastUserCommand&&$Z(n)&&t.some(o=>o.op==="replace"&&o.path==="/status"&&o.value==="paused")?Pg(t,["userTakeControl","pauseByClick"]):!1}function m3(e){return e==="paused"||e==="running"||e==="pending"}function $Z(e){var t,n;return e.status==="paused"&&(((t=e.statusChange)==null?void 0:t.reason)==="safetyRiskDetected"||((n=e.statusChange)==null?void 0:n.reason)==="askUserInput")}function qZ(e){var t;return e.status==="paused"&&((t=e.statusChange)==null?void 0:t.reason)==="safetyRiskDetected"}function KZ(e){var t;return e.status==="paused"&&((t=e.statusChange)==null?void 0:t.reason)==="userTakeControl"&&e.lastUserCommand==="takeTaskControl"}function Wf(e,t=!1){return e.map(n=>({type:"chainOfThought",text:n.text,screenshotUrl:t?WZ:null,reaction:null,partId:Math.random().toString()}))}function Pg(e,t){return e.some(n=>{if(n.op==="replace"&&n.path==="/statusChange"){const{value:s}=n;if(typeof s=="object"&&s!==null&&"reason"in s){const{reason:o}=s;if(typeof o=="string"){const r=$I.safeParse(o);return r.success&&t.includes(r.data)}}}return!1})}function ZZ(e,t){const n=Gs.get(Is).get(e);if((n==null?void 0:n.type)==="computerUse"){const{conversationId:s,status:o,statusChange:r}=n;if(!s)return;if(o==="cancelled"&&Qe(s,p=>{const f=TC(e,"cancelTask");p.push(f)}),Pg(t,["giveBackControl"])?Qe(s,p=>{const f=TC(e,"takeTaskControl");p.push(f)}):(r==null?void 0:r.reason)==="giveBackControl"&&EC(e),Pg(t,["taskCompleted"])&&Qe(s,p=>{const f={id:Math.random().toString(),createdAt:new Date().toISOString(),author:"ai",content:[{type:"card",partId:Math.random().toString(),card:{type:"computerUseFeedback"}}]};p.push(f)}),r)switch(r.reason){case"askUserInput":case"safetyRiskDetected":{o==="paused"?(r.reason==="askUserInput"&&Xs({feature:"computerUse",scenario:"askUserInput",customData:JSON.stringify({id:n.id,conversationId:n.conversationId})}),s===Gs.get(Ae)||Gs.set(is,{title:n.title&&n.title!==""?B("actions.alertTitleTemplate",{conversationName:n.title}):B("actions.defaultAlertTitle"),subtitle:r.reason==="safetyRiskDetected"?B("actions.safetyRiskAlertSubTitle"):B("actions.askUserInputAlertSubTitle"),action:()=>YA({id:s}),dismissAfter:30*1e3,dismissable:!0}),bb(e,f=>{"lastUserCommand"in f&&(f.lastUserCommand=void 0)})):EC(e);break}}const u=t.filter(p=>p.op==="add"&&p.path==="/chainOfThought/-").map(p=>({text:"value"in p?p.value:""}));u.length>0&&Qe(s,p=>{if(p.length===0)return;const f=AC(p);if(f)f.push(...Wf(u));else{const h={id:Math.random().toString(),createdAt:new Date().toISOString(),author:"ai",content:Wf(u)};p.push(h)}}),t.filter(p=>p.op==="replace"&&p.path==="/computerAction").length>0&&Qe(s,p=>{const f=AC(p);f&&f.push(...Wf([{text:n.computerAction??""}],!0))})}}function TC(e,t){return{id:Math.random().toString(),createdAt:new Date().toISOString(),author:"human",content:[{type:"command",command:{type:t,taskId:e}}]}}function EC(e){bb(e,t=>{"statusChange"in t&&(t.statusChange=void 0)})}function AC(e){const t=e.at(-1);if(t&&t.author==="ai"&&t.content.find(n=>n.type==="chainOfThought"))return t.content}function Xbe(e){var n;const t=zZ();return(t==null?void 0:t.type)==="computerUse"?t.status!=="running"&&!((n=t.replay)!=null&&n.isRunning)?!0:!e:!0}function eve(e){return!!(ce("labs-actions-replay")&&e&&e.type==="computerUse"&&!m3(e.status))}function tve(e){return{cancelTask:"copilotActionsCancelTask",takeTaskControl:"copilotActionsTakeControl",startTask:void 0,pauseTask:void 0,resumeTask:void 0,releaseTaskControl:void 0}[e]}function p3(e){return DA({tasks:Gs.get(Is),conversationId:e,taskType:"computerUse"})}function YZ(e,t){if(e===t&&(Gs.set(nn,"side-by-side"),qA(ln())),!ce("actions-auto-open-L2")||!e)return;const s=Gs.get(Ae);s&&Gs.set(em,s),Gs.set(Ae,e),Gs.set(nn,"side-by-side")}function QZ({entryAd:e,mainAd:t,messageId:n,partId:s,conversationId:o}){const r=ce("adsshowroombrandagent"),c=ue(No);if(!(!!(!c&&e&&t)||!!(!c&&e&&(r&&e.brandId||t))||(c==null?void 0:c.conversationId)===o&&!e&&t))return M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"AdsError",eventInfo_details:JSON.stringify({messageId:n,partId:s,conversationId:o,hasEntryAd:!!e,hasMainAd:!!t,isShowroomOpened:!!c,showroomBrandId:c==null?void 0:c.brandId}),eventInfo_errorMessage:`Unexpected showroom data received when showroom is ${c?"opened":"closed"}`}}),!1;const u=(t==null?void 0:t.logo)??(e==null?void 0:e.logo)??(c==null?void 0:c.brandLogo),m=typeof(t==null?void 0:t.backgroundColor)=="number",p=!u||!m,f=e&&!e.brandId;return(r?f:p)?(M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"AdsError",eventInfo_details:JSON.stringify({messageId:n,partId:s,conversationId:o,entryAdType:e==null?void 0:e.type,noBrandLogo:!u,noMainShowroomAd:!t,noBackgroundColor:!m}),eventInfo_errorMessage:"Unexpected data found in ads card"}}),!1):!0}function JZ({card:e,messageId:t,partId:n,conversationState:s,conversationId:o}){const{ads:r}=e;if(r!=null&&r.some(c=>c.type==="mainShowroom"||c.type==="miniShowroom")){const c=r[0],l=(c==null?void 0:c.type)==="miniShowroom",u=l?c:void 0,m=l?r[1]:c;if(!QZ({entryAd:u,partId:n,conversationId:o,messageId:t,mainAd:(m==null?void 0:m.type)==="mainShowroom"?m:void 0}))return}s.timing.onAdsRender({requestId:e.requestId,messageId:t,conversationId:o,eventType:"card",ads:r}),Qe(o,c=>{const l=Et(c,t);l&&l.content.push({type:"card",partId:n,card:e})})}function Hr(){return et(),!1}function Sb(e){return!1}function f3(e,t){var s;const n=Z.instance().config();return e&&!((s=n.settingsOverrides)!=null&&s.shouldHideMultipleCharacters)&&!t}function wu(){const e=D("multiplecharacters"),t=Hr();return f3(e,t)}function Lg(){const e=ce("multiplecharacters"),t=Sb();return f3(e,t)}const XZ=tu.extend({actionName:a.literal("edge_get_page_content"),parameters:a.array(a.object({tabId:a.number(),windowId:a.number(),pageUrl:a.string().nullish(),pageTitle:a.string().nullish(),pageType:a.string().nullish(),lastAccessedTime:a.number().nullish()}))}),eY=tu.extend({actionName:a.literal("browser_search"),parameters:a.object({queries:a.array(a.string()),startTime:a.string().nullish(),endTime:a.string().nullish(),maxResults:a.number().int().positive().default(10),states:a.array(a.string()).default(["history"])})}),tY=a.object({state:a.string(),title:a.string(),url:a.string(),pageSummary:a.string().nullish(),lastAccessed:a.coerce.date().nullish()});a.object({results:a.array(tY)});const Ho=tu.extend({actionType:a.string(),id:a.string()}),nY=Ho.extend({actionName:a.literal("edge_navigate_to"),parameters:a.object({tabId:a.number().optional(),url:a.string(),foregroundRun:a.boolean().optional()})}),sY=Ho.extend({actionName:a.literal("edge_switch_tab"),parameters:a.object({tabId:a.number()})}),oY=Ho.extend({actionName:a.literal("edge_close_tabs"),parameters:a.object({tabIds:a.array(a.number())})}),aY=Ho.extend({actionName:a.literal("edge_find_browser_tab_groups"),parameters:a.object({queries:a.string().array()})}),rY=Ho.extend({actionName:a.literal("edge_group_open_browser_tabs"),parameters:a.object({tabGroups:a.object({title:a.string(),tabIds:a.array(a.number()),color:a.union([a.literal("red"),a.literal("green"),a.literal("blue")]),collapsed:a.boolean()}).array()})}),iY=Ho.extend({actionName:a.literal("edge_ungroup_open_browser_tabs"),parameters:a.object({tabGroupIds:a.number().array()})}),cY=Ho.extend({actionName:a.literal("edge_media_controls"),parameters:a.object({action:a.union([a.literal("play"),a.literal("pause")])})}),lY=Ho.extend({actionName:a.literal("edge_go_back_forward"),parameters:a.object({direction:a.union([a.literal("back"),a.literal("forward")]),tabId:a.number().optional()})}),uY=a.union([nY,oY,aY,rY,iY,cY,sY,lY]),dY=a.object({type:a.literal("screenshot")}),mY=a.object({type:a.literal("click"),x:a.number(),y:a.number(),button:a.union([a.literal("back"),a.literal("forward"),a.literal("left"),a.literal("right"),a.literal("middle")])}),pY=a.object({type:a.literal("scroll"),x:a.number(),y:a.number(),scrollX:a.number(),scrollY:a.number()}),fY=a.object({type:a.literal("doubleClick"),x:a.number(),y:a.number()}),hY=a.object({type:a.literal("moveMouse"),x:a.number(),y:a.number()}),gY=a.object({type:a.literal("keyPress"),keys:a.string().array()}),bY=a.object({type:a.literal("drag"),path:a.object({x:a.number(),y:a.number()}).array()}),vY=a.object({type:a.literal("type"),text:a.string()}),yY=a.object({type:a.literal("wait"),seconds:a.number()}),CY=a.discriminatedUnion("type",[dY,mY,fY,hY,gY,bY,pY,vY,yY]),xY=Ho.extend({actionName:a.literal("computer_use"),parameters:a.object({tabId:a.number(),callId:a.string(),action:CY})}),SY=a.union([...uY.options,xY]),wY=a.discriminatedUnion("actionName",[XZ,eY,kF,...SY.options]),IY="edge://discover-chat-v2",TY="edge://discover-chat-v2.top-chrome",nve="Edge.Context.Pref",sve="Edge.Context.OnPref",ove="browser.underside_chat_consent",ave="browser.underside_video_transcript_consent",rve="Edge.Context.GetDocumentBody",ive="Edge.Context.OnGetDocumentBody",cve=32e3,EY=48e3,_C=64e3,AY=128e3,_Y="Edge.IsFeatureEnabled",kY="Edge.OnIsFeatureEnabled",lve="isCopilotToolsSupported",uve="isShowCopilotButtonSupported";class gm{constructor(){N(this,"resolve",null);N(this,"isCancelled");N(this,"token");this.token=new Promise(t=>{this.resolve=t}),this.isCancelled=!1}static cancelled(){const t=new gm;return t.cancel(),t}static create(t){const n=new gm;return t&&t.then(()=>n.cancel()),n}static delay(t){return this.create(new Promise(n=>{setTimeout(()=>n(null),t)}))}cancelled(){return this.isCancelled}cancel(){return!this.isCancelled&&this.resolve&&this.resolve(this),this.isCancelled=!0,this.isCancelled}dispose(){this.cancel()}}function NY(e){window.parent.postMessage(e,IY),window.parent.postMessage(e,TY)}class wb{constructor(t,n="",s,o,r){N(this,"listenerKey",wb.name);N(this,"result",null);N(this,"priority","Normal");N(this,"createdDate",new Date);N(this,"id");N(this,"resolveListener");N(this,"eventName");N(this,"canResolve");N(this,"options");this.eventName=t,this.id=n,s==null||s.then(()=>this.cancel()),this.canResolve=o,this.options=r}init(t){var s;!t||((s=this.options)==null?void 0:s.autoRemoveWhenResolveListenerReturnTrue)?this.result=new Promise((o,r)=>{t?this.resolveListener=c=>{if(c===null)return;const l=t(c);Promise.resolve(l).then(u=>{u&&o(c)}).catch(r)}:this.resolveListener=o}):this.resolveListener=t}maybeHandleEvent(t){if(!this.resolveListener)throw new Error("PostMessageListener is not initialized");const{eventName:n,requestId:s}=t;return s!==this.id?!1:n===this.eventName?this.canResolve&&!this.canResolve(t)?!1:(this.resolveListener(t),!0):!1}cancel(){if(!this.resolveListener)throw new Error("PostMessageListener is not initialized");return this.result&&this.resolveListener(null),!0}}const er=class er{constructor(){N(this,"activeListeners",[])}static instance(){return er.singleton||(er.singleton=new er),er.singleton}push(t,n,s){return t.init(s),this.activeListeners.push(t),n&&n(),t.result===null?Promise.resolve(null):t.result.then(o=>(this.pop(t),o)).catch(()=>(this.pop(t),null))}pop(t){const n=this.activeListeners.indexOf(t);n>-1&&this.activeListeners.splice(n,1)}findAndHandleListener(t){for(const n of[...this.activeListeners].sort((s,o)=>s.createdDate<o.createdDate?-1:1))if(n.maybeHandleEvent(t))break}};N(er,"singleton",null);let jg=er;class MY{constructor(){N(this,"isFeatureAvailableApiSupported");N(this,"enabledFeatures",new Map);this.isFeatureAvailableApiSupported=this.getFeatureAvailableApiSupported()}async isFeatureEnabled(t){return this.enabledFeatures.has(t)||await this.retrieveEnabledFeatures([t]),this.enabledFeatures.get(t)??!1}updateFeatureEnabledForTest(t,n){this.enabledFeatures.set(t,n)}async retrieveEnabledFeatures(t){if(!this.isFeatureAvailableApiSupported)return;await this.waitForNativeBridgeConnected();const n=1e3,s={eventName:_Y,requestId:crypto.randomUUID(),isOutgoing:!0,args:{featureNames:t}},o=await jg.instance().push(new wb(kY,s.requestId,gm.delay(n).token),()=>{NY(s)});if(o){const r=o.args;for(const c of t){const l=r.featureNames.includes(c);this.enabledFeatures.set(c,l)}}}getFeatureAvailableApiSupported(){for(const n of navigator.userAgent.split(" "))if(n.startsWith("Edg/")){const s=n.split("/")[1];if(s!==void 0){const o=s.split(".")[0];if(o!==void 0)return parseInt(o,10)>=132}}return!1}waitForNativeBridgeConnected(){const t=De();return t.get(Cd)?Promise.resolve():new Promise(n=>{const s=t.sub(Cd,()=>{t.get(Cd)&&(s(),n())})})}}const dve=new MY;function RY(e){return e!=null&&typeof e=="object"&&"id"in e&&typeof e.id=="number"&&"windowId"in e&&typeof e.windowId=="number"&&"url"in e&&typeof e.url=="string"}function PY(e){return Array.isArray(e)&&e.every(t=>RY(t))}function mve(e=_C){return ce("edge-long-doc-128k")?AY:ce("edge-long-doc-64k")?_C:ce("edge-long-doc-48k")?EY:e}function kC(e){const t=new Date(e).getTime();if(!Number.isNaN(t))return t}const LY={OPENED:pa.OPENED,RECENT:pa.RECENT,RECENTLY_CLOSED_TAB:pa.RECENT,HISTORY:pa.HISTORY};function jY(e){return e.map(t=>{const n=t.toUpperCase();return LY[n]??pa.HISTORY})}const OY=De();function DY(e){OY.set(Ct,t=>yn(t,n=>{for(const{title:s,id:o,updatedAt:r,continuedAt:c}of e){const l=n.get(o);l?(l.title=s,l.id=o,l.updatedAt=r,l.continuedAt=c):n.set(o,{id:o,title:s,updatedAt:r,history:[],streamingState:"idle",continuedAt:c})}}))}const UY=De();function FY(e,t,n){VY(e.map(s=>BY(s,t,n)).filter(s=>s!==void 0))}function BY(e,t,n){switch(e.type){case"research":return{id:e.id,conversationId:t,type:e.type,status:e.status,updatedAt:""};case"computerUse":return{id:e.id,conversationId:e.conversationId??"",type:e.type,status:e.status,updatedAt:e.updatedAt??"",title:e.title??"",lastScreenshot:e.lastScreenshot};case"podcast":return{id:e.id,conversationId:t,status:e.status==="completed"?"completed":"running",type:e.type,podcast:e.podcast,updatedAt:e.updatedAt??n};default:return}}function VY(e){UY.set(Is,n=>yn(n,s=>{for(const o of e){const r=s.get(o.id);if(r)r.title=o.title,r.conversationId=o.conversationId,r.updatedAt=o.updatedAt,r.status=o.status,r.type=o.type,r.type==="computerUse"&&o.type==="computerUse"&&(r.lastScreenshot=o.lastScreenshot);else{const c={id:o.id,title:o.title,conversationId:o.conversationId,updatedAt:o.updatedAt,status:o.status,type:o.type};c.type==="computerUse"&&o.type==="computerUse"&&(c.chainOfThought=[],c.lastScreenshot=o.lastScreenshot),o.type==="podcast"&&c.type==="podcast"&&(c.podcast=o.podcast),s.set(o.id,c)}}}));const t=e.filter(n=>n.type==="computerUse"&&n.conversationId).map(n=>{const{conversationId:s,title:o,updatedAt:r}=n;return{id:s??"",title:o,updatedAt:r,continuedAt:null,history:[],streamingState:"idle"}});DY(t)}const h3="cf-turnstile",HY=`#${h3}`;function zY(){const e=_(al),t=_(zn);return Sn("kill-cf-turnstile")?null:i.jsx(Es,{isOpen:e,className:"w-3/4 sm:w-[350px]",children:i.jsx("div",{id:h3,className:"flex flex-1 items-center justify-center","data-theme":t})})}const WY=new Pr(()=>new Promise((e,t)=>{const n=setTimeout(()=>{t(new Error("CF Turnstile script took too long to load"))},15e3),s=document.createElement("script");s.type="text/javascript",s.defer=!0,s.src="https://challenges.cloudflare.com/turnstile/v0/api.js",s.onload=()=>{clearTimeout(n),e()},s.onerror=()=>{clearTimeout(n),t(new Error("Failed to load turnstile script"))},document.body.appendChild(s)}));async function g3(e){if(Zt("kill-cf-turnstile")||ue(al))return;const n=De();M.trackEvent({name:"system",data:{eventName:"copilotTurnstileEvent",eventInfo_stage:"attempt"}}),Rm.flushSync(()=>{n.set(al,!0)});try{await WY.get()}catch{n.set(_l,"cf-turnstile");return}try{window.turnstile.render(HY,{sitekey:"0x4AAAAAAAg146IpY3lPNWte",callback:async s=>{e(s),window.turnstile.remove(),n.set(al,!1),M.trackEvent({name:"system",data:{eventName:"copilotTurnstileEvent",eventInfo_stage:"success"}})},"error-callback":s=>{M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"turnstileRenderErrorCallback",eventInfo_details:"Error rendering CF Turnstile.",eventInfo_errorMessage:s}})}})}catch(s){M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"turnstileRender",eventInfo_details:"Error rendering CF Turnstile",eventInfo_errorMessage:s instanceof Error?s.message:""}}),n.set(_l,"cf-turnstile")}}function GY(e){const t=e.match(/^\*\*(.*?)\*\*\n\n$/);if(t){const[,n]=t;return{title:(n==null?void 0:n.trim())??"",text:""}}return{title:"",text:e}}function Og(e){if(window.clarity)for(const[t,n]of Object.entries(e))window.clarity("set",t,n)}function NC(e){if(window.clarity)for(const t of e)window.clarity("event",t)}function bm(e,t){return e?Date.now()-parseInt(e,10)<=t:!1}function Ib(e,t){return!e||parseInt(e,10)<t}var FS;const pn=(FS=Z.instance().config().crossPromotion)==null?void 0:FS.aggressive;var BS,VS,HS,zS,WS;const zr={"thumbs-up":{cardFeature:"cross-promo-card-thumbsup",popupFeature:"cross-promo-popup-thumbsup",cardConfig:(BS=pn==null?void 0:pn.card)==null?void 0:BS.thumbsUp,popupConfig:(VS=pn==null?void 0:pn.popup)==null?void 0:VS.thumbsUp},copied:{cardFeature:void 0,popupFeature:"cross-promo-popup-copied",cardConfig:void 0,popupConfig:(HS=pn==null?void 0:pn.popup)==null?void 0:HS.copied},engaging:{cardFeature:void 0,popupFeature:"cross-promo-popup-engaging",cardConfig:void 0,popupConfig:(zS=pn==null?void 0:pn.popup)==null?void 0:zS.engaging},"think-deeper":{cardFeature:void 0,popupFeature:"cross-promo-popup-think-deeper",cardConfig:void 0,popupConfig:(WS=pn==null?void 0:pn.popup)==null?void 0:WS.thinkDeeper}};function $Y(){return{type:"popup",title:B("crossSelling.aggressivePromotion.popup.thumbsUpTitle"),subTitle:B("crossSelling.aggressivePromotion.popup.thumbsUpSubTitle"),images:zr["thumbs-up"].popupConfig}}function qY(){return{type:"card",title:B("crossSelling.aggressivePromotion.card.thumbsUpTitle"),subTitle:B("crossSelling.aggressivePromotion.card.thumbsUpSubTitle"),images:zr["thumbs-up"].cardConfig}}function KY(){return{type:"popup",title:B("crossSelling.aggressivePromotion.popup.copiedTitle"),subTitle:B("crossSelling.aggressivePromotion.popup.copiedSubTitle"),images:zr.copied.popupConfig}}function ZY(){return{type:"popup",title:B("crossSelling.aggressivePromotion.popup.engagingTitle"),subTitle:B("crossSelling.aggressivePromotion.popup.engagingSubTitle"),images:zr.engaging.popupConfig}}function YY(){return{type:"popup",title:B("crossSelling.aggressivePromotion.popup.thinkDeeperTitle"),subTitle:B("crossSelling.aggressivePromotion.popup.thinkDeeperSubTitle"),images:zr["think-deeper"].popupConfig}}function b3(e){const n=De().get(f0),s=n===!0?!1:n!==void 0,o=Mt(J1),r=!bm(o,2*Gd),c=Mt(Qd),l=Ib(c,2);s&&JY(e)&&r&&l&&XY(e)}let MC=!1;function QY(){const e=Vo();!MC&&(e==="reasoning"||e==="research")&&(b3("think-deeper"),MC=!0)}function JY(e){return Qc(e)||v3(e)}function Qc(e){const t=zr[e];return ce(t.popupFeature)&&t.popupConfig!==void 0}function v3(e){const t=zr[e];return t.cardFeature!==void 0&&ce(t.cardFeature)&&t.cardConfig!==void 0&&!s0()}function XY(e){const t=De();e==="thumbs-up"&&Qc(e)?t.set(Io,$Y()):e==="thumbs-up"&&v3(e)?t.set(Io,qY()):e==="copied"&&Qc(e)?t.set(Io,KY()):e==="engaging"&&Qc(e)?t.set(Io,ZY()):e==="think-deeper"&&Qc(e)&&t.set(Io,YY())}const Gf=k({counter:0,isActive:!0});function eQ(){const e=De(),t=e.get(Gf);if(!t.isActive)return;const n=t.counter+1;n===BR?(b3("engaging"),e.set(Gf,{counter:n,isActive:!1})):e.set(Gf,{counter:n,isActive:t.isActive})}function tQ(e){const{artifacts:t}=e;return t.find(n=>n.type==="browser")}function pve(e){var t,n;return((n=(t=Z.instance().config()).textOverrides)==null?void 0:n.call(t,e))??e}function nQ(){return ce("media-spotlight-card")||ce("media-spotlight-card-v2")}async function sQ(){const e=ce("weather-cards"),t=!Zt("kill-image-cards"),n=ce("local-cards"),s=!Zt("kill-sports-cards"),o=!Zt("kill-video-cards"),r=ce("healthcareinfocard")||ce("searchhealthcaremerged"),c=ce("searchhealthcareprovider")||ce("searchhealthcaremerged"),l=ce("shopping-card"),u=ce("shopping-curated"),m=nQ(),p=ce("job-cards"),f=ce("safetycards"),h=ce("quiz-cards"),g=ce("generateads"),y=ce("generateadsint"),b=ce("adsparity"),x=!Zt("kill-finance-cards"),v=ce("adstagsonline"),S=ce("product-ads-dynamic-filter"),C=ce("property-promotion-ads-dynamic-filter"),T=ce("tour-activity-ads-dynamic-filter"),w=ce("adsshowroom")||ce("adsshowroombrandagent"),I=ce("emoji-reactions"),A=ce("imagegenv3");ce("turn-telemetry");const E=!Zt("kill-recipe-cards"),R=ce("file-cards"),U=ce("side-by-side-comparison"),K=ce("inline-image"),H=ce("inline-video"),{adsEnabled:te,adsShowroomEnabled:oe,disableAnswerCards:ne,enforceAdsOptOutOfPersonalization:ge,answerCardOverrides:me}=Z.instance().config(),be=!!De().get(Ra),we=(g||y||b)&&te&&!be,se=m&&(me==null?void 0:me.shouldEnableMediaSpotlightCard),ae=ce("news-card"),fe=ce("media-carousel"),re=ce("search-personal-data"),ke=ce("onedrive-search"),q=ce("nav-links"),G=ce("flash-cards"),J=[];ne||(e&&J.push("weather"),n&&J.push("local"),t&&J.push("image"),K&&J.push("inlineImage"),s&&J.push("sports"),o&&J.push("video"),H&&J.push("inlineVideo"),c&&J.push("healthcareEntity"),r&&J.push("healthcareInfo"),l&&J.push("shopping"),p&&J.push("job"),we&&J.push("ads"),f&&J.push("safetyHelpline"),h&&J.push("quiz"),x&&J.push("finance"),u&&J.push("shoppingCurated"),E&&J.push("recipe"),R&&J.push("file"),se&&J.push("mediaSpotlight"),ae&&J.push("newsCarousel"),fe&&J.push("mediaCarousel"),re&&J.push("personalArtifacts"),ke&&J.push("m365"),G&&J.push("flashcard"),q&&J.push("webResult"));const Ie={supportedTypes:["text","product","multimedia","tourActivity","propertyPromotion"]};ge&&(Ie.optOutOfPersonalization=!0),w&&te&&oe&&Ie.supportedTypes.push("showroom"),(S||v)&&(Ie.product={tagsSupported:!0}),C&&(Ie.propertyPromotion={tagsSupported:!0}),T&&(Ie.tourActivity={tagsSupported:!0});const X=[];I&&X.push("emoji-reactions"),A&&X.push("partial-generated-images");const he=!gu({breakpoint:"lg"});U&&he&&X.push("side-by-side-comparison");const Ue={supportedFeatures:X,supportedCards:J.length>0?J:void 0,ads:we?Ie:null};return await x$.run(Ue)}const oQ="group/ai-message-item space-y-3 break-words",aQ=new Map([["1c","1C:Enterprise"],["abnf","Augmented Backus-Naur Form"],["accesslog","Apache Access Log"],["actionscript","ActionScript"],["ada","Ada"],["ado","Stata"],["adoc","AsciiDoc"],["ahk","AutoHotkey"],["angelscript","AngelScript"],["apache","Apache config"],["apacheconf","Apache config"],["applescript","AppleScript"],["arcade","ArcGIS Arcade"],["arduino","Arduino"],["arm","ARM Assembly"],["armasm","ARM Assembly"],["as","ActionScript"],["asc","AngelScript"],["asciidoc","AsciiDoc"],["aspectj","AspectJ"],["atom","HTML, XML"],["autohotkey","AutoHotkey"],["autoit","AutoIt"],["avrasm","AVR Assembly"],["awk","Awk"],["axapta","X++"],["bash","Bash"],["basic","BASIC"],["bat","Batch file (DOS)"],["bf","Brainfuck"],["bind","DNS Zone"],["bnf","BackusNaur Form"],["brainfuck","Brainfuck"],["c","C"],["c#","C#"],["c++","C++"],["cal","C/AL"],["capnp","Capn Proto"],["capnproto","Capn Proto"],["cc","C++"],["ceylon","Ceylon"],["cjs","JavaScript"],["clean","Clean"],["clj","Clojure"],["clojure","Clojure"],["clojure-repl","Clojure REPL"],["cls","Cach Object Script"],["cmake","CMake"],["cmake.in","CMake"],["cmd","Batch file (DOS)"],["coffee","CoffeeScript"],["coffeescript","CoffeeScript"],["console","Shell Session"],["coq","Coq"],["cos","Cach Object Script"],["cpp","C++"],["cr","Crystal"],["craftcms","Twig"],["crm","crmsh"],["crmsh","crmsh"],["crystal","Crystal"],["cs","C#"],["csharp","C#"],["cson","CoffeeScript"],["csp","CSP"],["css","CSS"],["cts","TypeScript"],["cxx","C++"],["d","D"],["dart","Dart"],["dcl","Clean"],["delphi","Delphi"],["dfm","Delphi"],["diff","Diff"],["django","Django"],["dns","DNS Zone"],["do","Stata"],["docker","Dockerfile"],["dockerfile","Dockerfile"],["dos","Batch file (DOS)"],["dpr","Delphi"],["dsconfig","dsconfig"],["dst","Dust"],["dts","Device Tree"],["dust","Dust"],["ebnf","Extended Backus-Naur Form"],["edn","Clojure"],["elixir","Elixir"],["elm","Elm"],["erb","ERB"],["erl","Erlang"],["erlang","Erlang"],["erlang-repl","Erlang REPL"],["ex","Elixir"],["excel","Excel formulae"],["exs","Elixir"],["f#","F#"],["f90","Fortran"],["f95","Fortran"],["feature","Gherkin"],["fix","FIX"],["flix","Flix"],["fortran","Fortran"],["fs","F#"],["fsharp","F#"],["gams","GAMS"],["gauss","GAUSS"],["gcode","G-code (ISO 6983)"],["gemspec","Ruby"],["gherkin","Gherkin"],["glsl","GLSL"],["gml","GML"],["gms","GAMS"],["go","Go"],["golang","Go"],["golo","Golo"],["gql","GraphQL"],["gradle","Gradle"],["graph","Roboconf"],["graphql","GraphQL"],["groovy","Groovy"],["gss","GAUSS"],["gyp","Python"],["h","C"],["h++","C++"],["haml","HAML"],["handlebars","Handlebars"],["haskell","Haskell"],["haxe","Haxe"],["hbs","Handlebars"],["hh","C++"],["hpp","C++"],["hs","Haskell"],["hsp","HSP"],["html","HTML, XML"],["html.handlebars","Handlebars"],["html.hbs","Handlebars"],["htmlbars","Handlebars"],["http","HTTP"],["https","HTTP"],["hx","Haxe"],["hxx","C++"],["hy","Hy"],["hylang","Hy"],["i7","Inform 7"],["iced","CoffeeScript"],["icl","Clean"],["inform7","Inform 7"],["ini","TOML, also INI"],["ino","Arduino"],["instances","Roboconf"],["ipython","Python"],["irb","Ruby"],["irpf90","IRPF90"],["isbl","ISBL"],["java","Java"],["javascript","JavaScript"],["jboss-cli","JBoss CLI"],["jinja","Django"],["jldoctest","Julia REPL"],["js","JavaScript"],["json","JSON"],["jsonc","JSON"],["jsp","Java"],["jsx","JavaScript"],["julia","Julia"],["julia-repl","Julia REPL"],["k","Q"],["kdb","Q"],["kotlin","Kotlin"],["kt","Kotlin"],["kts","Kotlin"],["lasso","Lasso"],["lassoscript","Lasso"],["latex","LaTeX"],["ldif","LDIF"],["leaf","Leaf"],["less","Less"],["lisp","Lisp"],["livecodeserver","LiveCode"],["livescript","LiveScript"],["llvm","LLVM IR"],["ls","Lasso"],["ls","LiveScript"],["lsl","LSL (Linden Scripting Language)"],["lua","Lua"],["m","Mercury"],["mak","Makefile"],["make","Makefile"],["makefile","Makefile"],["markdown","Markdown"],["mathematica","Mathematica"],["matlab","Matlab"],["maxima","Maxima"],["md","Markdown"],["mel","MEL"],["mercury","Mercury"],["mikrotik","MikroTik RouterOS script"],["mips","MIPS Assembly"],["mipsasm","MIPS Assembly"],["mizar","Mizar"],["mjs","JavaScript"],["mk","Makefile"],["mkd","Markdown"],["mkdown","Markdown"],["ml","OCaml"],["ml","SML (Standard ML)"],["mm","Objective-C"],["mma","Mathematica"],["mojolicious","Mojolicious"],["monkey","Monkey"],["moo","Mercury"],["moon","MoonScript"],["moonscript","MoonScript"],["mts","TypeScript"],["n1ql","N1QL"],["nc","G-code (ISO 6983)"],["nestedtext","Nested Text"],["nginx","Nginx config"],["nginxconf","Nginx config"],["nim","Nim"],["nix","Nix"],["nixos","Nix"],["node-repl","Node REPL"],["nsis","NSIS"],["nt","Nested Text"],["obj-c","Objective-C"],["obj-c++","Objective-C"],["objc","Objective-C"],["objective-c++","Objective-C"],["objectivec","Objective-C"],["ocaml","OCaml"],["openscad","OpenSCAD"],["osascript","AppleScript"],["oxygene","Oxygene"],["p21","STEP Part 21"],["parser3","Parser3"],["pas","Delphi"],["pascal","Delphi"],["patch","Diff"],["pb","PureBASIC"],["pbi","PureBASIC"],["pcmk","crmsh"],["pde","Processing"],["perl","Perl"],["pf","Packet Filter config"],["pf.conf","Packet Filter config"],["pgsql","PostgreSQL"],["php","php"],["php-template","PHP template"],["pl","Perl"],["plaintext","Plain text"],["plist","HTML, XML"],["pm","Perl"],["podspec","Ruby"],["pony","Pony"],["postgres","PostgreSQL"],["postgresql","PostgreSQL"],["powershell","PowerShell"],["pp","Puppet"],["processing","Processing"],["profile","Python profiler"],["prolog","Prolog"],["properties",".properties"],["proto","Protocol Buffers"],["protobuf","Protocol Buffers"],["ps","PowerShell"],["ps1","PowerShell"],["puppet","Puppet"],["purebasic","PureBASIC"],["pwsh","PowerShell"],["py","Python"],["pycon","python-repl"],["python","Python"],["python-repl","python-repl"],["q","Q"],["qml","QML"],["qt","QML"],["r","R"],["rb","Ruby"],["re","ReasonML"],["reasonml","ReasonML"],["rib","RenderMan RIB"],["roboconf","Roboconf"],["routeros","MikroTik RouterOS script"],["rs","Rust"],["rsl","RenderMan RSL"],["rss","HTML, XML"],["ruby","Ruby"],["ruleslanguage","Oracle Rules Language"],["rust","Rust"],["sas","SAS"],["scad","OpenSCAD"],["scala","Scala"],["scheme","Scheme"],["sci","Scilab"],["scilab","Scilab"],["scm","Scheme"],["scss","SCSS"],["sh","Bash"],["shell","Shell Session"],["shellsession","Shell Session"],["smali","Smali"],["smalltalk","Smalltalk"],["sml","SML (Standard ML)"],["sqf","SQF"],["sql","SQL"],["st","Smalltalk"],["stan","Stan"],["stanfuncs","Stan"],["stata","Stata"],["step","STEP Part 21"],["step21","STEP Part 21"],["stp","STEP Part 21"],["styl","Stylus"],["stylus","Stylus"],["subunit","SubUnit"],["sv","Verilog"],["svg","HTML, XML"],["svh","Verilog"],["swift","Swift"],["taggerscript","Tagger Script"],["tao","XL"],["tap","Test Anything Protocol"],["tcl","Tcl"],["tex","LaTeX"],["text","Plain text"],["thor","Ruby"],["thrift","Thrift"],["tk","Tcl"],["toml","TOML, also INI"],["tp","TP"],["ts","TypeScript"],["tsx","TypeScript"],["twig","Twig"],["txt","Plain text"],["typescript","TypeScript"],["v","Verilog"],["vala","Vala"],["vb","Visual Basic .NET"],["vbnet","Visual Basic .NET"],["vbs","VBScript"],["vbscript","VBScript"],["vbscript-html","VBScript in HTML"],["verilog","Verilog"],["vhdl","VHDL"],["vim","Vim Script"],["wasm","WebAssembly"],["wildfly-cli","JBoss CLI"],["wl","Mathematica"],["wren","Wren"],["wsf","HTML, XML"],["x++","X++"],["x86asm","Intel x86 Assembly"],["xhtml","HTML, XML"],["xjb","HTML, XML"],["xl","XL"],["xls","Excel formulae"],["xlsx","Excel formulae"],["xml","HTML, XML"],["xpath","XQuery"],["xq","XQuery"],["xqm","XQuery"],["xquery","XQuery"],["xsd","HTML, XML"],["xsl","HTML, XML"],["yaml","YAML"],["yml","YAML"],["zep","Zephir"],["zephir","Zephir"],["zone","DNS Zone"],["zsh","Bash"]]),Iu="&#95;{{{CITATION{{{&#95;",vm="{",rQ=Object.freeze(Object.defineProperty({__proto__:null,AI_MESSAGE_CONTAINER_CLASS:oQ,ALIAS_TO_SUPPORTED_LANGUAGE:aQ,CITATION_DIVIDER:vm,CITATION_PREFIX:Iu},Symbol.toStringTag,{value:"Module"}));function y3(e,t){return`[${Iu}${e}${vm}](${t})`}const iQ=new RegExp(`\\[${Iu}.*?\\)`,"g");function cQ(e){return e.replace(iQ,"")}const lQ=2500,uQ=255,fve=["pdf","docx"],yp=Km(new Map),hve=k(null),dQ=k(TR),mQ=k(uQ),pQ=k(lQ),gve=k([]);function fQ(e,t,n){return`${e}_${t}_${n}`}function hQ(e,t){De().set(yp,s=>{const o=s.get(e)??[],r=[];for(const c of t.editTargets){const l={id:fQ(t.id,c.startIndex,c.endIndex),pageSuggestionId:t.id,startIndex:c.startIndex,endIndex:c.endIndex,text:t.text};r.push(l)}s.set(e,[...o,...r])})}function bve(e,t){De().set(yp,s=>{const o=s.get(e);o&&s.set(e,o.filter(r=>r.id!==t))})}function vve(e){De().set(yp,n=>{n.delete(e)})}function gQ(e,t,n){De().set(yp,o=>{const r=o.get(e);if(r){const c=r.filter(l=>l.pageSuggestionId===t);for(const l of c)l.text===void 0&&(l.text=""),l.text+=n}})}function bQ(e){_s({scenario:"sideBySideMessages",page:"chat",customData:JSON.stringify({eventInfo_event:"receivedSxsEvent",eventInfo_sideBySideComparisonId:e})})}function vQ(e){const{sideBySideComparisonId:t,reason:n}=e;_s({scenario:"sideBySideMessages",page:"chat",customData:JSON.stringify({eventInfo_event:"skippedSxsMessages",eventInfo_sideBySideComparisonId:t,eventInfo_skippedReason:n})})}function yQ(e){const{sideBySideComparisonId:t,sideBySideConfig:n}=e,{position:s,isDefault:o}=n;Se({pageName:"chat",sectionName:"sideBySideMessages",source:"selectedSxs",customData:JSON.stringify({eventInfo_sideBySideComparisonId:t,eventInfo_position:s,eventInfo_isControlMessage:o})})}function C3(e){const{sideBySideComparisonId:t,reason:n}=e;Se({pageName:"chat",sectionName:"sideBySideMessages",source:"defaultedSxs",customData:JSON.stringify({eventInfo_sideBySideComparisonId:t,eventInfo_defaultReason:n})})}function CQ(e){const{card:t,messageId:n,conversationId:s}=e,o={eventName:"copilotImpression",eventInfo_impressionPage:"chat",eventInfo_impressionScenario:"answerCardReceived",eventInfo_answerCardType:t.type,eventInfo_messageId:n,eventInfo_conversationId:s};switch(t.type){case"image":o.eventInfo_answerCardContentLength=t.images.length;break;case"localEntity":o.eventInfo_answerCardContentLength=t.entities.length;break;case"financeChart":o.eventInfo_answerCardScenario=t.instrument.securityType;break}M.trackEvent({name:"system",data:o})}function xQ(e){const{card:t,messageId:n,conversationId:s}=e,o=performance.now(),r=ue(uI);if(!r)return;const c={eventName:"copilotAnswerCardReceived",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_cardType:t.type,eventInfo_duration:o-r};M.trackEvent({name:"system",data:c})}function SQ(e){const{message:t,conversationId:n}=e;for(const s of t.content)switch(s.type){case"card":CQ({card:s.card,messageId:t.id,conversationId:n}),xQ({card:s.card,messageId:t.id,conversationId:n});break}}function wQ(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}const yve=6048e5,IQ=864e5,Cve=6e4,TQ=36e5,xve=1e3,Sve=43200,wve=1440,Ive=60;function EQ(e,t){return+ft(e)-+ft(t)}function AQ(e,t,n){const s=EQ(e,t)/TQ;return wQ(n==null?void 0:n.roundingMethod)(s)}function Tb(e){if(!e)return null;let t=null;const n=new Date(e).toISOString(),s=new Date().toISOString(),o=AQ(n,s,{roundingMethod:"ceil"});return o>24?t="permanent":o>1&&o<=24?t="24-hr":o>0&&o<=1&&(t="1-hr"),t}function Eb(e,t,n){if(!e){ct(Qh);return}const s=De();M.trackEvent({name:"system",data:{eventName:"copilotUserBan",eventInfo_banDuration:e,eventInfo_banSource:t,eventInfo_banExpiryTimestamp:n}}),s.set(dE,e),s.set(_l,"user-banned")}async function x3(e){M.setSettings({userConsentModelTraining:!e.optOutOfTraining,userConsentPersonalization:!e.optOutOfPersonalization,userSettingPhoneConnection:!e.optOutOfPhoneConnection,userSettingBrowserActions:e.allowBrowserActions,userSettingComputerUseActions:e.allowComputerUseActions,userSettingGenUI:!e.optInToGenerativeUI}),await cn({path:"/user/settings",args:{options:{method:"PATCH"},body:{optOutOfTraining:e.optOutOfTraining,optOutOfPersonalization:e.optOutOfPersonalization,optInToVoiceTraining:e.optInToVoiceTraining,optOutOfPhoneConnection:e.optOutOfPhoneConnection,optInToGenerativeUI:e.optInToGenerativeUI,allowBiometricDataUse:e.allowBiometricDataUse,allowOneDriveAccess:e.allowOneDriveAccess,allowBrowserActions:e.allowBrowserActions,allowComputerUseActions:e.allowComputerUseActions,allowOutlookAccess:e.allowOutlookAccess,features:e.features}}})}async function _Q(){var t,n;const e=await It("/user",DT,{parseOptions:{safe:!0},query:{"api-version":"2"}}).then(s=>s.data);De().set(rp,((t=e.remainingCalls)==null?void 0:t.podcastGeneration)??null),De().set(uu,((n=e.remainingCalls)==null?void 0:n.research)??null)}const rt=De();function RC(e){return{chatMode:ln(),timing:new _Z(e),citationCount:0,imageCount:0,chainOfThoughtCount:0,inputMethod:"text"}}let $f=null;async function PC(){return $f||($f=P(()=>import("./index-DS1hydBz.js"),[]).then(e=>e.applyPatch)),$f}class kQ{constructor(t){N(this,"ws");N(this,"conversationMetadata",new Map);N(this,"conversationIdByMessageId",new Map);N(this,"messageIdByTaskId",new Map);N(this,"latestMessagePartIdentifier",null);N(this,"pendingSideBySideMessages",new Map);this.ws=t,this.send=this.send.bind(this),this.regenerate=this.regenerate.bind(this),this.sendChallengeResponse=this.sendChallengeResponse.bind(this),this.resetConversationState=this.resetConversationState.bind(this),this.resetConversationTiming=this.resetConversationTiming.bind(this),this.setConversationIdByMessageId=this.setConversationIdByMessageId.bind(this),this.setMessageIdByTaskId=this.setMessageIdByTaskId.bind(this),this.onSubmitMessageBlocked=this.onSubmitMessageBlocked.bind(this),this.callBeforeSendForConversation=this.callBeforeSendForConversation.bind(this),this.callOnSentForConversation=this.callOnSentForConversation.bind(this),this.setChatModeForConversation=this.setChatModeForConversation.bind(this),this.setInputMethodForConversation=this.setInputMethodForConversation.bind(this),this.setUserMessageForConversation=this.setUserMessageForConversation.bind(this),this.processEvent=this.processEvent.bind(this),this.sendMessagePreview=this.sendMessagePreview.bind(this),this.updateChatOptions=this.updateChatOptions.bind(this),this.sendAudioClick=this.sendAudioClick.bind(this)}getConversationState(t){return this.conversationMetadata.has(t)||this.conversationMetadata.set(t,RC(performance.now())),this.conversationMetadata.get(t)}get latestMessagePartId(){return this.latestMessagePartIdentifier}resetConversationState(t,n){this.conversationMetadata.set(t,RC(n))}resetConversationTiming(t,n){this.getConversationState(t).timing.resetStartTime(n)}setConversationIdByMessageId(t){const{messageId:n,conversationId:s}=t;this.conversationIdByMessageId.set(n,s)}setMessageIdByTaskId(t){const{taskId:n,messageId:s}=t;this.messageIdByTaskId.set(n,s)}onSubmitMessageBlocked(t){const{timing:n,chatMode:s,inputMethod:o}=this.getConversationState(t);n.onSubmitMessageBlocked(s,o,t)}callBeforeSendForConversation(t){this.getConversationState(t).timing.onBeforeSend()}callOnSentForConversation(t,n){this.getConversationState(t).timing.onSent(n)}setChatModeForConversation(t,n){const s=this.getConversationState(t);s.chatMode=n}setInputMethodForConversation(t,n){const s=this.getConversationState(t);s.inputMethod=n}setUserMessageForConversation(t,n){const s=this.getConversationState(t);s.lastUserMessage=n}send(t){const{content:n,conversationId:s,data:o,mode:r,context:c}=t,l={event:"send",conversationId:s,content:Array.isArray(n)?n:[n],mode:r,context:c,...o};this.ws.send(JSON.stringify(l))}sendChallengeResponse(t){this.ws.send(JSON.stringify({event:"challengeResponse",token:t.token,method:t.method}))}regenerate(t){const{messageId:n,mode:s,allowedConsents:o}=t,r={event:"regenerate",messageId:n,mode:s,...o!=null&&o.length?{allowedConsents:o}:{}};this.ws.send(JSON.stringify(r))}sendMessagePreview(t){const{content:n,conversationId:s,data:o,mode:r,context:c}=t,l={event:"messagePreview",conversationId:s,content:Array.isArray(n)?n:[n],mode:r,context:c,...o};this.ws.send(JSON.stringify(l))}sendAudioClick(t,n){if(!n)return;const{chatMode:s}=this.getConversationState(n);this.send({conversationId:n,content:[{type:"command",command:{type:"topicClick",content:t}}],mode:s})}async updateChatOptions(){const n={event:"setOptions",...await sQ()};this.ws.send(JSON.stringify(n))}processEvent(t){switch("id"in t&&(this.latestMessagePartIdentifier=t.id??null),t.event){case"received":this.handleReceived(t);break;case"connected":this.handleConnected(t);break;case"emojiReaction":this.handleEmojiReaction(t);break;case"startMessage":this.handleStartMessage(t);break;case"appendText":this.handleAppendText(t);break;case"replaceText":this.handleReplaceText(t);break;case"invokeAction":this.handleInvokeAction(t);break;case"browserAutomate":this.handleBrowserAutomate(t);break;case"chainOfThought":this.handleChainOfThought(t);break;case"citation":this.handleCitation(t);break;case"generatingImage":this.handleGeneratingImage(t);break;case"imageGenerated":this.handleImageGenerated(t);break;case"partialImageGenerated":this.handlePartialImageGenerated(t);break;case"imageGenerationFailed":this.handleImageGenerationFailed(t);break;case"generatingCard":this.handleGeneratingCard(t);break;case"cardGenerationFailed":this.handleCardGenerationFailed(t);break;case"page":this.handlePage(t);break;case"titleUpdate":this.handleTitleUpdate(t);break;case"challenge":this.handleChallenge(t);break;case"card":this.handleCard(t);break;case"document":this.handleDocument(t);break;case"taskStart":this.handleTaskStart(t);break;case"taskUpdate":this.handleTaskUpdate(t);break;case"error":this.handleError(t);break;case"banned":this.handleBanned(t);break;case"suggestedFollowups":this.handleSuggestedFollowups(t);break;case"done":this.handleDone(t);break;case"startSuggestion":this.handleStartSuggestion(t);break;case"appendSuggestion":this.handleAppendSuggestion(t);break;case"activityStart":this.handleActivityStart(t);break;case"activityUpdate":this.handleActivityUpdate(t);break;case"memorySignal":this.handleMemorySignal(t);break;case"sideBySideComparison":this.handleSideBySideComparison(t);break;case"modeSelected":this.handleModeSelected(t);break;case"pong":break;case"audio":case"interruptAudio":case"speechEndDetected":case"callTerminated":case"characterAnimation":case"characterAnimationEnd":case"characterAppearance":case"characterEmotion":case"callUI":case"callUIUpdate":break;case"relatedSearchResultsAvailable":this.handleRelatedSearchResultsAvailable(t);break}}handleMemorySignal(t){if(Zt("kill-memory-edf-basic"))return;const{messageId:n,partId:s,text:o,signalType:r}=t,c=this.conversationIdByMessageId.get(n);if(!c)return;this.getConversationState(c).timing.onMemorySignalReceived({messageId:n,conversationId:c}),Qe(c,u=>{const m=Et(u,n);m&&m.content.push({type:"memorySignal",partId:s,text:o,signalType:r})})}handleSideBySideComparison(t){if(!ce("side-by-side-comparison"))return;const{sideBySideComparisonId:n,conversationId:s,options:o,defaultMessageId:r}=t;bQ(n),Bs(s,c=>{c.sideBySideComparisonId=n});for(const{messageId:c,position:l}of o)this.pendingSideBySideMessages.set(c,{position:l,isDefault:c===r})}handleModeSelected(t){const{messageId:n,mode:s}=t,o=this.conversationIdByMessageId.get(n),r=Vo();if(!o)return;M.trackEvent({name:"system",data:{eventName:"modeSelectedEvent",eventInfo_conversationId:o,eventInfo_messageId:n,eventInfo_customData:JSON.stringify({eventInfo_selectedMode:s})}}),ce("smart-mode-cot")&&r==="smart"&&s==="reasoning"&&Qe(o,l=>{const u=Et(l,n);u&&u.content.push({type:"chainOfThought",text:B("chat.reasoningLoading.emptyCoTText"),partId:"-1"})})}clearAllStreamingStates(){const t=rt.get(Ct);for(const n of t.values())Bs(n.id,s=>{s.streamingState="idle"})}handleReceived(t){const{messageId:n,conversationId:s}=t;this.conversationIdByMessageId.set(n,s);const o=this.getConversationState(s);o.timing.onReceived({messageId:n,conversationId:s,chatMode:o.chatMode}),NC([`humanMessage_${n}`,`conversation_${s}`]),rt.set(fr,r=>r&&!Ml()?r-1:r),Qe(s,r=>{const c=r.at(-1);(c==null?void 0:c.author)==="human"&&(c.id=n)}),eQ()}handleConnected(t){Tl.trackLatestChatConnectedAssignment(t)}handleEmojiReaction(t){const{messageId:n,emoji:s}=t,o=this.conversationIdByMessageId.get(n);o&&Qe(o,r=>{const c=NK(r,n);c&&(c.emojiReaction=s)})}handleStartMessage(t){const{messageId:n,conversationId:s,createdAt:o}=t;this.conversationIdByMessageId.set(n,s);const r=this.getConversationState(s),{chatMode:c}=r;r.citationCount=0,r.timing.onStartMessage({messageId:n,conversationId:s,chatMode:c}),Lg()&&rt.set(cr,"responding"),NC([`aiMesssage_${n}`,`conversation_${s}`]);const l=this.pendingSideBySideMessages.get(n),u={id:n,createdAt:o,author:"ai",content:[],mode:c,sideBySideConfig:l};Bs(s,m=>{m.streamingState="streaming"}),Qe(s,m=>{m.length===0&&UA(rt.get(Is),s)||m.push(u)})}handleAppendText(t){const{text:n,messageId:s,partId:o}=t,r=this.conversationIdByMessageId.get(s);if(!r)return;const c=this.getConversationState(r);c.timing.onFirstToken(s,c.chatMode,r),Qe(r,l=>{const u=Et(l,s);if(u){ri(r,u.id);let m=yo(u.content,o);if(!m)m={type:"text",text:"",partId:o},u.content.push(m);else if(m.type!=="text"){console.error(`appendText event with partId that is not a text item. Item is of type ${m.type}`,t);return}m.text=m.text.concat(n),PK(u)}})}handleReplaceText(t){const{text:n,messageId:s,partId:o}=t,r=this.conversationIdByMessageId.get(s);if(!r)return;const c=rt.get(wn),l=c==null?void 0:c.sideBySideComparisonId;l&&(vQ({sideBySideComparisonId:l,reason:"replacedText"}),vb(r)),Qe(r,u=>{const m=Et(u,s);if(m){ri(r,m.id);let p=yo(m.content,o);if(!p)p={type:"text",text:"",partId:o},m.content.push(p);else if(p.type!=="text"){console.error("replaceText event with partId that is not a text item",t);return}p.text=n,p.citations=void 0}})}handleCitation(t){const{title:n,url:s,messageId:o,publisher:r,iconUrl:c,snippet:l}=t,u=this.conversationIdByMessageId.get(o);if(!u)return;const m=this.getConversationState(u);AO(s,u,o),Qe(u,p=>{const f=Et(p,o);if(f){ri(u,f.id);const h=MK(f.content);if(h){h.citations||(h.citations=[]);const g=h.citations.find(b=>b.url===s);let y;if(g?y=g.index:(m.citationCount+=1,y=`${m.citationCount}`,h.citations.push({index:y,url:s,iconUrl:c,title:n,publisher:r,snippet:l})),h.text=h.text.concat(y3(y,s)),m.citationCount===1){const b=vK();(b==null?void 0:b.type)==="citations"&&b.data.conversationId===u&&b.data.messageId!==o&&xu({type:"citations",data:{conversationId:u,messageId:o}})}}}})}handleGeneratingImage(t){const{prompt:n,messageId:s,partId:o,progressionText:r}=t,c=this.conversationIdByMessageId.get(s);if(!c)return;const l=this.getConversationState(c);l.timing.onImageGenerationStart({messageId:s,conversationId:c,chatMode:l.chatMode}),Qe(c,u=>{const m=Et(u,s);m&&m.content.push({type:"image",prompt:n,partId:o,partialGenerationStep:0,status:"generating",progressionText:r})})}handleImageGenerated(t){const{url:n,partId:s,messageId:o}=t,r=this.conversationIdByMessageId.get(o);if(!r)return;const c=this.getConversationState(r);c.imageCount+=1,c.timing.onImageReceived({messageId:o,conversationId:r,chatMode:c.chatMode}),Qe(r,l=>{const u=Et(l,o);if(u){const m=yo(u.content,s);(m==null?void 0:m.type)==="image"&&(m.isPartiallyLoading=!1,m.url=n,m.partialGenerationStep=void 0,m.status="generated",m.progressionText=void 0)}})}handlePartialImageGenerated(t){const{content:n,messageId:s,partId:o}=t,r=this.conversationIdByMessageId.get(s);if(!r)return;const c=this.getConversationState(r);Qe(r,l=>{const u=Et(l,s);if(u){const m=yo(u.content,o);if((m==null?void 0:m.type)==="image"){m.isPartiallyLoading=!0,m.url=`data:image/png;base64,${n}`;const p=(m.partialGenerationStep??0)+1;m.partialGenerationStep=p,m.status="generating",c.timing.onPartialImageReceived({messageId:s,conversationId:r,chatMode:c.chatMode,imageGenPhase:p})}}})}getImageGenerationErrorMessage(t){switch(t){case"not-signed-in":return;case"throttled":return;case"blocked":return;default:return B("error.imageGenerationFailed")}}handleImageGenerationFailed(t){const{messageId:n,partId:s,errorCode:o}=t,r=this.conversationIdByMessageId.get(n);if(!r)return;Qe(r,l=>{const u=Et(l,n);u&&(u.content=u.content.filter(m=>m.type!=="image"||m.partId!==s))});const c=this.getImageGenerationErrorMessage(o);o==="not-signed-in"&&rt.set(Fr,{isOpen:!0,scenario:null,reason:"imageGeneration"}),c&&Zc(c,r)}handleCardGenerationFailed(t){const n=rt.get(Kc);if(n&&this.isGeneratedCards(n)){rt.set(Kc,void 0);const s=this.conversationIdByMessageId.get(t.messageId);if(!s)return;n==="quiz"&&Zc(B("quizCard.generatedQuizFailed"),s)}}handleGeneratingCard(t){const{type:n}=t;this.isGeneratedCards(n)&&rt.set(Kc,n)}isGeneratedCards(t){return JT.safeParse(t).success}handleTitleUpdate(t){const{conversationId:n,title:s}=t;rt.set(Ct,o=>yn(o,r=>{const c=r.get(n);c&&(c.title=s)}))}handleCard(t){const{messageId:n,partId:s,card:o}=t,r=this.conversationIdByMessageId.get(n);if(!r)return;const c=this.getConversationState(r);if(o.type==="ads"){JZ({card:o,messageId:n,partId:s,conversationState:c,conversationId:r});return}Qe(r,l=>{const u=Et(l,n);u&&u.content.push({type:"card",partId:s,card:o})})}handleDocument(t){const{messageId:n,partId:s,attachmentId:o,fileName:r,contentType:c}=t,l=this.conversationIdByMessageId.get(n);l&&Qe(l,u=>{const m=Et(u,n);m&&m.content.push({type:"document",partId:s,attachmentId:o,fileName:r,contentType:c})})}handleBanned(t){const{expiresAt:n}=t,s=Tb(n);s&&Eb(s,"chat",n)}handlePage(t){const{messageId:n,page:s,partId:o}=t,r=this.conversationIdByMessageId.get(n);r&&(Qe(r,c=>{const l=Et(c,n);l&&l.content.push({type:"page",partId:o,page:s})}),Ge.emit("pages:page-created",s))}handleStartSuggestion(t){const{pageId:n,suggestionId:s,editTargets:o}=t;hQ(n,{id:s,text:void 0,editTargets:o})}handleAppendSuggestion(t){const{pageId:n,suggestionId:s,text:o}=t;gQ(n,s,o)}handleActivityStart(t){if(!hm())return;const{messageId:n,partId:s,activity:o}=t,r=this.conversationIdByMessageId.get(n);r&&Qe(r,c=>{const l=Et(c,n);l?(ri(r,l.id),l.content.push({activity:o,type:"activity",partId:s})):Nt({feature:"activity",errorType:"handleActivityStart",errorMessage:"Could not find message with messageId to start activity",customData:JSON.stringify({messageId:n})})})}async handleActivityUpdate(t){if(!hm())return;const{messageId:n,partId:s,update:o}=t,r=this.conversationIdByMessageId.get(n);if(r)try{const c=await PC();Qe(r,l=>{const u=Et(l,n);if(!u)return;const m=yo(u.content,s);if(!m||m.type!=="activity"){Nt({feature:"activity",errorType:"handleActivityUpdate",errorMessage:"Could not find activity message with partId in message with messageId",customData:JSON.stringify({messageId:n,partId:s})});return}c(m.activity,o),tC.run({conversationId:r,partId:s,activity:m.activity})})}catch(c){Nt({feature:"activity",errorType:"handleActivityUpdate",errorMessage:"Error updating activity",exception:JSON.stringify({error:c})})}}processInvokeAction(t){const n=rt.get(Ae);if(n)switch(t.actionName){case"phone_send_message":{Qe(n,s=>{const o=bp(s);o&&o.content.push({type:"card",partId:Math.random().toString(),card:{type:"phoneSendMessage",actionId:t.actionId,contactName:t.parameters.contactName,text:t.parameters.text,phoneNumber:t.parameters.phoneNumber}})});break}case"edge_get_page_content":{const s=t.parameters.map(o=>({tabId:o.tabId,windowId:o.windowId,pageUrl:o.pageUrl??""}));v$.run({actionId:t.actionId,tabs:s});break}case"edge_navigate_to":case"edge_switch_tab":case"edge_close_tabs":case"edge_group_open_browser_tabs":case"edge_ungroup_open_browser_tabs":case"edge_find_browser_tab_groups":case"edge_media_controls":case"edge_go_back_forward":case"computer_use":{y$.run(t);break}case"browser_search":{const s=jK(n,B("chat.multiTabsSearchIndicatorForHistory"));C$.run({actionId:t.actionId,queries:t.parameters.queries,startTime:t.parameters.startTime?kC(t.parameters.startTime):void 0,endTime:t.parameters.endTime?kC(t.parameters.endTime):void 0,maxResults:t.parameters.maxResults,states:jY(t.parameters.states)}).then(()=>{bC(n,s,"success")}).catch(o=>{Nt({feature:"multiTabsSearch",errorType:"fetchTabsContent",errorMessage:o instanceof Error?o.message:"unknown"}),bC(n,s,"failed")});break}}}handleInvokeAction(t){const{success:n,data:s}=wY.safeParse(t);n?this.processInvokeAction(s):console.error("Invalid action data:",t)}handleBrowserAutomate(t){const{partId:n,tabIds:s,activeTabId:o,messageId:r}=t,c=this.conversationIdByMessageId.get(r);c&&Qe(c,l=>{const u=Et(l,r);if(u){const m=yo(u.content,n);if(m&&m.type==="activity"){const p=m.activity.artifacts.find(f=>f.type==="browser");p?(p.tabIds=s,p.activeTabId=o):m.activity.artifacts.push({type:"browser",tabIds:s,activeTabId:o}),tC.run({conversationId:c,partId:n,activity:m.activity})}}})}handleTaskStart(t){const{messageId:n,task:s,partId:o}=t,r=this.conversationIdByMessageId.get(n);this.messageIdByTaskId.set(s.id,n);const c=new Date().toISOString();if(r){FY([s],r,c),rt.set(xi,!1),Qe(r,u=>{const m=Et(u,n);if(m){const p=kZ(s,o,c);p&&m.content.push(p)}}),g$.run({task:s,action:"startTask"});const l=rt.get(Ae);s.type==="computerUse"&&r===l&&YZ(s.conversationId,r),(s.type==="podcast"||s.type==="research")&&_Q()}}async handleTaskUpdate(t){const{taskId:n,update:s}=t;if(GZ(n,s))return;let o=!1;const r=this.messageIdByTaskId.get(n),c=r?this.conversationIdByMessageId.get(r):void 0;try{const l=await PC();r&&c&&Qe(c,u=>{const m=ce("ds-new-progress")||ce("multiple-research-tasks-in-conversation")&&bw,p=Et(u,r,m);if(p){const f=Bq(p.content),h=f==null?void 0:f.task;h&&h.type==="research"&&(l(h,s),VZ(h,c))}}),bb(n,u=>{var m;if(u.type==="computerUse"&&l(u,s),u.type==="podcast"){const p=((m=u.podcast)==null?void 0:m.id)??"";l(u,s),u.podcast&&(u.podcast.id=p)}}),o=!0}catch(l){console.error("Error applying task update patch:",l)}if(o){const l=rt.get(Is).get(n);switch(l==null?void 0:l.type){case"computerUse":ZZ(n,s);break;case"podcast":DZ(l);break}}}handleSuggestedFollowups(t){const{disableMultiturn:n}=Z.instance().config();if(!n){const{suggestions:s,messageId:o}=t,r=this.conversationIdByMessageId.get(o);r&&Bs(r,c=>{c.suggestedFollowup={messageId:o,suggestions:s}})}}handleError(t){const{errorCode:n}=t;if(n==="over-turn-limit")rt.set(fr,0);else if(n==="over-reasoning-quota"){!rt.get(Ra)&&Ml()&&Z.instance().config().thinkDeeperFreemiumEnabled&&(rt.set(KO,"chat-over-reasoning-quota"),rt.set(as,"reasoning-mode-pro-subscription")),_n(ln());for(const[o]of this.conversationMetadata.entries())Zc(B("chat.overCapacity"),o)}else if(n==="over-task-quota"||n==="over-lifetime-task-quota")rt.set(ZO,n),rt.set(as,"over-task-quota");else if(n==="unknown-error")for(const[s]of this.conversationMetadata.entries())Bs(s,o=>{o.streamingState="idle"});else if(n==="page-content-length-exceeded"||n==="page-count-exceeded"){Ge.emit("page:message-error",n);for(const[s]of this.conversationMetadata.entries())Bs(s,o=>{o.streamingState="idle"})}else for(const[s]of this.conversationMetadata.entries())Zc(B("error.eventNotRecognized"),s);rt.set(xi,!1)}handleChainOfThought(t){const{messageId:n,partId:s,text:o}=t,r=this.conversationIdByMessageId.get(n);r&&Qe(r,c=>{const l=Et(c,n);if(l){ri(r,l.id);let u=yo(l.content,s);const m=this.getConversationState(r);if(u)u.type!=="chainOfThought"?console.error(`chainOfThought event with partId that is not a chainOfThought item. Item is of type ${u.type}`,t):u.text=u.text.concat(o);else{u={type:"chainOfThought",text:"",title:"",partId:s},l.content.push(u);const{title:p,text:f}=GY(o);u.title=p,u.text=f,m.timing.onChainOfThoughtReceived({messageId:n,conversationId:r,chatMode:m.chatMode}),m.chainOfThoughtCount+=1}}})}handleChallenge(t){const n=()=>{const s=rt.get(Ae);if(!s)return;const{lastUserMessage:o}=this.getConversationState(s);o&&this.send(o)};if(t.method==="copilot"){const{parameter:s}=t,o=Number(s),r=Math.round((o**3/100+o*25)%22).toString();this.sendChallengeResponse({method:"copilot",token:r}),n();return}Zt("kill-cf-turnstile")||g3(s=>{this.sendChallengeResponse({token:s,method:"cloudflare"}),n()})}handleRelatedSearchResultsAvailable(t){const{messageId:n}=t;RK(n)}handleDone(t){var m;Lg()&&rt.get(cr)==="responding"&&rt.set(cr,"idle");const{messageId:n}=t,s=this.conversationIdByMessageId.get(n);if(!s)return;const o=this.getConversationState(s);o.timing.onLastToken({messageId:n,conversationId:s,citationCount:o.citationCount,imageCount:o.imageCount,chainOfThoughtCount:o.chainOfThoughtCount,chatMode:o.chatMode,inputMethod:o.inputMethod});const c=((m=rt.get(Ct).get(s))==null?void 0:m.history)??[],l=Et(c,n);Qe(s,p=>{if(!l)return;const f=Et(p,l.id),h=l.content.find(g=>g.type==="image"&&g.partialGenerationStep!==void 0);if(f&&h){const g=yo(f.content,h.partId);g&&(g.partialGenerationStep===0?g.type="deleted":g.type==="image"&&(g.isPartiallyLoading=!1,g.partialGenerationStep=void 0,g.status="non-complete"))}if(f){const g=f.content.filter(y=>y.type==="activity");for(const y of g)if(tQ(y.activity)){y.activity.status==="running"&&(y.activity.status="failed");for(const x of y.activity.steps)x.status==="running"&&(x.status="completed")}}});const u=this.pendingSideBySideMessages.get(n);u&&(this.pendingSideBySideMessages.delete(n),Qe(s,p=>{const f=Et(p,n);f&&(f.sideBySideConfig={...u,isStreamingComplete:!0})})),this.pendingSideBySideMessages.size===0&&Bs(s,p=>{p.streamingState="idle"}),rt.set(Kc,void 0),rt.set(xi,!1),window.setTimeout(()=>{rt.set(c0,p=>yn(p,f=>{const h=f.get(s);h!=null&&h.has(n)&&(h.delete(n),h.size===0&&f.delete(s))}))},3e3),rt.set(hI,!0),l&&SQ({message:l,conversationId:s}),w$.run({conversationMessages:c})}}async function NQ(){try{const{load:e}=await P(async()=>{const{load:s}=await import("./botd.esm-DWjBD4G5.js");return{load:s}},__vite__mapDeps([299,0,1])),t=await e({monitoring:!1}),{bot:n}=t.detect();return n}catch(e){return M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"BotDetectionError",eventInfo_details:"Failed on bot detection",eventInfo_errorMessage:e instanceof Error?e.message:"Unknown bot detection error"}}),!1}}async function MQ(){return new Promise((e,t)=>{g3(async n=>{try{const s=await cn({path:"/challenges/verify",args:{body:{token:n,method:"cloudflare"}}}),{isValid:o}=await s.json();e(o)}catch(s){M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CloudflareChallengeVerificationError",eventInfo_details:"Error verifying Cloudflare challenge",eventInfo_errorMessage:s instanceof Error?s.message:""}})}t()})})}const RQ="eval/chat",qf=1e3,PQ=3e4,LQ=5e3,jQ=1e4,OQ=3,LC=6e4;class DQ{constructor({autoReconnect:t=!1}={}){N(this,"connection");N(this,"autoReconnect");N(this,"reconnectInterval");N(this,"maxReconnectInterval");N(this,"reconnectTimeout");N(this,"sendQueue",[]);N(this,"connecting",!1);N(this,"state",null);N(this,"cachedSendData",null);N(this,"pongTimeout",null);N(this,"windowStartTime",null);N(this,"connectionCount",0);N(this,"cooldownStart",null);N(this,"boundReconnectIfNeeded");N(this,"boundDisconnect");N(this,"boundVisibilityChange");N(this,"getUrl",null);N(this,"onopen");N(this,"onmessage");N(this,"onclose");N(this,"onerror");this.connection=null,this.autoReconnect=t,this.reconnectInterval=qf,this.maxReconnectInterval=t?PQ:0,this.reconnectTimeout=null,this.onopen=null,this.onmessage=null,this.onclose=null,this.onerror=null,this.connect=this.connect.bind(this),this.reconnect=this.reconnect.bind(this),this.processSendQueue=this.processSendQueue.bind(this)}async initialize(){this.state=null,await this.connect(),this.autoReconnect&&(this.boundReconnectIfNeeded=this.reconnectIfNeeded.bind(this),this.boundDisconnect=this.disconnect.bind(this),this.boundVisibilityChange=()=>{document.visibilityState==="visible"&&this.reconnectIfNeeded()},window.addEventListener("online",this.boundReconnectIfNeeded),window.addEventListener("offline",this.boundDisconnect),document.addEventListener("visibilitychange",this.boundVisibilityChange))}async connect(){var n;if(((n=this.connection)==null?void 0:n.readyState)===WebSocket.CONNECTING||this.connecting||this.pongTimeout)return;if(!this.getUrl)throw new Error("getUrl function is not set");this.connecting=!0;const t=await this.getUrl();this.connection=new WebSocket(t),this.connecting=!1,this.connection.onopen=s=>{if(this.state=null,!Zt("kill-rapid-reconnect-detect")){const o=performance.now();!this.windowStartTime||o-this.windowStartTime>=jQ?(this.windowStartTime=o,this.connectionCount=1):this.connectionCount+=1,this.connectionCount>=OQ&&(this.cooldownStart=o,this.windowStartTime=null,this.connectionCount=0,this.sendQueue=[])}this.onopen&&this.onopen(s),this.processSendQueue(),this.reconnectInterval=qf,this.reconnectTimeout&&(window.clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)},this.connection.onmessage=s=>{if(this.state!=="destroyed")try{const o=JSON.parse(s.data);this.onmessage&&this.onmessage(o),o.event==="pong"&&(this.removePongTimeout(),this.processSendQueue())}catch{}},this.connection.onclose=s=>{this.connection&&this.connection.bufferedAmount>0&&this.cachedSendData&&(this.sendQueue.push(this.cachedSendData),this.cachedSendData=null),this.onclose&&this.onclose(s),this.autoReconnect&&this.state===null&&this.reconnect(),this.removePongTimeout()},this.connection.onerror=s=>{this.onerror&&this.onerror(s),this.connection&&this.connection.close(),this.removePongTimeout()}}reconnect(){if(this.reconnectTimeout&&window.clearTimeout(this.reconnectTimeout),!Zt("kill-rapid-reconnect-detect")&&this.cooldownStart){const t=performance.now()-this.cooldownStart;if(t<LC){const n=LC-t;this.reconnectTimeout=window.setTimeout(this.connect,n);return}this.cooldownStart=null,this.reconnectInterval=qf}this.reconnectTimeout=window.setTimeout(this.connect,this.reconnectInterval),this.reconnectInterval=Math.min(this.reconnectInterval*2,this.maxReconnectInterval)}processSendQueue(){if(this.sendQueue.length>0){const t=this.sendQueue;this.sendQueue=[];for(const n of t)this.send(n)}}reconnectIfNeeded(){if(this.state!=="destroyed"){if(!this.connection||this.connection.readyState!==WebSocket.OPEN){this.reconnect();return}this.pongTimeout===null&&(this.connection.send(JSON.stringify({event:"ping"})),this.pongTimeout=window.setTimeout(()=>{var t;this.pongTimeout=null,(t=this.connection)==null||t.close(),this.reconnect()},LQ))}}removePongTimeout(){this.pongTimeout!==null&&(window.clearTimeout(this.pongTimeout),this.pongTimeout=null)}send(t){if(this.state!=="destroyed")if(this.connection&&this.connection.readyState===WebSocket.OPEN&&this.pongTimeout===null)try{this.cachedSendData=t,this.connection.send(t)}catch{this.sendQueue.push(t),this.connect()}else this.sendQueue.push(t),this.connect()}cleanup(){this.boundReconnectIfNeeded&&window.removeEventListener("online",this.boundReconnectIfNeeded),this.boundDisconnect&&window.removeEventListener("offline",this.boundDisconnect),this.boundVisibilityChange&&document.removeEventListener("visibilitychange",this.boundVisibilityChange)}disconnect(){this.connection&&(this.state="disconnected",this.connection.close())}destroy(){this.connection&&(this.state="destroyed",this.cleanup(),this.connection.close(),this.connection=null,this.windowStartTime=null,this.connectionCount=0,this.cooldownStart=null)}}async function Ms({useMockConnection:e}={}){const t=async({cursor:n})=>{const o=!!dA()||!!mA()?RQ:"chat";return n?pC(o,{cursor:n}):pC(o)};return Ed.get({getUrl:t})}async function UQ({getUrl:e}){if(typeof WebSocket>"u")return{destroy:()=>{},send:()=>{},regenerate:()=>{},sendSkipReasoning:()=>{},sendContext:()=>{},sendAudioStart:()=>{},sendAudio:()=>{},sendAudioEnd:()=>{},sendAudioClick:()=>{},setCallType:()=>{},stop:()=>{},setOnEvent:()=>()=>{},sendChallengeResponse:()=>{},sendActionResult:()=>{},sendMessagePreview:()=>{},updateChatOptions:()=>Promise.resolve(),selectSxSMessage:()=>{},resetConversationState:()=>{},resetConversationTiming:()=>{},setConversationIdByMessageId:()=>{},setMessageIdByTaskId:()=>{},setChatModeForConversation:()=>{},setInputMethodForConversation:()=>{},callBeforeSendForConversation:()=>{},callOnSentForConversation:()=>{},setUserMessageForConversation:()=>{},onSubmitMessageBlocked:()=>{}};const t=Ml(),n=!!Z.instance().config().isBotDetectionEnabled;if(ce("client-side-request-challenge")&&!Zt("kill-client-side-request-challenge")&&n&&!t){const s=await NQ(),o=!s||await MQ();if(M.trackEvent({name:"system",data:{eventName:"botDetectionTriggered",eventInfo_result:o?"success":"failed",eventInfo_isBot:s}}),!o)return Promise.reject()}return new Promise((s,o)=>{const r=Zt("kill-chat-auto-reconnect"),c=new DQ({autoReconnect:!r}),l=new kQ(c);c.getUrl=()=>e({cursor:l.latestMessagePartId}),c.onopen=async()=>{c.onmessage=u=>{try{$2.parse(u)}catch(m){m instanceof jd&&Al(m,"/chat")}l.processEvent(u)},await l.updateChatOptions(),s({destroy:()=>{c.destroy(),l.clearAllStreamingStates()},stop:(u={})=>{const{conversationId:m,taskId:p}=u;c.send(JSON.stringify({event:"stop",conversationId:m})),p&&c.send(JSON.stringify({event:"send",conversationId:m,content:[{type:"command",command:{type:"cancelTask",taskId:p}}],mode:"research"})),m&&Bs(m,f=>{f.streamingState="idle"})},send:l.send,regenerate:l.regenerate,sendSkipReasoning:u=>{const{messageId:m}=u;c.send(JSON.stringify({event:"skipReasoning",messageId:m}))},sendContext:u=>{c.send(JSON.stringify({event:"sendContext",context:u}))},sendAudioStart:u=>{const{conversationId:m,options:p,clientType:f,mode:h,context:g}=u,y={event:"audioStart",conversationId:m,mode:h,options:p,clientType:f,context:g};c.send(JSON.stringify(y))},sendAudio:u=>{const m={event:"audio",audio:u};c.send(JSON.stringify(m))},sendAudioEnd:()=>{const u={event:"audioEnd"};c.send(JSON.stringify(u))},sendAudioClick:(u,m)=>{l.sendAudioClick(u,m)},setCallType:u=>{const m={event:"setCallType",callType:u};c.send(JSON.stringify(m))},sendChallengeResponse:l.sendChallengeResponse,setOnEvent:u=>{c.onmessage=m=>{try{$2.parse(m),l.processEvent(m)}catch(p){p instanceof jd&&Al(p,"/chat")}u(m)}},sendActionResult:u=>{c.send(JSON.stringify({event:"actionResult",actionId:u.actionId,result:u.result}))},selectSxSMessage:u=>{const{sideBySideComparisonId:m,selectedMessageId:p}=u,f={event:"selectMessage",sideBySideComparisonId:m,selectedMessageId:p};c.send(JSON.stringify(f))},resetConversationState:l.resetConversationState,resetConversationTiming:l.resetConversationTiming,setConversationIdByMessageId:l.setConversationIdByMessageId,setMessageIdByTaskId:l.setMessageIdByTaskId,setChatModeForConversation:l.setChatModeForConversation,setInputMethodForConversation:l.setInputMethodForConversation,callBeforeSendForConversation:l.callBeforeSendForConversation,callOnSentForConversation:l.callOnSentForConversation,setUserMessageForConversation:l.setUserMessageForConversation,onSubmitMessageBlocked:l.onSubmitMessageBlocked,sendMessagePreview:l.sendMessagePreview.bind(l),updateChatOptions:l.updateChatOptions.bind(l)})},c.onclose=()=>{},c.onerror=u=>{const m=u instanceof ErrorEvent?u.message:"Unknown WebSocket error";M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ChatWebsocketError",eventInfo_errorMessage:m,eventInfo_details:JSON.stringify(u)}}),o(new Error(`WebSocket connection error: ${m}`))},c.initialize().catch(u=>{const m=u instanceof Error?u.message:"Unknown WebSocket error";M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ChatWebsocketInitializationError",eventInfo_errorMessage:m,eventInfo_details:u instanceof Error?u.stack??"":""}}),o(new Error(`WebSocket initialization error: ${m}`))})})}async function Ab(){if(Ed.isInstantiated){const e=ue(wn),t=(e==null?void 0:e.streamingState)==="streaming",n=await Ed.get();n.stop(),n.destroy(),n.stop({conversationId:e==null?void 0:e.id}),Ed.reset();try{M.trackEvent({name:"system",data:{eventName:"chatClientReset",eventInfo_isMessageStreaming:t}})}catch{}}}const Ed=new Pr(e=>UQ(e));function FQ(e,t,n,s={text:"",atTimestamp:0,files:[]}){return n?t.length!==s.files.length?!0:!!!(e&&e.length>=n.minTextLength)||s.atTimestamp&&s.atTimestamp+n.debounceInMilliseconds>=Date.now()?!1:e&&s.text&&(e.includes(s.text)||s.text.includes(e))?Math.abs((e.length-s.text.length)/s.text.length)>=n.textDeltaPercent/100:!0:!1}k(null);const jC=k(new Map),ya=k(null),S3=k(e=>{const t=e(ya);return(t==null?void 0:t.type)==="attachments"?t.uploadAttachments:[]},(e,t,n)=>{const s=e(ya),o=e(S3),r=typeof n=="function"?n(o):n;r.length===0&&(s==null?void 0:s.type)!=="attachments"||t(ya,{type:"attachments",uploadAttachments:r})}),to=k(e=>{const t=e(ya);return(t==null?void 0:t.type)==="tabs"?t.userAddedTabs:new Map},(e,t,n)=>{const s=e(ya),o=e(to),r=typeof n=="function"?n(o):n;r.size===0&&(s==null?void 0:s.type)!=="tabs"||t(ya,{type:"tabs",userAddedTabs:r})}),BQ=k(e=>{const t=e(ya);return(t==null?void 0:t.type)==="attachments"&&t.uploadAttachments.length>0}),VQ=k(e=>{const t=e(ya);return(t==null?void 0:t.type)==="tabs"&&t.userAddedTabs.size>0});function HQ(){var t;const e=ue(aE);if(e)return{character:{id:e.id,locationId:(t=e.location)==null?void 0:t.id}}}function w3(){const e=Xl(Ct),t=z(Jm);return d.useCallback((n,s)=>{e(o=>{const r=o.get(n);if(r){const{history:c}=r;s(c);const l=c.at(-1);if(l){const u=new Date(r.updatedAt),m=new Date(l.createdAt);u<m&&(r.updatedAt=l.createdAt)}c.length>2&&(r.isNew=!1,t(!0))}return o})},[e,t])}const zQ=De();function _b(e,t){De().set(Ct,n=>yn(n,s=>{const o=s.get(e);if(o){const{history:r}=o;t(r);const c=r.at(-1);if(c){const l=new Date(o.updatedAt),u=new Date(c.createdAt);l<u&&(o.updatedAt=c.createdAt)}r.length>2&&(o.isNew=!1,zQ.set(Jm,!0))}}))}const WQ=5e3,GQ="largest-contentful-paint";function $Q(e,t=WQ){if(!qQ())return Dg(e,t);try{return ZQ(e,t)}catch{return Dg(e,t)}}function qQ(){return"PerformanceObserver"in window}function Dg(e,t){const n=setTimeout(e,t);return()=>clearTimeout(n)}function KQ(e){typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,0)}function ZQ(e,t){let n=!1;const s=new PerformanceObserver(l=>{if(n)return;l.getEntries().length>0&&r()});try{s.observe({type:GQ,buffered:!0})}catch{return Dg(e,t)}const o=setTimeout(()=>{n||r()},t);function r(){n=!0,s.disconnect(),KQ(e)}function c(){n||(n=!0,s.disconnect(),clearTimeout(o))}return c}function YQ(){const e=Sn("kill-bing-uet"),t=_(sn),n=mp(t);d.useEffect(()=>{const s=wr(),o=!!e0(),r=n?o&&s.advertising:!0;if(e||!r||!t)return;const c=document.createElement("script");c.src="https://bat.bing.com/bat.js",c.defer=!0,c.onload=()=>{if(!window.UET)return;window.uetq=window.uetq??[];const m={ti:"355045625",enableAutoSpaTracking:!0};window.uetq=new window.UET(m),window.uetq.push("pageLoad")};const u=$Q(()=>{document.querySelector('script[src="https://bat.bing.com/bat.js"]')||document.head.appendChild(c)});return()=>{u();try{const m=document.querySelector('script[src="https://bat.bing.com/bat.js"]');m&&document.head.removeChild(m)}catch{}}},[e,t,n])}let OC=!1;function QQ(){OC||(OC=!0,window.uetq=window.uetq??[],window.uetq.push("event","outbound_click",{}))}const JQ=new Set(["BR","CA","KR","VN"]);function I3(e){var h;const{inEeaPlusRegion:t,labsFeatureEnabled:n,region:s,isUpsellFeatureEnabled:o,isAuthenticated:r,isTeenUser:c,isProUser:l,skipProUserCheck:u}=e;if(t&&!n&&(!s||!JQ.has(s)))return!1;const m=!s||L1.includes(s),p=((h=Z.instance().config().actions)==null?void 0:h.overrideFreemiumActionsUpsellFeatureEnabled)??!1;return l||u||(o||p)&&r&&!c&&!m}function XQ(){const e=ue(Ra),t=ce("labs-actions"),n=ce("labs-actions-skipprocheck"),s=Z.instance().config().proSubscription.enabled,o=Ml(),r=ue(nc),c=ue(sn),l=!!ue(lE);return I3({inEeaPlusRegion:l,labsFeatureEnabled:t,region:c,isUpsellFeatureEnabled:s,isAuthenticated:o,isTeenUser:r,isProUser:e,skipProUserCheck:n})}function T3(e){const{actionsAvailableForAccount:t,actionsAvailableForSurface:n}=e;return t&&n}async function eJ(){var s;const e=XQ(),n=await(((s=Z.instance().config().actions)==null?void 0:s.enableActions)??(()=>Promise.resolve(!1)))();return T3({actionsAvailableForAccount:e,actionsAvailableForSurface:n})}function tJ(e,t,n){return e&&(n&&t)}function E3(){const e=D("smart-mode-6e0b4c6f"),t=D("smart-mode-cd0c997b"),n=_3(t),s=e||t?B("composer.chatModes.smart.coachmarkDescriptionGPT5Variant"):B("composer.chatModes.smart.description");return{title:e?hw:fw,description:B(n),coachmarkDescription:s}}function A3(){const e=ce("smart-mode-6e0b4c6f"),t=ce("smart-mode-cd0c997b"),n=_3(t);return{title:e?hw:fw,description:B(n)}}function _3(e){return e?"composer.chatModes.smart.descriptionGPT5Variant":"composer.chatModes.smart.description"}function k3(e){return e?e.startsWith("!"):!1}function Ll({chatMode:e,forceExcludeModelName:t=!1}){const s=ce("model-in-mode-name")&&!t;let o=B(`composer.chatModes.${e}.title`);return e==="chat"&&s?o=B("composer.chatModes.chat.titleWithModel"):e==="reasoning"?o=s?UR:pw:e==="smart"&&(o=A3().title),o}function nJ(e){const t=A3();return e==="smart"?t.description:B(`composer.chatModes.${e}.description`)}const DC={global:["https://ad.doubleclick.net/ddm/activity/src=8406097;type=ofco;cat=lrn_uni;u1={REGION};u2={LANG_LOCALE};u6=CMC;u50=submit_message;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1;num={CACHE_BUSTER}"],us:["https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/ChatSend","https://secure.adnxs.com/px?id=1869141&t=2","https://servedby.flashtalking.com/spot/1/5155;147512;16638/?spotName=USA_FY25H2_Copilot_Consumer_Chat_Send_button_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://alb.reddit.com/rp.gif?id=a2_gi5vc4m557wn&event=Custom&m.customEventName=COPChatSend&integration=noscript","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=START_CHECKOUT&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com/","https://tr.snapchat.com/cm/s?pnid=140","https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://insight.adsrvr.org/track/pxl/?adv=tq5ketp&ct=0:e8n8utj&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],gb:["https://secure.adnxs.com/px?id=1869542&t=2&seg=39793132&consent={CONSENT}","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/ChatSend","https://servedby.flashtalking.com/spot/1/3360;147492;16970/?spotName=GBR_FY25H2_Copilot_Consumer_Chat_Send_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}","https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=START_CHECKOUT&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com/","https://tr.snapchat.com/cm/s?pnid=140","https://insight.adsrvr.org/track/pxl/?adv=csnj4o5&ct=0:7s8ltxf&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],other:["https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}"]},Ad={onPageLoad:{global:["https://ad.doubleclick.net/ddm/activity/src=8406097;type=ofco;cat=lp_uniq;u1={REGION};u2={LANG_LOCALE};u6=CMC;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1;num={CACHE_BUSTER}"],us:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/custom-pageload","https://secure.adnxs.com/px?id=1869069&t=2","https://servedby.flashtalking.com/spot/1/5155;147507;16638/?spotName=USA_FY25H2_Copilot_Consumer_Page_Load_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://alb.reddit.com/rp.gif?id=a2_gi5vc4m557wn&event=PageVisit&integration=noscript","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=PAGE_VIEW&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com","https://tr.snapchat.com/cm/s?pnid=140","https://insight.adsrvr.org/track/pxl/?adv=tq5ketp&ct=0:tzodkxv&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],gb:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/custom-pageload","https://secure.adnxs.com/px?id=1869539&seg=39793125&t=2&consent={CONSENT}","https://servedby.flashtalking.com/spot/1/3360;147490;16970/?spotName=GBR_FY25H2_Copilot_Consumer_Page_Load_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=PAGE_VIEW&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com","https://tr.snapchat.com/cm/s?pnid=140","https://insight.adsrvr.org/track/pxl/?adv=csnj4o5&ct=0:2slc99p&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],other:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}"]},onMessageSend:DC,onStartVoiceChat:DC,onSuggestionChipClicked:{global:[],us:[],gb:[],other:[]},onDiscoverCardClicked:{global:[],us:[],gb:[],other:[]},onQueryParamSubmit:{global:[],us:[],gb:[],other:[]}},sJ={onPageLoad:{behavior:20,Content:{Id:"CMCChatLoaded",cN:"CMC Chat Loaded"}},onMessageSend:{behavior:63,Content:{Id:"ChatManualMessage",cN:"Chat Manual Message"}},onStartVoiceChat:{behavior:300,Content:{Id:"VoiceMessageClick",cN:"Voice Message Click"}},onSuggestionChipClicked:{behavior:60,Content:{Id:"SuggestionChipClicked",cN:"Suggestion Chip Clicked"}},onDiscoverCardClicked:{behavior:144,Content:{Id:"DiscoverCardClicked",cN:"Discover Card Clicked"}},onQueryParamSubmit:{behavior:141,Content:{Id:"QueryParamMessageSubmit",cN:"Query Param Message Submit"}}};function oJ(e,t){return t==="US"?Ad[e].us:t==="GB"?Ad[e].gb:t&&["AU","CA","DE","FR","JP"].includes(t)?Ad[e].other:[]}function aJ(e){if(!ce("ads-pixels"))return;const t=De().get(sn),n=Wt.language,s=Date.now().toString(),o=Ad[e].global,r=oJ(e,t),{set:c}=De();c(yI,l=>{for(const u of o.concat(r))l[u]||(l[u]={url:u.replace("{CACHE_BUSTER}",s).replace("{REGION}",t??"").replace("{LANG_LOCALE}",n).replace("{CONSENT}",cJ(t)).replace("{td1}",t??"").replace("{td2}",n).replace("{td3}","CMC").replace("{td4}","").replace("{td5}","").replace("{td6}",lJ(e)),isMounted:!0,timestamp:Date.now()});return{...l}})}function rJ(e){ce("custom-1ds")&&(window.OneDsAzureAnalytics.capturePageAction(null,sJ[e]),oI())}function fi(e){try{aJ(e),rJ(e)}catch{Nt({feature:"sendIdeasTelemetry",customData:JSON.stringify({eventName:e})})}}function iJ(e){fi(e==="suggestion"?"onSuggestionChipClicked":e==="discover"?"onDiscoverCardClicked":e==="queryParam"?"onQueryParamSubmit":"onMessageSend")}function cJ(e){return(e&&Fm.includes(e))===!0?wr().advertising?"1":"0":""}function lJ(e){switch(e){case"onPageLoad":return"page_load";case"onMessageSend":return"submit_message";case"onStartVoiceChat":return"voice_message";case"onSuggestionChipClicked":return"suggestion_chip";case"onDiscoverCardClicked":return"discover_card";case"onQueryParamSubmit":return"query_param_submit";default:return""}}const Co=De(),UC={};async function N3(e){const{text:t,filesWithAttachment:n=[],command:s}=e,o=Vo(),r=ue(Ae),{result:c}=await I$.run({chatMode:o,message:t??""}),l=n.length===0||n.every(({error:f,attachment:h})=>!!f||!h);return{isSubmittable:!!r&&!(!t&&l&&!s),shouldDropAccordingToMiddleware:!!c}}async function M3(e,t=!1){const{text:n,filesWithAttachment:s=[],inputMethod:o,command:r,context:c,reference:l,galleryImageUrl:u}=e,m=HQ(),p=Vo(),f=ue(Ae),h=ue(No),g=ue(to),y=ce("adsshowroombrandagent");if(!f)throw new Error("No conversation ID found");let b=0,x=0;const v=[];if(u){const E=vJ(u);v.push(E)}for(const E of s)E.attachment&&(E.attachment.item.type==="image"?b+=1:E.attachment.item.type==="document"&&(E.attachment.item.partId=`${x}`,x+=1),v.push(E));const S=[],C={id:"",createdAt:new Date().toISOString(),author:"human",content:[],inputMethod:o};h&&h.conversationId===f&&(C.brand=h);for(const{attachment:E}of v)E&&(C.content.push(E.item),S.push(E.content));if(g.size>0&&(o!=="askCopilot"?C.content.push({type:"browserTabs",tabs:Array.from(g.values()).map(E=>({id:E.id,title:E.title,url:E.url,windowId:E.windowId,favIconUrl:E.favIconUrl}))}):Co.set(to,new Map)),n){C.content.push({type:"text",text:n});let{textToSend:E}=await T$.run({textToSend:n,chatMode:p});g.size>0&&!E.startsWith("/")&&(E=`${B("composer.multiTabs.multitabsprompt",{CountOfAddTabs:g.size})} ${E}`),S.push({type:"text",text:E})}r&&S.push({type:"command",command:r}),l&&S.push({type:"reference",reference:l}),!(r&&a.union([sp,Er]).safeParse(r.type).success)&&!t&&_b(f,E=>{E.push(C)});const{sendData:w,additionalData:I}=await m$.run(C);return{sendMessageParams:{content:S,conversationId:f,data:w,mode:p,context:{...m,...c,ads:h?{showroom:{brandId:h.brandId,adId:h.adId??void 0,scenario:y?"chat":void 0}}:void 0}},newMessage:C,filesToSubmit:v,additionalData:I,imagesUploaded:b,documentsUploaded:x}}async function uJ(e){var S,C,T,w,I;const{text:t,inputMethod:n,scenario:s,customData:o,entryPoint:r}=e,c=Vo(),l=ue(Ae),u=ue(No),m=ue(to),p=ue(jC),f=ce("multi-file-upload"),{isSubmittable:h,shouldDropAccordingToMiddleware:g}=await N3(e);if(g){c==="computerUse"&&_n(ln());return}const y=performance.now();if(Co.set(uI,y),Co.set(pp,"bottom"),!h||!l)return;await eJ()&&(c==="computerUse"?(Se({source:"copilotActionsStartTask",customData:JSON.stringify({conversationId:l})}),Co.set(xi,!0)):Co.set(xi,!1)),C3({sideBySideComparisonId:l,reason:"sentNewMessage"}),vb(l);const b=await M3(e);Co.set(Ct,A=>yn(A,E=>{const R=E.get(l);R&&(R.suggestedFollowup=void 0)})),Co.set(No,A=>A&&{...A,lastUserMessageRguid:A.activeCardRguid});const x=await Ms({useMockConnection:k3(t)});m.size>0&&Co.set(to,new Map),p.size>0&&Co.set(jC,new Map),x.send(b.sendMessageParams),x.resetConversationState(l,y),x.setChatModeForConversation(l,c),x.setInputMethodForConversation(l,n),x.callBeforeSendForConversation(l),x.callOnSentForConversation(l,b.additionalData),x.setUserMessageForConversation(l,b.sendMessageParams);const v={eventName:"copilotCompose",eventInfo_conversationId:l,eventInfo_inputMethod:n,eventInfo_numImagesUploaded:b.imagesUploaded,eventInfo_numDocumentsUploaded:b.documentsUploaded,eventInfo_mode:c,eventInfo_landingPage:M.getLandingPage(),...b.filesToSubmit.length>0?{eventInfo_uploadFileSize:((C=(S=b.filesToSubmit[0])==null?void 0:S.file)==null?void 0:C.size)??0,eventInfo_uploadFileType:(w=(T=b.filesToSubmit[0])==null?void 0:T.attachment)==null?void 0:w.type}:{}};f&&(v.eventInfo_uploadFilesInfo=JSON.stringify(b.filesToSubmit.map(({file:A,attachment:E,scenario:R})=>({scenario:R,type:(E==null?void 0:E.type)??"",size:(A==null?void 0:A.size)??""})))),b.additionalData&&(v.eventInfo_additionalData=b.additionalData),s&&(v.eventInfo_scenario=s),o&&(v.eventInfo_customData=o),u&&(v.eventInfo_adsContext=JSON.stringify({showroomBrandId:u.brandId,showroomBrandName:(I=u.brandLogo)==null?void 0:I.businessName})),r&&(v.eventInfo_entryPoint=r),M.trackEvent({name:"interaction",data:v}),QQ(),iJ(n),QY(),c==="computerUse"&&_n(ln())}async function dJ(){const e=ue(Ae);e&&(await Ms()).onSubmitMessageBlocked(e)}async function mJ(){var s,o;const e=await Ms(),t=ue(Ae),n=(o=(s=$A(t))==null?void 0:s.part.task)==null?void 0:o.id;t&&(vb(t),C3({sideBySideComparisonId:t,reason:"stoppedMessage"})),e.stop({conversationId:t,taskId:n})}async function pJ(e){const{messageId:t}=e,n=performance.now(),s=ue(Ae);if(!s)return;_b(s,r=>{const c=bp(r);c&&c.id===t&&r.pop()});const o=await Ms();o.regenerate(e),o.resetConversationTiming(s,n),o.setChatModeForConversation(s,Vo()),o.callBeforeSendForConversation(s)}async function fJ(e){const t=performance.now(),n=ue(Ae);if(!n)return;const s=await Ms();s.sendSkipReasoning(e),_b(n,o=>{const r=Et(o,e.messageId,!0);r&&(r.content=r.content.filter(c=>c.type!=="chainOfThought"&&c.type!=="chainOfThoughtGroup"))}),s.resetConversationTiming(n,t),s.callBeforeSendForConversation(n)}async function hJ(e){const{text:t,filesWithAttachment:n=[]}=e,s=ue(Ae),o=ue(fI),{isSubmittable:r}=await N3(e);if(!r||!s)return;if(FQ(t??"",n,o,UC[s])){const l=await Ms({useMockConnection:k3(t)}),u=await M3(e,!0);l.sendMessagePreview(u.sendMessageParams),UC[s]={text:t??"",atTimestamp:Date.now(),files:n}}}async function gJ(e){(await Ms()).selectSxSMessage(e)}async function bJ(e){const t=ue(Ae);if(!t)return;const{messageId:n,partId:s}=e,o=await Ms(),r=Vo(),c={conversationId:t,mode:r,content:{type:"command",command:{type:"updateCard",messageId:n,partId:s,update:{type:"consent",status:"rejected"}}}};o.send(c)}const Ks={submitMessage:uJ,stopMessage:mJ,onSubmitMessageBlocked:dJ,regenerateMessage:pJ,skipReasoningForMessage:fJ,sendMessagePreview:hJ,selectSideBySideMessage:gJ,updateCardMessageCommand:bJ};function Tve(e,t){return e.find(n=>n.partId===t)}function vJ(e){return{attachment:{item:{type:"image",url:e},content:{type:"image",url:e},size:0,type:"image/webp"}}}const yJ=De();function R3(e){yJ.set(cr,e)}function CJ(){const e=wu(),t=_(oE),[n,s]=Ee(lu);d.useEffect(()=>{e&&!n&&s(t)},[e,t,n,s])}const P3=["smart-mode-6e0b4c6f","smart-mode-cd0c997b","smart-mode"];function lc(){return hE(P3,"any")}function xJ(){return q0(P3,"any")}function L3(){try{return Pa.latestLocation.pathname}catch{return typeof window<"u"&&window.location.pathname?window.location.pathname:"/"}}function Cp(){return L3()==="/"}function kb(){const e=uO()??dO();if(e&&mO(e))return e}function Tu(){const e=ue(ao),t=ue(wn);return e.length===0&&!!(t!=null&&t.isNew)}function uc(){const e=L3(),t=e.endsWith("/talk"),n=e.startsWith("/chats")&&!t,s=Cp();return n||s}function xp(){return!ue(l0)}function SJ(){var c;const e=xp(),t=ue(db),n=ue(pp),s=Tu(),o=uc(),r=!!((c=Z.instance().config().landingPage)!=null&&c.enableCentralComposer);return e&&!t&&n==="center"&&o&&s&&r}function wJ(){var o;const e=xp(),t=Tu(),n=uc(),s=!!((o=Z.instance().config().landingPage)!=null&&o.enableStarterPrompts);return e&&n&&t&&s}function j3(){var r;const e=xp(),t=Tu(),n=uc(),s=ue(rK),o=!!((r=Z.instance().config().landingPage)!=null&&r.enableWidgets);return e&&s&&n&&t&&o}function IJ(){const e=xp(),t=Tu(),n=uc(),s=j3(),o=ce("appr-home");return e&&n&&t&&o&&!s}function O3(){var c;const e=ce("autosuggest"),t=ce("edge-autosuggest"),n=Tu(),s=uc(),o=e||t,r=!!((c=Z.instance().config().landingPage)!=null&&c.enableAutoSuggest);return o&&r&&s&&n}function TJ(){Bo()}function dc(){const e=IJ(),t=TJ(),n=kb();return{isCompatibleLandingRoute:uc(),isAutoSuggestEnabled:O3(),isCentralComposerEnabled:SJ(),isStarterPromptsEnabled:wJ(),isWidgetSectionEnabled:j3(),isAppearanceOnHomeEnabled:e,isGreetingCentered:e||!n&&ce("categorized-conversation-starter-widget"),overrideUserInputPlaceholderFromWidget:t}}const EJ=De();function D3(e){const{text:t,attachments:n,inputMethod:s}=e,o=xK(),r=Lg(),c=gu({breakpoint:"sm"}),l=Vo(),u=ue(as),m=!Zt("kill-chat-message-preview"),p=l==="computerUse",f=ce("long-term-memory"),h=m&&(xJ()&&l==="smart"||f),y=O3()&&!u&&!p;if(t||Td("starter-prompts"),qa(o.length<=0||t.length===0),zA(!1),EJ.set(tp,void 0),TK(s??"user"),r&&R3("typing"),c&&PA(),y&&a3(t),h)try{Ks.sendMessagePreview({text:t,inputMethod:"text",filesWithAttachment:n??[]})}catch{}}function wi(e){const{prompt:t,prefillSource:n}=e,s=document.querySelector(`#${D1}`);s&&(Yc(),kg(t),D3({text:t,inputMethod:n}),setTimeout(()=>{s.focus(),s.setSelectionRange(t.length,t.length)},0))}function zo(e){const{createConversation:t}=yb(),n=z(as),s=z(yu),o=z(pp),r=z(Ng);return d.useCallback(async l=>{const{createConversationParams:u,prefillComposerData:m,composerPosition:p="center",shouldHideLaunchGreeting:f=!1,shouldNavigateToLanding:h=!0}=l??{};n(null),s(null),r(null),e==null||e(),await t({...u,shouldNavigateToChat:!1}),h&&await UK(),o(p),m&&wi(m),f&&PA()},[t,o,n,s,r,e])}const AJ={default:"border-black/10 dark:border-white/10",accent:"border-stroke-300"};function As(e){const{horizontalMargin:t=!0,verticalMargin:n=!0,color:s="default",className:o}=e;return i.jsx("div",{className:F("border-t-[1px]",t&&"mx-2",n&&"my-2",AJ[s],o)})}function Nb({defaultValue:e,controlledValue:t,onChange:n}){const s=t!==void 0,[o,r]=d.useState(e);return d.useEffect(()=>{s&&r(t)},[t,s]),{state:s?t:o,setState:u=>{s||r(u),n==null||n(u)}}}function Eu(e){const{renderTrigger:t,triggerClick:n,children:s,className:o,options:r,isOpen:c,trapFocus:l,onIsOpenChange:u}=e,{state:m,setState:p}=Nb({controlledValue:c,defaultValue:!1,onChange:u}),{disableFocusManager:f=!1}=r??{},h=jr(),{refs:g,x:y,y:b,strategy:x,context:v}=Zi({open:m,placement:(r==null?void 0:r.placement)??"bottom-end",onOpenChange:p,middleware:[Ca((r==null?void 0:r.offset)??1),Ki({fallbackAxisSideDirection:"end"}),xa()],whileElementsMounted:_a}),S=b1(v),C=_m(v),T=km(v,{role:(r==null?void 0:r.roleType)??"dialog"}),{getReferenceProps:w,getFloatingProps:I}=Nm([S,C,T]),A=E=>{r!=null&&r.stopReferencePropagation&&E.stopPropagation(),n==null||n(E)};return i.jsxs(i.Fragment,{children:[t==null?void 0:t({ref:g.setReference,...w({onClick:A})},m),m&&i.jsx(qi,{children:i.jsx(Mm,{context:v,modal:l,disabled:f,returnFocus:(r==null?void 0:r.returnFocus)??!0,children:i.jsx("div",{ref:E=>{g.setFloating(E),r!=null&&r.menuRef&&(r.menuRef.current=E)},style:{position:x,top:`${b}px`,[h?"insetInlineEnd":"insetInlineStart"]:`${y}px`},...I({onClick:E=>{r!=null&&r.stopFloatingPropagation&&E.stopPropagation(),r!=null&&r.hideOnMenuClick&&p(!1)}}),className:F("flex rounded-2xl p-1.5 shadow-xl",(r==null?void 0:r.overrideZIndex)??Ke.modal,o),children:s})})})]})}function _J(e){const{onStartNewChat:t,onStartPrivateConversation:n,onCreatePage:s}=e,{t:o}=V(),r=D("pages"),c="flex gap-4";return i.jsxs("div",{className:"flex flex-col",children:[i.jsxs($,{color:"subtle-dimmed-inverted",className:c,size:"40-base",variant:"rect",alignment:"start",title:o("sidebar.actions.newChatV2"),onClick:t,children:[i.jsx(lA,{className:"size-5"}),o("sidebar.actions.newChatV2")]}),i.jsxs($,{color:"subtle-dimmed-inverted",className:c,size:"40-base",variant:"rect",alignment:"start",title:o("sidebar.actions.newPrivateConversation"),onClick:n,children:[i.jsx(cA,{className:"size-[18px]"}),o("sidebar.actions.newPrivateConversation")]}),r&&i.jsxs(i.Fragment,{children:[i.jsx(As,{}),i.jsxs($,{color:"subtle-dimmed-inverted",className:c,size:"40-base",alignment:"start",variant:"rect",title:o("sidebar.actions.newPageV2"),onClick:s,children:[i.jsx(uA,{className:"size-5"}),o("sidebar.actions.newPageV2")]})]})]})}function U3(e){const{buttonSize:t}=e,{t:n}=V(),s=zo(),{createPage:o}=Jq(),r=Gt(),c=D("pages-anonymous"),{refetch:l}=Iq({disabled:!r&&!c}),u=D("enable-private-chat"),m=et(),p=async()=>{m===a2?await s({createConversationParams:{isPrivate:!0}}):await Dr({to:a2,from:m})},f=async()=>{jq(),await(o==null?void 0:o({content:"",sourcePage:"createNewPage",impressionScenario:"actionMenuCreateNewPage",featureLatencyInfo:{scenario:"createPage",startTimestamp:Date.now()}})),await l()},h=kA({callback:f,signInScenario:"sidebarActionCreatePage",signInReason:"createPage"}),g=async()=>{!r&&c?f():h()},y=()=>{setTimeout(()=>{g()},0)};return i.jsx(Eu,{options:{placement:"bottom-end",hideOnMenuClick:!0,roleType:"menu"},className:kn,renderTrigger:({onClick:b,...x},v)=>i.jsx($,{...x,title:n("sidebar.actions.menuTitle"),tooltip:{placement:"bottom",disabled:v},color:"subtle-dimmed-inverted",variant:"rect",size:t,className:"min-w-6 rounded-sm rounded-e-xl px-0",onClick:S=>{Se({source:"sidebarActionsMenu",customData:JSON.stringify({buttonSize:t})}),b(S)},children:i.jsx(Vn,{className:"size-3.5 rotate-90"})}),children:u?i.jsx(_J,{onStartNewChat:()=>{s()},onStartPrivateConversation:p,onCreatePage:y}):i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx($,{color:"subtle-dimmed-inverted",size:"40-base",variant:"rect",alignment:"start",title:n("sidebar.actions.newChat"),onClick:()=>{s()},children:n("sidebar.actions.newChat")}),i.jsx($,{color:"subtle-dimmed-inverted",size:"40-base",alignment:"start",variant:"rect",title:n("sidebar.actions.newPage"),onClick:y,children:n("sidebar.actions.newPage")})]})})}const F3=e=>d.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M9.15898 16.8666C9.36292 17.0528 9.67918 17.0384 9.86536 16.8345C10.0515 16.6305 10.0371 16.3143 9.8332 16.1281L3.66535 10.4974H17.4961C17.7722 10.4974 17.9961 10.2735 17.9961 9.99736C17.9961 9.72122 17.7722 9.49736 17.4961 9.49736H3.66824L9.8332 3.86927C10.0371 3.68309 10.0515 3.36684 9.86536 3.16289C9.67918 2.95895 9.36292 2.94456 9.15898 3.13074L2.24263 9.44478C2.10268 9.57254 2.02285 9.74008 2.00314 9.91323C1.99851 9.94058 1.99609 9.96869 1.99609 9.99736C1.99609 10.0242 1.99821 10.0506 2.00229 10.0763C2.02047 10.2522 2.10058 10.4229 2.24263 10.5526L9.15898 16.8666Z",fill:"currentColor"})),Eve=Object.freeze(Object.defineProperty({__proto__:null,default:F3},Symbol.toStringTag,{value:"Module"})),Au=e=>d.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("mask",{id:"mask0_21044_3802",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:20,height:20},d.createElement("path",{d:"M19.7803 1.28033C20.0732 0.987435 20.0732 0.512561 19.7803 0.219669C19.4874 -0.0732238 19.0125 -0.0732228 18.7196 0.219671L8.71967 10.2197L8.25 11.75L9.78033 11.2803L19.7803 1.28033ZM4.25 1C2.45507 1 1 2.45508 1 4.25V15.75C1 17.5449 2.45507 19 4.25 19H15.75C17.5449 19 19 17.5449 19 15.75V7.75C19 7.33579 18.6642 7 18.25 7C17.8358 7 17.5 7.33579 17.5 7.75V15.75C17.5 16.7165 16.7165 17.5 15.75 17.5H4.25C3.2835 17.5 2.5 16.7165 2.5 15.75V4.25C2.5 3.2835 3.2835 2.5 4.25 2.5H12.25C12.6642 2.5 13 2.16421 13 1.75C13 1.33579 12.6642 1 12.25 1H4.25Z",fill:"currentColor"})),d.createElement("g",{mask:"url(#mask0_21044_3802)"},d.createElement("rect",{width:24,height:24,transform:"translate(-2 -2)",fill:"currentColor"}))),Ave=Object.freeze(Object.defineProperty({__proto__:null,default:Au},Symbol.toStringTag,{value:"Module"})),Sp=e=>d.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M3.75 8.5C3.75 8.08579 4.08579 7.75 4.5 7.75H5.75C6.16421 7.75 6.5 8.08579 6.5 8.5C6.5 8.91421 6.16421 9.25 5.75 9.25H4.5C4.08579 9.25 3.75 8.91421 3.75 8.5ZM3.75 12C3.75 11.5858 4.08579 11.25 4.5 11.25H5.75C6.16421 11.25 6.5 11.5858 6.5 12C6.5 12.4142 6.16421 12.75 5.75 12.75H4.5C4.08579 12.75 3.75 12.4142 3.75 12ZM3.75 15.5C3.75 15.0858 4.08579 14.75 4.5 14.75H5.75C6.16421 14.75 6.5 15.0858 6.5 15.5C6.5 15.9142 6.16421 16.25 5.75 16.25H4.5C4.08579 16.25 3.75 15.9142 3.75 15.5ZM4.25 3C2.45507 3 1 4.45507 1 6.25V17.75C1 19.5449 2.45508 21 4.25 21H19.75C21.5449 21 23 19.5449 23 17.75V6.25C23 4.45507 21.5449 3 19.75 3H4.25ZM19.75 19.5H9V4.5H19.75C20.7165 4.5 21.5 5.2835 21.5 6.25V17.75C21.5 18.7165 20.7165 19.5 19.75 19.5ZM4.25 4.5H7.5V19.5H4.25C3.2835 19.5 2.5 18.7165 2.5 17.75V6.25C2.5 5.2835 3.2835 4.5 4.25 4.5Z",fill:"currentColor"})),_ve=Object.freeze(Object.defineProperty({__proto__:null,default:Sp},Symbol.toStringTag,{value:"Module"})),B3=k(!0),kJ=k(!0),NJ=k(!1),MJ=k(!1),V3=k(!1);function H3(){const e=_(a0),t=_(Vi);return e&&!!t}function wp(){const e=et();return e.startsWith("/podcasts")||e.startsWith("/shares/podcasts")}function RJ(e){const{isSidebarOpen:t,toggle:n}=e,s=zo(),[o]=Ee(nn),r=_(No),{t:c}=V(),l=D("pages"),u=et(),m=wp(),p=o==="chat-only"||t,f=H3(),h=_(V3),g=!t&&(u.startsWith("/daily")||u.endsWith("/talk")||m||u.startsWith("/labs/experiments/3d-generations")||u.startsWith("/shares/3d-generations")||u.startsWith("/gallery"));return i.jsx("div",{className:F("pointer-events-none absolute start-0 top-0 w-full p-1 pe-3.5",Ke.sidebar),children:i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"absolute flex min-w-full items-center justify-between gap-1 p-1",children:[i.jsx(at,{children:g&&i.jsx(ee.div,{className:F("pointer-events-auto absolute inset-0 rounded-2xl border border-stroke-100 shadow-md dark:border-stroke-300",kn),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Ce,animate:Be,exit:Ce},transition:_t})}),i.jsxs("div",{className:"pointer-events-auto flex shrink-0 items-center gap-1","data-theme":r&&!t?r.theme:void 0,children:[(h||p&&t)&&i.jsxs(i.Fragment,{children:[i.jsx($,{title:c(t?"sidebar.close":"sidebar.open"),className:"after:absolute after:inset-0 after:rounded-lg hover:after:bg-black/3 dark:hover:after:bg-white/5",color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",onClick:()=>{Se({source:"sidebarToggle",pageName:u,customData:JSON.stringify({isOpen:t})}),n()},testId:"sidebar-toggle-button",children:t?i.jsx(F3,{className:"size-4"}):i.jsx(Sp,{className:"size-5"})}),f&&!h&&i.jsx(mm,{text:c("settings.copilotBeta.beta"),className:"relative me-2 ms-1 uppercase"})]}),p&&(h||!t)&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center rounded-lg hover:bg-black/3 dark:hover:bg-white/5",children:[i.jsx($,{title:c("composer.startNewChat"),color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",onClick:async()=>{Se({source:"sidebarNewConversation",destination:"/chat",pageName:u,customData:JSON.stringify({isOpen:t})}),await s()},children:i.jsx(Au,{className:"size-4"})}),l&&i.jsx(U3,{buttonSize:"28-xxs"})]}),f&&i.jsx(mm,{text:c("settings.copilotBeta.beta"),className:"relative me-2 ms-1 uppercase"})]})]})]})})})}const Mb="/static/cmc/assets/lumi-square-dark-L6S3uU38.webm",Rb="/static/cmc/assets/lumi-square-light-D-O5yNyk.webm",FC="Sidebar";function PJ(){const{t:e}=V(),t=z(ro),n=_(zn),s=d.useRef(!1);d.useEffect(()=>{s.current||(s.current=!0,_s({page:FC,scenario:"Displayed",element:"appearanceCtaSidebarBanner"}))},[]);const o=async()=>{t(Ir),await Cu({talk:!0}),Se({pageName:FC,source:"appearanceCtaSidebarBanner",scenario:"open",destination:"AudioCallWithAppearance"})};return i.jsxs($,{title:e("settings.appearanceSidebarBannerAltText"),"aria-label":e("settings.appearanceSidebarBannerAltText"),className:"my-4 flex w-full gap-2 p-2",onClick:o,color:"subtle-dimmed-inverted",alignment:"start",children:[i.jsx("video",{src:n==="dark"?Mb:Rb,title:e("settings.appearanceIconAlt"),className:"size-7 rounded-xl",autoPlay:!0,muted:!0}),i.jsx("div",{className:"text-start text-xs",children:e("settings.appearanceSidebarStartVoiceBannerText")})]})}const Pb="clicked",Ip="dismissed",BC=a.union([a.enum([Pb,Ip]),a.undefined()]),Lb=k(!1),LJ=k(!1),jb=Do({key:E2,schema:BC,initialValue:St(E2,BC)??void 0}),jJ=k(null),Ob=Do({key:Xw,schema:a.boolean(),initialValue:!1}),Db=k(!1),OJ=k(!1),Kf="Sidebar";function DJ(e){const{onDismiss:t}=e,{t:n}=V(),s=z(ro),o=_(zn),r=z(jb),c=d.useRef(!1),l=z(Db);d.useEffect(()=>{c.current||(c.current=!0,_s({page:Kf,scenario:"Displayed",element:"appearanceCtaDiscoverySidebarBanner"}))},[]);const u=async()=>{r(Pb),l(!0),s(Ir),await Cu({talk:!0}),t(),Se({pageName:Kf,source:"appearanceCtaDiscoverySidebarBanner",scenario:"open",destination:"AudioCallWithAppearance"})},m=p=>{p.stopPropagation(),r(Ip),t(),Se({pageName:Kf,source:"appearanceCtaDiscoverySidebarBanner",scenario:"dismiss"})};return i.jsxs("div",{role:"button",tabIndex:0,title:n("settings.appearanceSidebarBannerAltText"),"aria-label":n("settings.appearanceSidebarBannerAltText"),className:"my-3 flex w-full cursor-pointer items-center rounded-[20px] bg-foreground-100 p-3 dark:bg-midnight-350/10",onClick:u,onKeyDown:async p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),await u())},children:[i.jsx("video",{src:o==="dark"?Mb:Rb,title:n("settings.appearanceIconAlt"),className:"size-16 rounded-2xl",autoPlay:!0,loop:!0,muted:!0}),i.jsxs("div",{className:"mx-2 flex flex-1 flex-col gap-2",children:[i.jsx("div",{className:"text-start text-2xs",children:n("settings.appearanceSidebarBannerText")}),i.jsxs("div",{className:"flex flex-row items-center gap-1 text-accent-550",children:[i.jsx("div",{className:"text-start text-2xs",children:n("settings.appearanceSidebarBannerTryItText")}),i.jsx(Vn,{className:"size-3"})]})]}),i.jsx("div",{className:"flex h-full flex-col justify-start self-stretch",children:i.jsx($,{title:n("product.dismiss"),"aria-label":n("product.dismiss"),variant:"rect",color:"subtle-dimmed-inverted",size:"28-xxs",onClick:m,children:i.jsx(Yt,{className:"size-3"})})})]})}function Ii(e){const{children:t,color:n="neutral",className:s}=e;return i.jsx("div",{className:W("flex h-4 shrink-0 items-center rounded px-1.5 text-3xs",n==="neutral"?"bg-black/8 text-foreground-550 dark:bg-white/8 dark:text-foreground-650":"bg-accent-350/30 text-accent-650 dark:bg-accent-450/30",s),children:t})}const UJ="relative flex shrink-0 items-center justify-center";function Jr(e){const{titleString:t,descriptionString:n,badgeString:s,iconBgColor:o,iconFgColor:r,isSelected:c,isIconOnly:l,children:u,testId:m,buttonClassName:p,onClick:f}=e,h=bu(),g=ce("sidebar-compact-nav-items")&&!Zt("kill-sidebar-compact-nav-items");return i.jsx(ee.div,{className:"relative w-full",layout:"position",transition:_t,children:i.jsx($,{className:W("pointer-events-auto w-full flex-col px-2",g||l?"py-1.5":"py-2",l&&"h-9 w-10",c&&"bg-black/5 before:contrast-more:border-[4px] dark:bg-white/8",p),title:t,tooltip:{placement:"right",gap:12,disabled:!h},size:g||l?"36-sm":"40-base",color:"subtle-dimmed-inverted",onClick:f,testId:m,"aria-selected":c,children:i.jsx("span",{className:"flex w-full items-center justify-between",children:i.jsxs("span",{className:W("flex min-w-0",g?"gap-2.5":"gap-3"),children:[i.jsx("span",{className:W(UJ,g||l?"size-6":"size-10 squircle-16",!g&&!l&&o,!g&&!l&&r),children:u}),i.jsx(at,{mode:"popLayout",children:!l&&i.jsxs(ee.span,{className:"flex min-w-0 flex-1 flex-col",initial:"initial",animate:"animate",exit:"exit",variants:{initial:Ce,animate:Be,exit:Ce},transition:_t,children:[i.jsxs("span",{className:"flex min-h-6 w-full items-center gap-1.5 text-start text-sm-medium",children:[t,s!==void 0&&s!==""&&i.jsx(Ii,{color:"accent",children:s})]}),!g&&n&&i.jsx("span",{className:"w-full text-start text-foreground-550 text-2xs",children:n})]})})]})})})})}const VC=65,FJ=100;function HC({count:e=1}){const t=d.useMemo(()=>Array.from({length:e},()=>`${Math.floor(Math.random()*(FJ-VC+1))+VC}%`),[e]);return i.jsx("div",{className:"flex flex-col gap-5 px-3 py-1",children:t.map((n,s)=>i.jsx("div",{style:{width:n},className:F("relative h-5 overflow-hidden rounded-lg bg-background-300 opacity-30 dark:bg-background-250 dark:opacity-40","border border-background-300 dark:border-background-250","after:absolute after:-start-[300%] after:end-0 after:start-0 after:h-full","after:opacity-50 dark:after:opacity-5","after:bg-gradient-to-r after:from-transparent after:via-white after:to-transparent","after:bg-[length:80%_100%] after:bg-no-repeat","after:animate-[shimmer-translate_2s_infinite]")},s))})}const z3=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M8 4.5H8.99998V10.7382C8.99998 11.1132 8.90628 11.4822 8.72739 11.8117L5.14269 18.415C4.50968 19.5811 5.35388 20.9999 6.68068 20.9999H17.3193C18.6461 20.9999 19.4903 19.5811 18.8573 18.415L15.2726 11.8117C15.0937 11.4822 15 11.1132 15 10.7382V4.5H16C16.4142 4.5 16.75 4.16421 16.75 3.75C16.75 3.33579 16.4142 3 16 3H8C7.58579 3 7.25 3.33579 7.25 3.75C7.25 4.16421 7.58579 4.5 8 4.5ZM10.5 10.7382V4.5H13.5V10.7382C13.5 11.3631 13.6561 11.9781 13.9543 12.5273L14.7537 14H9.24621L10.0457 12.5273C10.3438 11.9781 10.5 11.3631 10.5 10.7382ZM8.43192 15.5H15.568L17.539 19.1307C17.6294 19.2973 17.5088 19.4999 17.3193 19.4999H6.68068C6.49114 19.4999 6.37054 19.2973 6.46097 19.1307L8.43192 15.5Z"})),kve=Object.freeze(Object.defineProperty({__proto__:null,default:z3},Symbol.toStringTag,{value:"Module"})),W3=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M11.0656 8.00389L11.25 7.99875H18.75C20.483 7.99875 21.8992 9.3552 21.9949 11.0643L22 11.2487V18.7487C22 20.4818 20.6435 21.898 18.9344 21.9936L18.75 21.9987H11.25C9.51697 21.9987 8.10075 20.6423 8.00515 18.9332L8 18.7487V11.2487C8 9.51571 9.35646 8.0995 11.0656 8.00389ZM18.75 9.49875H11.25C10.3318 9.49875 9.57881 10.2059 9.5058 11.1052L9.5 11.2487V18.7487C9.5 19.6669 10.2071 20.4199 11.1065 20.4929L11.25 20.4987H18.75C19.6682 20.4987 20.4212 19.7916 20.4942 18.8923L20.5 18.7487V11.2487C20.5 10.2822 19.7165 9.49875 18.75 9.49875ZM15.5818 4.23284L15.6345 4.40964L16.327 6.998H14.774L14.1856 4.79787C13.9355 3.86431 12.9759 3.31029 12.0423 3.56044L4.79787 5.50158C3.91344 5.73856 3.36966 6.61227 3.52756 7.49737L3.56044 7.64488L5.50158 14.8893C5.69372 15.6064 6.30445 16.0996 7.00045 16.1764L7.00056 17.6816C5.69932 17.6051 4.52962 16.7445 4.10539 15.4544L4.05269 15.2776L2.11155 8.03311C1.66301 6.35913 2.6067 4.6401 4.23284 4.10539L4.40964 4.05269L11.6541 2.11155C13.3281 1.66301 15.0471 2.6067 15.5818 4.23284Z"})),Nve=Object.freeze(Object.defineProperty({__proto__:null,default:W3},Symbol.toStringTag,{value:"Module"})),G3=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M3.5 12C3.5 7.30558 7.30558 3.5 12 3.5C16.6944 3.5 20.5 7.30558 20.5 12C20.5 16.6944 16.6944 20.5 12 20.5C7.30558 20.5 3.5 16.6944 3.5 12ZM12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM7.08349 8.70767C6.67722 7.6882 7.68791 6.67747 8.7074 7.08372L12.7356 8.68888C13.9078 9.15602 14.8461 10.0704 15.3431 11.2303L17.1969 15.5557C17.6414 16.5929 16.5927 17.6415 15.5555 17.197L11.2301 15.3433C10.0703 14.8462 9.15587 13.908 8.68872 12.7358L7.08349 8.70767ZM8.69209 8.69233L10.0822 12.1805C10.4018 12.9825 11.0274 13.6245 11.821 13.9646L15.572 15.5721L13.9644 11.8212C13.6243 11.0276 12.9824 10.4019 12.1803 10.0823L8.69209 8.69233Z"})),Mve=Object.freeze(Object.defineProperty({__proto__:null,default:G3},Symbol.toStringTag,{value:"Module"})),$3=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M2 5.25C2 3.45507 3.45507 2 5.25 2H14.75C16.5449 2 18 3.45507 18 5.25V8H16.5V5.25C16.5 4.2835 15.7165 3.5 14.75 3.5H5.25C4.2835 3.5 3.5 4.2835 3.5 5.25V12.75C3.5 13.7165 4.2835 14.5 5.25 14.5H8V16H5.25C3.45507 16 2 14.5449 2 12.75V5.25ZM19 13.25C19 13.9404 18.4404 14.5 17.75 14.5C17.0596 14.5 16.5 13.9404 16.5 13.25C16.5 12.5596 17.0596 12 17.75 12C18.4404 12 19 12.5596 19 13.25ZM9 12.25C9 10.4551 10.4551 9 12.25 9H18.75C20.5449 9 22 10.4551 22 12.25V18.75C22 20.5449 20.5449 22 18.75 22H12.25C10.4551 22 9 20.5449 9 18.75V12.25ZM12.25 10.5C11.2835 10.5 10.5 11.2835 10.5 12.25V18.75C10.5 18.9393 10.5301 19.1216 10.5856 19.2923L13.98 16.1069C14.845 15.2977 16.1892 15.2977 17.0542 16.1069L20.4246 19.2598C20.4736 19.0985 20.5 18.9273 20.5 18.75V12.25C20.5 11.2835 19.7165 10.5 18.75 10.5H12.25ZM12.25 20.5H18.75C18.9854 20.5 19.2099 20.4535 19.4149 20.3693L16.0295 17.2023C15.7411 16.9326 15.2931 16.9326 15.0047 17.2023L11.6167 20.3819C11.8131 20.4582 12.0267 20.5 12.25 20.5ZM5.75 5C6.16421 5 6.5 5.33579 6.5 5.75V6.25C6.5 6.66421 6.16421 7 5.75 7C5.33579 7 5 6.66421 5 6.25V5.75C5 5.33579 5.33579 5 5.75 5ZM6.5 8.75C6.5 8.33579 6.16421 8 5.75 8C5.33579 8 5 8.33579 5 8.75V9.25C5 9.66421 5.33579 10 5.75 10C6.16421 10 6.5 9.66421 6.5 9.25V8.75ZM14.25 5C14.6642 5 15 5.33579 15 5.75V6.25C15 6.66421 14.6642 7 14.25 7C13.8358 7 13.5 6.66421 13.5 6.25V5.75C13.5 5.33579 13.8358 5 14.25 5ZM6.5 11.75C6.5 11.3358 6.16421 11 5.75 11C5.33579 11 5 11.3358 5 11.75V12.25C5 12.6642 5.33579 13 5.75 13C6.16421 13 6.5 12.6642 6.5 12.25V11.75Z"})),Rve=Object.freeze(Object.defineProperty({__proto__:null,default:$3},Symbol.toStringTag,{value:"Module"}));function zC(e){return e?{x:e.scrollLeft,y:e.scrollTop}:{x:0,y:0}}function BJ(e,t={}){const{checkIsScrolling:n=!0,scrollEndDelay:s=150}=t,[o,r]=d.useState(zC(e.current)),[c,l]=d.useState(!1),u=d.useRef(void 0);return d.useEffect(()=>{const m=e.current;let p=null;if(m===null)return()=>{};function f(){p===null&&(p=window.requestAnimationFrame(()=>{r(zC(m)),n&&(l(!0),u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(()=>{l(!1)},s)),p=null}))}return m.addEventListener("scroll",f),()=>{m.removeEventListener("scroll",f),u.current&&clearTimeout(u.current)}},[n,e,s]),t.checkIsScrolling?{...o,isScrolling:c}:o}function VJ(e,t,n={}){const{leading:s=!0,trailing:o=!1}=n;let r=!1,c=null;const l=u=>{e(...u)};return!s&&!o?()=>{}:(...u)=>{r?c=u:(s?l(u):o&&(c=u),r=!0,setTimeout(()=>{r=!1,o&&c&&(l(c),c=null,r=!0,setTimeout(()=>{r=!1},t))},t))}}function Ug(e,t=1e3){const n=d.useRef();return d.useEffect(()=>{n.current=e},[e]),d.useMemo(()=>VJ((...r)=>{var c;(c=n.current)==null||c.call(n,...r)},t),[t])}function q3({onScrollStart:e,onScrollEnd:t,scrollRefs:n}){const s=d.useRef({}),o=Ug(c=>{const{target:l}=c;l instanceof Window?s.current={scrollSource:"window",scrollStartTime:Date.now(),scrollStartX:l.scrollX,scrollStartY:l.scrollY}:l instanceof HTMLElement&&(s.current={scrollSource:l.id,scrollStartTime:Date.now(),scrollStartX:l.scrollLeft,scrollStartY:l.scrollTop}),e==null||e(s.current)}),r=Ug(c=>{const{target:l}=c;l instanceof Window?(s.current={...s.current,scrollEndX:l.scrollX,scrollEndY:l.scrollY,scrollDuration:Date.now()-(s.current.scrollStartTime??0)},t==null||t(s.current)):l instanceof HTMLElement?(s.current={...s.current,scrollEndX:l.scrollLeft,scrollEndY:l.scrollTop,scrollDuration:Date.now()-(s.current.scrollStartTime??0)},t==null||t(s.current)):s.current={}});d.useEffect(()=>{var l,u;const c={passive:!0};for(const m of n)(l=m.current)==null||l.addEventListener("scroll",o,c),(u=m.current)==null||u.addEventListener("scrollend",r,c);return()=>{var m,p;for(const f of n)(m=f.current)==null||m.removeEventListener("scroll",o),(p=f.current)==null||p.removeEventListener("scrollend",r)}},[n,o,r])}function Ub(e){const{scrollableRef:t,customData:n,customTrackCallback:s}=e,o=d.useCallback(r=>{window.requestAnimationFrame(()=>{s?s(r):yG({...r,scrollSource:e.source??r.scrollSource,customData:JSON.stringify(n)})})},[n,s,e.source]);q3({onScrollEnd:o,scrollRefs:t?[t]:[]})}function Fg(e){var t;return((t=Z.instance().config().settingsOverrides)==null?void 0:t[e.key])??e.default}const HJ=d.lazy(()=>P(()=>import("./sidebar-settings-Dg4x-to2.js"),__vite__mapDeps([300,0,1,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350])).then(e=>({default:e.SidebarSettings}))),Zf="bg-sidebar-light dark:bg-sidebar-dark",WC="before:pointer-events-none before:absolute before:h-10 before:w-full before:from-sidebar-light before:to-transparent dark:before:from-sidebar-dark",zJ=d.lazy(()=>P(()=>import("./sidebar-pages-DBGpu2y9.js"),__vite__mapDeps([351,0,1])).then(e=>({default:e.SidebarPages}))),WJ=d.lazy(()=>P(()=>import("./conversations-D7_y3cX3.js"),__vite__mapDeps([352,0,1,353])));function GJ(e){const{toggle:t}=e,{t:n}=V(),s=et(),o=Ns(),r=zo(),c=_(eo),l=iA(),u=d.useRef(!0);d.useEffect(()=>{u.current=!1},[]);const m=Gt(),p=D("pages"),f=D("pages-sidebar-empty-cta"),h=D("pages-anonymous"),g=D("library"),y=!g&&(m||f||h)&&p,b=D("appearance-discoverability"),x=_(jb),v=_(ro),S=_(Ob),C=_(OJ),T=Z.instance().config().enableLabs,w=D("creator-gallery"),I=dp(),A=I||s==="/daily",{modalType:E}=YS({strict:!1}),R=s.startsWith("/library"),U=s.startsWith("/labs"),K=s.startsWith("/gallery"),[H,te]=d.useState(b&&!x);d.useEffect(()=>{(x||C)&&te(!1)},[x,C]);const oe=d.useMemo(()=>b&&v&&S&&x!==Ip&&!C,[x,b,v,S,C]),ne=_(iu),ge=d.useRef(null),{y:me}=BJ(ge),be=me>0,we=nb(),se=z(eo);Ub({scrollableRef:ge,source:"sidebar"});const ae=Fg({key:"shouldUseFlyoutSettings",default:!1}),fe=D("sidebar-settings"),re=fe&&!ae,ke=ic(),q=bu(),G=ke&&!we&&!c;return i.jsx("div",{className:W("h-dvh px-0.5 pb-0.5 pt-1",we?"w-full":"w-sidebar"),children:i.jsx("div",{className:W("t-custom-scrollbar h-full overflow-x-hidden",c?"overflow-y-auto":"overflow-y-hidden"),ref:ge,children:i.jsxs("div",{className:W("flex min-h-full w-full flex-col px-1",{"justify-between":re}),children:[i.jsx(ee.div,{className:W(Zf,WC,"pointer-events-none sticky top-0 z-10 pb-3 pt-[52px]",be&&"before:bottom-0 before:top-full before:bg-gradient-to-b before:opacity-90",be&&"after:absolute after:bottom-0 after:mx-1 after:w-[calc(100%-8px)] after:border-b after:border-black/8 dark:after:border-white/10",we&&"whitespace-nowrap"),layout:!0,transition:_t,children:i.jsxs("div",{className:W(Zf,"pointer-events-auto relative flex flex-col items-start gap-0.5",q?"pt-0":"pt-4"),children:[i.jsx(at,{mode:"popLayout",children:q&&i.jsxs(ee.div,{className:"flex flex-col gap-0.5",initial:"initial",animate:"animate",exit:"exit",variants:{initial:{scale:.6,...Ce},animate:{scale:1,...Be},exit:{scale:.6,...Ce}},transition:l||u.current?{duration:0}:_t,children:[i.jsx(Jr,{buttonClassName:"cursor-e-resize",titleString:n("sidebar.open"),isIconOnly:!0,onClick:()=>{Se({source:"sidebarToggle",pageName:s,customData:JSON.stringify({isOpen:c})}),t()},testId:"sidebar-toggle-button",children:i.jsx(Sp,{className:"size-6"})}),i.jsx(Jr,{titleString:n("composer.startNewChat"),isIconOnly:!0,onClick:async()=>{Se({source:"sidebarNewConversation",destination:"/",pageName:s,customData:JSON.stringify({isOpen:c})}),await r()},children:i.jsx(Au,{className:"size-5"})})]})}),i.jsx(Jr,{titleString:n("sidebar.discover"),descriptionString:n("sidebar.discoverDescription"),isSelected:A,isIconOnly:G,iconBgColor:"bg-caramel-350/40 dark:bg-slate-650/60",iconFgColor:"text-caramel-600 dark:text-slate-250",testId:"sidebar-discover-button",onClick:async()=>{!I||I&&E?(Se({source:"sidebarDiscoverButton",destination:"/discover",pageName:s}),await o({to:"/discover",from:s,search:{modalUrl:void 0}})):we&&se(!1)},children:i.jsx(G3,{className:"size-6"})}),w&&i.jsx(Jr,{titleString:n("sidebar.gallery.title"),descriptionString:n("sidebar.gallery.description"),badgeString:n("sidebar.gallery.badge"),iconBgColor:"bg-midnight-350/50 dark:bg-midnight-600/50",iconFgColor:"text-midnight-600 dark:text-midnight-350",isSelected:K,isIconOnly:G,onClick:async()=>{Se({source:"sidebarGalleryButton",destination:"/gallery",pageName:s}),await o({to:"/gallery",from:s}),we&&K&&se(!1)},children:i.jsx($3,{className:"size-6"})}),g&&i.jsx(Jr,{titleString:n("sidebar.library"),descriptionString:n("sidebar.libraryDescription"),iconBgColor:"bg-spot-green-300/40 dark:bg-spot-green-600/60",iconFgColor:"text-spot-green-600 dark:text-slate-250",isSelected:R,isIconOnly:G,onClick:()=>{o({to:"/library",from:s})},children:i.jsx(W3,{className:"size-6"})}),T&&i.jsx(Jr,{titleString:n("sidebar.labs"),descriptionString:n("sidebar.labsDescription"),iconBgColor:"bg-labs-light dark:bg-labs-dark",iconFgColor:"text-labs-dark dark:text-labs-light",isSelected:U,isIconOnly:G,onClick:async()=>{Se({source:"sidebarLabsButton",destination:"/labs",pageName:s}),await o({to:"/labs",from:s}),we&&U&&se(!1)},children:i.jsx(z3,{className:"size-6"})})]})}),i.jsx(at,{children:c&&i.jsxs(ee.div,{className:"grow",initial:"initial",animate:"animate",exit:"exit",variants:{initial:Ce,animate:Be,exit:Ce},layout:"position",transition:_t,children:[oe&&i.jsx(PJ,{}),H&&!oe&&i.jsx(DJ,{onDismiss:()=>te(!1)}),i.jsxs("div",{className:W("relative flex grow flex-col py-5"),children:[y&&i.jsx(d.Suspense,{fallback:null,children:i.jsx(zJ,{isCompact:!we})}),i.jsx("h2",{className:"mb-6 flex gap-2 px-2.5 align-middle text-sm-medium",children:n("sidebar.conversations")}),ne?i.jsx(d.Suspense,{fallback:i.jsx(HC,{count:16}),children:i.jsx(WJ,{isCompact:!we})}):i.jsx(HC,{count:16})]})]})}),!fe&&i.jsx("div",{className:W(Zf,WC,"sticky bottom-0 py-1 before:bottom-full before:bg-gradient-to-t")}),i.jsx(d.Suspense,{fallback:null,children:re&&i.jsx(HJ,{})})]})})})}const $J="/static/cmc/assets/copilot-wordmark-DvWA6bVb.svg",mc=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 120 120",fill:"none",...e},d.createElement("defs",null,d.createElement("radialGradient",{id:"a",cx:0,cy:0,r:1,gradientTransform:"matrix(-27.40125 -33.47302 31.47539 -25.76598 95.512 51.286)",gradientUnits:"userSpaceOnUse"},d.createElement("stop",{offset:.096,stopColor:"#00AEFF"}),d.createElement("stop",{offset:.773,stopColor:"#2253CE"}),d.createElement("stop",{offset:1,stopColor:"#0736C4"})),d.createElement("radialGradient",{id:"b",cx:0,cy:0,r:1,gradientTransform:"rotate(51.84 -70.254 70.14)scale(39.9779 38.7796)",gradientUnits:"userSpaceOnUse"},d.createElement("stop",{stopColor:"#FFB657"}),d.createElement("stop",{offset:.634,stopColor:"#FF5F3D"}),d.createElement("stop",{offset:.923,stopColor:"#C02B3C"})),d.createElement("radialGradient",{id:"e",cx:0,cy:0,r:1,gradientTransform:"matrix(-31.67773 90.58917 -108.5232 -37.949 103.796 30.703)",gradientUnits:"userSpaceOnUse"},d.createElement("stop",{offset:.066,stopColor:"#8C48FF"}),d.createElement("stop",{offset:.5,stopColor:"#F2598A"}),d.createElement("stop",{offset:.896,stopColor:"#FFB152"})),d.createElement("linearGradient",{id:"c",x1:31.75,x2:37.471,y1:18.75,y2:84.938,gradientUnits:"userSpaceOnUse"},d.createElement("stop",{offset:.156,stopColor:"#0D91E1"}),d.createElement("stop",{offset:.487,stopColor:"#52B471"}),d.createElement("stop",{offset:.652,stopColor:"#98BD42"}),d.createElement("stop",{offset:.937,stopColor:"#FFC800"})),d.createElement("linearGradient",{id:"d",x1:36.75,x2:39.874,y1:10,y2:82.213,gradientUnits:"userSpaceOnUse"},d.createElement("stop",{stopColor:"#3DCBFF"}),d.createElement("stop",{offset:.247,stopColor:"#0588F7",stopOpacity:0})),d.createElement("linearGradient",{id:"f",x1:106.964,x2:106.923,y1:33.365,y2:53.037,gradientUnits:"userSpaceOnUse"},d.createElement("stop",{offset:.058,stopColor:"#F8ADFA"}),d.createElement("stop",{offset:.708,stopColor:"#A86EDD",stopOpacity:0}))),d.createElement("path",{fill:"url(#a)",d:"M85.855 18.313A11.574 11.574 0 0 0 74.75 10h-3.379a11.574 11.574 0 0 0-11.384 9.485L54.2 51.018l1.436-4.913a11.574 11.574 0 0 1 11.11-8.327H86.38l8.235 3.207 7.937-3.207h-2.316a11.574 11.574 0 0 1-11.105-8.313z"}),d.createElement("path",{fill:"url(#b)",d:"M36.326 101.64A11.574 11.574 0 0 0 47.445 110h7.176c6.276 0 11.409-5.002 11.57-11.277l.781-30.405-1.634 5.583a11.574 11.574 0 0 1-11.108 8.321H34.432l-7.058-3.829-7.641 3.83h2.278c5.154 0 9.687 3.408 11.119 8.36z"}),d.createElement("path",{fill:"url(#c)",d:"M74.248 10H34.15c-11.457 0-18.33 15.142-22.913 30.283-5.43 17.939-12.534 41.93 8.02 41.93H36.57c5.174 0 9.716-3.421 11.138-8.396 3.01-10.531 8.286-28.903 12.43-42.889 2.105-7.107 3.86-13.211 6.551-17.012C68.2 11.785 70.715 10 74.248 10"}),d.createElement("path",{fill:"url(#d)",d:"M74.248 10H34.15c-11.457 0-18.33 15.142-22.913 30.283-5.43 17.939-12.534 41.93 8.02 41.93H36.57c5.174 0 9.716-3.421 11.138-8.396 3.01-10.531 8.286-28.903 12.43-42.889 2.105-7.107 3.86-13.211 6.551-17.012C68.2 11.785 70.715 10 74.248 10"}),d.createElement("path",{fill:"url(#e)",d:"M46.744 110h40.099c11.456 0 18.33-15.144 22.913-30.288 5.429-17.942 12.533-41.937-8.02-41.937H84.422a11.576 11.576 0 0 0-11.138 8.396c-3.01 10.533-8.286 28.909-12.43 42.897-2.106 7.109-3.86 13.214-6.552 17.016-1.51 2.131-4.025 3.916-7.558 3.916"}),d.createElement("path",{fill:"url(#f)",d:"M46.744 110h40.099c11.456 0 18.33-15.144 22.913-30.288 5.429-17.942 12.533-41.937-8.02-41.937H84.422a11.576 11.576 0 0 0-11.138 8.396c-3.01 10.533-8.286 28.909-12.43 42.897-2.106 7.109-3.86 13.214-6.552 17.016-1.51 2.131-4.025 3.916-7.558 3.916"})),Pve=Object.freeze(Object.defineProperty({__proto__:null,default:mc},Symbol.toStringTag,{value:"Module"}));function $i(e,t={},n){const{initialize:s=!1}=t,o=d.useRef(null);return d.useEffect(()=>{const r=n??o.current,c=new ResizeObserver(([l])=>{l&&e(l.contentRect)});return r&&(c.observe(r),s&&e(r.getBoundingClientRect())),()=>c.disconnect()},[e,s,n]),o}function pt(e){const{url:t,className:n}=e;return i.jsx("div",{className:W("bg-current forced-color-adjust-none",n),style:{WebkitMaskImage:`url(${t})`,maskImage:`url(${t})`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain"}})}const GC={placement:"bottom"};function qJ(e){const{isSidebarOpen:t,toggle:n}=e,s=zo(),[o]=Ee(nn),r=d.useRef(!0);d.useEffect(()=>{r.current=!1},[]);const c=_(No),{t:l}=V(),u=D("pages"),m=et(),p=Cp(),f=wp(),h=lt({breakpoint:"md"}),g=H3(),y=D("enable-private-chat"),b=ic(),x=bu(),v=!t&&(m.startsWith("/daily")||m.endsWith("/talk")||m.startsWith("/gallery")||m.startsWith("/library")||f||m.startsWith("/labs/experiments/3d-generations")||m.startsWith("/shares/3d-generations")),S=!x||h,C=o==="chat-only"||t,T=d.useRef(null),w=$i(()=>{const I=document.getElementById("app");if(I){const A=h&&T.current?T.current.clientWidth:0;I.style.setProperty("--sidebar-header-secondary-buttons-collapsed-width",`${A}px`)}});return i.jsx("div",{className:W("pointer-events-none absolute start-0 top-0 w-full py-3 pe-2.5",!b&&!t?"ps-2":"ps-0.5",Ke.sidebar),children:i.jsx("div",{className:"relative",children:i.jsxs("div",{className:W("absolute flex min-w-full items-end justify-between p-1",x?"gap-3":"gap-0.5"),ref:w,children:[(t||b&&!h)&&i.jsx("div",{className:"flex w-0 items-center",children:i.jsxs($,{role:"link",title:l("sidebar.homepageLink"),className:W("pointer-events-auto absolute start-1 top-1 flex items-center gap-2.5 pe-2.5 ps-2",x&&"gap-0 px-2"),size:"36-sm",color:"subtle-dimmed-inverted",testId:"sidebar-copilot-brand-button",onClick:async()=>{p||(Se({source:"sidebarBrandButton",destination:"/chat",pageName:m}),await s())},children:[i.jsx(mc,{className:"size-6"}),i.jsx(jt,{className:"flex items-center",mode:"popLayout",initial:r.current?!1:"initial",delay:Fn.default,duration:Fn.slow,children:(b&&t||!b)&&i.jsxs("span",{className:"flex items-center text-md-strong",children:[i.jsx(pt,{url:$J,className:"h-[18px] w-[58px]"}),g&&i.jsx(mm,{text:"BETA",className:"ms-2 uppercase"})]})})]})}),S&&i.jsxs("div",{className:"pointer-events-auto relative mx-1 flex shrink-0 items-center gap-0.5","data-theme":c&&!t?c.theme:void 0,ref:T,children:[i.jsx(at,{children:v&&i.jsx(ee.div,{className:W("pointer-events-auto absolute border border-stroke-100 shadow-md dark:border-stroke-300",C?"-inset-1 rounded-2xl":"inset-0 rounded-xl",kn),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Ce,animate:Be,exit:Ce},transition:_t})}),i.jsx($,{title:l(t?"sidebar.close":"sidebar.open"),tooltip:GC,className:W("after:absolute after:inset-0 after:rounded-xl",(h||!b)&&"hover:after:bg-black/3 dark:after:hover:bg-white/5",!h&&b&&t&&"cursor-w-resize",!h&&b&&!t&&"cursor-e-resize"),color:"subtle-dimmed-inverted",variant:"square",size:"36-sm",onClick:()=>{Se({source:"sidebarToggle",pageName:m,customData:JSON.stringify({isOpen:t})}),n()},testId:"sidebar-toggle-button",children:i.jsx(Sp,{className:"size-6"})}),C&&i.jsxs("div",{className:W("flex rounded-xl",x&&!h?"gap-1":"hover:bg-black/3 dark:hover:bg-white/5"),children:[i.jsx($,{title:l("composer.startNewChat"),tooltip:GC,color:"subtle-dimmed-inverted",variant:"square",size:"36-sm",className:W("rounded-sm rounded-s-xl",x&&!h?"w-10":"w-[34px]"),onClick:async()=>{Se({source:"sidebarNewConversation",destination:"/chat",pageName:m,customData:JSON.stringify({isOpen:t})}),await s()},testId:"sidebar-new-conversation-button",children:i.jsx(Au,{className:"size-5"})}),(u||y)&&i.jsx(U3,{buttonSize:"36-sm"})]}),!t&&g&&(b&&h||!b)&&i.jsx(mm,{text:l("settings.copilotBeta.beta"),className:"relative m-2 uppercase"})]})]})})})}function Fb(e){const t=Bl(),n=d.useRef(e);n.current=e,d.useEffect(()=>t.subscribe("onBeforeNavigate",s=>{const{pathChanged:o}=s;o&&n.current(s)}),[t])}function KJ(){const{t:e}=V(),[t,n]=Ee(eo),s=lt({breakpoint:"md"}),o=d.useRef(s),r=Z.instance().config().useCompactSidebarHeader??!1;Fb(()=>{s&&n(!1)});const c=bu();d.useEffect(()=>{o.current===!1&&s&&n(!1),o.current===!0&&!s&&n(nA()==="open"),o.current=s},[s,n]);const l=()=>{n(!t),s||Q$(t?"close":"open")};return i.jsxs(i.Fragment,{children:[i.jsx(at,{children:s&&t&&i.jsx(ee.div,{className:"fixed inset-0 bg-black/30",onClick:()=>n(!1),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Ce,animate:Be,exit:Ce},transition:_t})}),i.jsxs(ee.div,{className:F("relative w-full bg-sidebar-light dark:bg-sidebar-dark",t&&"h-full"),layout:"position",role:"navigation",children:[!t&&i.jsx("button",{onClick:l,type:"button",className:"absolute size-full cursor-e-resize outline-none","aria-label":e("sidebar.open")}),r?i.jsx(RJ,{isSidebarOpen:t,toggle:l}):i.jsx(qJ,{isSidebarOpen:t,toggle:l}),i.jsx(at,{children:(t||c)&&i.jsx(ee.div,{className:"overflow-hidden",initial:"initial",animate:"animate",exit:"exit",variants:{initial:Ce,animate:Be,exit:Ce},transition:_t,children:i.jsx(GJ,{toggle:l})})})]})]})}const ZJ=290,YJ=52,QJ=()=>{const e=ic(),t=lt({breakpoint:"md"});return e&&!t?YJ:0},$C="bg-sidebar-light dark:bg-sidebar-dark";function JJ(e){const{children:t,sidebar:n}=e,s=document.getElementById("app"),o=jr(),r=lt({breakpoint:"md"}),c=Wn(),u=_(eo)&&c,[m,p]=d.useState(!1),f=_(nn),h=_(al),g=_(ep),y=nb(),b=ic(),x=iA(),v=c&&(u||b)&&!r;d.useEffect(()=>{s&&s.style.setProperty("--layout-offset-y",v?`${oi}px`:"0px")},[s,v]);const S=bu(),C=f==="side-by-side",T=y?"100%":ZJ,w=QJ(),I=h||!!g,A={paddingTop:v||C?oi:0,paddingBottom:v&&!C?oi:0,paddingLeft:v&&o||!v&&C?oi:0,paddingRight:v&&!o||!v&&C?oi:0};return i.jsxs("div",{className:F("flex h-full overflow-hidden",$C),inert:I?"":void 0,children:[n??(c&&i.jsx(ee.div,{className:F("h-full will-change-auto",r?"absolute":"relative",r&&$C,r&&Ke.sidebar),initial:{width:u?T:w},animate:{width:u?T:w},transition:x?{duration:0}:_t,onAnimationStart:()=>p(!0),onAnimationComplete:()=>p(!1),children:i.jsx(KJ,{})})),i.jsx(ee.main,{className:F("relative flex w-full min-w-0 will-change-auto","after:pointer-events-none after:fixed after:inset-2 after:z-30 after:rounded-container after:border after:border-transparent after:transition-opacity dark:after:border-white/12 dark:after:border-s-white/8",v&&!m?"after:opacity-100 after:duration-1000":"after:opacity-0 after:duration-0",S?"after:start-[52px]":"after:start-[290px]"),initial:A,animate:A,transition:r||x?{duration:0}:_t,children:t})]})}function Bb(e){const{children:t,className:n,clipPathBreakpoint:s="md",backgroundColor:o}=e,r=lt({breakpoint:s}),c=Wn(),l=ic(),m=et().endsWith("/talk");return i.jsxs("div",{className:W("relative h-full overflow-hidden",n),children:[i.jsx("div",{className:F("absolute size-full",c&&!r&&"t-main-clip-path"),children:i.jsx(Or,{customColor:o,isFixed:!0})}),i.jsx("div",{className:F("relative size-full",!m&&"overflow-hidden",c&&l&&!r&&"rounded-container"),children:t})]})}function K3(e){const{deferred:t=!1}=e??{},n=KS(),[s,o]=Ee(p0),r=z(yu);d.useEffect(()=>{const u=oO();u&&o(u)},[n.search,o]);const c=d.useCallback(()=>{o(null)},[o]),l=d.useCallback(u=>{u&&r({source:"promptInUrl",prompt:u})},[r]);return d.useEffect(()=>{s&&!t&&l(s)},[t,l,s]),{prompt:s,handler:t?l:void 0,clear:c}}function XJ(){const e=D("prompt-pt-learn-partial"),t=D("prompt-pt-learn-full"),n=D("prompt-pt-learn-fill"),s=D("prompt-pt-advice-partial"),o=D("prompt-pt-advice-full"),r=D("prompt-pt-advice-fill"),c=D("prompt-pt-ideas-partial"),l=D("prompt-pt-ideas-full"),u=D("prompt-pt-ideas-fill"),m=D("prompt-pt-msn-answers"),p=D("prompt-pt-msn-headlines"),f=D("prompt-pt-msn-events"),h=D("prompt-pt-msn-answers-full"),g=D("prompt-pt-msn-headlines-full"),y=D("prompt-pt-msn-events-full"),b=M.getFormCode();let x=null,v=!1,S=!1,C=!1;switch(b){case"NTPCHB":{e||t||n?x="teach":s||o||r?x="advice":(c||l||u)&&(x="ideas"),v=e||s||c,S=t||o||l,C=n||r||u;break}case"MSNCHB":{m||h?x="answers":p||g?x="headlines":(f||y)&&(x="events"),S=h||g||y,C=m||p||f;break}default:x=null}let T=null;v?T="prefix":(S||C)&&(T="complete");let w=null;return v||C?w="partial":S&&(w="full"),{formCode:b,treatment:x,lengthVariant:T,passthroughType:w}}function Z3(){const e=_(Ra),t=D("labs-actions"),n=D("labs-actions-skipprocheck"),s=Z.instance().config().proSubscription.enabled,o=Gt(),r=!!_(nc),c=_(sn),l=!!_(lE);return I3({inEeaPlusRegion:l,labsFeatureEnabled:t,region:c,isUpsellFeatureEnabled:s,isAuthenticated:o,isTeenUser:r,isProUser:e,skipProUserCheck:n})}function Y3(){const[e,t]=d.useState(!1),n=_(Cd);return d.useEffect(()=>{async function s(){var r;await(((r=Z.instance().config().actions)==null?void 0:r.enableActions)??(()=>Promise.resolve(!1)))()&&t(!0)}s().catch(()=>{})},[t,n]),e}function Vb(){const e=Z3(),t=Y3();return T3({actionsAvailableForAccount:e,actionsAvailableForSurface:t})}function Lve(){var s;const e=Z3(),t=Y3(),n=((s=Z.instance().config().actions)==null?void 0:s.overrideLabsActionsFeatureEnabled)??!1;return tJ(e,t,n)}let _d=null;function eX(){const e=z(lI),t=Vb(),n=lc();d.useEffect(()=>{const s=nO(),o=iO();_d===null&&(_d=s);const r=l=>l==="td"?"reasoning":t&&l==="ac"?"computerUse":n&&l==="sm"?"smart":null,c=r(s||_d);c&&_n(c),o&&e(!0)},[t,n,e])}function tX(){return _d}function Q3(e){const{deferred:t=!1}=e??{},n=!!_(Ae),s=_(iu),[o,r]=Ee(m0),c=z(yu);d.useEffect(()=>{const m=tX()==="ac"?null:sO();if(m){const p=hO();r({prompt:m,inputMethod:p}),c({source:"queryInUrl",prompt:m})}},[c,r]);const l=d.useCallback(()=>{r(null)},[r]),u=d.useCallback(m=>{m&&(c({source:"queryInUrl",prompt:m}),(async()=>{if(n&&s&&m){const f=(o==null?void 0:o.inputMethod)??"queryParam";await Cu(),await Ks.submitMessage({text:m,inputMethod:f}),l()}})().catch(console.error))},[c,n,s,l,o]);return d.useEffect(()=>{!t&&o&&u(o.prompt)},[t,u,o]),{prompt:(o==null?void 0:o.prompt)??null,handler:t?u:void 0,clear:l}}function J3(){const e=nX(),t=sX();return e.prompt?e:t}function nX(){const{t:e}=V(),{formCode:t,lengthVariant:n,treatment:s,passthroughType:o}=XJ();if(t&&n&&s){const r=e(`promptsByFormCode.${t}.${s}.${n}`,"");return{passthroughType:o,prompt:r,source:r?{type:"formCode",formCode:t}:void 0}}return{passthroughType:null}}function sX(){const{prompt:e}=K3({deferred:!0}),{prompt:t}=Q3({deferred:!0});let n=null,s;return e?(n="partial",s=e):t&&(n="full",s=t),{passthroughType:n,prompt:s,source:s?{type:"query"}:void 0}}function X3(){const e=_(m0),{passthroughType:t}=J3();return!!(e!=null&&e.prompt)&&t==="full"}function oX(){var p,f;const e=et(),t=_(nn),n=_(h0),s=_(Lb),{isMediaViewerOpen:o}=io(),{disableMultiturn:r}=Z.instance().config(),c=((p=Z.instance().config().composer)==null?void 0:p.largeScreen)===!0&&((f=Z.instance().config().composer)==null?void 0:f.voiceOnly)===!0,l=["/pro/subscribe","/pro/ewallet/return","/referrals","/referrals/rules","/subscription/manage","/subscription/start","/connector/callback"],u=X3(),m=!e.startsWith("/labs")||e==="/labs/portrait/talk";return!l.includes(e)&&!e.startsWith("/topic-selection")&&(!e.startsWith("/fang")||o)&&!e.startsWith("/login")&&e!=="/e/so"&&e!=="/e/sol"&&!e.startsWith("/pro/redeem")&&!e.startsWith("/gaming")&&(!e.startsWith("/library")||o)&&!e.startsWith("/memory/narrative")&&!e.startsWith("/conversations")&&!e.startsWith("/campaigns")&&!e.startsWith("/pages")&&!e.startsWith("/shares/pages")&&!e.startsWith("/shares/3d-generations")&&!e.startsWith("/gallery")&&m&&t!=="detail-only"&&!n&&!s&&!c&&!r&&!u&&!e.startsWith("/shares/tasks")}function aX(){var o,r;const e=et(),t=dp(),n=Cp();return((o=Z.instance().config().composer)==null?void 0:o.largeScreen)===!0&&((r=Z.instance().config().composer)==null?void 0:r.voiceOnly)===!0&&!e.startsWith("/login-dcf")&&!t&&!n}function rX(e){const{showSettings:t,showSettingsRelyOnChatDetailLayout:n}=e,s=_(nn);return d.useMemo(()=>n?t&&s!=="side-by-side"&&s!=="detail-only":t,[n,t,s])}function iX(){const[e,t]=Ee(MJ);return d.useEffect(()=>{async function n(){const o=await(Z.instance().config().isCommandHeaderSupported??(()=>Promise.resolve(!1)))();t(o)}n().catch(()=>{})},[t]),e}function cX(){const[e,t]=Ee(kJ),n=_(B3);return d.useEffect(()=>{async function s(){const r=await(Z.instance().config().isPinToggleHeaderCommandSupported??(()=>Promise.resolve(!1)))();t(r&&n)}s().catch(()=>{})},[t,n]),e}const lX=/(['"])((\w+:(\/?\/?))?[^\s,]+)\1/,uX={maxRetries:2,initialDelayMs:200,backoffFactor:2,jitterFactor:.1};function dX(e){const n=String(e).match(lX);if(n)return n[2]}function mX(e,t){const n=s=>import(s);return async s=>{try{return await s()}catch(o){if(!ce("lazy-with-retry"))throw o;const r=dX(s);if(!r)throw Nt({feature:"lazyWithRetry",scenario:e,errorType:"lazyLoadModulePathParsingFailure",errorMessage:"Could not resolve path from importer function",customData:String(s)}),o;const c=async()=>{const p=`${r}?t=${Number(new Date)}`;return n(p)},m={...t,onSuccess:p=>{Xs({feature:"lazyWithRetry",scenario:e,customData:JSON.stringify({attempts:p.attemptCount})})},onFailure:p=>{Nt({feature:"lazyWithRetry",scenario:e,errorType:"lazyLoadRetryFailure",errorMessage:`Lazy import failed after ${p.attemptCount} attempt(s). Reason: ${p.exitReason??"unknown"}`,customData:JSON.stringify(p.errors)})}};return cp(c,m)}}}function pX(e,t,n=uX){return d.lazy(()=>mX(t,n)(e))}const fX=16/9,hX=48,e4=296,gX=e4/fX,bX=gX+hX;function vX(){return i.jsx("div",{className:"pointer-events-none absolute inset-0 mb-[calc(var(--composer-container-height)+20px)] me-4 ms-2 mt-[72px]",children:i.jsx("div",{className:"absolute bottom-0 end-4",style:{width:`${e4}px`,height:`${bX}px`},children:i.jsx("div",{className:F("relative flex h-full flex-col overflow-hidden rounded-4xl","bg-acrylic-default-fallback-light/[98] dark:bg-acrylic-default-fallback-dark/[98]"),style:{boxShadow:"0px 16px 24px -2px rgba(0, 0, 0, 0.12)"},children:i.jsx("div",{className:"flex h-full items-center justify-center",children:i.jsx($e,{className:"size-12"})})})})})}function Bg(e){Nt({feature:"fileDownload",errorType:"DownloadFileError",errorMessage:e})}const Tp=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M18.2498 20.5009C18.664 20.5008 19 20.8365 19 21.2507C19 21.6649 18.6644 22.0008 18.2502 22.0009L5.25022 22.0047C4.836 22.0048 4.5 21.6691 4.5 21.2549C4.5 20.8407 4.83557 20.5048 5.24978 20.5047L18.2498 20.5009ZM11.6482 2.01271L11.75 2.00586C12.1297 2.00586 12.4435 2.28801 12.4932 2.65409L12.5 2.75586L12.499 16.4409L16.2208 12.7205C16.4871 12.4543 16.9038 12.4301 17.1974 12.648L17.2815 12.7206C17.5477 12.9869 17.5719 13.4036 17.354 13.6972L17.2814 13.7813L12.2837 18.7779C12.0176 19.044 11.6012 19.0683 11.3076 18.8507L11.2235 18.7782L6.22003 13.7816C5.92694 13.4889 5.92661 13.014 6.21931 12.7209C6.48539 12.4545 6.90204 12.43 7.1958 12.6477L7.27997 12.7202L10.999 16.4339L11 2.75586C11 2.37616 11.2822 2.06237 11.6482 2.01271L11.75 2.00586L11.6482 2.01271Z",fill:"currentColor"})),jve=Object.freeze(Object.defineProperty({__proto__:null,default:Tp},Symbol.toStringTag,{value:"Module"})),yX=10*1024*1024,CX=5*1024*1024,xX=50*1024*1024,SX=3,ss={"image/png":["png"],"image/jpeg":["jpg","jpeg"],"image/webp":["webp"],"image/svg+xml":["svg"],"application/pdf":["pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/json":["json"],"text/csv":["csv"],"text/markdown":["md"],"text/plain":["txt"]},wX={"image/png":["png"],"image/jpeg":["jpg","jpeg"]},IX={"application/pdf":["pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/json":["json"],"text/csv":["csv"],"text/markdown":["md"],"text/plain":["txt"]},qC=k(null),t4=k(e=>{const t=e(oo("fileasyncprocessing"));return{maxFilesPerMessage:SX,image:{maxBytes:yX,mimeTypes:wX},document:{maxBytes:t?xX:CX,mimeTypes:IX}}}),Wo=k(e=>e(qC)??e(t4),(e,t,n)=>{t(qC,n)}),pc=k(e=>{const t=e(Wo);return{...t.image.mimeTypes,...t.document.mimeTypes}});function _u(e){const t=ue(Wo).document.mimeTypes;return e in t}function Hb(e,t){const n=ue(pc),{supportedMimeTypes:s=n}=t??{};if(!e)return!1;const o=Po(e);return o===""?!1:o in s}function Ove(){const e=ue(pc);return Object.keys(e).map(t=>t in ss&&ss[t]?[t,...ss[t].map(n=>`.${n}`)]:[]).flat()}function Dve(){const e=ue(Wo).document.mimeTypes;return Object.keys(e).map(t=>t in ss&&ss[t]?[t,...ss[t].map(n=>`.${n}`)]:[]).flat()}function Uve(){const e=ue(Wo).image.mimeTypes;return Object.keys(e).map(t=>t in ss&&ss[t]?[t,...ss[t].map(n=>`.${n}`)]:[]).flat()}function n4(e){return Object.values(e).flat().map(t=>`.${t}`)}function TX(){const e=ue(Wo).document.mimeTypes;return n4(e)}function s4(){const e=ue(Wo);return{documentMaxSize:e.document.maxBytes,imageMaxSize:e.image.maxBytes}}function zb(e){var o;const t=(o=e.split(".").pop())==null?void 0:o.toLowerCase(),n=ue(pc),s=Object.entries(n).find(([,r])=>r.includes(t??""));return s?s[0]:""}function Po(e){return e?e.type!==""?e.type:zb(e.name):""}function EX(e,t){const n=ue(pc),{supportedMimeTypes:s=n}=t??{};let o,r=null;const c=ce("multi-file-upload"),l=s4();if(!Hb(e,{supportedMimeTypes:s}))o={title:B("composer.errors.unsupportedAttachmentTypeV2.title"),message:B("composer.errors.unsupportedAttachmentTypeV2.message")},r="fileType";else if(!o4(e)){const u=Po(e);o=c?{title:B("composer.errors.multi.attachmentTooLarge.title"),message:B("composer.errors.multi.attachmentTooLarge.message",{limit:_u(u)?l.documentMaxSize/1024/1024:l.imageMaxSize/1024/1024})}:{title:B("composer.errors.attachmentTooLargeV2.title"),message:B("composer.errors.attachmentTooLargeV2.message")},r="fileSize"}return M.trackEvent({name:"system",data:{eventName:"clientFileValidation",eventInfo_errorType:r,eventInfo_fileType:Po(e),eventInfo_fileSize:e.size}}),o}function AX(e){return e.type==="text/x-markdown"?new File([e],e.name,{type:"text/markdown"}):e}function o4(e){const t=s4(),n=Po(e),s=_u(n)?t.documentMaxSize:t.imageMaxSize;return e.size<=s}function _X(e){var n;const t=(n=e.clipboardData)==null?void 0:n.items;if(t)for(let s=0;s<t.length;s+=1){const o=t[s];if((o==null?void 0:o.kind)==="file"){const r=o.getAsFile();if(!Hb(r))continue;const c=Po(r);if(r!==null)return o4(r)?{file:r,error:void 0}:(M.trackEvent({name:"system",data:{eventName:"clientFileValidation",eventInfo_errorType:"fileType",eventInfo_fileSize:r.size,eventInfo_fileType:c,eventInfo_errorMessage:"File size too large in paste"}}),{file:void 0,error:{title:B("composer.errors.attachmentTooLargeV2.title"),message:B("composer.errors.attachmentTooLargeV2.message")}})}}return{file:void 0,error:void 0}}function a4(e){switch(e){case"unsupported-content-type":return{title:B("composer.errors.unsupportedAttachmentTypeV2.title"),message:B("composer.errors.unsupportedAttachmentTypeV2.message")};case"attachment-too-large":return{title:B("composer.errors.attachmentTooLargeV2.title"),message:B("composer.errors.attachmentTooLargeV2.message")};case"empty-attachment":return{title:B("composer.errors.emptyAttachmentV2.title"),message:B("composer.errors.emptyAttachmentV2.message")};case"content-blocked":return{title:B("composer.errors.attachmentContentBlockedV2.title"),message:B("composer.errors.attachmentContentBlockedV2.message")};case"rate-limit-exceeded":return{title:B("composer.errors.attachmentRateLimitExceededV2.title"),message:B("composer.errors.attachmentRateLimitExceededV2.message")};default:return{title:B("composer.errors.attachmentDefault.title"),message:B("composer.errors.attachmentDefault.message")}}}function r4(e,t){const n=window.URL.createObjectURL(e),s=document.createElement("a");s.style.display="none",s.href=n,s.download=t,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(n),s.remove()}function Fve(e,t,n){const s=new Blob([n],{type:t});r4(s,e)}function kX(e){const t=e.headers.get("Content-Disposition");if(!t)return;const n=t.match(/filename\*=UTF-8''([^;]+)/);if(n&&n[1])return decodeURIComponent(n[1]);const s=t.match(/filename=([^;]+)/);if(s&&s[1])return s[1].replace(/^"(.*)"$/,"$1")}async function i4(e){const{url:t,fileName:n,preferResponseFileName:s,args:o}=e,r=Bm(t)?await fetch(t,o==null?void 0:o.options):await Hn(t,o);if(!r.ok)throw new Error(`Failed to fetch file: ${n} from ${t} (status: ${r.status})`);const c=await r.blob();let l=n;if(s){const u=kX(r);u&&(l=u)}r4(c,l)}function NX({name:e,size:t,message:n,kind:s}){M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:n,eventInfo_details:`Error uploading ${s} attachment`,eventInfo_uploadFileSize:t,eventInfo_uploadFileType:e,eventInfo_numDocumentsUploaded:1}})}function MX(){return`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}const RX=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",...e},d.createElement("path",{d:"M10 6.5V2H5.5C4.67157 2 4 2.67157 4 3.5V16.5C4 17.3284 4.67157 18 5.5 18H14.5C15.3284 18 16 17.3284 16 16.5V8H11.5C10.6716 8 10 7.32843 10 6.5ZM6.5 10H13.5C13.7761 10 14 10.2239 14 10.5C14 10.7761 13.7761 11 13.5 11H6.5C6.22386 11 6 10.7761 6 10.5C6 10.2239 6.22386 10 6.5 10ZM6.5 12H13.5C13.7761 12 14 12.2239 14 12.5C14 12.7761 13.7761 13 13.5 13H6.5C6.22386 13 6 12.7761 6 12.5C6 12.2239 6.22386 12 6.5 12ZM6.5 14H13.5C13.7761 14 14 14.2239 14 14.5C14 14.7761 13.7761 15 13.5 15H6.5C6.22386 15 6 14.7761 6 14.5C6 14.2239 6.22386 14 6.5 14ZM11 6.5V2.25L15.75 7H11.5C11.2239 7 11 6.77614 11 6.5Z",fill:"currentColor"})),c4=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e},d.createElement("path",{d:"M12 2V8C12 9.10457 12.8954 10 14 10H20V20C20 21.1046 19.1046 22 18 22H6C4.89543 22 4 21.1046 4 20V4C4 2.89543 4.89543 2 6 2H12ZM13.5 2.5V8C13.5 8.27614 13.7239 8.5 14 8.5H19.5L13.5 2.5Z",fill:"currentColor"})),PX="/static/cmc/assets/pdf-DuUY2RJ0.svg",l4=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",...e},d.createElement("path",{d:"M3 2.5C3 2.22386 3.22386 2 3.5 2H11.5C11.7761 2 12 2.22386 12 2.5V4.5C12 4.77614 11.7761 5 11.5 5C11.2238 5 11 4.77614 11 4.5V3H7.99997L7.99998 13H9C9.27614 13 9.5 13.2239 9.5 13.5C9.5 13.7761 9.27614 14 9 14H6C5.72386 14 5.5 13.7761 5.5 13.5C5.5 13.2239 5.72386 13 6 13H6.99998L6.99997 3H4V4.5C4 4.77614 3.77614 5 3.5 5C3.22386 5 3 4.77614 3 4.5V2.5Z",fill:"currentColor"}));function LX(e){const{fileType:t,className:n}=e;switch(t){case"application/pdf":return i.jsx(pt,{url:PX,className:n});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return i.jsx(RX,{className:n});case"text/plain":return i.jsx(l4,{className:n});case"application/json":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":case"text/csv":case"text/markdown":default:return i.jsx(c4,{className:n})}}function jX(e){switch(e){case"application/pdf":return"bg-system-red-350";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return"bg-midnight-300";case"text/plain":return"bg-spot-blue-300";case"application/json":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":case"text/csv":case"text/markdown":default:return"bg-neutral-300"}}function OX(e){const{t}=V();switch(e){case"application/pdf":return t("fileUpload.fileTypeDisplayPdf");case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return t("fileUpload.fileTypeDisplayDoc");case"text/plain":return t("fileUpload.fileTypeDisplayTxt");case"application/json":return t("fileUpload.fileTypeDisplayJson");case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":return t("fileUpload.fileTypeDisplayXlsx");case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":return t("fileUpload.fileTypeDisplayPptx");case"text/csv":return t("fileUpload.fileTypeDisplayCsv");case"text/markdown":return t("fileUpload.fileTypeDisplayMarkdown");default:return t("fileUpload.fileTypeDisplayDefault")}}const DX=100,ym=k([]);function u4(){const e=_(ym),[t,n]=d.useState(!1),s=t?e:[];return i.jsxs("div",{className:"sr-only",ref:()=>setTimeout(()=>n(!0),DX),children:[i.jsx(KC,{messages:s.filter(o=>o.type==="polite"),type:"polite"}),i.jsx(KC,{messages:s.filter(o=>o.type==="assertive"),type:"assertive"})]})}function KC({messages:e,type:t}){return i.jsx("div",{"aria-live":t,"aria-atomic":"true",children:e.map(n=>i.jsx("div",{"aria-label":n.msg,children:n.msg},n.id))})}function Vg(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.floor(Math.random()*16);return(e==="x"?t:Math.floor(Math.random()*4+8)).toString(16)})}const d4=7e3;function vr(e={}){return UX(e),null}function UX(e={}){const{msg:t,id:n,type:s="polite",timeout:o=d4}=e,r=z(ym),c=d.useRef(n??Vg());d.useEffect(()=>{t&&r(l=>{if(l.some(m=>m.id===c.current&&m.msg===t&&m.type===s))return l;c.current=n??Vg();const u={msg:t,id:c.current,type:s};return window.setTimeout(()=>{r(m=>m.filter(p=>p.id!==u.id))},o),[...l,u]})},[n,t,s,r,o])}function Wr(e){const{msg:t,id:n,type:s="polite",timeout:o=d4}=e;if(!t)return;const r=De();r.set(ym,c=>{const l={msg:t,id:n??Vg(),type:s};return window.setTimeout(()=>{r.set(ym,u=>u.filter(m=>m.id!==l.id))},o),[...c,l]})}const FX=d.lazy(()=>P(()=>Promise.resolve().then(()=>ab),[]));function Wb(e){var h;const{onRemove:t,filename:n,fileType:s,isUploading:o,role:r,ariaLabel:c}=e,{t:l}=V(),u=jX(s),m=OX(s),p=d.useCallback(()=>{t==null||t(),Wr({msg:l("fileUpload.fileRemoved")})},[t,l]),f=(h=Z.instance().config().composer)==null?void 0:h.smallAttachmentCard;return i.jsxs(ee.div,{className:F("relative flex justify-center gap-2 overflow-hidden rounded-xl border border-black/8 bg-acrylic-thin-fallback-light/60 p-3 dark:border-white/8 dark:bg-midnight-800/80 sm:w-56",{"mx-1 mt-2 h-[58px] w-auto flex-row pe-8":f,"h-32 w-44 flex-col":!f}),layout:"position",initial:Ce,animate:Be,exit:Ce,role:r,"aria-label":c,children:[i.jsx("div",{className:F("grid aspect-square size-8 place-items-center self-start rounded-full text-black",u),children:i.jsx(LX,{fileType:s,className:"size-5"})}),i.jsxs("div",{className:F({"min-w-0 flex-1":f}),children:[i.jsx("p",{className:F("font-ligatures-none truncate text-xs",{"overflow-hidden whitespace-nowrap":f}),children:n}),i.jsx("p",{className:"text-foreground-600 text-2xs",children:m})]}),t&&!o&&i.jsx("button",{type:"button",title:l("fileUpload.removeFileWithName",{name:n}),"aria-label":l("fileUpload.removeFileWithName",{name:n}),onClick:p,className:"absolute end-0.5 top-0.5 m-1 rounded-full border border-black/20 p-1 text-foreground-850 dark:border-white/20",children:i.jsx(Yt,{className:"size-3"})}),i.jsx(jt,{className:"absolute inset-0 grid place-items-center bg-white/80 dark:bg-white/45",children:o?i.jsxs(i.Fragment,{children:[i.jsx(d.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:i.jsx(FX,{type:"spinnerThemed",className:"size-11"})}),i.jsx(vr,{msg:l("fileUpload.uploadingFile"),type:"polite"})]}):null})]})}function BX(e){const{contentType:t,name:n,url:s}=e,{t:o}=V(),r=z(is),c=_(Ae),l=d.useRef(!1);d.useEffect(()=>{if(l.current)return;l.current=!0;const m=t.startsWith("image/")?"image":"file";M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:m,eventInfo_conversationId:c,eventInfo_impressionScenario:"renderArtifact",eventInfo_customData:JSON.stringify({url:s}),eventInfo_fileType:t}})},[s,n,c,t]);const u=d.useCallback(()=>{const m={url:s,fileName:n};M.trackEvent({name:"system",data:{eventName:"copilotClick",eventInfo_clickScenario:"downloadArtifact",eventInfo_clickSource:"fileDownloadButton",eventInfo_conversationId:c,eventInfo_customData:JSON.stringify({url:s}),eventInfo_fileType:t}}),i4(m).catch(p=>{const f=p instanceof Error?p.message:"unknown file card error";Bg(f),f.includes("status: 404")?r({title:o("common.fileUnavailable"),subtitle:o("common.fileUnavailableDetails"),dismissAfter:3e3}):r({title:o("common.downloadFailed"),subtitle:o("common.downloadFailedDetails",{fileName:n}),dismissAfter:3e3})})},[s,n,o,r,c,t]);return s?i.jsxs("div",{className:"flex w-fit max-w-full items-center gap-4 md:max-w-96",children:[i.jsx(Wb,{filename:n,fileType:t}),i.jsx($,{title:o("common.download"),size:"36-sm",variant:"circle",color:"subtle-dimmed-inverted",onClick:u,"aria-label":o("common.download"),className:"shrink-0 border border-stroke-350",children:i.jsx(Tp,{className:"size-5"})})]}):(Bg("No URL provided"),null)}const m4=.6;function Go(e={},t={}){return{start:{...e,opacity:0},end:n=>({...t,opacity:1,transition:{delay:n,ease:"easeInOut",duration:m4}})}}const VX=Go();function HX(e){const{items:t,shouldAnimate:n,BlockRenderer:s,delay:o}=e;return i.jsx(ee.blockquote,{className:"flex flex-col gap-3 border-s-2 border-foreground-300 ps-3",variants:VX,initial:n?"start":"end",animate:"end",custom:o,children:i.jsx(s,{blocks:t,shouldAnimate:n})})}function co(e){d.useEffect(()=>(window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}),[e])}function p4(e){const t=_(ao),{openMediaViewer:n}=io(),s=d.useMemo(()=>{if(!e)return[];const l=t.find(p=>p.id===e);if(!l||l.author!=="ai")return[];const u=[],m=new Set;for(const p of l.content)if(p.type==="card"){if(p.card.type==="image"){const f=p.card;for(const h of f.images){const{url:g}=h.source;g&&!m.has(g)&&(m.add(g),u.push({...h,mediaCardSource:"image"}))}}else if(p.card.type==="video"){const f=p.card;for(const h of f.videos){const{url:g}=h.source;g&&!m.has(g)&&(m.add(g),u.push({...h,mediaCardSource:"video"}))}}else if(p.card.type==="inlineImage"){const f=p.card,{url:h}=f.source;h&&!m.has(h)&&(m.add(h),u.push({image:f.image,source:f.source,mediaCardSource:"inlineImage"}))}else if(p.card.type==="inlineVideo"){const f=p.card,{url:h}=f.source;h&&!m.has(h)&&(m.add(h),u.push({video:{...f.video,duration:0},source:f.source,bestMomentIndex:void 0,moments:void 0,mediaCardSource:"inlineVideo"}))}}return u},[e,t]),o=d.useCallback(l=>s.some(u=>u.source.url===l),[s]),r=d.useCallback(l=>{switch(l){case"image":return"imageCard";case"inlineImage":return"inlineImageCard";case"video":return"videoCard";case"inlineVideo":return"inlineVideoCard";default:return"defaultMediaViewerSource"}},[]),c=d.useCallback(l=>{const u=s.findIndex(h=>h.source.url===l);if(u===-1)return;const m=s[u];if(!m)return;const p=r(m.mediaCardSource),f=s.map(h=>"image"in h?{type:"image",url:h.image.url,thumbnailUrl:h.image.thumbnailUrl,altText:h.image.altText,initLoading:!0,source:{title:h.source.title,url:h.source.url,iconUrl:h.source.iconUrl??void 0}}:{type:"video",url:h.video.url,isShort:h.video.isShort,bestMomentIndex:h.bestMomentIndex,moments:h.moments,source:{title:h.video.title,url:h.source.url,iconUrl:h.source.iconUrl??void 0}});n({currentMediaIndex:u,media:f,messageId:e??void 0,source:p})},[s,r,n,e]);return{checkMediaLink:o,openMediaLink:c}}function no({onOutsideEvent:e,elements:t,shouldAttachListeners:n=!0,includeScroll:s=!0,invokeOnce:o=!0,includeFocus:r=!0}){d.useEffect(()=>{const c=l=>{const u=l.target,m=t.some(f=>{var h;return(h=f.current)==null?void 0:h.contains(u)}),p=u instanceof Element&&u.closest("[data-outside-events-ignore]")!==null;!m&&!p&&e()};return n&&(document.addEventListener("mousedown",c,{once:o}),s&&document.addEventListener("scroll",c,!0),r&&document.addEventListener("focusin",c,!0)),()=>{document.removeEventListener("mousedown",c),s&&document.removeEventListener("scroll",c,!0),r&&document.removeEventListener("focusin",c,!0)}},[n,s,t,o,r,e])}const fc=d.createContext(void 0);function zX(e,t,n){Se({source:e==="row"?"citationCardRowButton":"citationReferencePanelCard",scenario:"openLink",conversationId:t,destination:n})}function Bve(e){Se({source:"citationCardShowAllButton",scenario:"openPanel",conversationId:e})}function ZC(e,t,n){Se({source:e==="inline"?"inlineCitationLink":"hoverCitationLink",scenario:"openLink",conversationId:t,destination:n})}function f4(e,t){let n;e==="card"?n="citationCardRowButton":e==="inline"?n="inlineCitationButton":n="citations",_s({page:"chat",element:n,scenario:"shown",customData:t})}const WX=Go();function GX(e){const{url:t,title:n,index:s,shouldAnimate:o,delay:r,onCitationClick:c,subCitations:l,mode:u}=e,m=d.useContext(fc),p=D("citation-media-open"),f=d.useId(),h=d.useId(),{checkMediaLink:g,openMediaLink:y}=p4(m??null),b=P1(),x=_(Ae),v=D("inline-citations")||u==="search",[S,C]=d.useState(!1),[T,w]=d.useState(!1),[I,A]=d.useState(0),[E,R]=d.useState(null),{refs:U,floatingStyles:K}=QS({placement:v?"bottom":"top",elements:{reference:E},middleware:v?[Ca(8),xa()]:[Ca(8),Ki(),xa()],strategy:v?"fixed":"absolute",whileElementsMounted:v?_a:void 0});no({onOutsideEvent:()=>C(!1),elements:[U.floating],includeScroll:!0,invokeOnce:!0}),co(re=>{(re.key==="Escape"||re.key==="Control")&&C(ke=>(ke&&E instanceof HTMLElement&&E.focus(),!1))}),d.useEffect(()=>{v&&f4("inline")},[v]);const H=()=>{if(p&&g(t)){y(t);return}if(v){if(l&&l.length>0){if(!l[0])return;const re=Cs(t);ZC("inline",x,re),ks(l[0].url)}}else C(!0)},te=()=>{yt({source:"citationLink",conversationId:x,messageId:m,destination:Cs(t)}),C(!1),c&&c()},oe=()=>{const re=Cs(t);ZC("hover",x,re),c&&c()},ne=re=>{re.preventDefault(),l!=null&&l.length&&A(ke=>ke>0?ke-1:l.length-1)},ge=re=>{re.preventDefault(),l!=null&&l.length&&A(ke=>ke<l.length-1?ke+1:0)},me=xs(t),be=l&&l[0],we=d.useMemo(()=>(be==null?void 0:be.publisher)??i2(t),[be==null?void 0:be.publisher,t]),se=l&&l[I],ae=d.useMemo(()=>(se==null?void 0:se.publisher)??i2(t),[se==null?void 0:se.publisher,t]),fe=l&&l.length>=2;return i.jsxs(ee.span,{initial:o?"start":"end",animate:"end",variants:WX,custom:r,className:W("group relative mx-0.5 inline-block pb-1 align-middle",v?"h-6":"h-5 w-4"),"data-copy":"false",children:[i.jsx("button",{id:h,"aria-expanded":S,"aria-controls":f,"aria-label":B("chat.citationPopoverButtonLabel",{citationNumber:s}),ref:R,type:"button",className:W("flex size-full items-center justify-center rounded-md pt-px text-3xs [font-variation-settings:'opsz'_40,_'wght'_400] hover:bg-accent-250 focus:bg-accent-250",S&&"pointer-events-none",v?"px-1":"mx-px",v?"bg-black/5 text-foreground-750 dark:bg-white/5 hover:dark:bg-accent-250 focus:dark:bg-accent-250":"bg-accent-200 text-foreground-800 dark:bg-slate-700 hover:dark:bg-background-400 focus:dark:bg-background-400"),onClick:H,onMouseEnter:()=>v&&w(!0),onMouseLeave:()=>v&&w(!1),children:v?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:W(fe&&"me-1"),children:we}),fe&&i.jsxs("span",{children:["+",l.length-1]})]}):s}),!v&&S&&i.jsx("span",{id:f,role:"dialog","aria-labelledby":h,className:W("absolute w-screen px-4 max-sm:mb-2 sm:w-[350px] sm:px-0",Ke.citations),style:K,ref:U.setFloating,children:i.jsx(ee.span,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{scale:{duration:.2},opacity:{duration:.15}},className:"origin-top-left",style:zd,children:i.jsx("a",{onClick:te,className:"flex w-full rounded-2xl border border-stroke-100 bg-background-100 p-3 shadow-lg dark:bg-background-250",href:Cs(t),target:"_blank",rel:b,children:i.jsxs("span",{className:"w-full flex-1 space-y-0.5",children:[i.jsx("span",{className:"line-clamp-1 text-xs-strong",children:n}),i.jsx("span",{className:"line-clamp-1 flex items-center gap-1.5 text-foreground-600 text-2xs",children:me})]})})})}),v&&i.jsx(qi,{children:i.jsx("span",{id:f,role:"dialog","aria-labelledby":h,className:W("absolute w-screen px-4 max-sm:mb-2 sm:w-[350px] sm:px-0",T?"visible":"invisible",Ke.citations),style:K,ref:U.setFloating,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:i.jsx(ee.span,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{scale:{duration:.2},opacity:{duration:.15}},className:"origin-top-left",style:zd,children:i.jsx("a",{onClick:oe,className:W("flex w-full origin-top rounded-2xl border border-stroke-100 bg-background-100 p-3 shadow-lg transition-all delay-200 duration-300 dark:bg-background-250",T?"scale-100 opacity-100":"scale-0 opacity-0"),href:Cs((se==null?void 0:se.url)??t),target:"_blank",rel:b,children:i.jsxs("span",{className:"w-full flex-1 flex-col",children:[i.jsxs("span",{className:"flex w-full items-center space-x-2",children:[i.jsx("span",{className:"inline-block size-3.5",children:(se==null?void 0:se.iconUrl)&&i.jsx("img",{src:se.iconUrl,alt:B("citationCards.citationIcon"),className:"size-full rounded-full object-cover"})}),i.jsx("span",{className:"line-clamp-1 text-xs",children:ae})]}),i.jsx("span",{className:"mt-1 line-clamp-1 text-sm-strong",children:se==null?void 0:se.title}),i.jsx("span",{className:"mt-1 line-clamp-2 text-foreground-700 text-sm",children:se==null?void 0:se.snippet}),i.jsx("span",{className:"mt-1 line-clamp-1 truncate text-foreground-600 text-2xs",children:se==null?void 0:se.url}),l&&l.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"my-2 border-t-[2px] border-foreground-200"}),i.jsxs("span",{className:"mt-2 flex justify-between",children:[i.jsxs("div",{className:"flex gap-1",children:[i.jsx(YC,{onClick:ne,disabled:I===0,title:B("citationCards.previousCitation"),children:i.jsx(Vn,{className:"size-4 rotate-180 text-stone-800 dark:text-slate-200"})}),i.jsx(YC,{onClick:ge,disabled:I===l.length-1,title:B("citationCards.nextCitation"),children:i.jsx(Vn,{className:"size-4 text-stone-800 dark:text-slate-200"})})]}),i.jsxs("span",{className:"text-foreground-600 text-xs",children:[I+1," / ",l.length]})]})]})]})})})})})]},"citation")}function YC({title:e,onClick:t,children:n,disabled:s=!1}){return i.jsx("button",{type:"button",title:e,disabled:s,onClick:t,"aria-label":e,className:W("relative flex",s&&"opacity-20",!s&&"hover:opacity-90",Yl),children:n})}const $X=GX,qX=Go(),Yf="rounded-md px-1.5 text-foreground-800 text-base-medium dark:bg-accent-200 dark:hover:bg-accent-300";function KX(e){const{url:t,text:n,shouldAnimate:s,delay:o}=e,{t:r}=V(),c=D("guided-conversations-t1"),l=D("guided-conversations-t2"),u=D("guided-conversations-t3"),m=async()=>{const f=r("guidedConversation.prefix",{topic:n});wi({prompt:f,prefillSource:"actionLink"})},p=()=>c?W(Yf,"bg-system-green-250/30 hover:bg-system-green-250/60"):l?W(Yf,"bg-accent-250/60 hover:bg-accent-250/80"):u?W(Yf,"bg-spot-blue-300/30 hover:bg-spot-blue-300/60"):"text-base-medium text-accent-450 hover:text-accent-600";return s?i.jsx(ee.button,{className:p(),onClick:m,"data-url":t,initial:"start",animate:"end",variants:qX,custom:o,children:n}):i.jsx("button",{type:"button",className:p(),onClick:m,"data-url":t,children:n})}const ZX="https://#timestamp-",YX="https://#settings:privacy";function h4(e){return e?e.startsWith(ZX)?"VideoCitation":e.startsWith(YX)?"PrivacySettings":"Unknown":"Unknown"}function QX(e){return h4(e)!=="Unknown"}function JX(e){if(!/^\d{2}:\d{2}:\d{2}$/.test(e))return e;const[n,s,o]=e.split(":");return n==="00"?(s==null?void 0:s.charAt(0))==="0"?`${s.substring(1)}:${o}`:`${s}:${o}`:(n==null?void 0:n.charAt(0))==="0"?`${n.substring(1)}:${s}:${o}`:e}const XX=Go(),QC="font-bold text-accent-550 dark:text-accent-600 hover:underline text-start align-top";function eee(e){const{url:t,text:n,shouldAnimate:s,delay:o}=e,r=d.useContext(fc),c=_(Ae),l=h4(t),u=async()=>{switch(l){case"VideoCitation":await b$.run({url:t});break;case"PrivacySettings":await S$.run({url:t});break}M.trackEvent({name:"interaction",data:{eventName:"localCitationClick",eventInfo_messageId:r??"",eventInfo_conversationId:c??"",eventInfo_citationType:l}})};d.useEffect(()=>{M.trackEvent({name:"interaction",data:{eventName:"localCitationImpression",eventInfo_messageId:r??"",eventInfo_conversationId:c??"",eventInfo_citationType:l}})},[r,c,l]);const m=JX(n);return s?i.jsx(ee.button,{className:QC,onClick:u,"data-url":t,initial:"start",animate:"end",variants:XX,custom:o,children:m}):i.jsx("button",{type:"button",className:QC,onClick:u,"data-url":t,children:m})}const JC=Go(),XC="font-bold text-accent-550 dark:text-accent-600 hover:underline text-start align-top";function lo(e){const{items:t,shouldAnimate:n,dangerouslyUseHtml:s,shouldTestForUrl:o=!0,mode:r}=e,c=d.useContext(fc),l=ue(Ae),u=D("text-link-media-open"),{checkMediaLink:m,openMediaLink:p}=p4(c??null),f=z(AA),h=z(as),g=Z.instance().config().suppressInlineLinkNavConfirmationPopups??!1;return i.jsx(i.Fragment,{children:t.map((y,b)=>{var A;if(y.type==="citation"){const{title:E,url:R,index:U,delay:K,subCitations:H}=y;return i.jsx($X,{title:E,url:R,index:U,shouldAnimate:n,delay:K,subCitations:H,mode:r},b)}if(y.type==="italic"||y.type==="bold"||y.type==="strikethrough"||y.type==="sup"||y.type==="sub"||y.type==="code"){const E=i.jsx(lo,{items:y.items,shouldAnimate:n,dangerouslyUseHtml:s});return y.type==="italic"?i.jsx("em",{children:E},b):y.type==="bold"?i.jsx("strong",{children:E},b):y.type==="strikethrough"?i.jsx("del",{children:E},b):y.type==="sup"?i.jsx("sup",{children:E},b):y.type==="sub"?i.jsx("sub",{children:E},b):i.jsx(ee.code,{className:"font-ligatures-none mx-0.5 rounded-[4px] border border-stroke-300 bg-accent-200/60 px-1 py-px font-mono text-foreground-800 text-sm dark:bg-accent-200",initial:n?"start":"end",animate:"end",variants:JC,custom:y.delay,children:E},b)}if(y.type!=="word")return null;const{word:x,url:v,delay:S,format:C}=y,w=tee({word:x,url:v,testForUrl:!C&&o}),I={initial:"start",animate:"end",variants:JC,custom:S,...s===!0||C==="latexAsHtml"?{dangerouslySetInnerHTML:{__html:((A=window.copilotTrustedTypesPolicy)==null?void 0:A.createHTML(x))??""}}:{children:x}};if(w.url){if(TP(w.url))return i.jsx(KX,{url:w.url,text:w.word,shouldAnimate:n,delay:S},b);if(QX(w.url))return i.jsx(eee,{url:w.url,text:w.word,shouldAnimate:n,delay:S},b);const E=()=>{if(u&&w.url&&m(w.url)){p(w.url);return}if(g&&w.url){ks(w.url);return}f({url:w.url,messageId:c,conversationId:l}),h("confirm-link-navigation")};return i.jsxs(d.Fragment,{children:[n?i.jsx(ee.button,{className:XC,onClick:E,"data-url":w.url,...I}):i.jsx("button",{type:"button",className:XC,onClick:E,"data-url":w.url,...I}),w.suffix&&w.suffix]},b)}return n?i.jsx(ee.span,{...I},b):s===!0||C==="latexAsHtml"?i.jsx("span",{...I},b):i.jsx(d.Fragment,{children:x},b)})})}function tee({word:e,url:t,testForUrl:n}){return t?{url:t,word:e}:n?xP(e):{word:e}}function so(e){var t,n;return(n=(t=Z.instance().config().styleOverrides)==null?void 0:t.typography)==null?void 0:n[e]}function jl(e){var t,n;return(n=(t=Z.instance().config().styleOverrides)==null?void 0:t.padding)==null?void 0:n[e]}function nee(e){const{shouldAnimate:t,items:n,textSize:s}=e;return i.jsx("h1",{className:F(s??so("h1")??"text-2xl-medium","[&:not(:first-child)]:pt-6"),children:i.jsx(lo,{shouldAnimate:t,items:n})})}function see(e){const{shouldAnimate:t,items:n,textSize:s}=e;return i.jsx("h2",{className:F(s??so("h2")??"text-xl-medium","[&:not(:first-child)]:pt-3.5","pb-1"),children:i.jsx(lo,{shouldAnimate:t,items:n})})}function oee(e){const{shouldAnimate:t,items:n,textSize:s}=e;return i.jsx("h3",{className:F(s??so("h3")??"text-lg-medium","pb-1","[&:not(:first-child)]:pt-3.5"),children:i.jsx(lo,{shouldAnimate:t,items:n})})}function aee(e){const{shouldAnimate:t,items:n,textSize:s}=e;return i.jsx("h4",{className:F(s??so("h4")??"text-md-medium"),children:i.jsx(lo,{shouldAnimate:t,items:n})})}function ree(e){const{shouldAnimate:t,items:n,textSize:s}=e;return i.jsx("h5",{className:F(s??so("h5")??"text-base-medium"),children:i.jsx(lo,{shouldAnimate:t,items:n})})}function iee(e){const{shouldAnimate:t,items:n,textSize:s}=e;return i.jsx("h6",{className:F(s??so("h6")??"text-base"),children:i.jsx(lo,{shouldAnimate:t,items:n})})}const cee=[nee,see,oee,aee,ree,iee];function lee(e){const{shouldAnimate:t,items:n,level:s,textSize:o}=e,r=cee[s-1];return r?i.jsx(r,{shouldAnimate:t,items:n,textSize:o}):null}const uee=Go(),ex="relative pb-6 w-full after:border-b after:border-stroke-300 after:w-full after:absolute after:mt-3";function dee(e){const{delay:t,shouldAnimate:n}=e;return n?i.jsx(ee.div,{className:ex,initial:"start",animate:"end",variants:uee,custom:t}):i.jsx("div",{className:ex})}const mee=Go();function pee(e){const{content:t,shouldAnimate:n,delay:s,dangerouslyUseHtml:o}=e;return i.jsx(ee.div,{initial:n?"start":"end",animate:"end",custom:s,variants:mee,children:i.jsx("div",{className:"horizontal-scrollbar overflow-x-auto whitespace-pre pb-3 pt-4 text-center",children:i.jsx(lo,{items:t,shouldAnimate:n,dangerouslyUseHtml:o})})})}const tx="relative list-outside marker:text-foreground-750 dark:marker:text-foreground-600 flex flex-col",fee=Go();function hee(e){const{items:t,ordered:n,start:s,shouldAnimate:o,BlockRenderer:r}=e,c=t.map(({items:l,delay:u},m)=>i.jsx(ee.li,{initial:o?"start":"end",animate:"end",variants:fee,custom:u,className:"ps-2",children:i.jsx(r,{blocks:l,shouldAnimate:o})},m));return n?i.jsx("ol",{start:s,className:F(tx,"ms-5 marker:normal-nums marker:text-sm-strong"),children:c}):i.jsx("ul",{className:F(tx,"ms-4 px-1"),children:c})}const g4={shouldCollapseCode:!1},b4=d.createContext(g4);function gee(e){const{children:t,config:n={}}=e,s=d.useMemo(()=>({...g4,...n}),[n]);return i.jsx(b4.Provider,{value:s,children:t})}function bee(){return d.useContext(b4)}function vee(e){const{items:t,shouldAnimate:n,mode:s}=e;return i.jsx("p",{children:i.jsx("span",{className:F("font-ligatures-none","whitespace-pre-wrap",so("aiMessageDefault")),children:i.jsx(lo,{items:t,shouldAnimate:n,mode:s})})})}const yee=Go();function Cee(e){const{columns:t,data:n,shouldAnimate:s}=e;return i.jsxs("div",{className:"relative max-w-full",children:[i.jsx("div",{className:"my-6 max-w-full overflow-x-auto rounded-lg bg-white/25 dark:bg-black/25",children:i.jsxs("table",{className:"t-table",style:{borderSpacing:0},children:[i.jsx("thead",{children:i.jsx("tr",{children:t.map((o,r)=>i.jsx(nx,{type:"head",items:o,shouldAnimate:s},r))})}),i.jsx("tbody",{children:n.map((o,r)=>i.jsx("tr",{children:o.map((c,l)=>i.jsx(nx,{type:"data",items:c,shouldAnimate:s},l))},r))})]})}),i.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-lg border border-stroke-300 dark:border-stroke-450"})]})}function nx(e){var r;const{type:t,items:n,shouldAnimate:s}=e,o=t==="head"?ee.th:ee.td;return i.jsx(o,{variants:yee,initial:s?"start":"end",animate:"end",custom:((r=n[0])==null?void 0:r.delay)??0,children:i.jsx(lo,{shouldAnimate:s,items:n})})}const xee=d.lazy(()=>P(()=>import("./code-Ct2CAsoH.js"),__vite__mapDeps([354,0,1])));function Ol(e){const{blocks:t,shouldAnimate:n,codeAnalytics:s,mode:o,headingTextSize:r}=e,{shouldCollapseCode:c}=bee();return i.jsx(i.Fragment,{children:t.map((l,u)=>{const m=`${l.type}-${u}`;switch(l.type){case"paragraph":return i.jsx(vee,{items:l.items,shouldAnimate:n,mode:o},m);case"list":return i.jsx(hee,{ordered:l.ordered,start:l.start,items:l.items,BlockRenderer:Ol,shouldAnimate:n},m);case"heading":return i.jsx(lee,{items:l.items,level:l.level,shouldAnimate:n,textSize:r},m);case"code":return i.jsx(xee,{content:l.content,original:l.original,delay:l.delay,shouldAnimate:n,language:l.language,dangerouslyUseHtml:l.dangerouslyUseHtml,shouldCollapse:c,analytics:s},m);case"latex":return i.jsx(pee,{content:l.content,delay:l.delay,shouldAnimate:n,dangerouslyUseHtml:l.dangerouslyUseHtml},m);case"table":return i.jsx(Cee,{columns:l.columns,data:l.data,shouldAnimate:n},m);case"blockquote":return i.jsx(HX,{items:l.items,delay:l.delay,shouldAnimate:n,BlockRenderer:Ol},m);case"hr":return i.jsx(dee,{delay:l.delay,shouldAnimate:n},m);default:return null}})})}let hi=null;async function See(e){return hi||(hi=(await P(async()=>{const{default:t}=await import("./katex-CfZphoad.js");return{default:t}},[])).default,e==null||e(),hi)}function v4(e,t,n){return hi?hi.renderToString(e,{output:"mathml",displayMode:t,throwOnError:!1}):(See(n),e)}var Wa={},Uc={},Ga={},sx;function y4(){if(sx)return Ga;sx=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.Node=Ga.NodeType=void 0;var e;(function(r){r[r.element=1]="element",r[r.text=3]="text"})(e||(Ga.NodeType=e={}));let t=class{constructor({nodeType:c,namespace:l,selfCloseTag:u,text:m,nodeName:p,childNodes:f,parentNode:h,attributes:g}){this.namespace=l||null,this.nodeType=c,this.isSelfCloseTag=!!u,this.text=m||null,this.nodeName=c===e.element?p:"#text",this.childNodes=f||[],this.parentNode=h,this.attributes=g||[]}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get innerHTML(){return this.childNodes.reduce((c,l)=>c+(l.nodeType===e.text?l.text:l.outerHTML),"")}get outerHTML(){if(this.nodeType===e.text)return this.textContent;const c=o(this.attributes),l=`<${this.nodeName}${c.length?" ":""}${c}${this.isSelfCloseTag?"/":""}>`;if(this.isSelfCloseTag)return l;const u=this.childNodes.map(p=>p.outerHTML).join(""),m=`</${this.nodeName}>`;return[l,u,m].join("")}get textContent(){return this.nodeType===e.text?this.text:this.childNodes.map(c=>c.textContent).join("").replace(/\x20+/g," ")}getAttribute(c){const l=this.attributes.find(u=>u.name===c);return l?l.value:null}getElementsByTagName(c){return n(this,l=>l.nodeName.toUpperCase()===c.toUpperCase())}getElementsByClassName(c){const l=new RegExp(`^(.*?\\s)?${c}(\\s.*?)?$`);return n(this,u=>!!(u.attributes.length&&l.test(u.getAttribute("class")||"")))}getElementsByName(c){return n(this,l=>!!(l.attributes.length&&l.getAttribute("name")===c))}getElementById(c){return s(this,l=>!!(l.attributes.length&&l.getAttribute("id")===c))}};Ga.Node=t,t.ELEMENT_NODE=e.element,t.TEXT_NODE=e.text;function n(r,c){return r.nodeType===e.text?[]:r.childNodes.reduce((l,u)=>u.nodeType!==e.text&&c(u)?[...l,u,...n(u,c)]:[...l,...n(u,c)],[])}function s(r,c){for(let l=0,u=r.childNodes.length;l<u;l++){const m=r.childNodes[l];if(c(m))return m;const p=s(m,c);if(p)return p}return null}function o(r){return r.map(c=>c.name+(c.value?`="${c.value}"`:"")).join(" ")}return Ga}var Fc={},ox;function wee(){if(ox)return Fc;ox=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.NodeAttribute=void 0;let e=class{constructor({name:n,value:s}){this.name=n,this.value=s}};return Fc.NodeAttribute=e,Fc}var ax;function rx(){if(ax)return Uc;ax=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.Dom=void 0;const e=y4(),t=wee(),n=/(<\/?(?:[a-z][a-z0-9]*:)?[a-z][a-z0-9-_.]*?[a-z0-9]*\s*(?:\s+[a-z0-9-_:]+(?:=(?:(?:'[\s\S]*?')|(?:"[\s\S]*?")))?)*\s*\/?>)|([^<]|<(?![a-z/]))*/gi,s=/\s[a-z0-9-_:]+\b(\s*=\s*('|")[\s\S]*?\2)?/gi,o=/(\s[a-z0-9-_:]+\b\s*)(?:=(\s*('|")[\s\S]*?\3))?/gi,r=/^<[a-z]/,c=/\/>$/,l=/^<\//,u=/^[^<]/,m=/<\/?((?:([a-z][a-z0-9]*):)?(?:[a-z](?:[a-z0-9-_.]*[a-z0-9])?))/i,p=/^('|")|('|")$/g,f=/^(?:area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/i;let h=class{constructor(I){this.rawHTML=I}find(I,A){const E=g(this.rawHTML,I,A);return A?E[0]||null:E}getElementsByClassName(I){const A=new RegExp(`^(.*?\\s)?${I}(\\s.*?)?$`);return this.find(E=>!!(E.attributes.length&&A.test(E.getAttribute("class")||"")))}getElementsByTagName(I){return this.find(A=>A.nodeName.toUpperCase()===I.toUpperCase())}getElementById(I){return this.find(A=>A.getAttribute("id")===I,!0)}getElementsByName(I){return this.find(A=>A.getAttribute("name")===I)}getElementsByAttribute(I,A){return this.find(E=>E.getAttribute(I)===A)}};Uc.Dom=h;function g(w,I,A=!1){const E=y(w),R=[];for(const U of E)if(U&&I(U)&&(R.push(U),A))return R;return R}function*y(w){const I=x(w);let A=null;for(let E=0,R=I.length;E<R;E++){const U=I[E];A=v(U,A)||A,b(A,U)&&(yield A,A=A.parentNode)}for(;A;)yield A,A=A.parentNode}function b(w,I){if(!I)return!1;const A=l.test(I),[,E]=I.match(m)||[];return A&&w.nodeName===E||w.isSelfCloseTag||w.nodeType===e.NodeType.text}function x(w){return w.match(n)||[]}function v(w,I){const A=u.test(w),E=r.test(w);return A?T(w,I):E?S(w,I):null}function S(w,I){var A;const[,E,R]=w.match(m)||[],U=c.test(w)||f.test(E),K=C(w),H=new e.Node({nodeType:e.NodeType.element,nodeName:E,namespace:R,attributes:K,childNodes:[],parentNode:I,selfCloseTag:U});return(A=I==null?void 0:I.childNodes)===null||A===void 0||A.push(H),H}function C(w){return(w.match(s)||[]).map(I=>{o.lastIndex=0;const A=o.exec(I)||[],[,E="",R=""]=A;return new t.NodeAttribute({name:E.trim(),value:R.trim().replace(p,"")})})}function T(w,I){var A;const E=new e.Node({nodeType:e.NodeType.text,nodeName:"#text",text:w,parentNode:I});return(A=I==null?void 0:I.childNodes)===null||A===void 0||A.push(E),E}return Uc}var ix;function Iee(){return ix||(ix=1,function(e){var t=Wa&&Wa.__createBinding||(Object.create?function(r,c,l,u){u===void 0&&(u=l);var m=Object.getOwnPropertyDescriptor(c,l);(!m||("get"in m?!c.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return c[l]}}),Object.defineProperty(r,u,m)}:function(r,c,l,u){u===void 0&&(u=l),r[u]=c[l]}),n=Wa&&Wa.__exportStar||function(r,c){for(var l in r)l!=="default"&&!Object.prototype.hasOwnProperty.call(c,l)&&t(c,r,l)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseFromString=void 0;const s=rx();function o(r){return new s.Dom(r)}e.parseFromString=o,n(rx(),e),n(y4(),e)}(Wa)),Wa}var cx=Iee();function Gb(e){const t=[];let n="",s=!1;for(const o of e)o===" "||o===`
`?s=!0:s&&(t.push(n),n="",s=!1),n+=o;return n.length>0&&t.push(n),t}function Tee(e){const n=cx.parseFromString(`<html>${e}</html>`).getElementsByTagName("html")[0];let s=[];for(const o of n.childNodes)o.nodeType===cx.NodeType.text?o.textContent&&(s=s.concat(Gb(o.textContent))):s.push(o.outerHTML);return s}function Eee(e){return e===" "||e===`
`||e==="	"}function C4(e,t,n={}){if(e.length<=t)return e;function s(l){const u=l.trim();return n.ellipsis?`${u}...`:u}const o=e.indexOf(`
`,0);if(o>=0&&o<t){const l=e.slice(0,o);return s(l)}let r=t;for(;r>0;){const l=e[r];if(l&&!Eee(l))r-=1;else break}let c=e.slice(0,t);return r>0&&(c=e.slice(0,r)),s(c)}let $s=null;function x4(e){return $s||(P(()=>import("./core-DtWfXB6c.js"),__vite__mapDeps([355,1])).then(t=>t.default).then(t=>{$s=t,e==null||e()}),null)}async function Aee(e){const[{ALIAS_TO_SUPPORTED_LANGUAGE:t},{loadLanguageModule:n}]=await Promise.all([P(()=>Promise.resolve().then(()=>rQ),void 0),P(()=>import("./language-loader-Czy6Ca_Y.js"),__vite__mapDeps([356,0,1]))]),s=t.get(e);if(!s)return!1;const o=await n(s);return o?$s?($s.registerLanguage(e,o),!0):(x4(()=>{$s==null||$s.registerLanguage(e,o)}),!1):!1}const _ee={jsx:["xml"],tsx:["xml"]};async function kee(e){const t=e.map(async s=>$s?$s.getLanguage(s)?!1:Aee(s):!1);return(await Promise.allSettled(t)).some(s=>s.status==="fulfilled"&&s.value)}async function Nee(e){const t=_ee[e]??[];return kee([...t,e])}const ii=.006;function lx(e){return{title:e.props.title,index:e.props.index,url:e.props.url,publisher:e.props.publisher,snippet:e.props.snippet,iconUrl:e.props.iconUrl}}function Xr({items:e,delay:t,isHtml:n,forceRender:s}){var c,l,u;const o=[],r=ce("inline-citations");for(const m of e){if(m.type==="citation"){if(r&&o.length>0&&((c=o[o.length-1])==null?void 0:c.type)==="citation"){(l=o[o.length-1].subCitations)==null||l.push(lx(m));continue}const b=t.getValue();t.queueUpdate(ii),o.push({type:"citation",delay:b,...m.props,subCitations:r?[lx(m)]:[]});continue}if(m.type==="latex"){const b=v4(m.props.content,!1,s),x=t.getValue();t.queueUpdate(ii),o.push({type:"word",word:b,delay:x,format:"latexAsHtml"});continue}if(m.props.link){const b=m.props.text,{url:x}=m.props.link,v=t.getValue();t.queueUpdate(ii),o.push({type:"word",word:b,delay:v,url:x});continue}let p=null,f=null;if(m.props.annotations){for(const b of["italic","bold","strikethrough","code","sub","sup"])if(m.props.annotations[b]){const v={type:b,items:[]};(b==="code"||b==="sup"||b==="sub")&&(v.delay=t.getValue(),t.queueUpdate(ii)),f?(f.items.push(v),f=v):(p=v,f=v)}}const h=[],g=(u=m.props.annotations)==null?void 0:u.code;let y;n?y=Tee(m.props.text):y=Gb(m.props.text);for(let b=0;b<y.length;b+=1)h.push({type:"word",word:y[b],delay:t.getValue(),format:g?"code":void 0}),t.queueUpdate(ii);f&&p?(f.items.push(...h),o.push(p)):o.push(...h)}return o}function Dl(e,t,n){const s=[];for(const o of e)switch(o.type){case"paragraph":{s.push({type:"paragraph",items:Xr({items:o.props.items,delay:t,forceRender:n})});continue}case"list":{s.push({type:"list",ordered:o.props.ordered,start:o.props.start,items:o.props.items.map(r=>({delay:t.getValue(),items:Dl(r,t,n)}))});continue}case"heading":{s.push({type:"heading",level:o.props.level,items:Xr({items:o.props.items,delay:t})});continue}case"hr":{s.push({type:"hr",delay:t.getValue()}),t.queueUpdate(ii);continue}case"code":{const{language:r,content:c}=o.props;if(c.type!=="text")continue;let l=c.props.text,u=!1;if(r){const p=x4(n);if(Nee(r).then(f=>{f&&n()}),p!=null&&p.getLanguage(r)){const{value:f}=p.highlight(c.props.text,{language:r});f&&(l=f,u=!0)}}const m={...c,props:{...c.props,text:l}};s.push({type:"code",content:Xr({items:[m],delay:t,isHtml:u}),original:c.props.text,language:r,delay:t.getValue(),dangerouslyUseHtml:u});continue}case"latex":{const{content:r}=o.props;if(r.type!=="text")continue;r.props.text=v4(r.props.text,!0,n),s.push({type:"latex",content:Xr({items:[r],isHtml:!0,delay:t}),delay:t.getValue(),dangerouslyUseHtml:!0});continue}case"table":{s.push({type:"table",columns:o.props.columns.map(r=>Xr({items:r,delay:t})),data:o.props.data.map(r=>r.map(c=>Xr({items:c,delay:t})))});continue}case"blockquote":{s.push({type:"blockquote",delay:t.getValue(),items:Dl(o.props.items,t,n)});continue}default:{console.log(`Unhandled block type: ${o.type}`);continue}}return s}const Jt={SingleDollar:"SingleDollar",DoubleDollar:"DoubleDollar",Bracket:"Bracket",Inline:"Inline"},qn={[Jt.SingleDollar]:{start:"$",end:"$"},[Jt.DoubleDollar]:{start:"$$",end:"$$"},[Jt.Bracket]:{start:"\\[",end:"\\]"},[Jt.Inline]:{start:"\\(",end:"\\)"}};function Mee(e){function t(s,o){const r=s.pos,c=s.posMax;let l=r,u=null;if(s.src.charAt(l)===qn[Jt.SingleDollar].start&&!/[0-9a-zA-Z\\]/.test(s.src.charAt(l-1))&&!/[ \n$]/.test(s.src.charAt(l+1)))u=Jt.SingleDollar;else if(s.src.charAt(l)===qn[Jt.Inline].start[0]&&s.src.charAt(l+1)===qn[Jt.Inline].start[1])u=Jt.Inline;else return!1;l+=qn[u].start.length;const m=s.src.slice(r,l);if(m.length>2)return!1;const p=l;let f=0;for(;l<c;){const h=s.src.charAt(l);let g=!1;if(u===Jt.SingleDollar?g=h===qn[Jt.SingleDollar].end&&s.src.charAt(l-1)!==" "&&s.src.charAt(l-1)!=="\\"&&!/[0-9a-zA-Z]/.test(s.src.charAt(l+1)):g=h===qn[Jt.Inline].end[0]&&s.src.charAt(l+1)===qn[Jt.Inline].end[1],h==="{"&&(l===0||s.src.charAt(l-1)!=="\\"))f+=1;else if(h==="}"&&(l===0||s.src.charAt(l-1)!=="\\")){if(f-=1,f<0)return!1}else if(g&&f===0){const y=l,b=l+qn[u].end.length;if(b-y===m.length){if(!o){const x=s.src.slice(p,y).replace(/[ \n]+/g," ").trim();s.push({type:"latex",content:x,block:!1,level:s.level})}return s.pos=b,!0}}l+=1}return o||(s.pending+=m),s.pos+=m.length,!0}function n(s,o,r,c){const l=s.tShift[o],u=s.bMarks[o]+l;let m=s.src.slice(u,s.eMarks[o]),p=null;if(m.startsWith(qn[Jt.DoubleDollar].start)?p=qn[Jt.DoubleDollar]:m.startsWith(qn[Jt.Bracket].start)&&(p=qn[Jt.Bracket]),!p)return!1;let f=o,h=!1;for(;f<=r;){const y=s.tShift[f],b=s.bMarks[f]+y;if(m=s.src.slice(b,s.eMarks[f]),m.endsWith(p.end)&&(f>o||m!==p.end)){h=!0;break}f+=1}if(!h)return!1;if(c)return!0;const g=s.src.slice(u+p.start.length,s.eMarks[f]-p.end.length);return s.tokens.push({type:"latex_block",content:g.trim(),lines:[o,f],level:s.level}),s.line=f+1,!0}e.inline.ruler.push("latex",t,{}),e.block.ruler.after("fences","latex_block",n,{})}function Ree(e){return e.replaceAll(/(\n\n\$\$.*?\$\$) *(\n\n)/g,"$1$2")}function Pee(e){return[Lee,Zt("kill-post-process-latex-double-dollar")?null:Ree].filter(n=>n!==null).reduce((n,s)=>s(n),e)}const Qf="\\[",ux="\\]";function Lee(e){return e.includes(Qf)?e.replaceAll(Qf,`

${Qf}`).replaceAll(ux,`${ux}

`):e}const ku=new T9({breaks:!0});ku.use(Mee);ku.inline.ruler.enable(["text","newline","emphasis","links","backticks","sup","sub","latex","del"],!0);ku.block.ruler.enable(["list","paragraph","heading","hr","fences","table","blockquote","latex_block"],!0);ku.core.ruler.enable(["block","inline","references"],!0);function jee(e){const[t="",...n]=e.replace(Iu,"").split(vm);return{index:t,title:n.join(vm)}}function S4(e,t={}){const n=[];let s=null,o=!1,r=!1,c=!1;for(const l of e)switch(l.type){case"text":case"sup":case"sub":if("content"in l&&l.content){const u={},m=l.content.startsWith(Iu)?{type:"citation",props:{index:"",title:"",url:"",iconUrl:null,publisher:null,snippet:null}}:{type:"text",props:{text:l.content}};if(m.type==="text"&&(s&&(m.props.link=s),o&&(u.bold=!0),r&&(u.italic=!0),c&&(u.strikethrough=!0),l.type==="text"&&(m.props.text=m.props.text.replaceAll("\\$","$")),l.type==="sup"&&(u.sup=!0),l.type==="sub"&&(u.sub=!0),Object.keys(u).length>0&&(m.props.annotations=u)),m.type==="citation"&&s){const{citations:p}=t,{index:f,title:h}=jee(l.content),g=p==null?void 0:p.find(y=>y.index===f);m.props={index:f,title:(g==null?void 0:g.title)??h,url:s.url,iconUrl:(g==null?void 0:g.iconUrl)??null,publisher:(g==null?void 0:g.publisher)??null,snippet:(g==null?void 0:g.snippet)??null}}n.push(m)}break;case"softbreak":case"hardbreak":n.push({type:"text",props:{text:`
`}});break;case"code":"content"in l&&n.push({type:"text",props:{text:l.content,annotations:{code:!0}}});break;case"latex":"content"in l&&n.push({type:"latex",props:{content:l.content}});break;case"strong_open":o=!0;break;case"strong_close":o=!1;break;case"em_open":r=!0;break;case"em_close":r=!1;break;case"del_open":c=!0;break;case"del_close":c=!1;break;case"link_open":s="href"in l?{url:ha(l.href)}:null;break;case"link_close":s=null;break}return n}function sd(e,t){return e!==void 0&&e.type==="inline"&&"children"in e?S4(Array.isArray(e.children)?e.children:[],t):null}function Oee(e,t){let n=0;function s(){var c;let r=e[n];if(!r)return null;if(r.type==="hr")return n+=1,r=e[n],{type:"hr"};if(r.type==="latex_block")return n+=1,"content"in r?{type:"latex",props:{content:{type:"text",props:{text:r.content}}}}:null;if(r.type==="paragraph_open"){n+=1,r=e[n],n+=1;const l=sd(r,t);return l?{type:"paragraph",props:{items:l}}:null}if(r.type==="blockquote_open"){const l={type:"blockquote",props:{items:[]}};for(n+=1,r=e[n];(r==null?void 0:r.type)!=="blockquote_close";){const u=s();u&&"type"in u&&l.props.items.push(u),r=e[n]}return n+=1,l}if(r.type==="ordered_list_open"||r.type==="bullet_list_open"){const l={type:"list",props:{items:[],ordered:r.type==="ordered_list_open"}};"order"in r&&(l.props.start=r.order);const u=r.type==="ordered_list_open"?"ordered_list_close":"bullet_list_close";for(n+=1,r=e[n];(r==null?void 0:r.type)!==u;){const m=s(),p=[];if(m&&Array.isArray(m)){for(const f of m)(f.type==="paragraph"||f.type==="list"||f.type==="code"||f.type==="heading")&&p.push(f);l.props.items.push(p)}r=e[n]}return n+=1,l}if(r.type==="list_item_open"){const l=[];for(n+=1,r=e[n];(r==null?void 0:r.type)!=="list_item_close";){const u=s();if(u)for(const m of[u].flat())(m.type==="paragraph"||m.type==="list"||m.type==="code"||m.type==="heading")&&l.push(m);r=e[n]}return n+=1,l}if(r.type==="heading_open"){const l="hLevel"in r?r.hLevel:1;n+=1,r=e[n],n+=1;const u=sd(r,t);return u?{type:"heading",props:{level:l,items:u}}:null}if(r.type==="fence"&&"content"in r){const l={type:"code",props:{content:{type:"text",props:{text:cQ(r.content)}},language:"params"in r?r.params:void 0}};return n+=1,l}if(r.type==="table_open"){const l=[],u=[];for(;(r==null?void 0:r.type)!=="table_close";){if((r==null?void 0:r.type)==="th_open"){n+=1,r=e[n];const m=sd(r,t);m&&l.push(m)}if((r==null?void 0:r.type)==="tr_open"&&!r.lines&&u.push([]),(r==null?void 0:r.type)==="td_open"){n+=1,r=e[n];const m=sd(r,t);m&&((c=u[u.length-1])==null||c.push(m))}n+=1,r=e[n]}return{type:"table",props:{columns:l,data:u}}}return r.type==="inline"&&"children"in r?(n+=1,S4(r.children??[])):(n+=1,null)}const o=[];for(;n<e.length;){const r=s();r&&!Array.isArray(r)&&o.push(r)}return o}function $b(e,t={}){const n=ku.parse(Pee(e),{});return Oee(n,t)}const Dee={getValue:()=>0,queueUpdate:()=>{}};function Uee(){}function Fee(e){const{text:t,codeAnalytics:n,excludeBlockTypes:s,headingTextSize:o}=e,r=$b(t).filter(l=>!(s!=null&&s.includes(l.type))),c=Dl(r,Dee,Uee);return i.jsx(Ol,{blocks:c,shouldAnimate:!1,codeAnalytics:n,headingTextSize:o})}function w4(e){const{artifact:t}=e;switch(t.type){case"code":{const{language:n,content:s}=t,o=`\`\`\`${n}
${s}
\`\`\``,r={click:{source:"copyCodeButton",scenario:"copyCode"},impression:{element:"code",scenario:"renderArtifact"}};return i.jsx(Fee,{text:o,codeAnalytics:r})}case"file":{const{contentType:n,name:s,url:o}=t;return i.jsx(BX,{name:s,contentType:n,url:o})}default:return null}}function Bee(e){const{activities:t}=e;return i.jsx("div",{className:"t-custom-scrollbar flex flex-col gap-4 overflow-y-auto",children:t.map((n,s)=>i.jsxs("div",{className:"flex flex-col gap-4 pt-3",children:[i.jsx("h3",{children:n.title}),n.artifacts.map((o,r)=>i.jsx(w4,{artifact:o},r))]},s))})}const Vee=k(void 0);function Hee(){const[e,t]=Ee(Vee),n=!!e,s=()=>{t(void 0)};return!e||e.length===0?null:i.jsx(Es,{className:"w-full max-w-[606px] p-4 pb-6",headerText:B("research.stepsDrawer.title"),isOpen:n,variant:"drawer",trapFocus:!0,onClose:s,children:i.jsx(Bee,{activities:e})})}function I4(e){const{onClose:t,children:n,className:s}=e,o=d.useRef(null);return no({onOutsideEvent:()=>{t(o)},elements:[o],invokeOnce:!1,includeScroll:!1,includeFocus:!1}),Rm.createPortal(i.jsx(jt,{mode:"sync",className:W("relative",Ke.modal),children:i.jsx("div",{className:"fixed inset-0 flex items-end justify-center bg-black/20",children:i.jsxs("div",{className:"flex max-h-[90%] w-full shrink-0 flex-col rounded-t-4xl border border-white/100 bg-stone-150 backdrop-blur-xl dark:border-white/5 dark:bg-midnight-800",children:[i.jsx("div",{className:"relative flex w-full items-center justify-center py-3",children:i.jsx("div",{className:"h-[6px] w-12 rounded-full bg-black/25 dark:bg-white/25"})}),i.jsx("div",{className:W("no-scrollbar w-full overflow-y-auto px-4 pb-4",s),ref:o,children:n})]})})}),document.body)}function un(e){const t=d.useRef(null),{isOpen:n,dialogName:s,headerText:o,headerIcon:r,headerTextClassName:c,fullBleed:l,children:u,onClose:m,className:p,bottomSheetClassName:f,closeButtonTestId:h,backdropOpacity:g="default",fadeInDuration:y=Fn.default,bottomSheetOnSmall:b,customScrollBar:x,"aria-labeledby":v}=e,S=d.useRef(null),{t:C}=V(),T=lt({breakpoint:"sm"}),w=d.useId(),I=b&&T,A=g==="none"?"backdrop:bg-transparent":"backdrop:bg-stone-850/30 dark:backdrop:bg-midnight-850/70",E=n&&!I&&m!==void 0;no({onOutsideEvent:E?m:()=>{},elements:E?[S]:[],includeScroll:!1,includeFocus:!1});const{modalAttributes:R}=up({trapFocus:!0,legacyTrapFocus:!0,alwaysFocusable:!0});if(d.useEffect(()=>{var U,K;n?(U=t.current)==null||U.showModal():(K=t.current)==null||K.close()},[n]),d.useEffect(()=>{const U=t.current;if(!U)return()=>{};const K=()=>{m==null||m()};return U.addEventListener("cancel",K),()=>{U.removeEventListener("cancel",K)}},[m]),I&&n){const U=!l&&o;return i.jsxs(I4,{onClose:m,className:f,children:[U&&i.jsx("h2",{id:w,className:"py-6 text-center text-foreground-850 text-xl",children:o}),u]})}return i.jsx(ee.dialog,{className:W("fixed inset-0 m-auto rounded-4xl border border-white/10 bg-background-150 text-foreground-800 shadow-xl dark:bg-background-250",A,x&&"t-custom-scrollbar"),animate:n?"animate":"initial",initial:"initial",exit:"exit",variants:{initial:Ce,animate:Be},transition:{duration:y,ease:"easeInOut"},ref:t,role:"dialog","aria-modal":"true","aria-labelledby":o?w:v,"aria-label":o?void 0:s,...n?R:{},children:n&&i.jsxs("div",{"data-modal-overlay":"true",className:W("flex min-h-[150px] flex-col gap-3",!l&&"p-6",p),ref:S,children:[i.jsx(u4,{}),!l&&i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o&&i.jsxs("div",{children:[r,i.jsx("h2",{id:w,className:W("text-foreground-800 text-md-strong",c),children:o})]}),m&&i.jsx($,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:C("common.closeText"),"aria-label":C("common.closeText"),onClick:m,testId:h,children:i.jsx(Yt,{className:"size-5"})})]}),u]})})}const zee="XF86Back",Wve="XF86BTVoice",Wee=461;function T4(e){return e.key===zee||e.keyCode===Wee}function Gee(e){const{className:t,children:n}=e;return i.jsx("span",{className:F("inline-block h-4 min-w-4 rounded-md bg-accent-200 px-1 pt-px text-center leading-4 text-foreground-800 text-3xs dark:bg-accent-200",t),children:n})}const $ee=d.lazy(()=>P(()=>import("./index-CpYs3caX.js").then(e=>e.i),__vite__mapDeps([357,1,319,0]))),qee="focus-within:bg-neutral-50/5 before:pointer-events-none before:absolute before:inset-0 before:rounded-3xl before:border before:border-transparent focus-within:before:border-[1px] focus-within:before:border-[rgba(255,255,255,0.1)]";function Kee(){var p,f;const e=_($O),[t,n]=Ee(bI),s=d.useContext(fc),o=_(Ae),r=P1(),c=((p=Z.instance().config().composer)==null?void 0:p.largeScreen)===!0&&((f=Z.instance().config().composer)==null?void 0:f.voiceOnly)===!0,l=()=>{n(null),Se({source:"citationOverflowModal",scenario:"close"})},{focusable:u}=yr({isFocusBoundary:!0});co(h=>{T4(h)&&(h.stopPropagation(),l())});const m=d.useMemo(()=>new Map((t??[]).map((h,g)=>[g,d.createRef()])),[t]);return i.jsx(un,{isOpen:e,onClose:c?void 0:l,headerText:`${t==null?void 0:t.length} ${B("chat.references")}`,className:F(c?"max-h-[40vh]":"max-h-[80vh]",c?"w-[480px]":"w-[440px] max-w-[80vw]","mx-4 px-2"),children:i.jsx(Vm.Provider,{value:u.focusKey??"",children:i.jsx("div",{className:F("flex flex-col gap-2 overflow-y-auto overflow-x-hidden pe-1.5",c?"no-scrollbar":"t-custom-scrollbar"),children:t==null?void 0:t.map((h,g)=>i.jsx(E4,{ref:m.get(g),index:g,citation:h,currentConversationId:o,messageId:s,isLargeScreenVoiceComposer:c,citationsModalData:t,rel:r,onClick:h.onClick},g))})})})}const E4=d.forwardRef(({index:e,citation:t,currentConversationId:n,messageId:s,citationsModalData:o,isLargeScreenVoiceComposer:r=!1,rel:c,onClick:l},u)=>{const{title:m,url:p,publisher:f,shouldTruncate:h}=t,{refCallback:g,focusable:y}=yr({autoRestoreFocus:!0,forceFocus:!0,scrollIntoViewOnFocus:!0},u);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:F(r&&qee,"group relative flex flex-row items-center gap-2 rounded-3xl p-2"),children:[i.jsxs("a",{rel:c,ref:g,className:F("flex flex-1 flex-col items-start gap-2 py-1",h&&"max-w-full"),"data-spatial-navigation-autofocus":!0,href:p,"data-spatial-focus-key":y.focusKey,target:"_blank",onClick:b=>{if(l){b.preventDefault(),l();return}if(r){b.preventDefault();return}Se({source:"citationModalLink",customData:JSON.stringify({destination:Cs(p),conversationId:n,messageId:s})})},children:[i.jsxs("div",{className:F("flex items-center gap-1",h&&"max-w-full"),children:[i.jsx(Gee,{children:t.index}),i.jsx("div",{className:F("text-foreground-550 text-xs",h&&"max-w-full truncate"),title:f??xs(p),children:f??xs(p)})]}),i.jsx("div",{className:F(h&&"max-w-full truncate"),title:m,children:m}),i.jsx("div",{className:F("text-foreground-550 text-xs",h&&"max-w-full truncate"),title:xs(p),children:xs(p)})]}),r&&i.jsx(d.Suspense,{fallback:i.jsx("span",{}),children:i.jsx("div",{className:"flex size-28 items-center justify-center rounded-2xl bg-white opacity-0 group-focus-within:opacity-100",children:i.jsx($ee,{value:p,size:86})})})]}),e<o.length-1&&i.jsx(As,{horizontalMargin:!1,verticalMargin:!1,className:"my-4"})]})});E4.displayName="CitationItem";const Zee=d.lazy(()=>P(()=>Promise.resolve().then(()=>ab),void 0));async function Yee(e){await cn({path:e,args:{options:{method:"DELETE"}}})}function Qee(){const{t:e}=V(),t=z(vI),{trigger:n,isMutating:s}=cb("/conversations/history",Yee),o=async()=>{await n(),t(null)},r=()=>{t(null)};return i.jsxs(un,{isOpen:!0,onClose:r,headerText:e("settings.clearHistory.header"),className:"min-h-[328px] w-full max-w-[400px]",children:[i.jsx("p",{className:"text-start",children:e("settings.clearHistory.description")}),i.jsx($,{title:e("settings.clearHistory.confirm"),color:"default",size:"56-xl",variant:"rect",className:"mt-3 w-full text-system-red-550 dark:text-system-red-350",onClick:o,disabled:s,children:s?i.jsx(Zee,{type:"spinnerThemed",className:"size-6"}):e("settings.clearHistory.confirm")}),i.jsx($,{title:e("common.cancel"),color:"strong",size:"56-xl",variant:"rect",className:"mt-3 w-full",onClick:r,children:e("common.cancel")})]})}function Jf({Icon:e,title:t,description:n}){return i.jsxs("div",{className:"flex items-start gap-3 rounded-lg px-4 py-2",children:[i.jsx("div",{className:"shrink-0",children:i.jsx(e,{className:"size-5 text-accent-800"})}),i.jsxs("div",{className:"flex flex-col ps-1",children:[i.jsx("h3",{className:"text-foreground-800 text-sm-strong",children:t}),i.jsx("p",{className:"pt-1 text-foreground-600 text-sm",children:n})]})]})}const Gve=(e,t,n)=>{M.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionManagementImpression",eventInfo_connectorPlatformConnectorType:e,eventInfo_connectorPlatformConnectionStatus:t,eventInfo_connectorPlatformConnectionStartSource:n}})},$ve=(e,t,n,s)=>{M.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionManagementAction",eventInfo_connectorPlatformConnectorType:e,eventInfo_connectorPlatformConnectionStatus:t,eventInfo_connectorPlatformConnectionStartSource:n,eventInfo_connectorPlatformConnectionActionType:s}})},Jee=(e,t)=>{M.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionStartPageImpression",eventInfo_connectorPlatformConnectionStartSource:t,eventInfo_connectorPlatformConnectorType:e}})},dx=(e,t,n)=>{M.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionStartPageAction",eventInfo_connectorPlatformConnectionStartSource:t,eventInfo_connectorPlatformConnectorType:e,eventInfo_connectorPlatformConnectionActionType:n}})},qve=(e,t)=>{M.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionSetupFailureEvent",eventInfo_connectorPlatformConnectorType:e,eventInfo_connectorPlatformConnectorErrorType:t??"",eventInfo_source:"Component"}})},Kve=e=>{M.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionSetupSuccessEvent",eventInfo_connectorPlatformConnectorType:e,eventInfo_source:"Component"}})},qb=e=>d.createElement("svg",{width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M11 3H7C4.79086 3 3 4.79086 3 7V17C3 19.2091 4.79086 21 7 21H17C19.2091 21 21 19.2091 21 17V13",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),d.createElement("path",{d:"M12 12L21 3",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),d.createElement("path",{d:"M21 9V3H15",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),Zve=Object.freeze(Object.defineProperty({__proto__:null,default:qb},Symbol.toStringTag,{value:"Module"})),A4=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",...e},d.createElement("path",{d:"M7.25 5a.75.75 0 0 1 .11 1.492l-.11.008H5a3.5 3.5 0 0 0-.206 6.994L5 13.5h2.25a.75.75 0 0 1 .11 1.492L7.25 15H5a5 5 0 0 1-.25-9.994L5 5h2.25ZM15 5a5 5 0 0 1 .25 9.994L15 15h-2.25a.75.75 0 0 1-.11-1.492l.11-.008H15a3.5 3.5 0 0 0 .206-6.994L15 6.5h-2.25a.75.75 0 0 1-.11-1.492L12.75 5H15ZM5 9.25h10a.75.75 0 0 1 .102 1.493L15 10.75H5a.75.75 0 0 1-.102-1.493L5 9.25h10H5Z"})),Yve=Object.freeze(Object.defineProperty({__proto__:null,default:A4},Symbol.toStringTag,{value:"Module"})),_4=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",...e},d.createElement("path",{d:"M10 13C10.5523 13 11 12.5523 11 12C11 11.4477 10.5523 11 10 11C9.44771 11 9 11.4477 9 12C9 12.5523 9.44771 13 10 13ZM6 6H7V5C7 3.34315 8.34315 2 10 2C11.6569 2 13 3.34315 13 5V6H14C15.6569 6 17 7.34315 17 9V15C17 16.6569 15.6569 18 14 18H6C4.34315 18 3 16.6569 3 15V9C3 7.34315 4.34315 6 6 6ZM10 3C8.89543 3 8 3.89543 8 5V6H12V5C12 3.89543 11.1046 3 10 3ZM16 9C16 7.89543 15.1046 7 14 7H6C4.89543 7 4 7.89543 4 9V15C4 16.1046 4.89543 17 6 17H14C15.1046 17 16 16.1046 16 15V9Z",fill:"currentColor"})),Qve=Object.freeze(Object.defineProperty({__proto__:null,default:_4},Symbol.toStringTag,{value:"Module"})),k4=e=>d.createElement("svg",{viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("g",{id:"Shield Task"},d.createElement("path",{id:"Shape",d:"M10.8536 6.85355C11.0488 6.65829 11.0488 6.34171 10.8536 6.14645C10.6583 5.95118 10.3417 5.95118 10.1464 6.14645L7.5 8.79289L6.35355 7.64645C6.15829 7.45118 5.84171 7.45118 5.64645 7.64645C5.45118 7.84171 5.45118 8.15829 5.64645 8.35355L7.14645 9.85355C7.34171 10.0488 7.65829 10.0488 7.85355 9.85355L10.8536 6.85355ZM8.35464 2.14678C8.15946 1.95123 7.84268 1.95105 7.64728 2.14638C6.40416 3.38902 5.02923 4 3.5 4C3.22386 4 3 4.22386 3 4.5V7.50126C3 10.7196 4.64126 12.9075 7.84189 13.9743C7.94452 14.0086 8.05548 14.0086 8.15811 13.9743C11.3587 12.9075 13 10.7196 13 7.50126V4.5C13 4.22386 12.7761 4 12.5 4C10.9689 4 9.5947 3.38913 8.35464 2.14678ZM4 4.98118C5.47941 4.86879 6.81393 4.25491 8.00042 3.18917C9.18521 4.25528 10.5195 4.86895 12 4.98121V7.50126C12 8.9349 11.6373 10.0655 10.9787 10.9453C10.3414 11.7967 9.37047 12.4885 8 12.9715C6.62953 12.4885 5.65858 11.7967 5.02127 10.9453C4.36269 10.0655 4 8.9349 4 7.50126V4.98118Z"}))),Jve=Object.freeze(Object.defineProperty({__proto__:null,default:k4},Symbol.toStringTag,{value:"Module"})),N4=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",...e},d.createElement("path",{d:"M12.5 10C13.5625 10 14.539 9.63179 15.3089 9.01596L19.1464 12.8536C19.3417 13.0488 19.6583 13.0488 19.8536 12.8536C20.0488 12.6583 20.0488 12.3417 19.8536 12.1464L16.016 8.30885C16.6318 7.53901 17 6.56252 17 5.50002C17 3.01473 14.9853 1 12.5 1C10.0147 1 8 3.01473 8 5.50002C8 7.98531 10.0147 10 12.5 10ZM12.5 2C14.433 2 16 3.56701 16 5.50002C16 7.43302 14.433 9.00003 12.5 9.00003C10.567 9.00003 9 7.43302 9 5.50002C9 3.56701 10.567 2 12.5 2ZM12.5199 11H15.8787L16.8787 12H2.5C2.22386 12 2 11.7761 2 11.5C2 11.2239 2.22386 11 2.5 11H12.4801L12.5 11L12.5199 11ZM2.5 3H7.59971C7.43777 3.31679 7.30564 3.65136 7.20704 4H2.5C2.22386 4 2 3.77614 2 3.5C2 3.22386 2.22386 3 2.5 3ZM7.5997 8C7.43776 7.68321 7.30563 7.34864 7.20703 7H2.5C2.22386 7 2 7.22386 2 7.5C2 7.77614 2.22386 8 2.5 8H7.5997ZM2 15.5C2 15.2239 2.22386 15 2.5 15H17.5C17.7761 15 18 15.2239 18 15.5C18 15.7761 17.7761 16 17.5 16H2.5C2.22386 16 2 15.7761 2 15.5Z",fill:"currentColor"})),Xve=Object.freeze(Object.defineProperty({__proto__:null,default:N4},Symbol.toStringTag,{value:"Module"}));function Xee(){const{t:e}=V(),[t,n]=Ee(II),[s,o]=d.useState(null),r=et(),{type:c,title:l,IconComponent:u,visible:m,termsLink:p,startSource:f}=t??{},h=()=>{n({visible:!1})};return d.useEffect(()=>(t!=null&&t.visible&&c&&f&&(Jee(c,f),It("/connections",CW,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({redirectUrl:`${window.location.origin}/connector/callback?connectorType=${c}`,type:c})}}).then(g=>o(g.data.loginUrl))),()=>{o(null)}),[t==null?void 0:t.visible,c,f,r]),!c||!l||!u||!p||!m||!f?null:i.jsx(un,{isOpen:m,className:"sm:w-[496px]",children:i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"flex flex-col items-center justify-center gap-2.5 rounded-2xl border border-black/12 p-1",children:i.jsx(u,{className:"size-12 p-1"})}),i.jsx("div",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-neutral-900 contrast-more:bg-neutral-100 contrast-more:outline",children:i.jsx(A4,{className:"size-3 text-foreground-100 contrast-more:text-foreground-600"})})]}),i.jsx("h3",{className:"pt-4 text-center text-foreground-800 text-md sm:text-xl",children:e("connector.confirmModal.title",{title:l})}),i.jsxs("div",{className:"mt-6 flex flex-col rounded-3xl bg-black/5 py-3 sm:w-96",children:[i.jsx(Jf,{Icon:N4,title:e("connector.confirmModal.personalizedTitle"),description:e("connector.confirmModal.personalizedDescription",{title:l})}),i.jsx(As,{color:"accent",horizontalMargin:!1}),i.jsx(Jf,{Icon:_4,title:e("connector.confirmModal.anyAccountTitle"),description:e("connector.confirmModal.anyAccountDescription")}),i.jsx(As,{color:"accent",horizontalMargin:!1}),i.jsx(Jf,{Icon:k4,title:e("connector.confirmModal.control"),description:e("connector.confirmModal.controlDescription",{title:l})})]}),i.jsxs("div",{className:"mt-6 flex flex-col gap-2",children:[i.jsx($,{className:"h-14 w-full sm:w-96",color:"strong",size:"56-xl",title:e("connector.confirmModal.continue",{title:l}),disabled:!s,onClick:()=>{dx(c,f,"continue"),s&&(Zs("connectorConsentFlowStartUrl",r),oc(s))},children:s?i.jsxs("div",{className:"flex items-center gap-2",children:[e("connector.confirmModal.continue",{title:l}),i.jsx(qb,{className:"size-5"})]}):i.jsx($e,{className:"size-7"})}),i.jsx($,{className:"w-full sm:w-96",color:"subtle-bright",size:"56-xl",title:e("common.cancel"),onClick:()=>{h(),dx(c,f,"cancel")},children:e("common.cancel")}),i.jsx("div",{className:"my-3 flex flex-col items-center gap-2 text-center sm:w-96",children:i.jsx("p",{className:"text-foreground-600 text-2xs",children:i.jsx(en,{i18nKey:"connector.confirmModal.disclaimer",components:{Terms:i.jsx(ws,{href:p,title:e("connector.confirmModal.terms"),className:"underline text-2xs",children:e("connector.confirmModal.terms")})},values:{title:l}})})})]})]})})}const Kb=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M17.7545 14.0002C18.9966 14.0002 20.0034 15.007 20.0034 16.2491V16.8245C20.0034 17.7188 19.6838 18.5836 19.1023 19.263C17.5329 21.0965 15.1457 22.0013 12.0004 22.0013C8.8545 22.0013 6.46849 21.0962 4.90219 19.2619C4.32242 18.583 4.00391 17.7195 4.00391 16.8267V16.2491C4.00391 15.007 5.01076 14.0002 6.25278 14.0002H17.7545ZM17.7545 15.5002H6.25278C5.83919 15.5002 5.50391 15.8355 5.50391 16.2491V16.8267C5.50391 17.3624 5.69502 17.8805 6.04287 18.2878C7.29618 19.7555 9.26206 20.5013 12.0004 20.5013C14.7387 20.5013 16.7063 19.7555 17.9627 18.2876C18.3117 17.8799 18.5034 17.361 18.5034 16.8245V16.2491C18.5034 15.8355 18.1681 15.5002 17.7545 15.5002ZM12.0004 2.00488C14.7618 2.00488 17.0004 4.24346 17.0004 7.00488C17.0004 9.76631 14.7618 12.0049 12.0004 12.0049C9.23894 12.0049 7.00036 9.76631 7.00036 7.00488C7.00036 4.24346 9.23894 2.00488 12.0004 2.00488ZM12.0004 3.50488C10.0674 3.50488 8.50036 5.07189 8.50036 7.00488C8.50036 8.93788 10.0674 10.5049 12.0004 10.5049C13.9334 10.5049 15.5004 8.93788 15.5004 7.00488C15.5004 5.07189 13.9334 3.50488 12.0004 3.50488Z"})),eye=Object.freeze(Object.defineProperty({__proto__:null,default:Kb},Symbol.toStringTag,{value:"Module"})),Xf="relative size-full rounded-full aspect-square",mx="flex items-center justify-center uppercase",eh="after:absolute after:-inset-px after:rounded-full after:border-[0.5px] after:border-black/10 dark:after:border-white/20";function M4(e){const{firstName:t,imgSrc:n,nameSizeClass:s,altText:o}=e;return n?i.jsx("img",{className:F("overflow-hidden object-cover",Xf,eh),src:n,alt:o??B("common.profileImage")}):t?i.jsx("div",{className:F(Xf,mx,eh,s??"text-md"),children:i.jsx("div",{children:t[0]})}):i.jsx("div",{className:F(Xf,mx,eh),children:i.jsx(Kb,{className:"size-6 fill-foreground-800","alt-text":o??B("common.profileImage")})})}const px=5e3;function ete(){const e=D("aad-student"),t=_(zW),{t:n}=V(),[s,o]=d.useState(!1),r=e&&t&&!s,c=_(qw),l=_(Sr),u=e&&t===void 0&&c&&l,m=u&&!s;d.useEffect(()=>{if(u&&!s){const v=setTimeout(()=>{o(!0),CG(new Error(`Student status check timed out after ${px}ms`))},px);return()=>clearTimeout(v)}},[u,s]);const p=n(r?"entraRedirect.guestTitle":"entraRedirect.workTitle"),f=n(r?"entraRedirect.guestDescription":"entraRedirect.workDescription");return{isStudentEnabled:r,isLoadingEnabled:m,workTitle:p,workDescription:f,titleGapClass:r?"mb-6 sm:mb-10":"mb-8 sm:mb-14",eventInfoScenario:r?"Student":"Enterprise",getPageTitle:()=>n(r?"aadStudent.title":"entraRedirect.pageTitle"),getPageSubTitle:v=>r?n("aadStudent.subtitle",{email:v}):void 0,getWorkButtonText:v=>r?n("aadStudent.continueAsGuestButtonText"):n("entraRedirect.goToWorkButton",{redirectUrl:v})}}function tte(){var se;const e=_(qw),t=_(Sr),n=_(wt),[s,o]=d.useState(void 0),r=D("aad-login-removal"),c=Cr(),l=Ns(),{isStudentEnabled:u,isLoadingEnabled:m,workTitle:p,workDescription:f,titleGapClass:h,eventInfoScenario:g,getPageTitle:y,getPageSubTitle:b,getWorkButtonText:x}=ete(),v=d.useId(),S=!u&&(n==null?void 0:n.email);d.useEffect(()=>{e&&tn(Yd,JSON.stringify(e))},[e]);let C=!1;try{C=JSON.parse(Mt(Yd)??"false")}catch(ae){console.error("Failed to parse authentication status:",ae),C=!1}const T=e?t:!C&&!!((se=window.cwcRedirect)!=null&&se.cwcRedirectUrl),[w,I]=d.useState(T),[A,E]=d.useState(),{t:R}=V(),{login:U,logout:K}=Lr();d.useEffect(()=>{async function ae(){const fe=await mC();o(fe),r&&(n!=null&&n.email)&&hq()}ae()},[n,r]);const H=(ae,fe,re)=>ha(`${ae}?fromCode=cmcv2&redirectId=${fe}${re?`&login_hint=${re}`:""}`),te=async()=>{let ae=crypto.randomUUID().replace(/-/g,"").toUpperCase(),fe=mf,re="AadUnknown";t&&s?fe=H(mf,ae,s.username):window.cwcRedirect&&(fe=window.cwcRedirect.cwcRedirectUrl,ae=window.cwcRedirect.redirectId,re=window.cwcRedirect.chatEligibility),Z.instance().config().entraRedirectModalBehaviour==="new-tab"?ks(ha(fe)):oc(ha(fe)),M.trackEvent({name:"interaction",data:{eventName:"copilotEnterpriseRedirect",...A,eventInfo_traceId:ae,eventInfo_redirectUrl:fe,eventInfo_chatEligibility:re}})},oe=async()=>{M.trackEvent({name:"interaction",data:{eventName:"copilotStudentRedirectSignOut",...A}}),await K()},ne=async()=>{M.trackEvent({name:"interaction",data:{eventName:"copilotEnterpriseRedirectSwitchAccount",eventInfo_scenario:g,...A}}),I(!1),c?(await K(!1),await l({from:"/",to:"/login"})):await U({provider:"microsoft"})},ge=async()=>{M.trackEvent({name:"interaction",data:{eventName:e?"copilotEnterpriseRedirectSignOut":"copilotEnterpriseRedirectContinueSignedOut",...A}}),e?await K():I(!1)};if(d.useEffect(()=>{I(T),T&&(async()=>{var re;let fe={};if(t){const ke=await mC();fe={userAadId:(re=ke==null?void 0:ke.idTokenClaims)==null?void 0:re.oid,userAadTenantId:ke==null?void 0:ke.tenantId}}else window.cwcRedirect&&(fe={userAadId:window.cwcRedirect.userId,userAadTenantId:window.cwcRedirect.tenantId});M.trackEvent({name:"system",data:{eventName:"copilotEnterpriseRedirectImpression",eventInfo_redirectReason:t?"AAD":"CWC",eventInfo_scenario:g,...fe}}),E(fe)})().catch(console.error)},[t,T,g]),!w)return null;const me=!C&&window.cwcRedirect?new URL(window.cwcRedirect.cwcRedirectUrl).hostname:mf,be=b(n==null?void 0:n.email),we=()=>u?null:r?i.jsx("div",{className:"mt-8 sm:mt-12",children:i.jsx(en,{i18nKey:"entraRedirect.playAroundFirst",components:{entraContinue:i.jsx("button",{role:"link",type:"button",className:"underline",onClick:ge,children:R("entraRedirect.playAroundFirst")})}})}):i.jsx("div",{className:"mt-8 sm:mt-12",children:i.jsx(en,{i18nKey:e?"entraRedirect.signOut":"entraRedirect.continueSignedOut",components:{[e?"entraSignOut":"entraContinue"]:i.jsx("button",{type:"button",className:"underline",onClick:ge,children:R(e?"entraRedirect.signOut":"entraRedirect.continueSignedOut")})}})});return i.jsxs(un,{fadeInDuration:0,className:F("fixed inset-0",Ke.modal),isOpen:!0,headerText:v,children:[i.jsx(Or,{forceGradient:!0}),i.jsx("main",{className:"relative m-auto flex size-full max-w-chat flex-col items-center justify-center overflow-y-auto p-4 pb-8 pt-20 sm:py-4",children:m?i.jsx($e,{className:"size-8"}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mb-9",children:i.jsx(mc,{className:"size-12"})}),i.jsx("h1",{id:v,className:F("mb-8 w-full whitespace-pre-wrap break-words px-4 text-center text-3xl sm:mb-14",h),children:y()}),u&&be&&i.jsx("p",{className:"mb-10 w-full whitespace-pre-wrap break-words px-4 text-center text-base sm:mb-16",children:be}),i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 md:gap-16",children:[i.jsx(fx,{title:p,description:f,onClick:u?oe:te,children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{children:x(me)}),S&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"relative size-5",children:i.jsx(M4,{firstName:n.firstName??n.givenName??void 0,imgSrc:n.imgSrc,nameSizeClass:"text-xs"})}),i.jsx("p",{className:"text-xs",children:n.email})]})]})}),i.jsx(fx,{title:R("entraRedirect.personalTitle"),description:R("entraRedirect.personalDescription"),onClick:ne,children:i.jsx("p",{className:"text-xs",children:R("entraRedirect.switchToPersonalButton")})})]}),we()]})})]})}function fx({title:e,onClick:t,description:n,children:s}){return i.jsxs("div",{className:"flex flex-col justify-between rounded-4xl bg-white/70 p-4 dark:bg-midnight-700/70 md:p-6 md:pb-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"mb-2.5 text-lg",children:e}),i.jsx("p",{className:"mb-6 text-sm",children:n})]}),i.jsx($,{color:"default",variant:"rect",title:e,onClick:t,children:s})]})}const nte=d.lazy(()=>P(()=>import("./index-CpYs3caX.js").then(e=>e.i),__vite__mapDeps([357,1,319,0])));function ste(e){const{onClose:t,interceptedLink:n}=e,{t:s}=V(),o=d.useRef(null);return hu(o),co(r=>{(r.key==="Escape"||r.key==="Control")&&t()}),i.jsxs("div",{className:"flex w-[400px] max-w-[80vw] flex-col items-center p-4 text-center",children:[i.jsx("div",{className:"bg-white p-2",children:i.jsx(d.Suspense,{fallback:i.jsx("span",{}),children:i.jsx(nte,{value:n,size:96,"aria-label":s("composer.interceptedLink.qrcode_alt_text")})})}),i.jsx("h1",{className:"py-3 text-lg",children:s("composer.interceptedLink.title")}),i.jsx("p",{className:"w-full pb-7",children:i.jsx(en,{i18nKey:"composer.interceptedLink.description",components:{span:i.jsx("span",{className:"break-words underline"})},values:{link:n}})}),i.jsx($,{ref:o,onClick:t,title:"close",variant:"pill",size:"48-lg",className:"w-full",children:s("common.closeText")})]})}const R4=k(null);function Zb(){return _(sn)==="US"&&Z.instance().config().proSubscription.enabled}const P4="free";function ca(e){return e instanceof Error?{errorCode:e.toString(),errorDetails:e.message}:{errorCode:"unknown",errorDetails:String(e)}}function hc(e,t,n){const s={eventInfo_payflowEntryPoint:t.payflowEntryPoint,eventInfo_upsellReason:t.upsellReason,eventInfo_loginProvider:t.loginProvider,eventInfo_payflowType:"DIME",eventInfo_payflowInstanceId:t.payflowInstanceId,eventInfo_curatedSubscription:t.curatedSubscription,eventInfo_correlationId:t.correlationId,eventInfo_dimeMarket:t.dimeMarket,eventInfo_campaignId:t.campaignId};let o;switch(e){case"payflowEnter":o={eventName:"payflowEnter",...s,eventInfo_upsellEntryStyle:(n==null?void 0:n.eventInfo_upsellEntryStyle)||"Banner"};break;case"payflowLoginClick":o={eventName:"payflowLoginClick",...s};break;case"dimeCheckoutRendering":o={eventName:"dimeCheckoutRendering",...s,eventInfo_dimeExperienceId:(n==null?void 0:n.eventInfo_dimeExperienceId)??""};break;case"dimeCheckoutSuccess":o={eventName:"dimeCheckoutSuccess",...s,eventInfo_dimeExperienceId:(n==null?void 0:n.eventInfo_dimeExperienceId)??""};break;case"dimeCheckoutClosed":o={eventName:"dimeCheckoutClosed",...s,eventInfo_dimeExperienceId:(n==null?void 0:n.eventInfo_dimeExperienceId)??""};break;case"dimeCheckoutError":o={eventName:"dimeCheckoutError",eventInfo_errorCode:(n==null?void 0:n.eventInfo_errorCode)??"",eventInfo_errorDetails:(n==null?void 0:n.eventInfo_errorDetails)??"",...s,eventInfo_dimeExperienceId:(n==null?void 0:n.eventInfo_dimeExperienceId)??""};break;default:o={eventName:"unknown",...s};break}M.trackEvent({name:"interaction",data:o})}function ote(e){hc("payflowEnter",e,{eventInfo_upsellEntryStyle:"Banner"})}function tye(e){hc("payflowLoginClick",e)}function ate(e){hc("dimeCheckoutRendering",e,{eventInfo_dimeExperienceId:e.dimeExperienceId})}function rte(e){hc("dimeCheckoutSuccess",e,{eventInfo_dimeExperienceId:e.dimeExperienceId})}function ite(e){hc("dimeCheckoutClosed",e,{eventInfo_dimeExperienceId:e.dimeExperienceId})}function nye(e){M.trackEvent({name:"interaction",data:{eventName:"manageSubPageActionClick",eventInfo_loginProvider:e.loginProvider,eventInfo_curatedSubscription:e.curatedSubscription,eventInfo_actionTarget:e.actionTarget}})}function sye(e){M.trackEvent({name:"interaction",data:{eventName:"manageSubFREShown",eventInfo_loginProvider:e.loginProvider,eventInfo_curatedSubscription:e.curatedSubscription}})}function oye(e){M.trackEvent({name:"interaction",data:{eventName:"manageSubPageLoaded",eventInfo_loginProvider:e.loginProvider,eventInfo_curatedSubscription:e.curatedSubscription,eventInfo_willShowFre:e.willShowFre,eventInfo_willShowProDeprecation:e.willShowProDeprecation,eventInfo_upgradeButtonShown:e.upgradeButtonShown,eventInfo_upgradeButtonTarget:e.upgradeButtonTarget,eventInfo_manageButtonShown:e.manageButtonShown,eventInfo_manageButtonTarget:e.manageButtonTarget,eventInfo_cancelButtonShown:e.cancelButtonShown,eventInfo_cancelButtonTarget:e.cancelButtonTarget,eventInfo_proAutoRenewOn:e.proAutoRenewOn}})}function th(e){hc("dimeCheckoutError",e,{eventInfo_dimeExperienceId:e.dimeExperienceId,eventInfo_errorCode:e.errorCode,eventInfo_errorDetails:e.errorDetails})}function qs({scenario:e,duration:t=0,customData:n}){Xs({feature:"subscriptions",scenario:e,duration:t,customData:n?JSON.stringify(n):void 0})}function Ti({errorCode:e,errorDetails:t,scenario:n,customData:s}){Nt({feature:"subscriptions",scenario:n,errorType:e,errorMessage:t,customData:s?JSON.stringify(s):void 0})}function cte(e){const{correlationId:t,payflowInstanceId:n}=e;M.trackEvent({name:"system",data:{eventName:"payflowUserMismatched",eventInfo_correlationId:t,eventInfo_payflowInstanceId:n}})}const lte="https://content.lifecycle.office.net/dime/v1/dime.js";function ute(){return new Promise((e,t)=>{const n=performance.now(),s=document.createElement("script");s.src=lte,s.type="text/javascript",s.async=!0,s.onload=()=>{qs({scenario:"loadDimeScript",duration:performance.now()-n}),e()},s.onerror=()=>{const o=new Error("Failed to load Dime script");Ti({...ca(o),scenario:"loadDimeScript",customData:{duration:performance.now()-n}}),t(o)},document.head.appendChild(s)})}const hx=new Pr(ute);async function dte({language:e,market:t,sessionId:n}){var r;const s={language:e,market:t,sessionId:n},o=performance.now();try{const[c]=await Promise.all([hA(),hx.get()]);qs({scenario:"prepareDimeInitialization",duration:performance.now()-o,customData:s});const l=new window.Dime({language:e,market:t,sessionId:n,partnerId:"cmc",authHint:c==null?void 0:c.username,userInfo:{puid:(r=c==null?void 0:c.idTokenClaims)==null?void 0:r.puid}});return qs({scenario:"initializeDime",duration:performance.now()-o,customData:s}),l}catch(c){return hx.reset(),Ti({...ca(c),scenario:"initializeDime",customData:{...s,duration:performance.now()-o}}),null}}const nh=new Pr(e=>dte(e));var sr,_i;class mte{constructor(){gt(this,sr,Ys("payflowCorrelationId")??crypto.randomUUID());gt(this,_i);N(this,"ensureDime",async({language:t,market:n})=>{const s=performance.now(),o={language:t,market:n,sessionId:Y(this,sr)};Y(this,_i)&&t!==Y(this,_i)&&(nh.reset(),qs({scenario:"resetDimeForLanguageChange",customData:o})),nt(this,_i,t);const r=await nh.get({language:t,market:n,sessionId:Y(this,sr)});return qs({scenario:"ensureDime",duration:performance.now()-s,customData:o}),r});N(this,"overrideSessionId",t=>{nh.reset(),nt(this,sr,t)})}get sessionId(){return Y(this,sr)}}sr=new WeakMap,_i=new WeakMap;const od=new mte,L4="https://go.microsoft.com/fwlink/?linkid=2281226&client=cmc&ocid=cmme6wdx8nv",gx="cmme6wdx8nv",bx="cmmquw3utd3",pte="cmmjacjzqcs";function j4(e){const{urlParams:t}=Z.instance().config().proSubscription;if(!t)return L4;const{client:n}=t,{linkid:s,ocid:o,language:r,market:c}=e,l=new URL("https://go.microsoft.com/fwlink/");return l.searchParams.append("linkid",s),l.searchParams.append("client",n),l.searchParams.append("ocid",o),c&&l.searchParams.append("market",c),r&&l.searchParams.append("language",r),l.toString()}function O4(e,t){var o,r;const{urlParams:n}=Z.instance().config().proSubscription;if(!n)return gx;const{ocids:s}=n;return(t?(o=s[e])==null?void 0:o.freeTrial:(r=s[e])==null?void 0:r.buy)??gx}function aye(e,t,n,s){var m;const{urlParams:o}=Z.instance().config().proSubscription;if(!o)return L4;const{ocids:r}=o,c=O4(e,t),l=s??((m=r[e])==null?void 0:m.market);return j4({linkid:t?"2243582":"2281226",ocid:c,language:n,market:l})}function fte(e,t,n){return j4({linkid:"2281226",ocid:e??pte,language:t,market:n})}function hte(e){const{ocid:t}=e,n=new URL("https://aka.ms/AA84f4p");return n.searchParams.append("ocid",t),n.toString()}function gte(e){var s;const{m365UrlParams:t}=Z.instance().config().proSubscription;if(!t)return bx;const{ocids:n}=t;return((s=n[e])==null?void 0:s.buy)??bx}const bte="https://account.microsoft.com/services/copilot/details",vte="https://account.microsoft.com/services/microsoft365/details",rye="https://account.microsoft.com/";function iye({entryPoint:e,isPro:t}){const{manageRefId:n}=Z.instance().config().proSubscription,s=`copilot.${n}.${e}`,o=new URL(t?bte:vte);return o.searchParams.append("ref",s),o.hash="billing",o.toString()}function yte(e){Z.instance().config().subscribeInNewWindow?ks(e):oc(e)}function Yb(e){const{payflowEntryPoint:t,skuType:n,upsellReason:s,beforeNavigate:o,entryStyle:r,preferPremium:c=!1,enableDimePreload:l=!1,upsellEligibleSubscription:u}=e,m=et(),p=Ns(),f=Sn("kill-subs-dime"),h=D("cmc-m365-sku"),g=D("subs-api-user-fetched"),y=Zb(),b=!f&&(h||!y),x=_(z0),v=_(sn),S=_(nc),{i18n:{resolvedLanguage:C}}=V(),T=_(xt),w=_(zn),I=_(W0),A=_(sc),{shouldRedirectMobile:E,redirectMobileSource:R}=cD(A??null),U=z(b0),K=z(eu),H=_(iu),te=d.useRef(!1),oe=z(wI),ne=_(wt),ge=d.useMemo(()=>{const q=rD(I,u);return q||(h?aD(I,c):"gopremium")},[u,h,c,I]),me=d.useMemo(()=>b?"DIME":y?"ProSubPaywall":"UniPux",[b,y]);d.useEffect(()=>{b&&l&&ge&&(async()=>{const G=await od.ensureDime({language:C??"en-US",market:v}),J={language:C,market:v,sessionId:od.sessionId,experiences:ge};if(G){const Ie=performance.now();try{await G.preload({experiences:[ge]}),qs({scenario:"preloadDime",duration:performance.now()-Ie,customData:J})}catch(X){Ti({...ca(X),scenario:"preloadDime",customData:{...J,duration:performance.now()-Ie}})}}else Ti({...ca(new Error("Dime not a valid instance")),scenario:"preloadDime",customData:J})})()},[C,v,ge,b,l]);const be=d.useMemo(()=>h?gte(t):O4(t,x),[h,t,x]),we=d.useCallback(async()=>{const q=crypto.randomUUID();M.trackEvent({name:"interaction",data:{eventName:"payflowEnter",eventInfo_payflowCorrelationId:q,eventInfo_loginProvider:(T==null?void 0:T.accountType)??"unknown",eventInfo_payflowEntryPoint:t,eventInfo_payflowType:"ProSubPaywall",eventInfo_payflowSkuType:n,eventInfo_upsellReason:s,eventInfo_upsellEntryStyle:r}}),o&&typeof o=="function"&&o(),await p({to:`/pro/subscribe?payflow-correlationId=${q}&entry-point=${t}`,from:m})},[r,m,t,n,s,T==null?void 0:T.accountType,o,p]),se=d.useCallback(()=>{const q=h?hte({ocid:be}):fte(be,"",v);qs({scenario:"redirectToExternalUpsell",customData:{url:q}}),yte(q)},[h,be,v]),ae=d.useMemo(()=>({payflowEntryPoint:t,upsellReason:s??"unknown",loginProvider:(T==null?void 0:T.accountType)??"unknown",curatedSubscription:(A==null?void 0:A.tier)??P4,campaignId:be,dimeMarket:v??"unknown",correlationId:od.sessionId,dimeExperienceId:ge??""}),[t,s,T==null?void 0:T.accountType,A==null?void 0:A.tier,be,v,ge]),fe=d.useCallback(async q=>{const G={...ae,payflowInstanceId:q};ote({...G});const J=await od.ensureDime({language:lD(C??"en-US"),market:v});if(!ge)throw new Error("No dime experience available");if(J)try{ate({...G,dimeExperienceId:ge}),(await J.launch({experience:ge,theme:w??"light",campaignId:be},()=>{rte({...G,dimeExperienceId:ge})})).status==="Success"?pu():ite({...G,dimeExperienceId:ge})}catch(Ie){th({...G,dimeExperienceId:ge,...ca(Ie)}),se()}else th({...G,dimeExperienceId:ge,...ca(new Error("Dime not a valid instance"))}),se()},[C,v,w,ge,be,ae,se]),re=d.useCallback(async()=>{if(g&&!H){qs({scenario:"subscriptionUserNotFetched"}),te.current=!0;return}if(te.current=!1,g&&v&&L1.includes(v)){qs({scenario:"subscriptionRegionRestricted",customData:{region:v}});return}if(g&&S){qs({scenario:"subscriptionUserAgeRestricted"});return}if(h&&E&&R!==null){U({source:R,entryStyle:r,upsellReason:s,payflowEntryPoint:t});return}if((!y||b)&&(T==null?void 0:T.provider)==="auth0"){Zs("parsedPayflowEntryPoint",t),K({source:"Composer"});return}const q=Ys("payflowAuthHint");if(h&&typeof(ne==null?void 0:ne.id)=="string"&&typeof q=="string"&&q.length>0&&!ne.id.toLowerCase().endsWith(q.toLowerCase())){oe({correlationId:Ys("payflowCorrelationId")??"",payflowInstanceId:""});return}if(f){se();return}if(y&&!h){we();return}let G=Ys("payflowInstanceId");G||(G=crypto.randomUUID(),Zs("payflowInstanceId",G),Ti({scenario:"missingPayflowInstanceId",errorCode:"payflowInstanceIdMissing",customData:{generatedPayflowInstanceId:G}}));try{await fe(G)}catch(J){th({...ae,...ca(J),payflowInstanceId:G,dimeExperienceId:ge??""}),se()}},[v,f,we,h,E,R,y,b,T==null?void 0:T.provider,K,U,r,s,t,fe,ae,se,g,ge,H,oe,ne==null?void 0:ne.id,S]);return d.useEffect(()=>{H&&te.current&&(te.current=!1,re())},[H,re]),{handleSubscription:d.useCallback(async()=>{const q=crypto.randomUUID();return Zs("payflowInstanceId",q),re()},[re]),handleResumeSubscriptionWithCurrentInstanceId:re,shouldUseDime:b,payflowType:me}}function Cte(e){const{t}=V(),{options:n,onClose:s}=e,o=_(xt),r=z(eu),c=z(b0),l=_(sc),u=n.dismissButton??t("common.dismiss"),{handleSubscription:m}=Yb({payflowEntryPoint:n.entryPoint,skuType:"1Mo-Paid",upsellReason:void 0,entryStyle:"Button",upsellEligibleSubscription:n.subscriptions}),p=d.useCallback(()=>{(o==null?void 0:o.provider)==="auth0"?(s(),r({source:"Composer"})):(l==null?void 0:l.channel)==="google"||(l==null?void 0:l.channel)==="apple"?(s(),c({source:l.channel,entryStyle:"Button",upsellReason:"DailyLimit",payflowEntryPoint:n.entryPoint})):(s(),m())},[o==null?void 0:o.provider,l==null?void 0:l.channel,s,r,c,n.entryPoint,m]);return i.jsx(un,{isOpen:!0,className:"h-auto max-w-md !gap-0 rounded-[60px] !p-0",children:i.jsxs("div",{className:"flex w-full flex-col p-8",children:[i.jsx("h1",{className:"mt-4 w-full items-center text-center text-xl",children:n.title}),i.jsx("p",{className:"mt-6 w-full",children:n.subtitle}),i.jsxs("div",{className:"mt-8 flex flex-col gap-3",children:[n.confirmButton&&i.jsx($,{className:"w-full rounded-4xl",color:"strong",title:n.confirmButton,onClick:p,children:n.confirmButton}),i.jsx($,{className:"w-full rounded-4xl",color:n.confirmButton?"default":"strong",title:u,onClick:s,children:u})]})]})})}function xte(e){const{t}=V(),{config:n,onClose:s}=e,o=_(sc),r=_(xt),c=Zb(),l=n.source==="apple"?nD:sD,u=t("subscriptionManage.redirectMobileStoreTitle",{store:l}),m=t("subscriptionManage.redirectMobileStoreContent",{store:l});return d.useEffect(()=>{M.trackEvent({name:"interaction",data:{eventName:"payflowBlockDialogShown",eventInfo_upsellEntryStyle:n.entryStyle,eventInfo_payflowEntryPoint:n.payflowEntryPoint,eventInfo_upsellReason:n.upsellReason,eventInfo_loginProvider:(r==null?void 0:r.accountType)??"None",eventInfo_payflowType:"DIME",eventInfo_curatedSubscription:(o==null?void 0:o.tier)??P4,eventInfo_disabledReason:"3pPurchase"}})},[n,o==null?void 0:o.tier,c,r==null?void 0:r.accountType]),i.jsx("div",{className:W("fixed inset-0 h-screen w-screen",Ke.modal),"data-outside-events-ignore":!0,onClick:s,children:i.jsx(un,{isOpen:!0,className:"h-auto max-w-md gap-0 p-0",children:i.jsxs("div",{className:"flex w-full flex-col p-8",children:[i.jsx("h1",{className:"mt-4 w-full items-center text-center text-xl",children:u}),i.jsx("p",{className:"mt-6 w-full",children:m}),i.jsx($,{className:"mt-6 w-full rounded-4xl",color:"strong",title:t("subscriptionManage.upgradeButton"),onClick:s,children:t("subscriptionManage.redirectMobileStoreDismiss")})]})})})}function Ste(){const{t:e}=V(),t=_(wn),n=_(d3),s=_(uu),[o,r]=Ee(FZ),[c,l]=d.useState(!1),u=d.useCallback(()=>{r(!1)},[r]),m=d.useCallback(async()=>{!n||!t||(l(!0),pm.includes(n.status)||(await Ms()).stop({conversationId:t.id,taskId:n.id}))},[t,n]);d.useEffect(()=>{n!=null&&n.status&&pm.includes(n.status)&&(r(!1),l(!1))},[n==null?void 0:n.status,r]);const p=s!==null?e("research.cancel.limitAnnouncement",{limit:s+1}):"";return i.jsxs(Es,{isOpen:o,headerText:e("research.cancel.title"),className:"max-w-96 gap-4",trapFocus:!0,children:[`${e("research.cancel.description")}${` ${p}`}`,i.jsx($,{title:e("research.cancel.cancelButton"),onClick:m,className:"mt-auto text-system-red-550 dark:text-system-red-350",color:"default",size:"56-xl",disabled:c,children:c?i.jsx($e,{className:"size-8"}):e("research.cancel.cancelButton")}),i.jsx($,{title:e("common.keep"),color:"strong",size:"56-xl",onClick:u,children:e("common.keep")})]})}const D4=70;function wte(e){var t;return(t=e.contents)!=null&&t.length?e.finalResponse?"done":e.partialOutput&&e.partialOutput.length>0?"writing":"browsing":"planning"}const Qb=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e},d.createElement("path",{d:"M4.5 10a5.5 5.5 0 1 1 11 0 5.5 5.5 0 0 1-11 0ZM10 3a7 7 0 1 0 4.391 12.452l5.329 5.328a.75.75 0 1 0 1.06-1.06l-5.328-5.329A7 7 0 0 0 10 3Z"})),cye=Object.freeze(Object.defineProperty({__proto__:null,default:Qb},Symbol.toStringTag,{value:"Module"}));function Ite(e){const{text:t,isInDrawer:n=!1,isPreview:s}=e,{t:o}=V(),r=s?C4(t,D4,{ellipsis:!0}):t;return n?i.jsxs("div",{children:[i.jsx("strong",{className:"me-2",children:o("research.searched")}),i.jsx("span",{className:"text-foreground-800",children:r})]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-foreground-700",children:o("research.searched")}),i.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-black/[0.06] px-2 py-1 text-foreground-450",children:[i.jsx(Qb,{className:"size-4"}),i.jsx("span",{className:"text-foreground-800 text-xs",children:t})]})]})}function Tte(e){let{url:t}=e;t=Cs(t);const{title:n,decoration:s,source:o,iconUrl:r,mode:c,onClick:l}=e,u=d.useContext(fc),m=_(Ae),p=()=>{l&&l(e),yt({source:o,conversationId:m,messageId:u,destination:t})};return i.jsxs($,{onClick:p,color:"default",variant:"pill",size:"28-xxs",title:n,href:t,children:[s,r&&i.jsx("img",{src:r,alt:n,className:"size-4 rounded-md border-[0.5px] border-neutral-300 bg-white/90 dark:border-neutral-600"}),i.jsx("span",{className:"me-0.5",children:c==="research"?xs(t):n})]})}function Ete(e){const{url:t,isInDrawer:n=!1,isPreview:s=!1}=e,{t:o}=V();return i.jsxs("div",{className:"flex items-center gap-2",children:[n?i.jsx("strong",{children:o("research.read")}):i.jsx("span",{className:"text-foreground-700",children:o("research.read")}),s?i.jsx("span",{className:"text-foreground-800",children:xs(t)}):i.jsx(Tte,{title:xs(t),url:t,source:"researchCitationLink"})]})}function vx(e){let t=0;for(const n of e)t+=n;return t}function Ate(e,t,n){let s=0,o=null,r=[],c=0;return{getValue:()=>{if(!n)return 0;if(!o){o=Math.floor(performance.now());const u=e[e.length-1];if(!u)c=0;else{const m=u+vx(r)*1e3;m>o?(c=(m-o)/1e3,r=[]):(c=0,r=[])}}const l=e[s];return l?(s+=1,r=[],Math.max((l-o)/1e3,0)):(c=Number((c+vx(r)).toFixed(3)),r=[],t(s,o,c),s+=1,c)},queueUpdate:l=>{r.push(l)}}}function U4(e){const t=d.useRef([]);return d.useCallback(()=>Ate(t.current,(n,s,o)=>{t.current[n]=s+o*1e3},e),[e])}function _te(e){const{text:t,shouldAnimate:n,isPreview:s}=e,o=U4(!1),[r,c]=d.useState(0),l=d.useMemo(()=>{const u=o(),m=s?C4(t,D4,{ellipsis:!0}):t,p=$b(m);return Dl(p,u,()=>{c(r+1)})},[o,r,s,t]);return i.jsx("div",{className:W("flex gap-2 text-foreground-700",s?"items-center":"flex-col items-start"),children:i.jsx(Ol,{blocks:l,shouldAnimate:n})})}function kte(e){const{item:t,shouldAnimate:n=!1,isPreview:s=!1,isInDrawer:o=!1}=e;switch(t.type){case"citation":return i.jsx(Ete,{url:t.url,isInDrawer:o,isPreview:s});case"chainOfThought":return i.jsx(_te,{text:t.text,shouldAnimate:n,isPreview:s});case"query":return i.jsx(Ite,{text:t.text,isInDrawer:o,isPreview:s});default:return null}}function Nte(e){const{progress:t}=e,{t:n}=V(),s=(()=>{switch(t){case"planning":return n("research.steps.browse.future");case"writing":return n("research.steps.write.present");case"done":return n("research.stepsDrawer.reportReady");default:return""}})();return i.jsx("div",{children:i.jsx("strong",{children:s})})}function ad(e){const{progress:t,contentItem:n,shouldAnimate:s,isPreview:o=!1}=e;return t!=="browsing"?i.jsx(Nte,{progress:t}):n?i.jsx(kte,{item:n,shouldAnimate:s,isPreview:o,isInDrawer:!0}):null}const Jb=e=>d.createElement("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M12.0001 1.07191C13.2068 1.7686 14.2105 2.76833 14.912 3.97215C15.6135 5.17597 15.9885 6.54213 15.9997 7.93538C16.011 9.32864 15.6582 10.7007 14.9762 11.9157C14.2942 13.1307 13.3068 14.1465 12.1115 14.8626C10.9163 15.5787 9.55481 15.9702 8.16178 15.9984C6.76875 16.0266 5.39251 15.6904 4.16929 15.0233C2.94608 14.3562 1.91832 13.3811 1.18775 12.1947C0.457175 11.0083 0.049128 9.65168 0.00400014 8.25911L0 7.99991L0.00400014 7.74071C0.0488032 6.35911 0.450844 5.01268 1.17093 3.83271C1.89101 2.65273 2.90456 1.67948 4.11276 1.00782C5.32097 0.336164 6.6826 -0.0109686 8.0649 0.000264197C9.44721 0.011497 10.803 0.380712 12.0001 1.07191ZM10.9657 5.83431C10.828 5.69657 10.6447 5.61383 10.4503 5.6016C10.2559 5.58938 10.0636 5.64851 9.90972 5.76791L9.83452 5.83431L7.20009 8.46791L6.16568 7.43431L6.09048 7.36791C5.93654 7.2486 5.74437 7.18953 5.54999 7.2018C5.35562 7.21406 5.17239 7.29681 5.03467 7.43452C4.89695 7.57224 4.81421 7.75546 4.80194 7.94984C4.78968 8.14421 4.84874 8.33638 4.96806 8.49031L5.03446 8.56551L6.63448 10.1655L6.70968 10.2319C6.84998 10.3408 7.02251 10.3998 7.20009 10.3998C7.37767 10.3998 7.55019 10.3408 7.69049 10.2319L7.7657 10.1655L10.9657 6.96551L11.0321 6.89031C11.1515 6.73639 11.2107 6.54419 11.1984 6.34977C11.1862 6.15535 11.1035 5.97207 10.9657 5.83431Z",fill:"currentColor"})),lye=Object.freeze(Object.defineProperty({__proto__:null,default:Jb},Symbol.toStringTag,{value:"Module"}));function rd(e){const{isFinal:t=!1,isLast:n=!1,shouldAnimate:s=!1,children:o}=e;let r=null;return t?r=i.jsx(Jb,{className:"relative bottom-1 size-4 text-background-900"}):n?r=i.jsx($e,{className:"relative bottom-1 size-4"}):r=i.jsx("div",{className:"size-2 rounded-full bg-foreground-800"}),i.jsxs(ee.div,{className:"relative grid grid-cols-[auto,1fr] items-start gap-4",initial:s?"start":"end",animate:"end",variants:{start:Ce,end:c=>({...Be,transition:{delay:c,ease:"easeInOut",duration:1.2}})},children:[i.jsxs("div",{className:"relative mt-2 flex h-full w-2 flex-col items-center",children:[r,!t&&!n&&i.jsx("div",{className:"absolute bottom-0 top-4 w-0.5 bg-neutral-300 contrast-more:bg-foreground-900"})]}),o]})}function Mte(e){var p,f;const{task:t,onGoToReport:n}=e,{t:s}=V(),o=d.useRef(null),[r,c]=d.useState(!1);q3({onScrollEnd:()=>{if(!o.current)return;const{scrollTop:h,scrollHeight:g,clientHeight:y}=o.current,b=h+y>=g-50;c(!b)},scrollRefs:[o]}),d.useEffect(()=>{o.current&&!r&&o.current.scrollTo({top:o.current.scrollHeight,behavior:"smooth"})},[t,r]);const u=wte(t),m=((p=t.contents)==null?void 0:p.length)??0;return i.jsxs("div",{className:"flex h-full flex-col overflow-y-auto",children:[i.jsxs("div",{ref:o,className:"vertical-scrollbar scroll-fade relative space-y-4 overflow-y-auto scroll-smooth px-2 pb-2 [scrollbar-gutter:stable_both-edges;]",children:[i.jsx(rd,{isLast:u==="planning",shouldAnimate:u==="planning",children:i.jsx(ad,{progress:"planning"})}),(f=t.contents)==null?void 0:f.map((h,g)=>{const y=u==="browsing"&&g===m-1;return i.jsx(rd,{isLast:y,shouldAnimate:u!=="done"&&y,children:i.jsx(ad,{progress:"browsing",contentItem:h})},g)}),(u==="writing"||u==="done")&&i.jsx(rd,{isLast:u==="writing",shouldAnimate:u==="writing",children:i.jsx(ad,{progress:"writing"})}),u==="done"&&i.jsx(rd,{isFinal:!0,shouldAnimate:!0,children:i.jsx(ad,{progress:"done"})})]}),u==="done"&&i.jsx($,{title:s("research.stepsDrawer.goToReport"),onClick:n,color:"strong",variant:"pill",size:"40-base",className:"mx-4 mt-8",children:s("research.stepsDrawer.goToReport")})]})}function Rte(){const{t:e}=V(),t=_(d3),[n,s]=Ee(UZ),o=()=>{s(!1)},r=()=>{o()};return co(c=>{c.key==="Escape"&&o()}),i.jsx(Es,{isOpen:n,onClose:o,headerText:e("research.stepsDrawer.title"),className:"max-w-full p-4 sm:w-2/3 sm:min-w-96 sm:max-w-[600px]",headerClassName:"pb-12",headerTextClassName:"relative top-12 start-4",variant:"drawer",children:t&&i.jsx(Mte,{task:t,onGoToReport:r})})}function Pte(){var e=new Map;function t(n){var s=n.root,o=n.rootMargin,r=n.threshold,c=e.get(s);c||(c=new Map,e.set(s,c));var l=JSON.stringify({rootMargin:o,threshold:r}),u=c.get(l);if(!u){var m=new Map,p=new IntersectionObserver(function(f){f.forEach(function(h){var g=m.get(h.target);g==null||g(h)})},{root:s,rootMargin:o,threshold:r});u={observer:p,entryCallbacks:m},c.set(l,u)}return{observe:function(h,g){var y,b;(y=u)==null||y.entryCallbacks.set(h,g),(b=u)==null||b.observer.observe(h)},unobserve:function(h){var g,y;(g=u)==null||g.entryCallbacks.delete(h),(y=u)==null||y.observer.unobserve(h)}}}return{getObserver:t}}var Lte="0px",jte=[0],Ote=Pte();function Dte(e){var t,n,s=(t=e==null?void 0:e.rootMargin)!=null?t:Lte,o=(n=e==null?void 0:e.threshold)!=null?n:jte,r=d.useRef(null),c=d.useRef(null),l=d.useRef(null),u=d.useState(),m=u[0],p=u[1],f=d.useCallback(function(){var b=r.current;if(!b){p(void 0);return}var x=Ote.getObserver({root:c.current,rootMargin:s,threshold:o});x.observe(b,function(v){p(v)}),l.current=x},[s,o]),h=d.useCallback(function(){var b=l.current,x=r.current;x&&(b==null||b.unobserve(x)),l.current=null},[]),g=d.useCallback(function(b){h(),r.current=b,f()},[f,h]),y=d.useCallback(function(b){h(),c.current=b,f()},[f,h]);return[g,{entry:m,rootRef:y}]}function Hg(){return Hg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Hg.apply(this,arguments)}function Ute(e){var t,n=Dte(e),s=n[0],o=n[1],r=!!((t=o.entry)!=null&&t.isIntersecting),c=d.useState(r),l=c[0],u=c[1];return r&&!l&&u(!0),[s,Hg({},o,{isVisible:r,wasEverVisible:l})]}var Fte=100;function Xb(e){var t=e.loading,n=e.hasNextPage,s=e.onLoadMore,o=e.rootMargin,r=e.disabled,c=e.delayInMs,l=c===void 0?Fte:c,u=Ute({rootMargin:o}),m=u[0],p=u[1],f=p.rootRef,h=p.isVisible,g=!r&&!t&&h&&n;return d.useEffect(function(){if(g){var y=setTimeout(function(){s()},l);return function(){clearTimeout(y)}}},[s,g,l]),[m,{rootRef:f}]}const ev="mt-1 rounded-2xl border border-black/5 bg-white/25 p-4 dark:border-white/5 dark:bg-black/25",F4=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M10 5H14C14 3.89543 13.1046 3 12 3C10.8954 3 10 3.89543 10 5ZM8.5 5C8.5 3.067 10.067 1.5 12 1.5C13.933 1.5 15.5 3.067 15.5 5H21.25C21.6642 5 22 5.33579 22 5.75C22 6.16421 21.6642 6.5 21.25 6.5H19.9309L18.7589 18.6112C18.5729 20.5334 16.9575 22 15.0263 22H8.97369C7.04254 22 5.42715 20.5334 5.24113 18.6112L4.06908 6.5H2.75C2.33579 6.5 2 6.16421 2 5.75C2 5.33579 2.33579 5 2.75 5H8.5ZM10.5 9.75C10.5 9.33579 10.1642 9 9.75 9C9.33579 9 9 9.33579 9 9.75V17.25C9 17.6642 9.33579 18 9.75 18C10.1642 18 10.5 17.6642 10.5 17.25V9.75ZM14.25 9C14.6642 9 15 9.33579 15 9.75V17.25C15 17.6642 14.6642 18 14.25 18C13.8358 18 13.5 17.6642 13.5 17.25V9.75C13.5 9.33579 13.8358 9 14.25 9ZM6.73416 18.4667C6.84577 19.62 7.815 20.5 8.97369 20.5H15.0263C16.185 20.5 17.1542 19.62 17.2658 18.4667L18.4239 6.5H5.57608L6.73416 18.4667Z"})),uye=Object.freeze(Object.defineProperty({__proto__:null,default:F4},Symbol.toStringTag,{value:"Module"}));function Ep(e){const{source:t,pageName:n,customData:s}=e;M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:t,eventInfo_pageName:n,eventInfo_customData:s?JSON.stringify(s):void 0}})}function Bte(e){const{impressionElement:t,entryPoint:n,customData:s}=e;M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:t,eventInfo_entryPoint:n,eventInfo_customData:s?JSON.stringify(s):void 0}})}function yx(e){const{scenario:t,source:n,pageName:s,customData:o}=e;M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickScenario:t,eventInfo_clickSource:n,eventInfo_pageName:s,eventInfo_customData:o?JSON.stringify(o):void 0}})}function Cx(e){const{scenario:t,errorType:n,errorMessage:s,customData:o}=e;Nt({feature:"memory-management",errorType:n,scenario:t,errorMessage:s,customData:o?JSON.stringify(o):void 0})}function Vte(e){const{onDelete:t,isDeleting:n,ariaLabel:s,setButtonRef:o}=e,{t:r}=V(),[c,l]=d.useState(!1),u=d.useRef(null),m=kw(u,o);no({onOutsideEvent:()=>{l(!1),yx({scenario:"deleteSingleMemory",source:"cancel",pageName:"singleDurableFact"})},elements:[u],shouldAttachListeners:c});const p=()=>{c?(t(),l(!1),yx({scenario:"deleteSingleMemory",source:"deleteSingleDurableFact",pageName:"singleDurableFact"})):(l(!0),Ep({source:"durableFactDeleteButton",pageName:"memoryManagementPage"}))};return n?i.jsx("div",{className:"flex size-9 items-center justify-center",children:i.jsx($e,{className:"size-5"})}):i.jsx(ee.div,{layout:!0,children:i.jsxs($,{ref:m,variant:c?"rect":"square",size:"36-sm",color:c?"default":"subtle-dimmed-inverted",title:r(c?"settings.memory.management.confirmDelete":"settings.memory.delete"),"aria-label":s,"aria-expanded":c,onClick:p,children:[i.jsx(ee.div,{layout:"preserve-aspect",children:i.jsx(F4,{className:W("size-4 fill-foreground-800",c&&"fill-system-red-550 dark:fill-system-red-350"),"aria-hidden":!0})}),c&&i.jsx(ee.span,{className:"text-system-red-550 dark:text-system-red-350","aria-hidden":!0,initial:Ce,animate:Be,children:r("common.delete")})]})})}function Hte(e){const{fact:t,isLast:n,onDelete:s,isDeleting:o,ariaLabel:r,setButtonRef:c}=e;return i.jsxs(ee.li,{className:"list-none",layout:!0,initial:Be,animate:Be,exit:Ce,transition:{duration:Fn.default},children:[i.jsxs("div",{className:W("flex items-center gap-1.5 p-2 sm:gap-6",n&&"mb-2"),children:[i.jsx("p",{className:"flex-1 text-foreground-800 text-sm",children:t.text}),i.jsx(Vte,{onDelete:s,isDeleting:o,ariaLabel:r,setButtonRef:c})]}),!n&&i.jsx(As,{})]})}function zte(e){const{durableFacts:t,hasNextPage:n,showInitialLoadingState:s,infiniteRef:o,onDeleteFact:r,isDeletingFact:c,hasError:l,setButtonRef:u}=e,{t:m}=V();return i.jsxs("div",{className:W(ev,"t-custom-scrollbar flex size-full min-h-0 flex-col gap-0 overflow-y-auto",s&&"justify-center"),children:[s&&i.jsx("div",{className:"flex justify-center py-8",children:i.jsx($e,{className:"size-12"})}),i.jsx("ul",{className:"m-0 flex w-full flex-col gap-0",role:"list",children:i.jsx(at,{children:t.map((p,f)=>i.jsx(Hte,{fact:p,isLast:f===t.length-1,onDelete:()=>r(p.id,f),isDeleting:c(p.id),ariaLabel:m("settings.memory.management.memoryItemLabel",{text:p.text,index:f+1,total:t.length}),setButtonRef:h=>u(f,h)},p.id))})}),n&&!s&&!l&&i.jsx("div",{className:"flex justify-center py-8",ref:o,children:i.jsx($e,{className:"size-12"})})]})}const Wte="/static/cmc/assets/durable-facts-empty-dark-DDJyBbNr.png",Gte="/static/cmc/assets/durable-facts-empty-light-XQy6HH2o.png";function B4(e){const{closeModal:t=!0}={},{t:n}=V(),s=z(TI),o=zo();return async()=>{t&&s(!1),await o({prefillComposerData:{prompt:n("settings.memory.management.rememberPrompt")},composerPosition:"bottom",shouldHideLaunchGreeting:!0})}}function $te(e){const{buttonRef:t}=e,{t:n}=V(),s=_(zn)==="dark",o=B4(),r=()=>{o(),Ep({source:"memoryManagementZeroStateButton",pageName:"memoryManagementPage"})};return i.jsx("div",{className:W(ev,"t-custom-scrollbar flex size-full flex-col items-center justify-around overflow-y-auto"),children:i.jsxs("div",{className:"flex max-w-96 flex-col items-center gap-8",children:[i.jsx("img",{src:s?Wte:Gte,alt:"","aria-hidden":"true",loading:"lazy",className:"w-full select-none"}),i.jsxs("div",{className:"flex w-full flex-col items-center gap-3",children:[i.jsx("h3",{className:"text-center text-foreground-800 text-md",children:n("settings.memory.management.emptyMemoryStateTitle")}),i.jsx("p",{className:"text-center text-foreground-550 text-sm",children:n("settings.memory.management.emptyMemoryStateSubtitle")})]}),i.jsx($,{color:"strong",variant:"rect",size:"36-sm",title:n("settings.memory.createAction"),className:"w-fit",onClick:r,ref:t,children:n("settings.memory.createAction")})]})})}function qte(){const{t:e}=V();return i.jsxs("div",{className:W(ev,"flex size-full min-h-fit flex-col items-center justify-center gap-8 text-center text-foreground-800"),children:[i.jsx("h3",{className:"max-w-96 text-md",children:e("common.somethingWrong")}),i.jsx("p",{className:"max-w-96 text-sm",children:e("common.somethingWrongDescription")})]})}const sh="/memory/durable-facts",xx=["memory","durable-facts"];function Kte(e){const{onDeleteSuccess:t,onDeleteError:n}=e??{},s=h1(),[o,r]=d.useState(new Set),c=d.useCallback(async f=>{const{pageParam:h}=f,{url:g,args:y}=h;return await It(g,EH,{query:y}).then(x=>x.data)},[]),l=d.useCallback(f=>f.next?{url:sh,args:{cursor:f.next}}:null,[]),{mutate:u}=JS({mutationFn:async({factId:f})=>{if(!(await Hn(`${sh}/${f}`,{options:{method:"DELETE"}})).ok)throw new Error(`Failed to delete durable fact: ${f}`)},onMutate:({factId:f})=>{r(h=>new Set([...h,f]))},onSuccess:(f,{factId:h,index:g})=>{s.setQueryData(xx,y=>y&&{...y,pages:y.pages.map(b=>({...b,results:b.results.filter(x=>x.id!==h)}))}),t==null||t(g)},onError:(f,{factId:h,index:g})=>{n==null||n(f,h,g)},onSettled:(f,h,{factId:g})=>{r(y=>{const b=new Set(y);return b.delete(g),b})}}),m=d.useCallback(f=>o.has(f),[o]);return{...vu({queryKey:xx,queryFn:c,initialPageParam:{url:sh},getNextPageParam:l,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),deletion:{deleteDurableFact:u,isDeletingFact:m}}}function Zte(){var S;const{t:e}=V(),t=z(is),n=d.useRef(!1),{loader:s,deletion:o}=Kte({onDeleteSuccess:C=>{t({title:e("settings.memory.management.deleted"),dismissable:!1,dismissAfter:3e3}),h(C<b.length-1?C:C-1)},onDeleteError:(C,T,w)=>{t({title:e("common.somethingWrong"),subtitle:e("common.somethingWrongDescription"),dismissable:!1,dismissAfter:3e3}),Cx({scenario:"deleteDurableFact",errorType:"requestFailure",errorMessage:C.message}),h(w)}}),{deleteDurableFact:r,isDeletingFact:c}=o,[l]=Xb({...s,disabled:!!s.error}),u=B4(),m=d.useRef(!1),p=d.useRef(null),f=d.useRef(new Map),h=C=>{C<0?requestAnimationFrame(()=>{var T;(T=p.current)==null||T.focus()}):requestAnimationFrame(()=>{var T;(T=f.current.get(C))==null||T.focus()})},g=(C,T)=>{f.current.set(C,T)},y=()=>{u(),Ep({source:"memoryManagementAddButton",pageName:"memoryManagementPage"})},b=((S=s.data)==null?void 0:S.flatMap(C=>C.results))??[],x=b.length===0&&!s.loading&&!s.error,v=s.loading&&b.length===0;return d.useEffect(()=>{!v&&!m.current&&(Bte({impressionElement:"memoryManagementPage",customData:{state:x?"zeroState":"available"}}),m.current=!0)},[v,x]),d.useEffect(()=>{s.error&&!n.current&&(n.current=!0,t({title:e("common.somethingWrong"),subtitle:e("common.somethingWrongDescription"),dismissable:!1,dismissAfter:3e3}),Cx({scenario:`loadDurableFacts${s.hasNextPage?"NextPage":""}`,errorType:"requestFailure",errorMessage:s.error.message}))},[s.hasNextPage,s.error,t,e]),s.error&&!s.loading&&b.length===0?i.jsx(qte,{}):x?i.jsx($te,{buttonRef:p}):i.jsxs(i.Fragment,{children:[i.jsx(zte,{durableFacts:b,showInitialLoadingState:v,hasNextPage:s.hasNextPage,infiniteRef:l,onDeleteFact:(C,T)=>{r({factId:C,index:T})},isDeletingFact:c,hasError:!!s.error,setButtonRef:g}),i.jsx($,{variant:"rect",size:"36-sm",title:e("settings.memory.management.add"),className:"mt-3 w-fit shrink-0",onClick:y,children:e("settings.memory.management.add")})]})}function Yte(){const[e,t]=Ee(TI),{t:n}=V(),s=()=>{t(!1),Ep({source:"memoryManagementDismissButton",pageName:"memoryManagementPage"})};return i.jsx(un,{isOpen:e,onClose:s,headerText:n("settings.memory.management.title"),className:"h-[70vh] max-h-[780px] w-[88vw] max-w-[760px] bg-background-200",children:i.jsx(Zte,{})})}const V4=e=>d.createElement("svg",{viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("g",{id:"Copy"},d.createElement("path",{id:"Shape",d:"M6.5 4C6.5 2.89543 7.39543 2 8.5 2H14.5C15.6046 2 16.5 2.89543 16.5 4V14C16.5 15.1046 15.6046 16 14.5 16H8.5C7.39543 16 6.5 15.1046 6.5 14V4ZM4.5 6.00001C4.5 5.25973 4.9022 4.61339 5.5 4.26758V14.5C5.5 15.8807 6.61929 17 8 17H14.2324C13.8866 17.5978 13.2403 18 12.5 18H8C6.067 18 4.5 16.433 4.5 14.5V6.00001Z",fill:"currentColor"}))),dye=Object.freeze(Object.defineProperty({__proto__:null,default:V4},Symbol.toStringTag,{value:"Module"})),tv=e=>d.createElement("svg",{viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("mask",{id:"mask0_25413_62234",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:21,height:20},d.createElement("path",{d:"M8.5 2C7.39543 2 6.5 2.89543 6.5 4V14C6.5 15.1046 7.39543 16 8.5 16H14.5C15.6046 16 16.5 15.1046 16.5 14V4C16.5 2.89543 15.6046 2 14.5 2H8.5ZM7.5 4C7.5 3.44772 7.94772 3 8.5 3H14.5C15.0523 3 15.5 3.44772 15.5 4V14C15.5 14.5523 15.0523 15 14.5 15H8.5C7.94772 15 7.5 14.5523 7.5 14V4ZM4.5 6.00001C4.5 5.25973 4.9022 4.61339 5.5 4.26758V14.5C5.5 15.8807 6.61929 17 8 17H14.2324C13.8866 17.5978 13.2403 18 12.5 18H8C6.067 18 4.5 16.433 4.5 14.5V6.00001Z",fill:"currentColor"})),d.createElement("g",{mask:"url(#mask0_25413_62234)"},d.createElement("rect",{width:24,height:24,transform:"translate(-1.5 -2)",fill:"currentColor"}))),mye=Object.freeze(Object.defineProperty({__proto__:null,default:tv},Symbol.toStringTag,{value:"Module"}));function Qte(){const{i18n:e}=V(),t=_(sn);return JE(e.resolvedLanguage,t)}const Jte={year:"numeric",month:"long",day:"numeric"};function Xte(e){const{item:t,isSmallScreen:n,onDeleteItem:s}=e,{url:o,title:r,sharedAt:c}=t,{t:l}=V(),[u,m]=d.useState(!1),p=d.useRef(null),[f,h]=d.useState(!1),g=Qte(),y=r===""?o:r,b=async()=>{try{await navigator.clipboard.writeText(o),h(!0),setTimeout(()=>h(!1),mw)}catch(v){Lq({details:"Error copying shared conversation url.",errorMessage:v instanceof Error?v.message:""})}};no({onOutsideEvent:()=>m(!1),elements:[p],includeScroll:!0,invokeOnce:!0});const x=async()=>{u?(Pq(t.shareId),await s(t),m(!1)):m(!0)};return i.jsxs("div",{className:"flex h-10 w-full flex-row items-center",children:[i.jsx("div",{className:"w-full truncate pe-6",children:i.jsx(ws,{href:o,title:y,className:"text-foreground-800 underline sm:text-foreground-900 sm:text-sm",children:y})}),!n&&i.jsx("div",{className:"shrink-0 whitespace-nowrap text-foreground-550 text-2xs",children:new Date(c).toLocaleDateString(g,Jte)}),i.jsxs("div",{className:"flex min-w-[104px] shrink-0 flex-row justify-end",children:[!u&&i.jsx($,{size:"32-xs",color:"subtle-dimmed-inverted",onClick:b,title:l("share.copy"),children:f?i.jsx(V4,{className:"absolute size-6 sm:size-5"}):i.jsx(tv,{className:"absolute size-6 sm:size-5"})}),i.jsx($,{size:"32-xs",color:u?"default":"subtle-dimmed-inverted",onClick:x,title:l(u?"share.shareManagement.confirmRevoke":"share.shareManagement.revoke"),ref:p,children:i.jsxs("div",{className:W("flex flex-row",!u&&"absolute"),children:[i.jsx(Yt,{className:W("size-6 sm:size-5",u&&"text-system-red-450")}),u&&i.jsx("div",{className:"px-1 text-system-red-450 sm:text-xs",children:l("share.shareManagement.revokeButton")})]})})]})]})}function ene(e){const{items:t,onDeleteItem:n,loading:s}=e,{t:o}=V(),r=lt({breakpoint:"sm"}),c=t.length>0;return s?i.jsx("div",{className:"flex size-full items-center justify-center",children:i.jsx($e,{className:"size-10"})}):c?i.jsx(at,{initial:!1,children:t.map(l=>i.jsx(ee.div,{animate:Be,exit:Ce,children:i.jsx(Xte,{item:l,isSmallScreen:r,onDeleteItem:n},l.shareId)},l.shareId))}):i.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-6 px-2 pb-6 pt-0.5 text-center text-foreground-550 sm:px-7 sm:py-0",children:[i.jsx("h3",{className:"text-lg-medium",children:o("share.shareManagement.emptySharedLinksTitle")}),i.jsx("p",{className:"text-base",children:o("share.shareManagement.emptySharedLinksSubtitle")})]})}const tne=a.enum(["3dGeneration","podcast","pages","task"]),pye=a.object({id:a.string(),url:a.string()});a.object({type:tne,id:a.string().min(1)});const H4=a.object({shareId:a.string(),url:a.string().url(),title:a.string(),sharedAt:a.string()}),nne=a.object({cursor:a.string().optional()}),sne=a.object({results:a.array(H4),next:a.string().nullable()}),z4=a.enum(["page","podcast","3dGeneration","imagePart","task"]),one=H4.extend({type:z4});nne.extend({types:a.array(z4)});a.object({results:a.array(one),next:a.string().nullable()});const ll="/conversations/shares",zg=["sharedConversations"];function ane(){const e=d.useCallback(async o=>{const{pageParam:r}=o,{url:c,args:l}=r;return await It(c,sne,{query:l,analytics:{anonymousPath:ll},parseOptions:{safe:!0}}).then(m=>m.data)},[]),t=d.useCallback(o=>o.next?{url:ll,args:{cursor:o.next}}:null,[]),n=vu({queryKey:zg,queryFn:e,initialPageParam:{url:ll},getNextPageParam:t,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),s=rne();return{...n,deleteSharedConversation:s}}function rne(){const e=h1();return JS({mutationFn:async n=>{await Hn(`${ll}/${n}`,{options:{method:"DELETE"},analytics:{anonymousPath:`${ll}/*`}})},onMutate:async n=>{await e.cancelQueries({queryKey:zg}),e.setQueryData(zg,s=>s&&{...s,pages:s.pages.map(o=>({...o,results:o.results.filter(r=>r.shareId!==n)}))})}}).mutateAsync}function ine(){var r;const{loader:e,deleteSharedConversation:t}=ane(),[n]=Xb({...e,disabled:!!e.error}),s=((r=e.data)==null?void 0:r.flatMap(c=>c.results))??[],o=async c=>{await t(c.shareId)};return i.jsxs("div",{className:"t-custom-scrollbar flex size-full flex-col overflow-y-auto sm:px-3",children:[i.jsx(ene,{items:s,onDeleteItem:o,loading:e.loading&&s.length===0}),e.hasNextPage&&i.jsx("div",{ref:n})]})}const cne=k(!1);function lne(){const{t:e}=V(),[t,n]=Ee(cne),s=lt({breakpoint:"sm"}),o=()=>{n(!1)};return i.jsxs(un,{isOpen:t,headerText:e("share.shareManagement.sharedLinksTitle"),className:"h-[512px] w-[640px]",bottomSheetOnSmall:!0,bottomSheetClassName:"w-full rounded-t-4xl rounded-b-6xl",onClose:o,children:[i.jsx(ine,{}),!s&&i.jsx("div",{className:"mt-2 flex h-14 flex-col items-center pe-3.5 ps-3.5",children:i.jsx($,{color:"subtle-dimmed-inverted",title:e("common.cancel"),onClick:o,className:"size-full text-base",children:e("common.cancel")})})]})}function une(){return D("share-to-social-media")}const Sx={translateY:"100%"},dne={translateY:0};function mne(e){const{children:t,id:n,onClose:s,className:o}=e,r=d.useRef(null);co(l=>{const{current:u}=r;!u||!u.contains(document.activeElement)||l.key==="Escape"&&s()});const{modalAttributes:c}=up({trapFocus:!0,legacyTrapFocus:!0,alwaysFocusable:!0});return i.jsxs(i.Fragment,{children:[i.jsx(ee.div,{initial:Ce,animate:Be,exit:Ce,transition:Eg,className:"fixed inset-0 bg-black/50",...c}),i.jsx(ee.div,{id:n,initial:Sx,animate:dne,exit:Sx,transition:Eg,className:F("absolute bottom-0 max-h-expanded-section w-full overflow-y-hidden rounded-4xl",Ke.modal,o),ref:r,children:i.jsx("div",{className:"flex h-full flex-col items-start gap-4 overflow-y-auto bg-background-100 p-6",children:t})})]})}function pne(e){var u;const{children:t,id:n,onClose:s,className:o}=e,r=Wn(),c=(u=Z.instance().config().uiOverrides)==null?void 0:u.disableConversationsModalWrapper,{modalAttributes:l}=up({trapFocus:!0,legacyTrapFocus:!0,alwaysFocusable:!0});return r||c?i.jsx("div",{className:"flex max-w-96 flex-col items-start gap-4 p-2",...l,children:t}):i.jsx(mne,{id:n,onClose:s,className:o,children:t})}function fne(){const[e,t]=d.useState(!1),n=Xl(Ct),s=zo(),o=d.useCallback(async r=>{if(!r)return;const c=p3(r);yt({source:"deleteConversation",conversationId:r,scenario:c?"actions":void 0}),t(!0),c?await Hn(`/tasks/${c}`,{options:{method:"DELETE"},analytics:{anonymousPath:"/tasks/*"}}):await Hn(`/conversations/${r}`,{options:{method:"DELETE"},analytics:{anonymousPath:"/conversations/*"}}),ue(Ae)===r&&await s(),t(!1),n(l=>{l.delete(r)})},[n,s]);return{loading:e,deleteConversation:o}}const Nu=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...e},d.createElement("path",{fill:"currentColor",d:"M 20.292969 5.2929688 L 9 16.585938 L 4.7070312 12.292969 L 3.2929688 13.707031 L 9 19.414062 L 21.707031 6.7070312 L 20.292969 5.2929688 z"})),fye=Object.freeze(Object.defineProperty({__proto__:null,default:Nu},Symbol.toStringTag,{value:"Module"}));function W4(e){const{disabled:t,checked:n,label:s,className:o,labelClassName:r,setChecked:c,"aria-label":l}=e,u=d.useId();return i.jsxs("label",{"aria-label":l,className:F("relative flex cursor-pointer items-center",o),htmlFor:u,children:[i.jsx("input",{checked:n,type:"checkbox",id:u,className:"peer sr-only",onChange:m=>c(m.target.checked),disabled:t}),i.jsx("span",{className:F("flex aspect-square size-5 items-center justify-center rounded-full border transition-colors duration-200 peer-focus:ring-1 peer-focus:ring-black peer-focus:ring-offset-2 peer-disabled:pointer-events-none peer-disabled:opacity-40 dark:peer-focus:ring-white","contrast-more:peer-focus:outline contrast-more:peer-focus:outline-2 contrast-more:peer-focus:outline-offset-2",n&&"bg-black contrast-more:bg-white dark:bg-white"),children:i.jsx(Nu,{className:F("size-3 text-white transition-opacity duration-200 contrast-more:text-current dark:text-black contrast-more:dark:text-current",n?"opacity-100":"opacity-0")})}),i.jsx("span",{className:F("mt-px ps-4 peer-disabled:pointer-events-none peer-disabled:opacity-40",r),children:s})]})}function hne(e){var b;const{conversationId:t,onClose:n}=e,s=d.useId(),{t:o}=V(),[r,c]=d.useState(!1),l=d.useRef(null),{loading:u,deleteConversation:m}=fne();d.useEffect(()=>{requestAnimationFrame(()=>{var x;(x=l.current)==null||x.focus()})},[]);const p=()=>{r&&tn(Mj,"true"),n()},f=async()=>{await m(t),p(),Ge.emit("composer:focus-input")},h=Wn(),y=!((b=Z.instance().config().uiOverrides)==null?void 0:b.disableDeleteConfirmationCheckbox)&&!h;return i.jsxs(pne,{id:s,onClose:n,className:"h-96",children:[i.jsx("h2",{className:"text-lg",children:o("composer.deleteConversation.header")}),i.jsx("p",{children:o("composer.deleteConversation.description")}),y&&i.jsx(W4,{disabled:u,checked:r,label:o("composer.deleteConversation.dontRemindMeCheck"),setChecked:c,className:"flex-1"}),i.jsx($,{ref:l,title:o("common.delete"),color:"default",size:"56-xl",variant:"rect",className:"mt-auto w-full text-system-red-550 dark:text-system-red-350",disabled:u,onClick:f,children:u?i.jsx($e,{className:"size-8"}):o("common.delete")}),i.jsx($,{title:o("common.keep"),color:"strong",size:"56-xl",variant:"rect",className:"w-full",disabled:u,onClick:p,children:o("common.keep")})]})}const G4=k(void 0);function gne(e){const{isCreating:t,onCreate:n}=e,{t:s}=V();return i.jsxs("div",{className:"mt-2 flex flex-col items-center gap-6",role:"region","aria-label":s("share.invite.create","Create a new link"),children:[i.jsx($,{variant:"rect",color:"default",size:"48-lg",className:"h-12 items-center justify-center gap-0 rounded-4xl fill-foreground-800 px-6",title:s("share.invite.create","Create a new link"),disabled:t,onClick:n,"aria-busy":t,children:t?s("common.loading"):s("share.invite.create","Create a new link")}),i.jsx("span",{className:"text-foreground-550 text-2xs dark:text-foreground-800",role:"status",children:s("share.invite.createDescription","Invite link was removed. Create a new one to share with friends.")})]})}const $4=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e},d.createElement("path",{fill:"currentColor",d:"M9.562 3a7.5 7.5 0 0 0-6.798 10.673l-.724 2.842a1.25 1.25 0 0 0 1.504 1.524c.75-.18 1.903-.457 2.93-.702A7.5 7.5 0 1 0 9.561 3Zm-6 7.5a6 6 0 1 1 3.33 5.375l-.244-.121-.264.063c-.923.22-1.99.475-2.788.667l.69-2.708.07-.276-.13-.253a5.971 5.971 0 0 1-.664-2.747Zm11 10.5c-1.97 0-3.762-.759-5.1-2h.1c.718 0 1.415-.089 2.08-.257.865.482 1.86.757 2.92.757.96 0 1.866-.225 2.67-.625l.243-.121.264.063c.922.22 1.966.445 2.74.61-.175-.751-.414-1.756-.642-2.651l-.07-.276.13-.253a5.971 5.971 0 0 0 .665-2.747 5.995 5.995 0 0 0-2.747-5.042 8.44 8.44 0 0 0-.8-2.047 7.503 7.503 0 0 1 4.344 10.263c.253 1.008.509 2.1.671 2.803a1.244 1.244 0 0 1-1.467 1.5 132.62 132.62 0 0 1-2.913-.64 7.476 7.476 0 0 1-3.088.663Z"})),hye=Object.freeze(Object.defineProperty({__proto__:null,default:$4},Symbol.toStringTag,{value:"Module"})),q4=e=>d.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"none",...e},d.createElement("path",{fill:"currentColor",d:"M12 9.505a4 4 0 1 1 0 8 4 4 0 0 1 0-8Zm0 1.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5ZM12 6c4.614 0 8.596 3.15 9.701 7.564a.75.75 0 1 1-1.455.365 8.503 8.503 0 0 0-16.493.004.75.75 0 0 1-1.455-.363A10.003 10.003 0 0 1 12 6Z"})),gye=Object.freeze(Object.defineProperty({__proto__:null,default:q4},Symbol.toStringTag,{value:"Module"}));function bne(e){const{current:t,onSelect:n,onRemove:s,disabled:o}=e,{t:r}=V(),c=t==="chat"?r("share.invite.chat","Can chat"):r("share.invite.view","View only"),[l,u]=d.useState(!1),m=[{type:"chat",Icon:$4,title:r("share.invite.chat","Can chat"),description:r("share.invite.chatDescription","Chat together with Copilot"),showTag:!0},{type:"view",Icon:q4,title:r("share.invite.view","View only"),description:r("share.invite.viewDescription","View the conversation only"),showTag:!1}];return i.jsx(Eu,{isOpen:l,onIsOpenChange:u,options:{placement:"bottom-end",offset:{mainAxis:8,crossAxis:0},hideOnMenuClick:!0,roleType:"menu"},className:W(kn,"p-2"),renderTrigger:p=>i.jsxs($,{variant:"square",size:"40-base",title:c,className:"ms-2 w-auto rounded-xl px-3",onClick:p.onClick,ref:p.ref,disabled:o,children:[i.jsx("span",{className:"font-normal text-xs",children:c}),i.jsx(Vn,{className:"ms-2 size-4 rotate-90 transition-transform text-xs-medium"})]}),children:i.jsxs("div",{className:"pointer-events-auto relative flex flex-col rounded-2xl text-xs",children:[m.map(({type:p,Icon:f,title:h,description:g,showTag:y})=>i.jsxs($,{color:"subtle-dimmed-inverted",title:h,className:"flex items-center justify-between gap-3 px-3 py-2",onClick:()=>{n(p),u(!1)},children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(f,{className:"size-6"}),i.jsxs("div",{className:"pe-4 text-left",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"text-xs",children:h}),y&&i.jsx(Ii,{color:"accent",className:"ms-1.5",children:i.jsx("span",{children:r("common.new","New")})})]}),i.jsx("div",{className:"text-foreground-450 text-2xs",children:g})]})]}),t===p&&i.jsx(Nu,{className:"size-5"})]},p)),i.jsx(As,{}),i.jsx($,{color:"subtle-dimmed-inverted",title:r("share.invite.remove","Remove link"),className:"flex items-center px-3 py-2 text-center",onClick:()=>{s(),u(!1)},children:i.jsx("div",{className:"text-xs",children:r("share.invite.remove","Remove link")})})]})})}const K4=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e},d.createElement("path",{d:"M14.723 16.221a.75.75 0 0 0 1.061 1.06l4.997-5.003a.75.75 0 0 0 0-1.06L15.783 6.22a.75.75 0 0 0-1.061 1.06l3.72 3.72h-7.842c-1.595 0-2.81.242-3.889.764l-.246.126a6.202 6.202 0 0 0-2.576 2.576C3.28 15.606 3 16.884 3 18.6a.75.75 0 0 0 1.5 0c0-1.484.228-2.52.713-3.428a4.702 4.702 0 0 1 1.96-1.96c.837-.448 1.786-.676 3.094-.709l.334-.004h7.837l-3.715 3.721Z"})),bye=Object.freeze(Object.defineProperty({__proto__:null,default:K4},Symbol.toStringTag,{value:"Module"})),Z4=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e},d.createElement("path",{fill:"currentColor",d:"M12.53 2.22a.75.75 0 0 0-1.06 0L6.22 7.47a.75.75 0 0 0 1.06 1.06l3.97-3.97v10.69a.75.75 0 0 0 1.5 0V4.56l3.97 3.97a.75.75 0 1 0 1.06-1.06l-5.25-5.25ZM3.75 11a.75.75 0 0 1 .75.75v6c0 .966.784 1.75 1.75 1.75h11.5a1.75 1.75 0 0 0 1.75-1.75v-6a.75.75 0 0 1 1.5 0v6A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75v-6a.75.75 0 0 1 .75-.75Z"})),vye=Object.freeze(Object.defineProperty({__proto__:null,default:Z4},Symbol.toStringTag,{value:"Module"}));function vne(e){const{currentMode:t,onShare:n,onInvite:s,onRemove:o,onModeChange:r}=e,{t:c}=V(),l=(u,m)=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),m.stopPropagation(),u==="invite"?s():n())};return i.jsxs("div",{className:"flex flex-col justify-center gap-3",role:"region","aria-label":c("share.invite.title","Invite members"),children:[i.jsxs("div",{className:"flex w-full cursor-pointer flex-row items-center justify-start gap-3 rounded-2xl bg-stone-800 px-2 py-2.5 text-foreground-200 shadow-sm hover:bg-stone-700 focus:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-foreground-300 dark:bg-stone-200",role:"button",tabIndex:0,"aria-label":c("share.invite.subtitle","Invite by link"),"aria-expanded":"false",onClick:s,onKeyDown:u=>l("invite",u),children:[i.jsx("div",{className:"ms-3 flex size-10 items-center justify-center rounded-xl bg-foreground-100 fill-foreground-250 dark:bg-slate-450","aria-hidden":"true",tabIndex:-1,title:c("share.invite.subtitle","Invite by link"),children:i.jsx(Z4,{className:"size-6 text-foreground-800","aria-hidden":"true"})}),i.jsx("div",{className:"m-auto ms-0 flex flex-col truncate text-start text-base",children:i.jsx("span",{className:"truncate",children:c("share.invite.subtitle","Invite by link")})}),i.jsx(Vn,{className:"me-2 size-5 transition-transform","aria-hidden":"true"})]}),i.jsxs("div",{className:"flex w-full flex-row items-center justify-center gap-2",children:[i.jsx("span",{className:"text-sm",children:c("share.invite.permission","Anyone with the link")}),i.jsx(bne,{current:t,onSelect:r,onRemove:o})]}),i.jsx(As,{}),i.jsxs("div",{className:"flex cursor-pointer flex-row items-center justify-start gap-3 rounded-xl px-2 py-2.5 text-foreground-800 focus:outline-none focus:ring-2 focus:ring-foreground-300",role:"button",tabIndex:0,onClick:n,onKeyDown:u=>l("share",u),"aria-label":c("share.invite.copy","Send a copy"),children:[i.jsx("div",{className:"ms-3 flex size-10 items-center justify-center rounded-xl bg-foreground-100 fill-foreground-250 shadow-with-highlight-sm dark:bg-slate-450","aria-hidden":"true",tabIndex:-1,title:c("share.invite.copy","Send a copy"),children:i.jsx(K4,{className:"size-6 text-foreground-800","aria-hidden":"true"})}),i.jsx("div",{className:"m-auto ms-0 flex flex-col truncate text-start text-base",children:i.jsx("span",{className:"truncate",children:c("share.invite.copy","Send a copy")})}),i.jsx(Vn,{className:"me-2 size-5 transition-transform","aria-hidden":"true"})]}),i.jsx("p",{className:"px-3 text-foreground-550 text-2xs dark:text-foreground-800",role:"note",children:c("share.invite.disclaimer","Anyone with this link can see the entire conversation and share it with others. Please make sure the conversation doesn't contain any sensitive content.")})]})}function yne(e){const{conversationId:t,inviteLink:n,isCreating:s,currentMode:o,onShare:r,onInvite:c,onCreate:l,onRemove:u,onModeChange:m}=e;return!n||!t?i.jsx(gne,{isCreating:s,onCreate:l}):i.jsx(vne,{currentMode:o,onShare:r,onInvite:c,onModeChange:m,onRemove:u})}function Cne(e){const{conversationId:t,inviteLink:n,close:s}=e,{t:o}=V(),[r,c]=d.useState("chat"),[l]=d.useState(!1),u=()=>{},m=()=>{},p=()=>{},f=()=>{};return i.jsx(Es,{isOpen:!0,onClose:s,headerText:o("share.invite.title","Invite members"),headerTextClassName:"m-auto",className:"w-full max-w-[640px]",children:i.jsx(yne,{conversationId:t,inviteLink:n,isCreating:l,currentMode:r,onShare:u,onInvite:m,onCreate:p,onRemove:f,onModeChange:c})})}async function Wg(e){const{url:t,scenario:n="conversation"}=e;try{return await navigator.clipboard.writeText(t),!0}catch(s){return M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:`Error copying shared ${n} url.`,eventInfo_errorMessage:s instanceof Error?s.message:""}}),!1}}function xne({url:e,disableAutoCopy:t=!1,buttonColor:n="strong",onCopyClick:s}){const{t:o}=V(),r=o("share.copied"),c=o("share.copy"),l=o("share.copying"),[u,m]=d.useState(""),[p,f]=d.useState(!1),h=d.useRef(null),g=d.useRef(null),y=d.useCallback(()=>{h.current=window.setTimeout(()=>{m(c)},mw)},[c]),b=d.useCallback(()=>{h.current&&clearTimeout(h.current)},[]);d.useEffect(()=>t?(m(c),b):(f(!0),m(l),h.current=window.setTimeout(()=>{Wg({url:e}).then(v=>{var S;f(!1),m(v?r:c),(S=g.current)==null||S.focus(),s==null||s(),v&&y()})},kR),b),[y,b,e,r,c,l,t,s]);const x=async()=>{await Wg({url:e}),m(r),b(),y(),s==null||s()};return i.jsx($,{ref:g,title:u,color:n,size:"56-xl",className:"w-full",onClick:x,disabled:p,"aria-live":"polite","aria-label":u,children:p?i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx($e,{type:"spinnerThemed",className:"size-6"}),u]}):u})}function Sne(e){const{onClose:t,shareUrl:n,imagePath:s,title:o}=e,[r,c]=d.useState(!0),{t:l}=V(),u=()=>{t(!1)};return i.jsxs(un,{isOpen:!0,onClose:u,headerText:l("podcasts.share"),className:"w-full max-w-[640px]",children:[i.jsxs("div",{className:"mt-3 flex flex-col gap-6",children:[i.jsxs("div",{className:"mx-2 flex flex-col items-center gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(u3,{alt:"",path:s,onLoad:()=>c(!1),className:"rounded-2xl"}),i.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-podcast-share-modal-light dark:bg-gradient-podcast-share-modal-dark"}),!r&&i.jsx("h1",{className:"absolute bottom-8 mx-8 inline text-foreground-800 text-xl",role:"presentation",children:o})]}),r&&i.jsx("div",{className:"flex h-[328px] items-center justify-center",children:i.jsx($e,{type:"spinnerThemed",className:"size-6"})})]}),i.jsx("div",{className:"py-4",children:i.jsx(xne,{url:n,disableAutoCopy:!0})})]}),i.jsx("div",{className:"m-auto mb-3 max-w-[484px] text-center text-foreground-600 text-2xs",children:l("podcasts.sharePodcastsDisclaimer")})]})}const wne=d.lazy(()=>P(()=>import("./sender-share-conversation-modal-BB4gdNIX.js"),__vite__mapDeps([358,0,1,343,344,359])).then(e=>({default:e.ShareConversationModal})));function Ine(){const[e,t]=Ee(G4),{t:n}=V(),s=une(),o=D("share-image-continue"),r=d.useMemo(()=>e?document.activeElement:null,[e]),c=()=>{var l;r instanceof HTMLElement&&setTimeout(()=>{r.focus()},0),t(void 0),(e==null?void 0:e.action)==="share"&&((l=e.onClose)==null||l.call(e))};switch(e==null?void 0:e.action){case"delete":return i.jsx(Es,{isOpen:!0,className:"w-3/4 max-w-fit",trapFocus:!0,disableCloseOutside:!0,children:i.jsx(hne,{onClose:c,conversationId:e.conversationId})});case"share":{let l;return s||o?l=n("common.share"):e.messageId?l=n("share.shareModalHeaderOneTurn"):l=n("share.shareModalHeader"),i.jsx(Es,{trapFocus:!0,isOpen:!!e.conversationId,disableCloseOutside:!0,onClose:c,headerText:l,headerTextClassName:W("text-lg",s&&"text-xl"),className:W("relative max-h-full w-3/4 max-w-[640px] gap-3 overflow-y-auto",s&&"gap-4 p-8"),children:i.jsx(d.Suspense,{fallback:i.jsx($,{color:"strong",size:"56-xl",className:"w-full",title:n("common.loading"),disabled:!0,children:i.jsx($e,{className:"size-8"})}),children:i.jsx(wne,{conversationId:e.conversationId,scenario:e.scenario,messageId:e.messageId})})})}case"share-podcast":return i.jsx(Sne,{onClose:c,shareUrl:e.shareUrl,imagePath:e.imagePath,title:e.title});case"share-invite":return i.jsx(Cne,{close:c,conversationId:e.conversationId,inviteLink:e.inviteLink});default:return null}}const Tne="/static/cmc/assets/turn-limit-dark-CEuF11Ih.jpg",Ene="/static/cmc/assets/turn-limit-light-BSlP2HSn.jpg";function Ane(){const[e,t]=Ee(eu),{dismiss:n,source:s,beforeContinue:o}=e,{t:r}=V(),{login:c}=Lr(),l=D("cmc-m365-sku"),u=r(l?"logIn.m365UpsellHeader":"logIn.proUpsellHeader"),m=r(l?"logIn.m365UpsellDescription":"logIn.proUpsellDescription"),p=r("common.notNow"),f=r("signInPrompt.continueWithMicrosoft"),h=_(zn),g=et();d.useEffect(()=>{_s({page:g,scenario:`UpsellProForAuth0AccountFrom${s}`})},[g,s]);const y=()=>{Se({source:`UpsellProForAuth0AccountFrom${s}`,scenario:"ProUpsellForAuth0AccountLinkWithMSA",destination:"MicrosoftLoginPage"}),o==null||o(),sessionStorage.setItem(Bh,`${new Date().getTime().toString()}-link`),c({provider:"microsoft"})},b=async()=>{Se({source:`UpsellProForAuth0AccountFrom${s}`,scenario:"dismissProUpsellForAuth0Account",destination:g}),await(n==null?void 0:n()),t(null)};return i.jsx(un,{isOpen:!0,className:"max-w-md gap-0 py-6",children:i.jsxs("div",{className:"flex flex-col items-center p-2 text-center",children:[i.jsx("img",{src:h==="dark"?Tne:Ene,alt:r("images.birds"),className:"h-52 w-full rounded-3xl object-cover"}),i.jsx("h1",{className:"pb-5 pt-8 text-center text-xl",children:u}),i.jsx("p",{className:"max-w-[95%] break-words pb-8 text-left",children:m}),i.jsxs($,{onClick:y,title:f,variant:"pill",size:"56-xl",className:"w-full",color:"strong",testId:"prompt-sign-in-msft-composer-action",children:[i.jsx(Hm,{className:"size-6"}),f]}),i.jsx($,{onClick:b,title:p,variant:"pill",size:"56-xl",color:"overlay-bright",className:"mt-3 w-full",testId:"not-now-button-composer-action",children:p})]})})}function _ne(){const e=D("ceo-thinkdeeper"),t=D("ceo-smart-mode"),n=D("ceo"),s=D("webretrieval"),o=D("webcontent"),r=D("browser-actions");return e||t||n||s||o||r}function kne(){const e=D("memory-management-v2"),t=Gt(),n=_(ap),s=_(G0);return e&&t&&!n&&!s}function Nne(){const e=D("sharemanagement"),t=Gt();return e&&t}function Y4(){const[e,t]=Ee(Ma);return d.useEffect(()=>{t(n=>n||aO())},[t]),e}const Q4=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...e},d.createElement("path",{fill:"currentColor",d:"M3 6.25A2.75 2.75 0 0 1 5.75 3.5h9.964a3.25 3.25 0 0 1 2.299.952l2.035 2.035c.61.61.952 1.437.952 2.299v9.964a2.75 2.75 0 0 1-2.75 2.75H5.75A2.75 2.75 0 0 1 3 18.75V6.25ZM5.75 5c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25H6v-5.25a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 14.75V20h.25c.69 0 1.25-.56 1.25-1.25V8.786c0-.465-.184-.91-.513-1.238l-2.035-2.035a1.75 1.75 0 0 0-.952-.49V7.75A2.25 2.25 0 0 1 13.75 10h-4.5A2.25 2.25 0 0 1 7 7.75V5H5.75ZM16.5 20v-5.25a.75.75 0 0 0-.75-.75h-7.5a.75.75 0 0 0-.75.75V20h9Zm-8-15v2.75c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75V5h-6Z"})),yye=Object.freeze(Object.defineProperty({__proto__:null,default:Q4},Symbol.toStringTag,{value:"Module"})),J4=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...e},d.createElement("path",{fill:"currentColor",d:"M12 4a8.5 8.5 0 1 0 0 17 8.5 8.5 0 0 0 0-17ZM2 12.5c0-5.523 4.477-10 10-10s10 4.477 10 10-4.477 10-10 10-10-4.477-10-10ZM8 10a1.5 1.5 0 0 1 1.5-1.5h5A1.5 1.5 0 0 1 16 10v5a1.5 1.5 0 0 1-1.5 1.5h-5A1.5 1.5 0 0 1 8 15v-5Z"})),Cye=Object.freeze(Object.defineProperty({__proto__:null,default:J4},Symbol.toStringTag,{value:"Module"}));function Mu(e){const{pages:t,className:n,children:s,disableLink:o,clickSource:r,onClick:c,pushPagesDelay:l=0}=e,{pushPages:u}=eb(),m=()=>{setTimeout(()=>{Ge.emit("disclaimer:open-settings"),u(t)},l),c==null||c(),Se({source:r??"settingsLink",destination:t[t.length-1]})};return o?i.jsx("span",{children:s}):i.jsx("button",{className:n,type:"button",title:"",onClick:m,children:s})}function Mne(){const{t:e}=V(),[t,n]=Ee(qO),s=_(wt),o=z(cE),r=()=>{o(!1),n(void 0)},c=async l=>{await x3({allowBrowserActions:l}),Ks.regenerateMessage({messageId:t??"",mode:"retry"}),o(l),n(void 0)};return i.jsx(un,{isOpen:t!==void 0,headerIcon:i.jsxs("div",{className:"flex justify-center pb-7",children:[i.jsx("div",{className:"size-11 shrink-0 translate-x-1.5 rounded-full border-2 border-black/12 dark:border-white/15",children:i.jsx(M4,{imgSrc:s==null?void 0:s.imgSrc})}),i.jsx("div",{className:"flex size-11 -translate-x-1.5 items-center justify-center rounded-full border-2 border-black/12 bg-white dark:border-white/15",children:i.jsx(mc,{className:"size-7"})})]}),headerText:e("browserActions.consent.title"),className:"w-[360px] max-w-[95vw] gap-4 p-8",headerTextClassName:"text-lg text-center",children:i.jsxs("div",{className:"flex flex-col gap-4 text-sm",children:[i.jsx("p",{className:"mt-1 text-base",children:e("browserActions.consent.description")}),i.jsx(oh,{icon:i.jsx(J4,{className:"size-6"}),title:e("browserActions.consent.inControlSectionTitle"),description:i.jsx("span",{children:i.jsx(en,{i18nKey:"browserActions.consent.inControlSectionDescription",components:{settingsLink:i.jsx(Mu,{pages:["menu","account","privacy"],className:"text-caramel-450 dark:text-midnight-550",clickSource:"browserActionsConsentSettingsLink",onClick:r,pushPagesDelay:100})}})})}),i.jsx(oh,{icon:i.jsx(Q4,{className:"size-6"}),title:e("browserActions.consent.yourPrivacySectionTitle"),description:i.jsx("span",{children:e("browserActions.consent.yourPrivacySectionDescription")})}),i.jsx(oh,{icon:i.jsx(Kb,{className:"size-6"}),title:e("browserActions.consent.yourEdgeProfileSectionTitle"),description:i.jsx("span",{children:e("browserActions.consent.yourEdgeProfileSectionDescription")})}),i.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[i.jsx($,{title:e("browserActions.consent.confirmButton"),color:"default",size:"56-xl",variant:"rect",className:"w-full",onClick:()=>c(!0),children:e("browserActions.consent.confirmButton")}),i.jsx($,{title:e("browserActions.consent.cancelButton"),color:"default",size:"56-xl",variant:"rect",className:"mt-auto w-full text-system-red-550 dark:text-system-red-350",onClick:()=>c(!1),children:e("browserActions.consent.cancelButton")})]})]})})}function oh(e){const{icon:t,title:n,description:s}=e;return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{children:t}),i.jsxs("div",{className:"flex flex-col text-sm",children:[i.jsx("span",{className:"text-sm-strong",children:n}),s]})]})}function Rne(e){const{t}=V(),{config:n,onClose:s}=e,o=_(wt),{logout:r,login:c}=Lr(),l=d.useRef((o==null?void 0:o.email)??"");d.useEffect(()=>{(async()=>{if(o!=null&&o.email)o.email!==l.current&&(l.current=o.email);else{const f=await hA();f!=null&&f.username&&f.username!==l.current?l.current=f.username:f!=null&&f.username||Ti({scenario:"missingUsernameForUserMismatched",...ca(new Error("Missing username for user mismatched"))})}})()},[o==null?void 0:o.email]),d.useEffect(()=>{cte({correlationId:n.correlationId,payflowInstanceId:n.payflowInstanceId})},[n.correlationId,n.payflowInstanceId]);const u=d.useCallback(async()=>{await r(),Zs("shouldStartSubscription",!0),c({provider:"microsoft"})},[r,c]),m=d.useCallback(()=>{Cg("payflowAuthHint"),s()},[s]);return i.jsx(un,{isOpen:!0,className:"h-auto max-w-md",fullBleed:!0,onClose:s,children:i.jsxs("div",{className:"flex w-full flex-col p-8",children:[i.jsx("h1",{className:"mt-4 w-full items-center text-center text-xl",children:t("proSubscription.modal.userMismatched.title")}),i.jsx("p",{className:"mt-6 w-full",children:t("proSubscription.modal.userMismatched.content",{userName:l.current})}),i.jsx($,{className:"mt-8 min-h-12 w-full rounded-4xl",color:"strong",title:t("proSubscription.modal.userMismatched.actionButtonText"),onClick:u,children:t("proSubscription.modal.userMismatched.actionButtonText")}),i.jsx($,{className:"mt-6 min-h-12 w-full rounded-4xl",color:"default",title:t("proSubscription.modal.userMismatched.cancelButtonText",{userName:l.current}),onClick:m,children:t("proSubscription.modal.userMismatched.cancelButtonText",{userName:l.current})})]})})}const Ap=e=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M6.74707 3.99954H10.2113C10.6255 3.99954 10.9613 4.33533 10.9613 4.74954C10.9613 5.12924 10.6791 5.44303 10.313 5.49269L10.2113 5.49954H6.74707C5.55621 5.49954 4.58143 6.4247 4.50226 7.59549L4.49707 7.74954V17.2495C4.49707 18.4404 5.42223 19.4152 6.59302 19.4944L6.74707 19.4995H16.2478C17.4387 19.4995 18.4134 18.5744 18.4926 17.4036L18.4978 17.2495V16.7518C18.4978 16.3375 18.8336 16.0018 19.2478 16.0018C19.6275 16.0018 19.9413 16.2839 19.991 16.65L19.9978 16.7518V17.2495C19.9978 19.2538 18.4254 20.8908 16.447 20.9943L16.2478 20.9995H6.74707C4.74281 20.9995 3.1058 19.4272 3.00227 17.4487L2.99707 17.2495V7.74954C2.99707 5.74528 4.56943 4.10827 6.54791 4.00474L6.74707 3.99954H10.2113H6.74707ZM14.5011 6.5194V3.74954C14.5011 3.12557 15.2078 2.78949 15.688 3.13934L15.7702 3.20828L21.7648 8.95828C22.0446 9.22663 22.0701 9.65765 21.8412 9.95561L21.7649 10.0407L15.7703 15.7926C15.32 16.2246 14.5881 15.9472 14.5082 15.3584L14.5011 15.2514V12.5261L14.1576 12.5562C11.7579 12.8065 9.45784 13.8874 7.24302 15.8169C6.72391 16.2691 5.92078 15.8415 6.00616 15.1584C6.67094 9.83884 9.45282 6.90684 14.2017 6.53904L14.5011 6.5194V3.74954V6.5194ZM16.0011 5.50818V7.24954C16.0011 7.66375 15.6653 7.99954 15.2511 7.99954C11.3777 7.99954 8.97704 9.67567 7.9398 13.1567L7.86074 13.4353L8.21293 13.1985C10.4494 11.7367 12.7988 10.9995 15.2511 10.9995C15.6308 10.9995 15.9446 11.2817 15.9942 11.6478L16.0011 11.7495V13.4924L20.1623 9.49963L16.0011 5.50818Z",fill:"currentColor"})),xye=Object.freeze(Object.defineProperty({__proto__:null,default:Ap},Symbol.toStringTag,{value:"Module"})),nv=k(null),X4=k(e=>!!e(nv));function Sye(e){const t={"one-drive":[],"google-drive":[],"outlook-calendar":[],"google-calendar":[]};for(const n of e)t[n.source].push(n);return Object.entries(t).filter(([,n])=>n.length>0)}function wye(e,t){const n=[];let s=t;for(const[o,r]of e){if(s<=0)break;const c=Math.min(r.length,s);n.push([o,r.slice(0,c)]),s-=c}return n}function e_(e,t){const n=`/attachments/onedrive/${e}/thumbnail`;return t?`${n}?type=large`:n}function Pne(){const e=d.useId(),{t}=V(),n=z(is),{openMediaViewer:s}=io(),o=_(X4),r=z(nv);return(c,l)=>{const u=c.type==="image"&&c.source==="one-drive";switch(l){case"open":return{id:`${e}-open`,type:"open",label:t("common.open"),icon:qb,deferUntilAfterClose:u,onClick:()=>{u&&(o&&r(null),s({currentMediaIndex:0,media:[{type:"image",url:e_(c.id,!0),altText:c.fileName}]})),(c.type==="document"||c.type==="image")&&!u&&ks(c.url)}};case"download":return{id:`${e}-download`,type:"download",label:t("common.download"),icon:Tp,onClick:()=>{}};case"share":return{id:`${e}-share`,type:"share",label:t("common.share"),icon:Ap,onClick:()=>{}};case"copy":return{id:`${e}-copy`,type:"copy",label:t("connector.search.copyFileLinkButton"),icon:tv,onClick:async()=>{(c.type==="image"||c.type==="document")&&(await Wg({url:c.url}),n({title:t("connector.search.copyFileLinkSuccessToast"),dismissAfter:3e3}))}};default:throw new Error(`Unhandled action type: ${l}`)}}}const Lne=["open","download","share","copy"];function jne(e){const{artifact:t,enabledActions:n=Lne}=e,s=Pne();return n.map(o=>s(t,o))}const sv=e=>d.createElement("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("g",{id:"Dots Horizontal"},d.createElement("path",{id:"Shape",d:"M5 8C5 8.55229 4.55228 9 4 9C3.44772 9 3 8.55229 3 8C3 7.44772 3.44772 7 4 7C4.55228 7 5 7.44772 5 8ZM9 8C9 8.55229 8.55229 9 8 9C7.44772 9 7 8.55229 7 8C7 7.44772 7.44772 7 8 7C8.55229 7 9 7.44772 9 8ZM12 9C12.5523 9 13 8.55229 13 8C13 7.44772 12.5523 7 12 7C11.4477 7 11 7.44772 11 8C11 8.55229 11.4477 9 12 9Z",fill:"currentColor"}))),Iye=Object.freeze(Object.defineProperty({__proto__:null,default:sv},Symbol.toStringTag,{value:"Module"}));function t_(e){const{renderTrigger:t,renderSurface:n,containerClassNames:s,color:o="default",onOutsideEvent:r,placement:c="bottom",floatingOffset:l=10,portalContainerRef:u}=e,[m,p]=d.useState(!1),f=d.useRef(null),h=d.useRef(null),{refs:g,floatingStyles:y,context:b}=Zi({placement:c,strategy:"fixed",middleware:[Ca(l),Ki(),xa()],whileElementsMounted:_a,open:m,onOpenChange:p}),x=d.useCallback(S=>{S.stopPropagation(),S.preventDefault(),p(C=>!C)},[]),v=d.useCallback(()=>{p(!1),r==null||r()},[r]);return no({onOutsideEvent:v,elements:[g.floating,f],includeScroll:!0,invokeOnce:!0}),co(S=>{S.key==="Escape"&&m&&v()}),i.jsxs("div",{ref:g.setReference,className:F("relative",s==null?void 0:s.trigger),children:[t({openPopover:x,isOpen:m,ref:f}),Rm.createPortal(i.jsx(at,{children:m&&i.jsx(Mm,{context:b,modal:!0,returnFocus:!0,initialFocus:h,children:i.jsx(ee.div,{ref:g.setFloating,className:W("rounded-2xl p-3 shadow-lg",o==="thin"?ua:kn,s==null?void 0:s.surface,Ke.modal),style:{...y,...zd},role:"dialog",tabIndex:-1,initial:"initial",animate:"animate",exit:"exit",variants:{initial:Ce,animate:Be,exit:{...Ce,transition:{duration:Fn.default}}},transition:{duration:Fn.default,ease:"easeInOut"},children:i.jsx("div",{className:F("pointer-events-auto relative max-h-expanded-section overflow-visible",Ke.modal),children:n({closePopover:v,isOpen:m,focusRef:h})})})})}),(u==null?void 0:u.current)??document.getElementById("popoverPortal")??document.body)]})}function One(e){const{artifact:t,portalContainerRef:n}=e,{t:s}=V(),o=jne({artifact:t,enabledActions:["open","copy"]});return i.jsx(t_,{portalContainerRef:n,renderTrigger:({openPopover:r,isOpen:c})=>{const l=s("connector.search.seeMoreDropdownState",{state:s(c?"actions.screenReaderFriendlyStatus.expanded":"actions.screenReaderFriendlyStatus.collapsed")});return i.jsx($,{variant:"square",color:c?"overlay-dimmed":"subtle-dimmed",size:"36-sm",title:l,onClick:r,"aria-label":l,children:i.jsx(sv,{className:"size-5"})})},renderSurface:({closePopover:r})=>i.jsx("div",{className:"flex flex-col",children:o.map(c=>i.jsxs($,{title:c.label,variant:"rect",color:"subtle-dimmed-inverted",onClick:l=>{r(l),setTimeout(()=>{c.onClick()},0)},size:"40-base",alignment:"start",className:"gap-2 px-2 py-2.5",role:"menuitem",children:[i.jsx(c.icon,{className:"size-4"}),i.jsx("span",{className:"truncate",children:c.label})]},c.id))})})}const n_=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",...e},d.createElement("path",{d:"M9.9977 2c3.1489 0 5.7439 2.3349 5.9844 5.3554l.0134.2222.0045.2245-.001 3.5959.9254 2.2222a.996.996 0 0 1 .053.1669l.0152.0862.0087.1313c0 .448-.2965.8341-.7492.9631l-.1163.0268-.1345.0101-3.5017-.0006-.005.1613C12.4095 16.469 11.3252 17.5 10 17.5c-1.3255 0-2.41-1.0315-2.4947-2.3356l-.0057-.1604-3.5007.0006a.9983.9983 0 0 1-.2599-.0344l-.1244-.0425c-.4108-.171-.6528-.5885-.6024-1.052l.0211-.1274.0424-.1281.9233-2.2192.0011-3.6082.0043-.2246C4.127 4.4512 6.771 2 9.9977 2Zm1.5019 13.004h-3l.0074.1414c.0685.7127.6357 1.2796 1.3486 1.3477L10 16.5c.7797 0 1.4205-.5949 1.4931-1.3555l.0065-.1405ZM9.9976 3C7.3752 3 5.2273 4.9237 5.0172 7.385l-.0132.2122L5 7.8022V11.5l-.0384.1922-.9627 2.3124 11.9577.002.0453-.0021-.9635-2.3123L15 11.5l.0001-3.6876-.0041-.204C14.8909 5.0348 12.6947 3 9.9977 3Z"})),Tye=Object.freeze(Object.defineProperty({__proto__:null,default:n_},Symbol.toStringTag,{value:"Module"})),s_=e=>d.createElement("svg",{viewBox:"0 0 14 14",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M11 4.5C11 5.32843 10.3284 6 9.5 6C8.67157 6 8 5.32843 8 4.5C8 3.67157 8.67157 3 9.5 3C10.3284 3 11 3.67157 11 4.5ZM10 4.5C10 4.22386 9.77614 4 9.5 4C9.22386 4 9 4.22386 9 4.5C9 4.77614 9.22386 5 9.5 5C9.77614 5 10 4.77614 10 4.5ZM0 3C0 1.34315 1.34315 0 3 0L11 0C12.6569 0 14 1.34315 14 3V11C14 12.6569 12.6569 14 11 14H3C1.34315 14 0 12.6569 0 11L0 3ZM3 1C1.89543 1 1 1.89543 1 3L1 11C1 11.3726 1.10191 11.7215 1.27937 12.0201L5.94868 7.43203C6.53227 6.85859 7.46773 6.85859 8.05132 7.43203L12.7206 12.0201C12.8981 11.7215 13 11.3726 13 11V3C13 1.89543 12.1046 1 11 1L3 1ZM3 13H11C11.3692 13 11.7149 12.9 12.0118 12.7256L7.35044 8.14531C7.15591 7.95417 6.84409 7.95417 6.64956 8.14531L1.98824 12.7256C2.28505 12.9 2.63085 13 3 13Z"})),Eye=Object.freeze(Object.defineProperty({__proto__:null,default:s_},Symbol.toStringTag,{value:"Module"})),Dne=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 32 32",...e},d.createElement("path",{fill:"#fff",d:"M9.5 29h19c.275 0 .5-.225.5-.5V9h-4.5c-.827 0-1.5-.673-1.5-1.5V3H9.5c-.275 0-.5.225-.5.5v25c0 .275.225.5.5.5Z"}),d.createElement("path",{fill:"#fff",d:"M28.293 8 24 3.707V7.5c0 .275.225.5.5.5h3.793Z"}),d.createElement("path",{fill:"#605E5C",fillRule:"evenodd",d:"m29.56 7.854-5.414-5.415A1.51 1.51 0 0 0 23.086 2H9.5C8.673 2 8 2.673 8 3.5v25c0 .827.673 1.5 1.5 1.5h19c.827 0 1.5-.673 1.5-1.5V8.914c0-.4-.156-.777-.44-1.06ZM24 3.707 28.293 8H24.5a.501.501 0 0 1-.5-.5V3.707ZM9.5 29h19c.275 0 .5-.225.5-.5V9h-4.5c-.827 0-1.5-.673-1.5-1.5V3H9.5c-.275 0-.5.225-.5.5v25c0 .276.224.5.5.5Z",clipRule:"evenodd",opacity:.67}),d.createElement("path",{fill:"#134A2C",d:"M25 23h-2a1 1 0 1 1 0-2h2a1 1 0 1 1 0 2Z"}),d.createElement("path",{fill:"#185C37",d:"M20 23h-2a1 1 0 1 1 0-2h2a1 1 0 1 1 0 2Z"}),d.createElement("path",{fill:"#21A366",d:"M25 19h-2a1 1 0 1 1 0-2h2a1 1 0 1 1 0 2Z"}),d.createElement("path",{fill:"#107C41",d:"M20 19h-2a1 1 0 1 1 0-2h2a1 1 0 1 1 0 2Z"}),d.createElement("path",{fill:"#33C481",d:"M25 15h-2a1 1 0 1 1 0-2h2a1 1 0 1 1 0 2Z"}),d.createElement("path",{fill:"#21A366",d:"M20 15h-2a1 1 0 1 1 0-2h2a1 1 0 1 1 0 2Z"}),d.createElement("path",{fill:"#107C41",d:"M3.5 25h11a1.5 1.5 0 0 0 1.5-1.5v-11a1.5 1.5 0 0 0-1.5-1.5h-11A1.5 1.5 0 0 0 2 12.5v11A1.5 1.5 0 0 0 3.5 25Z"}),d.createElement("path",{fill:"#F9F7F7",d:"m6 22 2.174-4.01L6.182 14h1.602l1.087 2.549c.1.242.169.423.206.542h.015c.071-.194.146-.382.224-.564L10.478 14h1.47l-2.042 3.967L12 22h-1.565L9.18 19.2c-.06-.12-.11-.246-.15-.375h-.018a1.93 1.93 0 0 1-.145.363L7.574 22H6Z"})),Une=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 32 32",...e},d.createElement("path",{fill:"#fff",d:"M6.5 29h19c.275 0 .5-.225.5-.5V9h-4.5c-.827 0-1.5-.673-1.5-1.5V3H6.5c-.275 0-.5.225-.5.5v25c0 .275.225.5.5.5Z"}),d.createElement("path",{fill:"#fff",d:"M25.293 8 21 3.707V7.5c0 .275.225.5.5.5h3.793Z"}),d.createElement("path",{fill:"#605E5C",fillRule:"evenodd",d:"m26.56 7.854-5.414-5.415A1.51 1.51 0 0 0 20.086 2H6.5C5.673 2 5 2.673 5 3.5v25c0 .827.673 1.5 1.5 1.5h19c.827 0 1.5-.673 1.5-1.5V8.914c0-.4-.156-.777-.44-1.06ZM21 3.707 25.293 8H21.5a.501.501 0 0 1-.5-.5V3.707ZM6.5 29h19c.275 0 .5-.225.5-.5V9h-4.5c-.827 0-1.5-.673-1.5-1.5V3H6.5c-.275 0-.5.225-.5.5v25c0 .276.224.5.5.5Z",clipRule:"evenodd",opacity:.67}),d.createElement("path",{fill:"#C8C6C4",fillRule:"evenodd",d:"M23.5 13h-15a.5.5 0 0 1 0-1h15a.5.5 0 0 1 0 1Zm0 2h-15a.5.5 0 0 1 0-1h15a.5.5 0 0 1 0 1Zm-15 2h15a.5.5 0 0 0 0-1h-15a.5.5 0 0 0 0 1Z",clipRule:"evenodd"}),d.createElement("path",{fill:"#D65532",fillRule:"evenodd",d:"M13 19h6a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2Zm7 2c0-.551-.449-1-1-1h-6c-.551 0-1 .449-1 1v4c0 .551.449 1 1 1h6c.551 0 1-.449 1-1v-4ZM5 26h4.75a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 0-.25-.25H5a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1Zm17.25-6H27a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4.75a.25.25 0 0 1-.25-.25v-5.5a.25.25 0 0 1 .25-.25Z",clipRule:"evenodd"})),Fne=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",...e},d.createElement("path",{d:"M6.50049 11C6.22435 11 6.00049 11.2239 6.00049 11.5V13.5C6.00049 13.7761 6.22435 14 6.50049 14C6.77663 14 7.00049 13.7761 7.00049 13.5V13.3336H7.33369C7.97809 13.3336 8.50049 12.8112 8.50049 12.1668C8.50049 11.5224 7.97809 11 7.33369 11H6.50049ZM7.33369 12.3336H7.00049V12H7.33369C7.42581 12 7.50049 12.0747 7.50049 12.1668C7.50049 12.2589 7.42581 12.3336 7.33369 12.3336ZM12.0012 11.4994C12.0015 11.2235 12.2253 11 12.5012 11H13.4995C13.7757 11 13.9995 11.2239 13.9995 11.5C13.9995 11.7761 13.7757 12 13.4995 12H13.0006L13.0001 12.3345H13.4995C13.7757 12.3345 13.9995 12.5583 13.9995 12.8345C13.9995 13.1106 13.7757 13.3345 13.4995 13.3345H13.0008L13.0012 13.4987C13.0019 13.7749 12.7786 13.9993 12.5025 14C12.2263 14.0007 12.0019 13.7774 12.0012 13.5013L11.9995 12.8339L12.0012 11.4994ZM9.49902 11C9.22288 11 8.99902 11.2239 8.99902 11.5V13.5C8.99902 13.7761 9.22288 14 9.49902 14H10.0005C10.8289 14 11.5005 13.3284 11.5005 12.5C11.5005 11.6716 10.8289 11 10.0005 11H9.49902ZM9.99902 13V12H10.0005C10.2766 12 10.5005 12.2239 10.5005 12.5C10.5005 12.7761 10.2766 13 10.0005 13H9.99902ZM10.0005 6.5V2H5.50049C4.67206 2 4.00049 2.67157 4.00049 3.5V9.08172C3.41866 9.28805 3.00195 9.84329 3.00195 10.4958V14.499C3.00195 15.1516 3.41866 15.7068 4.00049 15.9132V16.5C4.00049 17.3284 4.67206 18 5.50049 18H14.5005C15.3289 18 16.0005 17.3284 16.0005 16.5V15.9133C16.5825 15.707 16.9993 15.1517 16.9993 14.499V10.4958C16.9993 9.84319 16.5825 9.28789 16.0005 9.08163V8H11.5005C10.6721 8 10.0005 7.32843 10.0005 6.5ZM4.50195 9.99585H15.4993C15.7754 9.99585 15.9993 10.2197 15.9993 10.4958V14.499C15.9993 14.7752 15.7754 14.999 15.4993 14.999H4.50195C4.22581 14.999 4.00195 14.7752 4.00195 14.499V10.4958C4.00195 10.2197 4.22581 9.99585 4.50195 9.99585ZM11.0005 6.5V2.25L15.7505 7H11.5005C11.2243 7 11.0005 6.77614 11.0005 6.5Z",fill:"currentColor"})),Bne=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 32 32",...e},d.createElement("path",{fill:"#fff",d:"M9.5 29h19c.275 0 .5-.225.5-.5V9h-4.5c-.827 0-1.5-.673-1.5-1.5V3H9.5c-.275 0-.5.225-.5.5v25c0 .275.225.5.5.5Z"}),d.createElement("path",{fill:"#fff",d:"M28.293 8 24 3.707V7.5c0 .275.225.5.5.5h3.793Z"}),d.createElement("path",{fill:"#605E5C",fillRule:"evenodd",d:"m29.56 7.854-5.414-5.415A1.51 1.51 0 0 0 23.086 2H9.5C8.673 2 8 2.673 8 3.5v25c0 .827.673 1.5 1.5 1.5h19c.827 0 1.5-.673 1.5-1.5V8.914c0-.4-.156-.777-.44-1.06ZM24 3.707 28.293 8H24.5a.501.501 0 0 1-.5-.5V3.707ZM9.5 29h19c.275 0 .5-.225.5-.5V9h-4.5c-.827 0-1.5-.673-1.5-1.5V3H9.5c-.275 0-.5.225-.5.5v25c0 .276.224.5.5.5Z",clipRule:"evenodd",opacity:.67}),d.createElement("path",{fill:"#ED6C47",d:"m21 18-1-1h-2l-1 1v2.973a4.977 4.977 0 0 0 7.535.563A5 5 0 0 0 26 18h-5Z"}),d.createElement("path",{fill:"#FF8F6B",d:"M17 15.027V18h4v-5a4.977 4.977 0 0 0-4 2.027Z"}),d.createElement("path",{fill:"#FFC7B5",d:"M22 12a5 5 0 0 1 5 5h-5v-5Z"}),d.createElement("path",{fill:"#C43E1C",d:"M3.5 25h11a1.5 1.5 0 0 0 1.5-1.5v-11a1.5 1.5 0 0 0-1.5-1.5h-11A1.5 1.5 0 0 0 2 12.5v11A1.5 1.5 0 0 0 3.5 25Z"}),d.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.64 14.66c-.49-.426-1.195-.64-2.116-.64H6.782V22h1.18l.005-2.816h1.467c.587 0 1.098-.117 1.544-.342a2.446 2.446 0 0 0 1.036-.938c.242-.404.358-.87.358-1.39 0-.809-.245-1.427-.733-1.854ZM9.576 18H7.962v-3h1.662c.99 0 1.537.66 1.537 1.539 0 .453-.183.872-.44 1.108-.259.235-.64.353-1.144.353Z",clipRule:"evenodd"})),Vne=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 32 32",...e},d.createElement("path",{fill:"#fff",d:"M9.5 29h19c.275 0 .5-.225.5-.5V9h-4.5c-.827 0-1.5-.673-1.5-1.5V3H9.5c-.275 0-.5.225-.5.5v25c0 .275.225.5.5.5Z"}),d.createElement("path",{fill:"#fff",d:"M28.293 8 24 3.707V7.5c0 .275.225.5.5.5h3.793Z"}),d.createElement("path",{fill:"#605E5C",fillRule:"evenodd",d:"m29.56 7.854-5.414-5.415A1.51 1.51 0 0 0 23.086 2H9.5C8.673 2 8 2.673 8 3.5v25c0 .827.673 1.5 1.5 1.5h19c.827 0 1.5-.673 1.5-1.5V8.914c0-.4-.156-.777-.44-1.06ZM24 3.707 28.293 8H24.5a.501.501 0 0 1-.5-.5V3.707ZM9.5 29h19c.275 0 .5-.225.5-.5V9h-4.5c-.827 0-1.5-.673-1.5-1.5V3H9.5c-.275 0-.5.225-.5.5v25c0 .276.224.5.5.5Z",clipRule:"evenodd",opacity:.67}),d.createElement("path",{fill:"#103F91",d:"M25.5 22H17v1h8.5a.5.5 0 0 0 0-1Z"}),d.createElement("path",{fill:"#185ABD",d:"M25.5 19H17v1h8.5a.5.5 0 0 0 0-1Z"}),d.createElement("path",{fill:"#2B7CD3",d:"M25.5 16H17v1h8.5a.5.5 0 0 0 0-1Z"}),d.createElement("path",{fill:"#41A5EE",d:"M25.5 13H17v1h8.5a.5.5 0 0 0 0-1Z"}),d.createElement("path",{fill:"#185ABD",d:"M3.5 25h11a1.5 1.5 0 0 0 1.5-1.5v-11a1.5 1.5 0 0 0-1.5-1.5h-11A1.5 1.5 0 0 0 2 12.5v11A1.5 1.5 0 0 0 3.5 25Z"}),d.createElement("path",{fill:"#F9F7F7",d:"M7.215 20.73h.022C7.246 20.615 8.37 15 8.37 15h1.306s1.14 5.353 1.175 5.72h.017c.015-.252.944-5.72.944-5.72H13l-1.462 7h-1.389s-1.153-5.53-1.162-5.628h-.018C8.959 16.485 7.886 22 7.886 22h-1.41L5 15h1.21s1 5.607 1.005 5.73Z"}));function Hne(e){const{fileType:t,className:n,source:s}=e;switch(t){case"application/pdf":return s==="one-drive"?i.jsx(Une,{className:n}):i.jsx(Fne,{className:n});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return i.jsx(Vne,{className:n});case"text/plain":return i.jsx(l4,{className:n});case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":return i.jsx(Dne,{className:n});case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":return i.jsx(Bne,{className:n});case"application/json":case"text/csv":case"text/markdown":default:return i.jsx(c4,{className:n})}}function zne(){return i.jsx(vp,{size:"md",className:"h-[176px] max-w-[360px]",children:i.jsx(l3,{})})}function o_(e){const t=ue(Ae);M.trackEvent({name:"system",data:{eventName:"clientImageError",eventInfo_url:e,eventInfo_conversationId:t}})}const Gg=k({}),$g=De();async function Wne(e){const t=$g.get(Gg),n=t[e];if(n)return n;try{let s;if(e.includes("?")){const[r=e,c=""]=e.split("?",2),l=new URLSearchParams(c),u={};for(const[m,p]of l.entries())u[m]=p;s=await Hn(r,{query:u})}else s=await Hn(e);const o=URL.createObjectURL(await s.blob());return $g.set(Gg,{...t,[e]:o}),o}catch{o_(e);return}}function Gne(e){const{originalUrl:t,children:n}=e,[s,o]=d.useState(void 0),[r,c]=d.useState(void 0),[l,u]=d.useState(!1);if(d.useEffect(()=>{let y=!1;return u(!1),o(void 0),c(void 0),Wne(t).then(b=>{y||(o(b),c(t))}).catch(()=>{y||u(!0),o_(t)}),()=>{y=!0}},[t]),l)return i.jsx(zne,{});const p=r!==t?void 0:s,f=t.startsWith("blob:"),h=f?Object.values($g.get(Gg)).includes(t):!1;return!!p&&!(f&&!h)?i.jsx(i.Fragment,{children:n(p)}):null}function $ne(e){const{artifact:t}=e,{source:n,type:s}=t;switch(s){case"event":return i.jsx("div",{className:W("flex size-8 items-center justify-center rounded-lg border",c3,xb),children:i.jsx(n_,{className:"size-5"})});case"document":return i.jsx(Hne,{fileType:t.contentType,className:"size-8",source:n});case"image":{const o=t.fileName,r="size-8 rounded-sm";return t.thumbnailUrl?i.jsx(Rg,{className:r,src:t.thumbnailUrl,alt:o,loading:"lazy"}):n==="one-drive"&&t.id?i.jsx(Gne,{originalUrl:e_(t.id),children:c=>i.jsx(Rg,{src:c,className:r,alt:o,loading:"lazy"})}):i.jsx(s_,{className:"size-6"})}default:return null}}function qne(e){const{artifact:t,showActions:n,portalContainerRef:s}=e,{t:o}=V(),r=d.useMemo(()=>{switch(t.type){case"image":case"document":return t.fileName;case"event":return t.subject??o("connector.eventWithoutSubjectTitle");default:return""}},[t,o]),c=d.useMemo(()=>{switch(t.type){case"image":case"document":return t.modifiedAt?o("connector.lastModifiedAt",{datetime:Qs(t.modifiedAt,"PPpp")}):"";case"event":{const l=Qs(t.startsAt,"PPpp"),u=Qs(t.endsAt,"PPpp");return`${l} - ${u}`}default:return""}},[t,o]);return i.jsxs("div",{className:"flex gap-1 py-1.5 pe-2 ps-2.5",children:[i.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[i.jsx($ne,{artifact:t}),i.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-0 px-0.5",children:[i.jsx("p",{className:"truncate text-foreground-900 text-sm",children:r}),c&&i.jsx("p",{className:"truncate py-0.5 text-foreground-600 text-2xs",children:c})]})]}),n&&i.jsx(One,{artifact:t,portalContainerRef:s})]})}const Kne=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M12.0022 8.1976L8.2267 1.65347C8.35206 1.52811 8.49629 1.44589 8.64051 1.39062C7.52713 1.75052 7.01627 2.97847 7.01627 2.97847L0.118991 14.9304C0.0219411 15.3052 -0.00501949 15.6435 0.00711175 15.9414H7.53522L12.0022 8.1976Z",fill:"#34A853"}),d.createElement("path",{d:"M12.002 8.1976L16.4689 15.9414H23.9971C24.0092 15.6435 23.9822 15.3052 23.8852 14.9304L16.9879 2.97847C16.9879 2.97847 16.4757 1.75052 15.3637 1.39062C15.5065 1.44589 15.6521 1.52811 15.7775 1.65347L12.002 8.1976Z",fill:"#FBBC05"}),d.createElement("path",{d:"M12.0021 8.19748L15.7776 1.65335C15.6522 1.52799 15.5067 1.44577 15.3638 1.39051C15.1993 1.33794 15.0228 1.30289 14.8313 1.29346H14.6319H9.37229H9.1728C8.98274 1.30154 8.80482 1.33659 8.64037 1.39051C8.49749 1.44577 8.35192 1.52799 8.22656 1.65335L12.0021 8.19748Z",fill:"#188038"}),d.createElement("path",{d:"M7.5366 15.9414L3.80422 22.4114C3.80422 22.4114 3.68021 22.3521 3.51172 22.2294C4.04145 22.6298 4.55635 22.7147 4.55635 22.7147H19.2149C20.0237 22.7147 20.1922 22.4114 20.1922 22.4114C20.1949 22.4101 20.1962 22.4087 20.1989 22.4074L16.4692 15.9414H7.5366Z",fill:"#4285F4"}),d.createElement("path",{d:"M7.53641 15.9414H0.00830078C0.0460424 16.8202 0.434243 17.3338 0.434243 17.3338L0.717306 17.8164C0.737524 17.8447 0.749654 17.8608 0.749654 17.8608L1.36565 18.923L2.74861 21.2872C2.78905 21.3829 2.83623 21.4706 2.8861 21.5541C2.90497 21.5824 2.92249 21.6134 2.94271 21.6404C2.9481 21.6485 2.95349 21.6566 2.95889 21.6647C3.13007 21.9019 3.32148 22.0852 3.51288 22.2294C3.68137 22.3534 3.80538 22.4114 3.80538 22.4114L7.53641 15.9414Z",fill:"#1967D2"}),d.createElement("path",{d:"M16.4688 15.9414H23.9969C23.9591 16.8202 23.5709 17.3338 23.5709 17.3338L23.2878 17.8164C23.2676 17.8447 23.2555 17.8608 23.2555 17.8608L22.6395 18.923L21.2565 21.2872C21.2161 21.3829 21.1689 21.4706 21.1191 21.5541C21.1002 21.5824 21.0827 21.6134 21.0624 21.6404C21.057 21.6485 21.0517 21.6566 21.0463 21.6647C20.8751 21.9019 20.6837 22.0852 20.4923 22.2294C20.3238 22.3534 20.1998 22.4114 20.1998 22.4114L16.4688 15.9414Z",fill:"#EA4335"})),Zne=e=>d.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.4999 8.6123L29.0062 14.3223C30.3368 15.0454 30.3368 16.9555 29.0062 17.6786L18.4999 23.3886L7.99356 17.6786C6.66296 16.9555 6.66296 15.0454 7.99356 14.3223L18.4999 8.6123Z",fill:"#0A2767"}),d.createElement("path",{d:"M9 6.25C9 4.45507 10.4551 3 12.25 3H24.75C26.5449 3 28 4.45507 28 6.25V25.75C28 27.5449 26.5449 29 24.75 29H12.25C10.4551 29 9 27.5449 9 25.75V6.25Z",fill:"#28A8EA"}),d.createElement("path",{d:"M24.7498 3H12.2498C10.539 3 9.13693 4.32189 9.00928 6H27.9903C27.8627 4.32189 26.4606 3 24.7498 3Z",fill:"#0364B8"}),d.createElement("path",{d:"M28 15V6.25C28 6.16588 27.9968 6.08251 27.9905 6H19V15H28Z",fill:"#50D9FF"}),d.createElement("path",{d:"M7 17.1379V15.9997L7.47751 15.1211L18.5 21.1116L29.5225 15.1211L30 15.9997V17.1379L18.5 23.3879L7 17.1379Z",fill:"#0A2767",fillOpacity:.5}),d.createElement("path",{d:"M7 16.1314V25.75C7 27.545 8.45508 29 10.25 29H26.75C28.5449 29 30 27.545 30 25.75V16.1284C29.9597 16.7429 29.6284 17.3405 29.0062 17.6786L18.4999 23.3886L7.99356 17.6786C7.3724 17.3411 7.04122 16.7448 7 16.1314Z",fill:"#28A8EA"}),d.createElement("path",{d:"M28.1992 28.6594L18.5 23.3881L29.0063 17.6782C29.6285 17.34 29.9597 16.7424 30.0001 16.1279V25.7495C30.0001 27.0238 29.2668 28.1267 28.1992 28.6594Z",fill:"#1490DF"}),d.createElement("path",{d:"M18.5 23.3881L28.1992 28.6594C28.8362 28.3416 29.3541 27.8207 29.6684 27.1816L20.5942 22.25L18.5 23.3881Z",fill:"black",fillOpacity:.1}),d.createElement("mask",{id:"mask0_5824_161124",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:11,width:14,height:13},d.createElement("path",{opacity:.75,d:"M2 14.25C2 12.4551 3.45507 11 5.25 11H12.75C14.5449 11 16 12.4551 16 14.25V20.75C16 22.5449 14.5449 24 12.75 24H5.25C3.45507 24 2 22.5449 2 20.75V14.25Z",fill:"#242424"})),d.createElement("g",{mask:"url(#mask0_5824_161124)"},d.createElement("path",{d:"M30 25.75V16V6.25C30 4.45507 28.5449 3 26.75 3H12.25C10.4551 3 9 4.45507 9 6.25V14C9 15.1046 8.10457 16 7 16V25.75C7 27.5449 8.45508 29 10.25 29H26.75C28.5449 29 30 27.5449 30 25.75Z",fill:"black"})),d.createElement("rect",{x:2,y:9,width:14,height:14,rx:1.5,fill:"#0078D4"}),d.createElement("path",{d:"M8.96645 20.1338C7.82519 20.1338 6.90326 19.762 6.20066 19.0185C5.50178 18.2713 5.15234 17.2992 5.15234 16.1022C5.15234 14.8271 5.50922 13.8029 6.22297 13.0297C6.93672 12.2565 7.89396 11.8699 9.0947 11.8699C10.2174 11.8699 11.1226 12.2435 11.8103 12.9907C12.5017 13.7342 12.8475 14.7119 12.8475 15.9237C12.8475 17.2063 12.4924 18.2286 11.7824 18.9906C11.0724 19.7527 10.1337 20.1338 8.96645 20.1338ZM8.98317 18.9405C9.7341 18.9405 10.327 18.6858 10.762 18.1765C11.1969 17.6635 11.4144 16.9498 11.4144 16.0353C11.4144 15.0948 11.2025 14.3661 10.7787 13.8494C10.3586 13.329 9.77871 13.0688 9.03894 13.0688C8.30288 13.0688 7.70995 13.3383 7.26014 13.8773C6.81404 14.4163 6.591 15.1282 6.591 16.013C6.591 16.9014 6.81033 17.6115 7.24898 18.1431C7.69136 18.6747 8.26942 18.9405 8.98317 18.9405Z",fill:"white"})),a_=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...e},d.createElement("path",{d:"M17.2632 6.73828H6.73682V17.2645H17.2632V6.73828Z",fill:"white"}),d.createElement("path",{d:"M17.2635 22.0002L22.0004 17.2635L19.632 16.8594L17.2635 17.2635L16.8313 19.4298L17.2635 22.0002Z",fill:"#EA4335"}),d.createElement("path",{d:"M2 17.2635V20.4213C2 21.2937 2.70658 22.0002 3.57894 22.0002H6.73684L7.22318 19.6318L6.73684 17.2635L4.15619 16.8594L2 17.2635Z",fill:"#188038"}),d.createElement("path",{d:"M22.0004 6.7368V3.57893C22.0004 2.70657 21.2939 2 20.4214 2H17.2635C16.9753 3.17467 16.8313 4.03912 16.8313 4.5934C16.8313 5.14765 16.9753 5.8621 17.2635 6.7368C18.3112 7.03678 19.1006 7.18678 19.632 7.18678C20.1633 7.18678 20.9527 7.03678 22.0004 6.7368Z",fill:"#1967D2"}),d.createElement("path",{d:"M22.0003 6.73828H17.2634V17.2645H22.0003V6.73828Z",fill:"#FBBC04"}),d.createElement("path",{d:"M17.2632 17.2617H6.73682V21.9986H17.2632V17.2617Z",fill:"#34A853"}),d.createElement("path",{d:"M17.2631 2H3.57894C2.70658 2 2 2.70657 2 3.57893V17.263H6.73684V6.7368H17.2631V2Z",fill:"#4285F4"}),d.createElement("path",{d:"M8.89578 14.9023C8.50237 14.6365 8.22999 14.2484 8.0813 13.7352L8.99448 13.3589C9.07736 13.6747 9.22209 13.9194 9.42866 14.0931C9.63394 14.2668 9.88392 14.3523 10.176 14.3523C10.4747 14.3523 10.7313 14.2615 10.9458 14.08C11.1603 13.8984 11.2681 13.6668 11.2681 13.3865C11.2681 13.0997 11.155 12.8654 10.9287 12.6839C10.7024 12.5023 10.4181 12.4116 10.0787 12.4116H9.55104V11.5076H10.0247C10.3168 11.5076 10.5629 11.4287 10.7629 11.2708C10.9629 11.1129 11.0629 10.8971 11.0629 10.6221C11.0629 10.3774 10.9734 10.1826 10.7945 10.0366C10.6155 9.89047 10.3891 9.81681 10.1141 9.81681C9.84581 9.81681 9.63262 9.88792 9.47473 10.0314C9.31694 10.1751 9.1983 10.3567 9.12999 10.5589L8.22604 10.1826C8.34578 9.84314 8.56552 9.54314 8.88788 9.28393C9.21027 9.02472 9.62209 8.89447 10.1221 8.89447C10.4918 8.89447 10.8247 8.96554 11.1195 9.10893C11.4141 9.25237 11.6458 9.45104 11.8129 9.70367C11.98 9.95758 12.0629 10.2418 12.0629 10.5576C12.0629 10.88 11.9853 11.1523 11.83 11.376C11.6747 11.5997 11.4839 11.7708 11.2576 11.8905V11.9444C11.5498 12.0649 11.8037 12.2628 11.9918 12.5168C12.1826 12.7734 12.2787 13.08 12.2787 13.4379C12.2787 13.7958 12.1879 14.1154 12.0063 14.3958C11.8247 14.676 11.5734 14.8971 11.255 15.0575C10.9353 15.2181 10.576 15.2996 10.1774 15.2996C9.71552 15.301 9.2892 15.1681 8.89578 14.9023ZM14.505 10.3708L13.5024 11.0958L13.001 10.3352L14.7997 9.03789H15.4891V15.1575H14.505V10.3708Z",fill:"#4285F4"})),Aye=Object.freeze(Object.defineProperty({__proto__:null,default:a_},Symbol.toStringTag,{value:"Module"})),ov=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.92188 11.8237H19.4529C19.4529 11.8237 19.4529 9.89366 19.4529 9.6831C18.6246 6.41578 15.6854 4 12.1862 4C9.56739 4 7.26337 5.35396 5.92188 7.4044C5.92188 8.82754 5.92188 11.8237 5.92188 11.8237Z",fill:"#0364B8"}),d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.15227 8.30349L9.15203 8.30431C8.23597 7.73294 7.1565 7.40234 6.00013 7.40234C5.97439 7.40234 5.94909 7.404 5.92344 7.40431C2.64519 7.44587 0 10.1364 0 13.4511C0 14.7371 0.399257 15.9285 1.07801 16.9086H14.1906V11.3459L9.15227 8.30349Z",fill:"#0078D4"}),d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.4514 9.68327C19.3425 9.67596 19.233 9.6709 19.1223 9.6709C18.4357 9.6709 17.7825 9.81469 17.1899 10.073L14.1875 11.3461V16.9176H23.4143C23.7861 16.2237 23.9974 15.4296 23.9974 14.5855C23.9974 11.9828 21.9902 9.85405 19.4514 9.68327Z",fill:"#1490DF"}),d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.1602 14.3467L17.9151 13.5949L15.0613 11.8716L14.1907 11.3459L11.8941 12.3202L7.49635 14.1859L5.52123 15.0238L1.07812 16.9087C2.16256 18.4747 3.96212 19.5 6.00025 19.5H19.1255C20.9807 19.5 22.5937 18.4551 23.4175 16.9175L19.1602 14.3467Z",fill:"#28A8EA"})),_ye=Object.freeze(Object.defineProperty({__proto__:null,default:ov},Symbol.toStringTag,{value:"Module"})),id="mx-2 size-6";function Yne(e){const{source:t}=e;switch(t){case"one-drive":return i.jsxs("div",{className:"flex",children:[i.jsx(ov,{className:id}),B("oneDrive.title")]});case"google-drive":return i.jsxs("div",{className:"flex",children:[i.jsx(Kne,{className:id}),B("connector.googleDrive.title")]});case"outlook-calendar":return i.jsxs("div",{className:"flex",children:[i.jsx(Zne,{className:id}),B("outlook.title")]});case"google-calendar":return i.jsxs("div",{className:"flex",children:[i.jsx(a_,{className:id}),B("connector.googleCalendar.title")]});default:return null}}function Qne(){var m,p;const e=_(X4),[t,n]=Ee(nv),s=d.useRef(null),{t:o}=V(),r=((m=Z.instance().config().composer)==null?void 0:m.largeScreen)===!0&&((p=Z.instance().config().composer)==null?void 0:p.voiceOnly)===!0,c=()=>{n(null)},{focusable:l}=yr({isFocusBoundary:!0});if(co(f=>{T4(f)&&(f.stopPropagation(),c())}),!t)return null;const u=t;return i.jsx(un,{isOpen:e,onClose:r?void 0:c,headerText:o("connector.search.title",{resultsCount:u.reduce((f,[,h])=>f+h.length,0)}),className:W(r?"max-h-[40vh]":"max-h-[80vh]",r?"w-[480px]":"w-[440px]","mx-4 px-2"),children:i.jsx(Vm.Provider,{value:l.focusKey??"",children:i.jsx("div",{className:W("flex flex-col gap-2 overflow-y-auto",r?"no-scrollbar":"t-custom-scrollbar"),ref:s,children:u.map(([f,h])=>i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"mb-2 font-semibold text-foreground-600 text-xs",children:i.jsx(Yne,{source:f})}),h.map(g=>i.jsx(qne,{artifact:g,portalContainerRef:s,showActions:g.type!=="event"},g.id))]},f))})})})}function Jne(){const e=Y4(),t=_ne(),n=_(Hs),s=_(vI),[o,r]=Ee(ep),c=_(eu),l=Z.instance().config().entraRedirectModalBehaviour!=="skip",u=D("ds-new-progress"),[m,p]=Ee(b0),[f,h]=Ee(wI),[g,y]=Ee(R4),b=kne(),x=Nne(),v=_(II),S=D("search-personal-data");return i.jsxs(i.Fragment,{children:[n&&i.jsx(YE,{accountActionRequired:n}),e&&o&&i.jsx(Es,{isOpen:!0,trapFocus:!0,children:i.jsx(ste,{interceptedLink:o,onClose:()=>{r(void 0)}})}),i.jsx(Ine,{}),s&&i.jsx(Qee,{}),c&&i.jsx(Ane,{}),l&&i.jsx(tte,{}),i.jsx(zY,{}),i.jsx(Kee,{}),i.jsx(Mne,{}),t&&i.jsx(Hee,{}),u&&i.jsxs(i.Fragment,{children:[i.jsx(Rte,{}),i.jsx(Ste,{})]}),m&&i.jsx(xte,{config:m,onClose:()=>p(null)}),f&&i.jsx(Rne,{config:f,onClose:()=>h(null)}),g!==null&&i.jsx(Cte,{options:g,onClose:()=>y(null)}),b&&i.jsx(Yte,{}),x&&i.jsx(lne,{}),v&&v.visible&&i.jsx(Xee,{}),S&&i.jsx(Qne,{})]})}const r_=e=>d.createElement("svg",{width:96,height:93,viewBox:"0 0 96 93",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("mask",{id:"mask0_140_39981",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:96,height:93},d.createElement("mask",{id:"path-1-outside-1_140_39981",maskUnits:"userSpaceOnUse",x:0,y:0,width:96,height:93,fill:"black"},d.createElement("rect",{fill:"white",width:96,height:93}),d.createElement("path",{d:"M4 46.5C4 23.0279 23.0279 4 46.5 4H49.5C72.9721 4 92 23.0279 92 46.5V46.5C92 69.9721 72.9721 89 49.5 89H46.5C23.0279 89 4 69.9721 4 46.5V46.5Z"})),d.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",fill:"url(#paint0_linear_140_39981)",fillOpacity:.8,mask:"url(#path-1-outside-1_140_39981)"}),d.createElement("g",{clipPath:"url(#paint1_angular_140_39981_clip_path)","data-figma-skip-parse":"true",mask:"url(#path-1-outside-1_140_39981)"},d.createElement("g",{transform:"matrix(0 -0.0425 0.0556447 0 48 46.5)"},d.createElement("foreignObject",{x:-1094.12,y:-1094.12,width:2188.24,height:2188.24},d.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,rgba(214, 147, 237, 1) 0deg,rgba(250, 176, 198, 1) 60.2401deg,rgba(244, 185, 234, 1) 85.1532deg,rgba(141, 152, 255, 1) 126.663deg,rgba(170, 110, 238, 1) 209.329deg,rgba(255, 103, 119, 1) 250.911deg,rgba(255, 186, 113, 1) 291.415deg,rgba(198, 134, 255, 1) 332.659deg,rgba(214, 147, 237, 1) 360deg)",height:"100%",width:"100%",opacity:1}})))),d.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",mask:"url(#path-1-outside-1_140_39981)"})),d.createElement("g",{mask:"url(#mask0_140_39981)"},d.createElement("g",{clipPath:"url(#paint2_angular_140_39981_clip_path)","data-figma-skip-parse":"true"},d.createElement("g",{transform:"matrix(0 -0.071 0.0897903 0 48 47.0001)"},d.createElement("foreignObject",{x:-1014.09,y:-1014.09,width:2028.17,height:2028.17},d.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,rgba(0, 0, 0, 1) 0deg,rgba(255, 255, 255, 1) 52.2deg,rgba(197, 197, 197, 1) 122.4deg,rgba(0, 0, 0, 1) 147.6deg,rgba(255, 255, 255, 1) 171deg,rgba(174, 174, 174, 1) 235.8deg,rgba(0, 0, 0, 1) 250.911deg,rgba(217, 238, 247, 1) 266.4deg,rgba(255, 255, 255, 1) 332.659deg,rgba(0, 0, 0, 1) 360deg)",height:"100%",width:"100%",opacity:1}})))),d.createElement("rect",{x:-23,y:-24,width:142,height:142})),d.createElement("defs",null,d.createElement("clipPath",{id:"paint1_angular_140_39981_clip_path"},d.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",mask:"url(#path-1-outside-1_140_39981)"})),d.createElement("clipPath",{id:"paint2_angular_140_39981_clip_path"},d.createElement("rect",{x:-23,y:-24,width:142,height:142})),d.createElement("linearGradient",{id:"paint0_linear_140_39981",x1:4,y1:89,x2:101.93,y2:75.3765,gradientUnits:"userSpaceOnUse"},d.createElement("stop",{stopColor:"#FFAB4E"}),d.createElement("stop",{offset:1,stopColor:"#FF7791"})))),kye=Object.freeze(Object.defineProperty({__proto__:null,default:r_},Symbol.toStringTag,{value:"Module"})),i_=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M20.2899 16.4358C20.6074 15.5282 20.78 14.5526 20.78 13.5366V9.5241C20.78 9.10859 20.4432 8.77175 20.0277 8.77175C19.6122 8.77175 19.2753 9.10859 19.2753 9.5241V13.5366C19.2753 14.1176 19.2072 14.6827 19.0785 15.2244L20.2899 16.4358Z",fill:"currentColor"}),d.createElement("path",{d:"M15.263 11.1575V6.51431C15.263 4.71377 13.8034 3.25414 12.0028 3.25414C10.7464 3.25414 9.65599 3.96485 9.11167 5.00618L8.01336 3.90787C8.86428 2.60809 10.3333 1.74944 12.0028 1.74944C14.6344 1.74944 16.7677 3.88274 16.7677 6.51431V12.6622L15.263 11.1575Z",fill:"currentColor"}),d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.0026 20.8093C7.986 20.8093 4.7299 17.5532 4.7299 13.5366L4.7299 9.5241C4.7299 9.10859 4.39306 8.77175 3.97755 8.77175C3.56204 8.77175 3.2252 9.10859 3.2252 9.5241L3.2252 13.5366C3.2252 18.3843 7.15498 22.314 12.0026 22.314C14.6664 22.314 17.053 21.1274 18.6628 19.2539L21.0006 21.5917C21.2944 21.8855 21.7707 21.8855 22.0645 21.5917C22.3584 21.2979 22.3584 20.8215 22.0645 20.5277L3.00504 1.46823C2.71123 1.17442 2.23487 1.17442 1.94106 1.46823C1.64725 1.76204 1.64725 2.2384 1.94106 2.53221L7.23793 7.82908V13.5362C7.23793 16.1678 9.37124 18.3011 12.0028 18.3011C13.5589 18.3011 14.9407 17.5552 15.8103 16.4015L17.5951 18.1862C16.261 19.7891 14.251 20.8093 12.0026 20.8093ZM8.74263 13.5362C8.74263 15.3368 10.2023 16.7964 12.0028 16.7964C13.1441 16.7964 14.1484 16.21 14.7308 15.322L8.74263 9.33378L8.74263 13.5362Z",fill:"currentColor"})),Nye=Object.freeze(Object.defineProperty({__proto__:null,default:i_},Symbol.toStringTag,{value:"Module"})),Cm=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.7673 6.54284C16.7673 3.91128 14.634 1.77799 12.0024 1.77799C9.37089 1.77799 7.2376 3.91129 7.2376 6.54284L7.2376 13.5647C7.2376 16.1963 9.37089 18.3296 12.0024 18.3296C14.634 18.3296 16.7673 16.1963 16.7673 13.5647L16.7673 6.54284ZM12.0024 3.28268C13.803 3.28268 15.2626 4.7423 15.2626 6.54284L15.2626 13.5647C15.2626 15.3652 13.803 16.8249 12.0024 16.8249C10.2019 16.8249 8.74229 15.3652 8.74229 13.5647L8.74229 6.54284C8.74229 4.7423 10.2019 3.28268 12.0024 3.28268Z",fill:"currentColor"}),d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.0274 8.79987C19.6119 8.79987 19.2751 9.1367 19.2751 9.55221V13.5647C19.2751 17.5813 16.019 20.8374 12.0024 20.8374C7.98587 20.8374 4.72979 17.5813 4.72979 13.5647L4.72979 9.55221C4.72979 9.1367 4.39295 8.79987 3.97744 8.79987C3.56193 8.79987 3.2251 9.1367 3.2251 9.55221L3.2251 13.5647C3.2251 18.4123 7.15485 22.3421 12.0024 22.3421C16.85 22.3421 20.7798 18.4123 20.7798 13.5647V9.55221C20.7798 9.1367 20.443 8.79987 20.0274 8.79987Z",fill:"currentColor"})),Mye=Object.freeze(Object.defineProperty({__proto__:null,default:Cm},Symbol.toStringTag,{value:"Module"})),c_=e=>d.createElement("svg",{width:63,height:73,viewBox:"0 0 63 73",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("g",{filter:"url(#filter0_d_3118_29179)"},d.createElement("path",{d:"M39.7952 28.3892L42.2422 41.8194C43.061 46.313 43.4704 48.5598 42.1865 49.4826C40.9025 50.4053 38.9035 49.3009 34.9054 47.0922L22.9563 40.491C16.2962 36.8117 12.9661 34.972 13.4372 33.1039C13.9083 31.2359 17.7474 31.1951 25.4255 31.1136C27.1365 31.0955 27.992 31.0864 28.6339 30.625C29.2759 30.1637 29.5572 29.3557 30.12 27.7398C32.6452 20.4884 33.9078 16.8627 35.8285 17.0117C37.7493 17.1608 38.4313 20.9036 39.7952 28.3892Z",fill:"white",fillOpacity:.8,shapeRendering:"crispEdges"}),d.createElement("path",{d:"M39.7952 28.3892L42.2422 41.8194C43.061 46.313 43.4704 48.5598 42.1865 49.4826C40.9025 50.4053 38.9035 49.3009 34.9054 47.0922L22.9563 40.491C16.2962 36.8117 12.9661 34.972 13.4372 33.1039C13.9083 31.2359 17.7474 31.1951 25.4255 31.1136C27.1365 31.0955 27.992 31.0864 28.6339 30.625C29.2759 30.1637 29.5572 29.3557 30.12 27.7398C32.6452 20.4884 33.9078 16.8627 35.8285 17.0117C37.7493 17.1608 38.4313 20.9036 39.7952 28.3892Z",stroke:"white",strokeWidth:1.5,shapeRendering:"crispEdges"})),d.createElement("path",{d:"M43.06 50.7014C44.3479 49.7757 44.5485 48.2871 44.5004 46.9375L44.469 46.4069C44.397 45.4896 44.2259 44.4068 44.0083 43.1722L43.7279 41.6191L43.7271 41.6113L43.7263 41.6119L41.2578 28.06L40.7794 25.455C40.3207 22.9993 39.9105 20.9984 39.4527 19.5092L39.3346 19.1407C39.0928 18.4125 38.8119 17.7441 38.4599 17.1874L38.2786 16.9184C37.7807 16.2335 37.0781 15.6722 36.1346 15.5382L35.9428 15.5173C35.0273 15.4462 34.264 15.7987 33.6613 16.3187L33.4134 16.551C32.8862 17.0835 32.4355 17.7951 32.024 18.597L31.8493 18.9462C31.1633 20.3587 30.4435 22.2885 29.6039 24.6656L28.7214 27.1892L28.7014 27.2468C28.4821 27.8767 28.3253 28.323 28.1864 28.662L28.0522 28.9689C27.8919 29.3038 27.7981 29.3776 27.7565 29.4075C27.7254 29.4298 27.6614 29.4719 27.4758 29.5106L27.2465 29.5479C27.0436 29.5728 26.806 29.587 26.5081 29.5964L25.4073 29.6142L25.3455 29.6153C22.0505 29.6503 19.3668 29.6775 17.3562 29.8624L16.5355 29.9519C15.6246 30.0688 14.7765 30.2424 14.0635 30.5367L13.7674 30.6702C13.0061 31.0434 12.328 31.6403 12.0348 32.5515L11.9812 32.738C11.7577 33.624 11.971 34.4332 12.3786 35.1149L12.5645 35.3986C13.059 36.0947 13.7998 36.7301 14.6458 37.3375L15.3198 37.8019C16.9879 38.9103 19.3175 40.1961 22.1748 41.7746L34.238 48.4394L35.6206 49.2003C36.9417 49.9202 38.0776 50.5066 39.0333 50.8666L39.516 51.0344C40.6626 51.3952 41.933 51.5114 43.06 50.7014Z",stroke:"black",strokeWidth:1.5}),d.createElement("defs",null,d.createElement("filter",{id:"filter0_d_3118_29179",x:2.64307,y:6.25732,width:51.1152,height:66.3022,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},d.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),d.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),d.createElement("feMorphology",{radius:2,operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_3118_29179"}),d.createElement("feOffset",{dy:16}),d.createElement("feGaussianBlur",{stdDeviation:4}),d.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),d.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"}),d.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3118_29179"}),d.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3118_29179",result:"shape"})))),Rye=Object.freeze(Object.defineProperty({__proto__:null,default:c_},Symbol.toStringTag,{value:"Module"}));function Xne(e){const{renderFocusedElement:t,children:n,className:s,options:o={},isOpen:r}=e,{offset:c=1,placement:l="bottom-end",adjustArrowPosition:u=S=>S}=o,m=d.useRef(null),{state:p,setState:f}=Nb({controlledValue:r,defaultValue:!1}),{y:h=0}=u({x:0,y:0})??{},{refs:g,context:y,floatingStyles:b,middlewareData:x}=Zi({open:p,placement:l,onOpenChange:f,middleware:[Ca(c),xa(),XS({element:m,padding:{right:-38,bottom:h}})],whileElementsMounted:_a}),v=u(x.arrow);return i.jsxs(i.Fragment,{children:[t==null?void 0:t({ref:g.setReference},p),p&&i.jsx(qi,{children:i.jsx(Mm,{context:y,modal:!1,children:i.jsxs("div",{ref:g.setFloating,style:b,className:W("flex outline-none",Ke.coachmark),children:[i.jsx("div",{className:W("start-0 flex rounded-ee-md rounded-es-3xl rounded-se-3xl rounded-ss-3xl border border-background-200 border-white shadow-sm",s),children:n}),i.jsx("div",{ref:m,style:{position:"absolute",left:v==null?void 0:v.x,top:(v==null?void 0:v.y)??h},className:"pointer-events-none",children:i.jsx(c_,{className:"my-5 size-14"})})]})})})]})}const cd="absolute inset-0 rounded-full",wx="relative size-6 transition-colors",Ix=2,ese=50,tse=20,l_=.6,nse=3,sse=.55,ose=1,ase={opacity:0,scale:l_},rse={opacity:1,scale:1,transition:{...$E,delay:KE}};function ise(e){const{t}=V(),{isMuted:n,inputVolume:s,isOutputPlaying:o,enableSpinAnimation:r=!0,className:c,coachUserUnmute:l=!1,onClick:u}=e,m=!o&&!n,[p,f]=d.useState(!1),h=lt({breakpoint:"sm"});d.useEffect(()=>{let S;return l&&(S=setTimeout(()=>f(!0),600)),()=>clearTimeout(S)},[l]);const g=J5(s,GE),y=Oi(g,[Ix,ese],[l_,nse]),b=Oi(g,[Ix,tse],[sse,ose]),{focusable:x,refCallback:v}=yr({autoRestoreFocus:!0,forceFocus:!0});return i.jsx(Xne,{className:"max-w-72 border-white bg-black/90 p-2 dark:bg-white",isOpen:p,options:{placement:"top-end",offset:h?{mainAxis:27,crossAxis:10}:{mainAxis:15,crossAxis:-55},adjustArrowPosition:S=>h?{x:S!=null&&S.x?S.x-20:void 0,y:12}:S},renderFocusedElement:S=>i.jsxs(i.Fragment,{children:[p?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute start-1/2 -my-4 size-fit -translate-x-1/2",children:i.jsx(jt,{duration:.6,exitDelay:4.5,exitDuration:.5,children:i.jsx(ee.div,{animate:{rotate:360},transition:{duration:2.5,repeat:1,ease:"linear"},children:i.jsx(r_,{className:"size-20"})})})}),i.jsx("div",{className:"absolute start-1/2 -my-4 size-fit -translate-x-1/2",children:i.jsx(ee.div,{className:"size-[80px] rounded-full border-4 border-solid border-black/80 shadow-sm dark:border-white",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:4.5,ease:"linear"}})})]}):null,i.jsx(ee.button,{...S,title:t(n?"composer.unmuteMicrophone":"composer.muteMicrophone"),className:F("size-12 rounded-full",bl,Yl,c),layout:!l,initial:"initial",animate:"enter",variants:{initial:ase,enter:rse},onClick:u,ref:C=>{S.ref(C),v(C)},"data-spatial-focus-key":x.focusKey,children:i.jsxs(ee.span,{className:F("flex items-center justify-center overflow-hidden border",n?"border-transparent bg-black/8 dark:bg-white/5":"border-white bg-white/50 hover:bg-white/80 dark:border-white/12 dark:bg-black/40",m&&"text-spot-blue-450 dark:text-midnight-300",cd),layout:!l,children:[i.jsx(at,{children:m&&i.jsx(ee.div,{className:F("flex items-center justify-center overflow-hidden rounded-full blur-[6px]",cd),layout:!0,initial:Ce,animate:Be,exit:Ce,style:{scale:y},children:i.jsx(ee.div,{className:F(cd),layout:!0,style:{opacity:b},children:i.jsx(ee.div,{className:F(r&&"animate-spin-slow","bg-gradient-audio-input-light dark:bg-gradient-audio-input-dark",cd)})})})}),n?i.jsx(i_,{className:wx,"aria-hidden":!0}):i.jsx(Cm,{className:wx,"aria-hidden":!0})]})})]}),children:i.jsx("div",{className:"flex p-0 px-3 text-white text-sm dark:text-foreground-300",children:t("voice.v2.waitingInteractionUnmuteSubheader")})})}class u_{constructor(){N(this,"audioContext");N(this,"audioAnalyser")}get isInitialized(){return this.audioContext!==void 0&&this.audioContext.state!=="closed"}async initialize({sampleRate:t}){this.audioContext&&await this.cleanup();try{this.audioContext=new AudioContext({sampleRate:t}),this.audioAnalyser=this.audioContext.createAnalyser()}catch(n){const s=n instanceof Error?n.message:String(n);throw new Error(`Failed to initialize audio context: ${s}`)}}async cleanup(){this.audioContext&&this.audioContext.state!=="closed"&&await this.audioContext.close(),this.audioContext=void 0,this.audioAnalyser=void 0}}class cse{constructor(){N(this,"ENERGY_THRESHOLD_MULTIPLIER",3);N(this,"SILENCE_DURATION",500);N(this,"MIN_SPEECH_DURATION",300);N(this,"ZERO_CROSSING_MIN",.01);N(this,"ZERO_CROSSING_MAX",.5);N(this,"MAX_VALID_LATENCY_MS",2e3);N(this,"AUDIO_SAMPLE_OFFSET",128);N(this,"audioAnalyser");N(this,"voiceDetectionRaf",-1);N(this,"voiceDetectionActive",!1);N(this,"energyHistory",[]);N(this,"noiseFloor",.01);N(this,"isSpeaking",!1);N(this,"silenceStartTime",0);N(this,"lastVoiceDetectionTime",0);N(this,"lastClientSideVoiceEndTime",null);N(this,"serverVADLatencyMeasurements",[]);N(this,"onClientSideVoiceEndDetected")}startVoiceDetection(t){this.voiceDetectionActive&&this.stopVoiceDetection(),!(typeof window>"u")&&(this.audioAnalyser=t,this.voiceDetectionActive=!0,this.energyHistory=[],this.noiseFloor=.01,this.isSpeaking=!1,this.silenceStartTime=0,this.lastVoiceDetectionTime=Date.now(),this.lastClientSideVoiceEndTime=null,this.serverVADLatencyMeasurements=[],this.performVoiceDetection())}stopVoiceDetection(){this.voiceDetectionRaf!==-1&&(cancelAnimationFrame(this.voiceDetectionRaf),this.voiceDetectionRaf=-1),this.voiceDetectionActive=!1,this.audioAnalyser=void 0,this.displayServerVADLatencyStatistics()}setOnClientSideVoiceEndDetected(t){this.onClientSideVoiceEndDetected=t}onServerSpeechEndDetected(){if(`${this.lastClientSideVoiceEndTime}`,`${this.voiceDetectionActive}${this.isSpeaking}`,!this.lastClientSideVoiceEndTime)return null;const t=Date.now(),n=this.lastClientSideVoiceEndTime-this.SILENCE_DURATION,s=t-n;return`${t}${this.lastClientSideVoiceEndTime}${n}${s}`,s>=0&&s<=this.MAX_VALID_LATENCY_MS?(this.serverVADLatencyMeasurements.push(s),s):null}getLastServerVADLatency(){return this.serverVADLatencyMeasurements[this.serverVADLatencyMeasurements.length-1]??null}performVoiceDetection(){var t;if(!this.voiceDetectionActive||!this.audioAnalyser){`${this.voiceDetectionActive}`,this.audioAnalyser;return}try{const n=this.audioAnalyser.frequencyBinCount,s=new Uint8Array(n);this.audioAnalyser.getByteTimeDomainData(s);const o=new Float32Array(n);for(let l=0;l<n;l+=1){const u=s[l];u!==void 0&&(o[l]=(u-this.AUDIO_SAMPLE_OFFSET)/this.AUDIO_SAMPLE_OFFSET)}const r=this.advancedVoiceDetection(o),c=Date.now();r?(this.isSpeaking||c-this.lastVoiceDetectionTime>this.MIN_SPEECH_DURATION&&(this.isSpeaking=!0,void 0),this.silenceStartTime=0,this.lastVoiceDetectionTime=c):this.isSpeaking&&(this.silenceStartTime===0?this.silenceStartTime=c:c-this.silenceStartTime>this.SILENCE_DURATION&&(this.isSpeaking=!1,this.lastClientSideVoiceEndTime=c,(t=this.onClientSideVoiceEndDetected)==null||t.call(this)))}catch{}this.voiceDetectionRaf=requestAnimationFrame(()=>{this.performVoiceDetection()})}advancedVoiceDetection(t){let n=0,s=0;for(let p=0;p<t.length;p+=1){const f=t[p];if(f!==void 0&&(n+=f*f,p>0)){const h=t[p-1];h!==void 0&&h>=0!=f>=0&&(s+=1)}}n=Math.sqrt(n/t.length);const o=s/t.length;if(this.energyHistory.push(n),this.energyHistory.length>100){this.energyHistory.shift();const p=[...this.energyHistory].sort((h,g)=>h-g),f=p[Math.floor(p.length*.1)];f!==void 0&&(this.noiseFloor=f)}const r=this.noiseFloor*this.ENERGY_THRESHOLD_MULTIPLIER,l=n-this.noiseFloor>r,u=o>this.ZERO_CROSSING_MIN&&o<this.ZERO_CROSSING_MAX;return l&&u}displayServerVADLatencyStatistics(){if(this.serverVADLatencyMeasurements.length===0)return;const t=this.serverVADLatencyMeasurements,n=t.length,s=t.reduce((o,r)=>o+r,0)/n;[...t].sort((o,r)=>o-r),Math.min(...t),Math.max(...t),`${s.toFixed(1)}`,`${t.join(", ")}`}}const qg=24e3,xm=24e3,lse=1;function use(e){const t=atob(e),n=t.length,s=new Uint8Array(n);for(let o=0;o<n;o+=1)s[o]=t.charCodeAt(o);return s.buffer}function dse(e){let t="";const n=new Uint8Array(e),s=n.byteLength;for(let o=0;o<s;o+=1){const r=n[o];typeof r=="number"&&(t+=String.fromCharCode(r))}return btoa(t)}function Pye(e){if(!e.every(t=>Number.isInteger(t)&&t>=0&&t<=255))throw new Error("All bytes must be integers between 0 and 255");return new Uint8Array(e).buffer}function d_(e){const t=use(e),n=new Int16Array(t),s=new Float32Array(n.length);for(let o=0;o<n.length;o+=1)s[o]=n[o]/32768;return s}function mse(e){const t=e<0?e*32768:e*32767;return Math.max(-32768,Math.min(32767,t))}function pse(e){let t=0;for(const n of e){const s=n-128;t+=s*s}return Math.sqrt(t/e.length)}function m_(e){return e/Kl}function Lye(e){return`${m_(e)}x`}function jye(e,t){const n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function Oye(e){const t=Math.floor(e/60),n=e%60;return`${t}:${n.toString().padStart(2,"0")}`}function Tx(e,t){Ge.emit(`voice:audio-${t}-volume-changed`,e)}function fse(e,t,n){if(t===n)return e;const s=e.length,o=t/n,r=Math.ceil(s/o),c=new Float32Array(r);for(let l=0;l<r;l+=1){const u=l*o,m=Math.floor(u),p=m+1,f=e[m]??0,h=e[p]??0,g=u-m;c[l]=f*(1-g)+h*g}return c}class p_{constructor(t){N(this,"mode");N(this,"volumeUpdateRaf",-1);N(this,"audioAnalyser");N(this,"volume",li(0));this.mode=t}startTracking(t){this.audioAnalyser&&this.stopTracking(),this.audioAnalyser=t,this.trackVolume()}trackVolume(){if(!this.audioAnalyser){this.stopTracking();return}const t=new Uint8Array(this.audioAnalyser.frequencyBinCount);this.audioAnalyser.getByteTimeDomainData(t);const n=pse(t);Math.abs(n-this.volume.get())>lse&&(this.volume.set(n),Tx(n,this.mode)),this.volumeUpdateRaf=requestAnimationFrame(()=>{this.trackVolume()})}stopTracking(){this.volumeUpdateRaf!==-1&&(cancelAnimationFrame(this.volumeUpdateRaf),this.volumeUpdateRaf=-1),this.audioAnalyser=void 0,this.volume.set(0),Tx(0,this.mode)}}const hse="/static/cmc/assets/call_ending-BxIIadI4.mp3",gse="/static/cmc/assets/call_opening-CKuCznU5.mp3";function bse(){return D("use-appearance-component-package")}function vse(){return ce("use-appearance-component-package")}class yse{constructor(t={}){N(this,"options");N(this,"antiAliasFilter");this.options={windowSize:t.windowSize??1024,overlap:t.overlap??.7,tolerance:t.tolerance??200,useAntiAlias:t.useAntiAlias??!0,correlationWindowMultiplier:t.correlationWindowMultiplier??1.5,useSampleRateAwareScaling:t.useSampleRateAwareScaling??!1,useFirstFrameCompensation:t.useFirstFrameCompensation??!0},this.options.useAntiAlias&&this.initAntiAliasFilter()}initAntiAliasFilter(){this.antiAliasFilter=new Float32Array([.03,.09,.2,.36,.2,.09,.03])}getSampleRateScaling(t){if(!this.options.useSampleRateAwareScaling||!t)return 1;const s=t/24e3;return Math.max(.5,Math.min(2,s))}process(t,n=1,s){const o=this.getSampleRateScaling(s),{tolerance:r}=this.options;let{windowSize:c}=this.options;const{overlap:l}=this.options,{useAntiAlias:u}=this.options;if(this.options.useSampleRateAwareScaling&&o!==1&&(c=Math.round(c*o),c=Math.max(256,Math.min(4096,c))),Math.abs(n-1)<.001)return t;const m=u?this.applyAntiAliasFilter(t):t,p=Math.round(c*(1-l)),f=Math.round(p*n),h=Math.ceil(m.length/n),g=new Float32Array(h),y=this.createImprovedWindow(c),b=Math.min(c,m.length,h);this.overlapAddFrameEnhanced(m,0,g,0,y,b);let x=0,v=0;for(;x<h-c&&!(v>=m.length-c-r);){const S=this.findBestMatchEnhanced(m,v,g,x,c,r);this.overlapAddFrameEnhanced(m,S,g,x,y,c),x+=p,v+=f}return g}applyAntiAliasFilter(t){if(!this.antiAliasFilter||this.antiAliasFilter.length===0)return t;const n=new Float32Array(t.length),s=this.antiAliasFilter.length,o=Math.floor(s/2);for(let r=0;r<t.length;r+=1){let c=0;for(let l=0;l<s;l+=1){const u=r-o+l;u>=0&&u<t.length&&(c+=(t[u]??0)*(this.antiAliasFilter[l]??0))}n[r]=c}return n}createImprovedWindow(t){const n=new Float32Array(t);for(let s=0;s<t;s+=1){const o=2*Math.PI*s/(t-1),r=.5*(1-Math.cos(o)),c=.04*Math.cos(2*o);n[s]=r-c}return n}setOptions(t){this.options={...this.options,...t}}overlapAddFrameEnhanced(t,n,s,o,r,c){const l=Math.min(o+c,s.length),u=Math.min(c,t.length-n,l-o),m=o===0,p=this.options.useFirstFrameCompensation??!0;let f=1;if(m&&p){const{windowSize:h,overlap:g}=this.options;h>=1700&&g>=.8?f=1.5:h>=1400&&g>=.75?f=1.15:h>=1200&&g>=.7?f=1.25:f=1.2}for(let h=0;h<u;h+=1){const g=t[n+h]??0,y=r[h]??0,b=o+h;let x=1;o>0&&h<c*.1&&(x=h/(c*.1));let v=1;if(m&&p){const S=Math.max(.1,1-h/c*.9);v=1+(f-1)*S}typeof s[b]=="number"&&(s[b]+=g*y*x*v)}}findOptimalStartPosition(t,n,s,o){const r=Math.min(o,s/4),c=Math.max(0,n-r),l=Math.min(t.length-s,n+r);let u=n,m=-1/0;for(let p=c;p<=l;p+=1){let f=0,h=0,g=0,y=0;const b=Math.min(s,512);for(let A=0;A<b;A+=1)if(p+A<t.length){const E=t[p+A]??0;f+=E*E,h+=Math.abs(E),A>0&&y*E<0&&(g+=1),y=E}const x=Math.sqrt(f/b),v=h/b,S=v>0?x/v:0,C=x*.6,T=S*.3,w=g>0?Math.min(1,10/g)*.1:0,I=C+T+w;I>m&&(m=I,u=p)}return u}findBestMatchEnhanced(t,n,s,o,r,c){if(o===0)return this.findOptimalStartPosition(t,n,r,c);const l=Math.max(0,n-c),u=Math.min(t.length-r,n+c),m=Math.floor(r*(this.options.correlationWindowMultiplier??1.5)),p=Math.min(m,r),f=new Float32Array(p),h=Math.max(0,o-p);let g=0,y=0,b=0;for(let S=0;S<p;S+=1){const C=h+S;if(C<s.length){f[S]=s[C]??0;const T=f[S]??0;g+=T*T,S>0&&b*T<0&&(y+=1),b=T}}let x=n,v=-1/0;for(let S=l;S<=u;S+=1){let C=0,T=0,w=0,I=0;for(let H=0;H<p;H+=1)if(S+H<t.length&&h+H<s.length){const te=t[S+H]??0;C+=(f[H]??0)*te,T+=te*te,H>0&&I*te<0&&(w+=1),I=te}const A=g>0&&T>0?C/Math.sqrt(g*T):0,E=Math.abs(w-y),R=Math.max(w,y),U=R>0?1-E/R:1,K=A*.8+U*.2;K>v&&(v=K,x=S)}return x}}const Cse={windowSize:2048,overlap:.5,tolerance:128,useAntiAlias:!0,correlationWindowMultiplier:1.6,useFirstFrameCompensation:!0},xse={windowSize:1792,overlap:.5,tolerance:300,useAntiAlias:!0,correlationWindowMultiplier:1.8,useFirstFrameCompensation:!0},Sse={windowSize:1280,overlap:.65,tolerance:280,useAntiAlias:!0,correlationWindowMultiplier:1.6,useFirstFrameCompensation:!0},wse={windowSize:1536,overlap:.75,tolerance:300,useAntiAlias:!0,correlationWindowMultiplier:1.6,useFirstFrameCompensation:!0};function Ise(e){switch(e){case 1.5:return wse;case 1.25:return Sse;case 1.1:return xse;case .8:return Cse;case 1:default:return}}const Ex=new yse;function Tse(e,t,n){const s=Ise(t);return s?(Ex.setOptions(s),Ex.process(e,t,n)):e}function Kg(){return/firefox/i.test(navigator.userAgent)}function f_(e,t,n=1){const s=typeof e=="string"?d_(e):e;let o=s;n!==1&&(o=Tse(s,n,xm));const r=t.createBuffer(1,o.length,xm);r.getChannelData(0).set(o);const c=t.createBufferSource();return c.buffer=r,c}async function Ese(e,t,n,s,o){const r=s&&await s();let c=8192;ce("audio-buffer-size-4096")?c=4096:ce("audio-buffer-size-2048")&&(c=2048);const l=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0,autoGainControl:!0,sampleRate:Kg()?void 0:qg,...r}}),u=l.getAudioTracks()[0];u&&(u.onended=f=>{o==null||o(f)});const m=t.createMediaStreamSource(l),p=t.createScriptProcessor(c,1,1);return m.connect(n),n.connect(p),p.connect(t.destination),p.onaudioprocess=f=>{let h=f.inputBuffer.getChannelData(0);Kg()&&(h=fse(h,t.sampleRate,qg));const g=new Int16Array(h.length);for(let b=0;b<h.length;b+=1){const x=h[b];typeof x=="number"&&(g[b]=mse(x))}const y=dse(g.buffer);e(y)},l}async function Ax(e,t){const n=await Promise.race([ip(t),new Promise(s=>{try{const o=new Audio(e);o.addEventListener("ended",()=>s(o),{once:!0}),o.play()}catch{}})]);n==null||n.remove()}const Ase=xm*2;class _se{constructor(){N(this,"audioBuffer",[]);N(this,"totalBufferSize",0);N(this,"lastProcessOptions",null)}addAudioData(t){if(!t)return!1;const n=d_(t),s=n.length;return s===0?!1:(this.audioBuffer.push({audioData:n,bufferSize:s}),this.totalBufferSize+=s,this.totalBufferSize>=Ase)}getLastProcessOptions(){return this.lastProcessOptions}setLastProcessOptions(t){this.lastProcessOptions=t}mergeAudioChunks(){const t=new Float32Array(this.totalBufferSize);let n=0;for(const s of this.audioBuffer){const{audioData:o}=s;t.set(o,n),n+=o.length}return t}getAudioData(){if(this.audioBuffer.length===0)return null;if(this.audioBuffer.length===1){const t=this.audioBuffer[0];return t?t.audioData:null}return this.mergeAudioChunks()}clearBuffer(){this.audioBuffer=[],this.totalBufferSize=0}}function kse(e,t,n){t.setLastProcessOptions(e),t.addAudioData(e.data)&&h_(t,n)}function Nse(e,t){h_(e,t)}function h_(e,t){const n=e.getAudioData(),s=e.getLastProcessOptions();!n||!s||(t(f_(n,s.audioContext,s.playbackRate)),e.clearBuffer())}const Dye={lmks_rest:"lmksRest",frames:"frames",expr:"expr",neck_pose:"neckPose",jaw_pose:"jawPose",eyes_pose:"eyesPose",eyes_open_ratio:"eyesOpenRatio",rotation:"rotation",translation:"translation",lmks:"lmks"};class Mse{constructor(t,n){N(this,"lmksRest");N(this,"frames");this.lmksRest=t,this.frames=n}}class Rse{constructor(t,n){N(this,"exp");N(this,"pose");this.exp=t,this.pose=n}isValid(){return this.exp.dtype!==""&&this.exp.data.length>0||this.pose.dtype!==""&&this.pose.data.length>0}}const{EPSILON:Zg}=Number,Pse=["Viseme_Neutral","Viseme_AI","Viseme_E","Viseme_U","Viseme_CDG","Viseme_WQ","Viseme_O","Viseme_L","Viseme_ShCh","Viseme_FV","Viseme_MBP"],Lse=[0,1,1,6,2,3,4,5,6,1,6,1,2,5,7,4,8,7,9,4,4,10],fa={enablePose:!1,enableNeck:!1,enableEye:!1,enableEyebrow:!1};function Uye(e){fa.enablePose=e,fa.enableNeck=e,fa.enableEye=e,fa.enableEyebrow=e}function jse(e,t=null){const{Quaternion:n,Vector3:s}=os.getCore(),o=.3,r=.5,c=30/360*Math.PI,l=1,u=.01,m=["eye_BlinkUp","eye_Squint","eye_RSquare"],p=[.5,.2,.2],f=.5,h=.3,g=n.RotationAxis(s.Right(),Math.PI/4),y=g.conjugate(),b=new s(l,l,l),x=new s(-1,-1,-1),v={pose:{translation:new s(0,0,0),rotation:n.Identity()},expression:{eyes_open_ratio:0,eye_BlinkUp:0,eye_Squint:0,eye_RSquare:0,eyebrow_value:0,eyebrow_height:0,eyebrow_bend:0,viseme:new Array(11).fill(0),viseme22_idx:0,viseme11_idx:0},offset:e.offset??null};if(fa.enablePose){let C=_x(e.rotation);if(fa.enableNeck){const A=_x(e.neckPose);C.multiplyInPlace(A)}C=g.multiplyToRef(C,C).multiplyToRef(y,C);let[T,w]=Dse(C);w>c&&(w=c),v.pose.rotation=n.RotationAxis(T,w);const I=s.FromArray(e.translation);s.ClampToRef(I,x,b,I),v.pose.translation=I}const S=e.eyesOpenRatio[0]??0;if(v.expression.eyes_open_ratio=S,fa.enableEye&&t!==null){let C=0,T=0,w=0;if(t.expression.eye_BlinkUp>0)S<.9&&(C=1,T=0,w=0);else if(t.expression.eye_Squint>0)S<.9&&(C=0,T=f,w=0);else if(t.expression.eye_RSquare>0)S>1.1&&(C=0,T=0,w=h);else{const I=t.expression.eyes_open_ratio;S<.75&&I<.8?(C=1,T=0,w=0):S<.8&&I<.85?(C=0,T=f,w=0):S>1.1&&(C=0,T=0,w=h)}v.expression.eye_BlinkUp=C,v.expression.eye_Squint=T,v.expression.eye_RSquare=w}if(fa.enableEyebrow){const C=e.viseme.slice(1,4);v.expression.eyebrow_value=e.viseme[2]??0,v.expression.eyebrow_height=q2(((C[1]??0)-0)*2)*u,v.expression.eyebrow_bend=q2((0-(C[1]??0))*3)}{const C=Math.round(e.viseme[0]??0),T=Lse[C]??0;v.expression.viseme[T]=1,t!==null&&t.expression.viseme22_idx!==C&&(v.expression.viseme[T]=.9),v.expression.viseme22_idx=C,v.expression.viseme11_idx=T}if(t!==null){for(const[E,R]of m.entries()){const U=p[E]??0;v.expression[R]=kx(t.expression[R],v.expression[R],0,U)}const C=v.expression.viseme,T=t.expression.viseme;if((C[10]??0)<1e-6)for(let E=0;E<Pse.length;E+=1)C[E]=kx(T[E]??0,C[E]??0,0,o);const I=v.pose.translation,A=t.pose.translation;v.pose.translation=new s(I.x*r+A.x*(1-r),I.y*r+A.y*(1-r),I.z*r+A.z*(1-r))}return v}function Ose(e){const{TmpVectors:t,Vector3:n}=os.getCore(),s=t.Vector3[0];s.fromArray(e);const o=s.length();return o<Zg?[n.Up(),0]:[s.scale(1/o),o]}function _x(e){const{Quaternion:t}=os.getCore(),[n,s]=Ose(e);return t.RotationAxis(n,s)}function Dse(e){const{Vector3:t}=os.getCore(),n=e.lengthSquared();Math.abs(n-1)>Zg&&e.normalize();const s=Math.acos(e.w),o=s*2,r=Math.sin(s),c=Math.abs(r)<5e-4?1:r,l=new t(e.x/c,e.y/c,e.z/c);return l.lengthSquared()<Zg&&(l.y=1),[l,o]}function kx(e,t,n,s){return Math.abs(t-e)<n?e:e<t?Math.min(e+s,t):Math.max(e-s,t)}function Use(e,t,n){const{Vector3:s,Quaternion:o}=os.getCore(),{Lerp:r}=os.getMath();return{pose:{translation:s.Lerp(e.pose.translation,t.pose.translation,n),rotation:o.Slerp(e.pose.rotation,t.pose.rotation,n)},expression:{eyes_open_ratio:0,eye_BlinkUp:r(e.expression.eye_BlinkUp,t.expression.eye_BlinkUp,n),eye_Squint:r(e.expression.eye_Squint,t.expression.eye_Squint,n),eye_RSquare:r(e.expression.eye_RSquare,t.expression.eye_RSquare,n),eyebrow_value:0,eyebrow_height:r(e.expression.eyebrow_height,t.expression.eyebrow_height,n),eyebrow_bend:r(e.expression.eyebrow_bend,t.expression.eyebrow_bend,n),viseme:new Array(11).fill(0).map((l,u)=>r(e.expression.viseme[u]??0,t.expression.viseme[u]??0,n)),viseme22_idx:0,viseme11_idx:0}}}const Fse=3.141592653589793,Nx="System.Single, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089";function Bse(e){const t=[],n=[],s=(l,u)=>{if(u>=l.length)throw new Error("index out of range");return l[u]===void 0?0:l[u]};for(const{frame:l,offset:u}of e){if(l.length<97)return console.log("Invalid frame length"),null;const m=new Array(28).fill(0);m[12]=s(l,78),m[16]=s(l,43),m[17]=s(l,43),m[21]=s(l,72),m[23]=.5*s(l,52)+.5*s(l,53),m[24]=.75*s(l,76),m[26]=.75*s(l,76),t.push({exp:m,offset:u});const p=[[-1*s(l,88)+Fse,-1*s(l,89),s(l,90)],[0,s(l,92),-1*s(l,91)],[0,s(l,95),-1*s(l,94)]];n.push(p)}const o={dtype:Nx,shape:[t.length,16],data:t,isColumnMajor:!1},r={dtype:Nx,shape:[n.length,3,3],data:n,isColumnMajor:!1};return new Rse(o,r)}class Vse{constructor(t){N(this,"activeModel",null);N(this,"a2eAnimationData",null);N(this,"vasaAnimationData",null);N(this,"vasaExpFrames",[]);N(this,"frameOffsetTimeAvailable",!1);N(this,"currentFrameIndex",0);this.getPlayTime=t}get fps(){return this.activeModel==="spda2e"?kO:this.activeModel==="vasa"?NO:25}get frameCount(){return this.activeModel==="spda2e"&&this.a2eAnimationData?this.a2eAnimationData.exp.data.length:this.activeModel==="vasa"&&this.vasaAnimationData?this.vasaAnimationData.frames.length:0}get playbackTime(){return this.getPlayTime()}reset(){this.activeModel=null,this.a2eAnimationData=null,this.vasaAnimationData=null,this.vasaExpFrames=[],this.frameOffsetTimeAvailable=!1,this.currentFrameIndex=0}setFrameData({frame:t,offsetInMilliseconds:n}){t&&(this.activeModel=t.model,t.model==="spda2e"&&this.setA2EFrame(t.poseDiffusion,n),t.model==="vasa"&&this.setVasaFrameData(t,n))}setA2EFrame(t,n){if(!(t!=null&&t.length))return;const s=Bse([{frame:t,offset:n}]);if(s){if(!this.a2eAnimationData){this.a2eAnimationData=s;return}this.a2eAnimationData.exp.data.push(...s.exp.data),this.a2eAnimationData.pose.data.push(...s.pose.data),this.frameOffsetTimeAvailable=this.a2eAnimationData.exp.data.every(({offset:o})=>!Number.isNaN(o))}}setVasaFrameData(t,n){if(!t)return;const s={...t,offset:n};if(!this.vasaAnimationData){this.vasaAnimationData=new Mse([],[s]);return}this.vasaExpFrames.push(jse(s,this.vasaExpFrames.at(-1))),this.vasaAnimationData.frames.push(s),this.frameOffsetTimeAvailable=this.vasaAnimationData.frames.every(({offset:o})=>!Number.isNaN(o))}getCurrentFrameIndex(t){if(this.frameOffsetTimeAvailable){let n=this.currentFrameIndex;for(;n<t.length;n+=1){this.currentFrameIndex=n;const s=t[n];if((s==null?void 0:s.offset)!==void 0&&s.offset!==null&&s.offset/1e3>=this.playbackTime)break}return n}return Math.round(this.playbackTime/(1/this.fps))}getCurrentA2EFrame(){if(!this.a2eAnimationData)return null;const t=this.a2eAnimationData.exp.data;return this.currentFrameIndex=this.getCurrentFrameIndex(t),t[this.currentFrameIndex]??null}getCurrentVasaFrame(){if(!this.vasaAnimationData)return null;const{frames:t,lmksRest:n}=this.vasaAnimationData;this.currentFrameIndex=this.getCurrentFrameIndex(t);const s=t[this.currentFrameIndex];return s?{frame:s,lmksRest:n}:null}getCurrentVasaExpFrame(){if(!this.vasaAnimationData)return null;this.currentFrameIndex=this.getCurrentFrameIndex(this.vasaExpFrames);const t=this.vasaExpFrames[this.currentFrameIndex-1],n=this.vasaExpFrames[this.currentFrameIndex];if(t&&n&&this.playbackTime<(n.offset??1/0)/1e3){const s=this.playbackTime-(t.offset??0)/1e3;return Use(t,n,s)}return n??null}}class Hse extends EventTarget{constructor(){super(...arguments);N(this,"audioContextManager",new u_);N(this,"volumeTracker",new p_("input"));N(this,"clientVADTracker",new cse);N(this,"audioStream",null);N(this,"isMuted",!1)}get volume(){return this.volumeTracker.volume}get audioContext(){return this.audioContextManager.audioContext}startVoiceDetection(){if(!ce("enable-vad-latency-measure"))return;const n=this.audioContextManager.audioAnalyser;n&&this.clientVADTracker.startVoiceDetection(n)}stopVoiceDetection(){ce("enable-vad-latency-measure")&&this.clientVADTracker.stopVoiceDetection()}setOnClientSideVoiceEndDetected(n){ce("enable-vad-latency-measure")&&this.clientVADTracker.setOnClientSideVoiceEndDetected(n)}onServerSpeechEndDetected(){return ce("enable-vad-latency-measure")?this.clientVADTracker.onServerSpeechEndDetected():null}getLastServerVADLatency(){return ce("enable-vad-latency-measure")?this.clientVADTracker.getLastServerVADLatency():null}get isInputMuted(){return this.isMuted}set isInputMuted(n){this.toggleMute(n)}async startAudioCapture(n){this.audioContextManager.isInitialized&&this.stopAudioCapture();try{await this.audioContextManager.initialize({sampleRate:Kg()?void 0:qg})}catch(l){throw this.dispatchEvent(new CustomEvent("error",{detail:l})),l}const s=()=>{this.stopAudioCapture(),this.dispatchEvent(new CustomEvent("audioTrackEnded"))},o=l=>{this.dispatchEvent(new CustomEvent("audioData",{detail:l}))},{audioContext:r,audioAnalyser:c}=this.audioContextManager;r&&c&&(this.audioStream=await Ese(o,r,c,n,s),this.isInputMuted&&this.toggleMute(!0),this.volumeTracker.startTracking(c),this.startVoiceDetection())}stopAudioCapture(){if(this.audioStream){for(const n of this.audioStream.getTracks())n.stop();this.audioStream=null}this.volumeTracker.stopTracking(),this.stopVoiceDetection(),this.audioContextManager.cleanup()}toggleMute(n=!this.isMuted){if(this.audioStream)for(const s of this.audioStream.getTracks())s.enabled=!n;this.isMuted!==n&&(this.isMuted=n,this.dispatchEvent(new CustomEvent("muteStateChanged",{detail:n})))}}class zse extends EventTarget{constructor(){super(...arguments);N(this,"audioContextManager",new u_);N(this,"volumeTracker",new p_("output"));N(this,"outputGainNode",null);N(this,"outputSourceNodes",new Set);N(this,"audioDuration",0);N(this,"nextBufferTime",0);N(this,"audioOffset",0);N(this,"currentPlaybackRate",1);N(this,"bufferManager",new _se);N(this,"startJinglePromise");N(this,"animationSyncPromise");N(this,"audioStarted",!1);N(this,"audioChunksLoadDone",!1)}get audioContext(){return this.audioContextManager.audioContext}get audioPlaying(){var n;return((n=this.audioContext)==null?void 0:n.state)==="running"}get audioEnded(){return this.audioChunksLoadDone&&this.outputSourceNodes.size===0}get playbackTime(){if(!this.audioContext||this.audioContext.state==="closed")return 1/0;const{currentTime:n,outputLatency:s}=this.audioContext;return(n-s-this.audioOffset)*this.currentPlaybackRate}get volume(){return this.volumeTracker.volume}async initialize(n=Kl){var s;this.audioContextManager.isInitialized&&this.stopAudioPlayback(),this.currentPlaybackRate=m_(n);try{await this.audioContextManager.initialize({sampleRate:xm}),(s=this.audioContext)==null||s.suspend()}catch(o){throw this.dispatchEvent(new CustomEvent("error",{detail:o})),o}this.audioDuration=0,this.nextBufferTime=0,this.audioOffset=0,this.audioStarted=!1,this.audioChunksLoadDone=!1,this.animationSyncPromise=void 0,this.setUpOutputVolumeTracking()}setUpOutputVolumeTracking(){const{audioContext:n,audioAnalyser:s}=this.audioContextManager;!n||!s||(this.outputGainNode=n.createGain(),this.outputGainNode.connect(s),s.connect(n.destination),this.volumeTracker.startTracking(s))}appendAudioData(n){if(!this.audioContext||!this.outputGainNode)return;const s={data:n,audioContext:this.audioContext,playbackRate:this.currentPlaybackRate};if(this.currentPlaybackRate!==1)kse(s,this.bufferManager,this.appendAudioSource.bind(this));else{const o=f_(n,this.audioContext);this.appendAudioSource(o)}}appendAudioSource(n){var r;if(!this.audioContext||!this.outputGainNode||!n.buffer)return;this.outputSourceNodes.add(n),n.connect(this.outputGainNode),n.addEventListener("ended",()=>{var c;this.outputSourceNodes.delete(n),this.outputSourceNodes.size===0&&(this.audioChunksLoadDone?this.stopAudioPlayback():(c=this.audioContext)==null||c.suspend())}),this.nextBufferTime<this.audioContext.currentTime&&(this.audioOffset+=this.audioContext.currentTime-this.nextBufferTime,this.nextBufferTime=this.audioContext.currentTime),n.start(this.nextBufferTime);const s=n.buffer.length/n.buffer.sampleRate;this.nextBufferTime+=s,this.audioDuration+=s;const{Animation:o}=it;!this.audioStarted&&!this.animationSyncPromise&&(this.animationSyncPromise=(r=o.getAnimationSyncPromise())==null?void 0:r.finally(()=>{this.animationSyncPromise=void 0})),this.startPlayback()}async startPlayback(){if(this.startJinglePromise??this.animationSyncPromise){const n=it.currentTurnIndex,s=Promise.all([this.startJinglePromise,this.animationSyncPromise]);try{await s}catch(o){o instanceof Error&&(`${o.message}`,void 0)}if(n!==it.currentTurnIndex)return}this.audioContext&&this.audioContext.state!=="closed"&&(this.audioContext.resume(),this.audioStarted||(this.audioStarted=!0,this.dispatchEvent(new CustomEvent("audioStart"))))}setAudioDone(){this.audioChunksLoadDone=!0,Nse(this.bufferManager,this.appendAudioSource.bind(this))}stopAudioPlayback(){for(const n of this.outputSourceNodes)n.stop();this.bufferManager.clearBuffer(),this.outputSourceNodes.clear(),this.setAudioDone(),this.volumeTracker.stopTracking(),this.audioContextManager.cleanup(),this.audioStarted&&(this.audioStarted=!1,this.dispatchEvent(new CustomEvent("audioEnd")))}async playCallStartJingle(){this.startJinglePromise||(this.startJinglePromise=Ax(gse,3e3).finally(()=>{this.startJinglePromise=void 0})),await this.startJinglePromise}async playCallEndJingle(){await Ax(hse,3e3)}}class Wse extends EventTarget{constructor(){super(...arguments);N(this,"isAnimationEnabled",!1);N(this,"frameManager",new Vse(()=>it.AudioOut.playbackTime));N(this,"syncHandler");N(this,"isUseAppearanceComponent",!1);N(this,"animationSyncDeferred");N(this,"appearanceReady",!1);N(this,"emotionData",null)}get currentA2EFrame(){return this.shouldAnimationPlay?this.frameManager.getCurrentA2EFrame():null}get currentVasaFrame(){return this.shouldAnimationPlay?this.frameManager.getCurrentVasaFrame():null}get currentVasaExpFrame(){return this.shouldAnimationPlay?this.frameManager.getCurrentVasaExpFrame():null}get animationEnded(){return it.AudioOut.audioEnded}get shouldAnimationPlay(){return this.isAnimationEnabled&&!this.animationEnded&&it.AudioOut.audioStarted}async initSyncHandler(){if(this.isUseAppearanceComponent=vse(),!!this.isUseAppearanceComponent&&!this.syncHandler){const{AudioAnimationSyncHandler:n}=await P(async()=>{const{AudioAnimationSyncHandler:s}=await import("./index-ChQhNLNm.js");return{AudioAnimationSyncHandler:s}},__vite__mapDeps([360,361,0,1]));this.syncHandler=new n,this.syncHandler.setCurrentAudioTimeProvider(()=>it.AudioOut.playbackTime)}}async initialize(n=!1){var s;this.stopAnimation(),this.isAnimationEnabled=n,this.isUseAppearanceComponent&&((s=this.syncHandler)==null||s.startTurn())}stopAnimation(){var n;if(this.isUseAppearanceComponent){(n=this.syncHandler)==null||n.interruptTurn();return}this.frameManager.reset(),this.emotionData=null,this.isAnimationEnabled=!1,this.animationSyncDeferred&&this.animationSyncDeferred.reject()}getAnimationSyncPromise(){var n,s;if(this.isAnimationEnabled)return this.isUseAppearanceComponent?(n=this.syncHandler)==null?void 0:n.getAnimationPreparedPromise():(this.animationSyncDeferred||(this.initializeAnimationSync(),this.checkAnimationSyncPromise()),(s=this.animationSyncDeferred)==null?void 0:s.promise)}initializeAnimationSync(){let n,s;const o=new Promise((l,u)=>{n=l,s=u}),r=ip(MO),c=Promise.race([o,r]).finally(()=>{this.animationSyncDeferred=void 0});this.animationSyncDeferred={promise:c,resolve:n,reject:s}}checkAnimationSyncPromise(){var n;this.appearanceReady&&this.frameManager.frameCount>RO&&((n=this.animationSyncDeferred)==null||n.resolve())}setAnimationDone(){var n,s;this.isUseAppearanceComponent?(n=this.syncHandler)==null||n.finishTurn():this.appearanceReady&&((s=this.animationSyncDeferred)==null||s.resolve())}setAppearanceReady(){this.appearanceReady=!0,this.checkAnimationSyncPromise()}setFrameData(n){var s;!this.isAnimationEnabled||!n.frame||(this.isUseAppearanceComponent?(s=this.syncHandler)==null||s.addFrame(n):(this.frameManager.setFrameData(n),this.checkAnimationSyncPromise()))}setEmotionData(n){this.isUseAppearanceComponent?this.dispatchEvent(new CustomEvent("set-emotion",{detail:n})):this.emotionData=n}}const tr=class tr{constructor(){N(this,"AudioIn",new Hse);N(this,"AudioOut",new zse);N(this,"Animation",new Wse);N(this,"currentTurnIndex",0)}static getInstance(){return tr.instance||(tr.instance=new tr),tr.instance}};N(tr,"instance",null);let Yg=tr;const it=Yg.getInstance(),Mx=48,Rx=50;function Px(e){const{isNested:t}=e,[n,s]=d.useState(1),[o,r]=d.useState(1),c=d.useRef(void 0),l=d.useRef(void 0),u=$i(g=>{c.current=g.width,l.current=g.height,s((c.current+Mx)/c.current),r((l.current+Mx)/l.current)},{initialize:!0}),{volume:m}=it.AudioOut,p=J5(m,GE),f=Oi(p,[0,Rx],[1,n]),h=Oi(p,[0,Rx],[1,o]);return i.jsx(ee.div,{className:"absolute inset-0",ref:u,initial:Ce,animate:{...Be,transition:{delay:KE}},exit:Ce,children:i.jsx(ee.div,{className:F("absolute inset-0 flex items-center justify-center overflow-hidden rounded-6xl",t?"-scale-x-100 rounded-5xl blur-lg":"bg-stone-100/30 bg-blend-luminosity backdrop-blur-xl after:absolute after:inset-px after:rounded-6xl after:border after:border-transparent dark:bg-midnight-800/30"),layout:!0,style:{scaleX:f,scaleY:h},children:i.jsx(ee.div,{className:F("absolute -inset-16 aspect-square bg-gradient-audio-output-light bg-blend-saturation saturate-150 dark:bg-gradient-audio-output-dark dark:saturate-100",t?"animate-spin-slower opacity-20 dark:opacity-30":"animate-spin-slow opacity-40 dark:opacity-50")})})})}function Gse(e){const{dynamicHeight:t}=e;return i.jsx(ee.div,{className:F("t-bottom-fade absolute bottom-0 mx-4 box-content w-bottom-fade rounded-lg pt-bottom-fade",t?"h-bottom-fade":"h-composer"),initial:Ce,animate:Be,exit:Ce,transition:J0,children:i.jsx(Or,{isBottomFade:!0})})}function $se(e,t){const{children:n,className:s,margins:o,data:r,size:c="regular",onButtonRef:l}=e,u=r.isDisabled?"":r.title,m=c==="small";return i.jsx(ee.div,{className:W("relative shrink-0",o??"my-1",m?"h-9":"h-10",r.isVisible&&!m&&"size-10",r.isVisible&&m&&"size-9",!r.isVisible&&"overflow-hidden"),layout:!0,initial:!1,ref:t,children:i.jsx(ee.button,{type:"button",className:W("absolute flex items-center justify-center rounded-xl fill-foreground-750",m?"size-9 p-1":"size-10 p-2",ur["subtle-dimmed"],"disabled:active:bg-transparent disabled:active:bg-none",s),layout:"position",disabled:!r.isVisible||r.isDisabled,"aria-hidden":!r.isVisible,"aria-label":u,title:u,onClick:r.onClick,"data-testid":r.testId,"aria-expanded":typeof r.ariaExpanded=="boolean"?r.ariaExpanded:void 0,ref:l,children:n})})}const vs=d.forwardRef($se);function qse(){return _(d0).map(t=>t.id)}function g_(e){if(e.length===0)throw new Error("Array must have at least one element");return Math.floor(Math.random()*e.length)}function Fye(e,t){if(e.length===1)throw new Error("Array must have at least two elements");let n;do n=g_(e);while(n===t);return n}function Kse(e){if(e.length!==0)return e[g_(e)]}function Zse(e){const t=[...e];for(let n=e.length-1;n>0;n-=1){const s=Math.floor(Math.random()*(n+1)),o=t[n];o&&t[s]&&(t[n]=t[s],t[s]=o)}return t}function Bye(e,t){if(e.length!==t.length)return!1;const n=[...e].sort(),s=[...t].sort();return n.every((o,r)=>o===s[r])}const Yse=d.lazy(()=>P(()=>import("./character-B3F1MwQv.js"),__vite__mapDeps([362,0,1,363])).then(e=>({default:e.Character})));function Qse(){const[e,t]=Ee(lu),{createConversation:n}=yb(),[s,o]=d.useState(!1),r=z(mI),c=z(cr),l=qse(),u=d.useRef(null),m=_(ao);d.useEffect(()=>{if(u.current===null){const b=Kse(l);b&&(u.current=b)}},[l]);const{t:p}=V();d.useEffect(()=>{s&&u.current&&M.trackEvent({name:"system",data:{eventName:"characterPromotionShown",eventInfo_characterId:u.current}})},[s]),d.useEffect(()=>{const b=localStorage.getItem(Pj);o(!b&&m.length>=10&&m.length<14)},[e,m.length]);function f(b){switch(b){case"mica":return"mica-head";case"aqua":return"aqua-head";case"erin":return"erin-head";default:return"mica-head"}}async function h(){u.current&&(c("clicking"),M.trackEvent({name:"interaction",data:{eventName:"characterPromotionClicked",eventInfo_characterId:u.current}}),r(!0),bG({settingName:"characterId",oldValue:"",newValue:u.current}),M.setSettings({userSettingCharacterId:u.current}),await Promise.all([cn({path:"/user/settings",args:{options:{method:"PATCH"},body:{preferredCharacter:u.current}}})]))}const g=d.useCallback(async()=>{o(!1)},[]),y=d.useCallback(async()=>{u.current&&(o(!1),r(!0),t(u.current),await n())},[r,t,n]);return s?i.jsx("div",{className:"pointer-events-auto absolute -top-40 end-4 size-56 pb-2",onClick:h,onKeyDown:async b=>{b.key==="Enter"&&await h()},role:"button",tabIndex:0,"aria-label":p("characterAnimation.characterOptInAriaLabelText"),children:i.jsx(Yse,{className:"outline-none",characterId:f(u.current),onCharacterDismissed:g,onCharacterClicked:y})}):null}const b_="0px 0px 0px 1px rgb(255, 255, 255) inset",v_="0px 0px 0px 1px rgba(255, 255, 255, 0.08) inset",Jse="0px 10px 24px 0px rgba(0, 0, 0, 0.18)",Xse="0px 42px 30px 0px rgba(0, 0, 0, 0.06)",eoe="0px 16px 48px -2px rgba(244, 190, 146, 0.18)",toe="0px 16px 48px -2px rgba(0, 0, 0, 0.25)",noe="0px 16px 24px -2px rgba(0, 0, 0, 0.1)",soe="0px 16px 24px -2px rgba(0, 0, 0, 0.25)",ooe=28,aoe=32,roe=24,ioe=26,coe="relative flex grow flex-col overflow-hidden before:absolute before:inset-0 before:rounded-3xl before:border-2 before:border-stroke-350",Vye="bg-white/90 dark:bg-midnight-900/80",loe="w-auto rounded-3xl contrast-more:border-2",uoe="bg-gradient-to-b from-white/90 to-white/0 dark:from-black/30 dark:to-midnight-800/10",doe="bg-white/90 dark:bg-midnight-850/60";function av(e){const{title:t,onClick:n,appearDelay:s=NR,appearDuration:o=Fn.audio.unavailable,className:r}=e;return i.jsx(ee.div,{layout:"position",initial:"initial",animate:"animate",className:"relative flex h-12 shrink-0 items-center",variants:{initial:{...Ce,scale:.9},animate:{...Be,scale:1,transition:{...$E,delay:s,duration:o}}},children:i.jsx("button",{type:"button",onClick:n,title:t,className:F("min-w-44",bl,ur.strong,B1["40-base"],V1["40-base"],Yl,"rounded-2xl before:rounded-2xl",r),children:t})})}function ld(e){const{children:t,className:n}=e;return i.jsx(ee.div,{className:n,initial:Ce,animate:Be,exit:Ce,transition:{delay:qE},children:t})}const moe={initial:Ce,animate:Be};function poe(e){const{titleKey:t,textKey:n,buttonTextKey:s,button:o,cancelButton:r,onClick:c,closeDialogCallback:l}=e,{t:u}=V(),m=u(t),p=u(o.textKey);return i.jsxs(i.Fragment,{children:[i.jsx(ee.div,{layout:!0,variants:moe,initial:"initial",animate:"animate",role:"dialog","aria-label":m,tabIndex:-1,children:i.jsxs("div",{className:"m-3 text-center text-foreground-800",children:[i.jsx("p",{className:"py-3",children:m}),i.jsx("p",{className:"text-xs",children:u(n)}),s&&i.jsx("div",{className:"mx-auto flex w-full max-w-xs justify-around px-5 py-3 text-accent-600",children:i.jsx("button",{onClick:c,type:"button",className:"text-xs",children:u(s)})})]})}),i.jsxs(ee.div,{className:"relative mx-0.5 my-1 flex w-full items-center justify-center gap-2 px-2 align-middle",onClick:l,children:[r&&i.jsx($,{variant:"rect",title:u(r.textKey),className:"relative my-3 flex h-10 max-w-40 items-center justify-center py-3 dark:bg-black/40 dark:hover:bg-black/40",onClick:r.onClick,children:u(r.textKey)}),i.jsx($,{variant:"rect",title:p,className:"relative my-3 flex h-10 max-w-40 items-center justify-center py-3 dark:bg-black/40 dark:hover:bg-black/40",onClick:o.onClick,children:p})]})]})}function Lo(e){const[t,n]=Ee(XO),s=!!t[e],o=d.useCallback(()=>{const r={...t,[e]:new Date().toISOString()};n(r)},[t,e,n]);return{alreadyShown:s,dismissCoachmark:o}}const Ru="smartmode",Hye="pagesEditThisResponse",zye="galleryDetailPrompt",rv="vision",foe="appearanceSetting",Wye="audioExpressionModeSelector";function hoe(){const e=lc(),{alreadyShown:t}=Lo(Ru),n=D("smart-mode-default"),s=D("smart-mode-coachmark");return{isSmartModeCoachmarkVisible:e&&s&&!t&&!n}}function goe(){const{alreadyShown:e}=Lo(rv),t=St(Vj,a.number()),n=24*60*60*1e3*60,s=!t||Date.now()-t>n,{isSmartModeCoachmarkVisible:o}=hoe();return{shouldShowVisionCoachmark:!e&&s&&!o}}function iv(e){const{renderReferenceElement:t,children:n,className:s,placement:o,offset:r,isOpen:c=!0,portalId:l,withArrow:u=!1,arrowClassName:m="dark:fill-black fill-white",animation:p="none",onOutsideEvent:f,onInsideEvent:h,invokeOnce:g=!0}=e,y=d.useRef(null),{refs:b,x,y:v,strategy:S,context:C,placement:T}=Zi({open:c,placement:o??"right",middleware:[Ca(r??1),Ki({fallbackAxisSideDirection:"end"}),xa(),XS({element:y})],whileElementsMounted:_a});no({onOutsideEvent:()=>{f==null||f()},invokeOnce:g,elements:[b.floating]});const w=b1(C),I=_m(C),A=km(C),E=jr(),{getReferenceProps:R,getFloatingProps:U}=Nm([w,I,A]),K=_(zn),H=boe(p,T);return i.jsxs(i.Fragment,{children:[t==null?void 0:t({ref:b.setReference,...R()},c),c&&i.jsx(qi,{id:l,children:i.jsxs(ee.div,{ref:b.setFloating,style:{position:S,top:`${v}px`,[E?"insetInlineEnd":"insetInlineStart"]:`${x}px`,boxShadow:K==="dark"?"0px 0px 0px 1px rgba(255, 255, 255, 0.08) inset":void 0},...H,...U({}),className:F("flex rounded-2xl p-4 shadow-xl",Ke.coachmark,hL,u&&"!overflow-visible",s),onClick:h,children:[n,u?i.jsx(E9,{ref:y,context:C,tipRadius:3,strokeWidth:2,className:m}):null]})})]})}function boe(e,t){switch(e){case"bounce":return voe(t);case"none":return{};default:return{}}}function voe(e){const n=e.startsWith("top")||e.startsWith("bottom"),s=e.startsWith("top")||e.startsWith("left")?-1:1;return n?{animate:{y:`${s*10}px`,transition:nC}}:{animate:{x:`${s*10}px`,transition:nC}}}function yoe({triggerComponent:e,offset:t=10,onInsideEvent:n}){const{t:s}=V(),{shouldShowVisionCoachmark:o}=goe(),{dismissCoachmark:r}=Lo(rv),c=l=>{l.stopPropagation(),r()};return i.jsx(iv,{className:"max-w-48 cursor-pointer bg-black dark:bg-midnight-150",arrowClassName:"dark:fill-midnight-150 fill-black",isOpen:o,placement:"top-end",offset:t,withArrow:!0,renderReferenceElement:l=>i.jsx("div",{ref:l.ref,className:"relative",children:e}),portalId:"composer-container",onInsideEvent:()=>{n==null||n(),r()},onOutsideEvent:r,children:i.jsxs("div",{className:"flex max-w-[160px] flex-col gap-0.5 bg-black text-white dark:bg-midnight-150 dark:text-black",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-2xs-strong",children:s("composer.chatModes.vision.coachmarkTitle")}),i.jsx("button",{onClick:c,type:"button",children:i.jsx(Yt,{className:"size-4"})})]}),i.jsx("div",{className:"text-2xs",children:s("composer.chatModes.vision.description")})]})})}function cv(){const e=D("composer-v4");return!Sn("kill-composer-v4")&&e}function Lx({config:e}){const{t}=V(),n=cv(),s=Hr(),o=D("vision-coachmark");if(e)switch(e.mode){case"stop":return i.jsx($,{testId:"stop-button",color:"accent",variant:"circle",size:n?"36-sm":"40-base",className:n?"":"my-1","aria-label":t("composer.stopButton"),title:t("composer.stopButton"),onClick:()=>e.onClick(),children:i.jsx("div",{className:"size-3.5 rounded bg-accent-550 contrast-more:border-2 dark:bg-accent-150"})});case"submit":return i.jsx($,{testId:"submit-button",color:"strong",variant:"square",size:n?"36-sm":"40-base",className:W(n?"rounded-2xl":"my-1 rounded-submitButton"),"aria-label":t("userInput.submitButtonText"),title:t("userInput.submitButtonText"),onClick:()=>e.onClick(),disabled:e.disabled,children:i.jsx(fu,{className:"size-6"})});case"microphone":{if(s)return;let r=i.jsx(vs,{data:{title:t("composer.startAudioCall"),testId:"audio-call-button",onClick:()=>e.onClick(),isVisible:!0},className:ur["subtle-dimmed-inverted"],size:n?"small":"regular",margins:n?"my-0":"my-1",children:i.jsx(Cm,{className:"size-6","aria-hidden":!0})});return n&&(r=i.jsx($,{title:t("composer.startAudioCall"),"aria-label":t("composer.startAudioCall"),variant:"rect",size:"36-sm",color:"subtle-dimmed",className:W("h-9 select-none gap-1 rounded-2xl p-0"),onClick:()=>e.onClick(),testId:"audio-call-button",children:i.jsx(Cm,{className:"size-6","aria-hidden":!0})})),o?i.jsx(yoe,{triggerComponent:r,offset:0}):r}default:return}}const y_="/static/cmc/assets/quick-pVrRG7df.svg",Coe="/static/cmc/assets/research-DamIycj6.svg",C_="/static/cmc/assets/smart-CrTxD0Xh.svg",x_="/static/cmc/assets/study-CBb74c5C.svg",xoe="/static/cmc/assets/think-deeper-C6Ziv8bd.svg",S_="/static/cmc/assets/checklist-BDS7QRqm.svg",w_="/static/cmc/assets/search-CnXCJ0q0.svg",Soe=["chat","reasoning","research"],Gye=["copy","regenerate"];function I_(){const e=D("deep-research"),t=D("deep-research-nano"),n=Gt(),s=_(Ra);return e&&(s||!1||!s&&n&&t)&&!Z.instance().config().disableDeepResearch}function T_(){const e=_(Ra),t=ce("kill-composer-reasoning-button");return!e&&t}function woe({containerRef:e,items:t,itemRefs:n,initialFocusedId:s,onEscape:o,onEnter:r}){const[c,l]=d.useState(s);return co(u=>{var h,g;const{current:m}=e;if(!m||!m.contains(document.activeElement))return;const p=t.findIndex(({id:y})=>y===c);let f=p;switch(u.key){case"Escape":o==null||o(),u.preventDefault();break;case"ArrowDown":f=Math.min(p+1,t.length-1),u.preventDefault();break;case"ArrowUp":f=Math.max(p-1,0),u.preventDefault();break;case"Enter":c&&(r==null||r(c));break}if(f!==p){const y=(h=t[f])==null?void 0:h.id;y&&(l(y),(g=n.current[y])==null||g.focus())}}),{focusedItemId:c,setFocusedItemId:l}}const Ioe=[];function Toe(){const e=Bo(),t=Vb(),{t:n}=V(),{dismissCoachmark:s}=Lo(Ru),o=D("smart-mode-default"),r=S=>{Se({source:"composerChatModeMenu",customData:JSON.stringify({currentMode:e,newMode:S})}),_n(S),Wr({msg:n("actions.screenReaderSwitchPrefix",{chatMode:Ll({chatMode:S})})}),S==="smart"&&s()},c=I_(),l=lc(),u=D("study-mode"),m=Hr(),p=T_(),f=D("searchmode");let h=Ioe.concat(l&&o?["smart"]:[],["chat"],p?[]:["reasoning"],l&&!o?["smart"]:[],u?["study"]:[],c?["research"]:[],t?["computerUse"]:[],f?["search"]:[]);m&&(h=h.filter(S=>Soe.includes(S)));const g=d.useRef(null),y=d.useRef({}),b=h.map(S=>({id:S})),{focusedItemId:x,setFocusedItemId:v}=woe({containerRef:g,items:b,itemRefs:y,initialFocusedId:e,onEnter:S=>r(S)});return i.jsx("div",{className:"pointer-events-auto relative flex flex-col gap-1 rounded-2xl text-xs contrast-more:border-2","data-testid":"composer-mode-menu",role:"radiogroup",ref:g,tabIndex:-1,children:h.map(S=>i.jsx(koe,{chatMode:S,isSelected:e===S,onSelect:r,focusedItemId:x,setFocusedItemId:v,itemRefs:y},S))})}const Eoe={chat:i.jsx(pt,{url:y_,className:"size-5"}),reasoning:i.jsx(pt,{url:xoe,className:"size-5"}),research:i.jsx(pt,{url:Coe,className:"size-5"}),computerUse:i.jsx(pt,{url:S_,className:"size-5"}),smart:i.jsx(pt,{url:C_,className:"size-6"}),study:i.jsx(pt,{url:x_,className:"size-5"}),search:i.jsx(pt,{url:w_,className:"size-5"})},Aoe=[],_oe=["chat","reasoning","research","computerUse"];function koe(e){const{chatMode:t,isSelected:n,onSelect:s,focusedItemId:o,setFocusedItemId:r,itemRefs:c}=e,{t:l}=V(),u=d.useRef(null);d.useEffect(()=>{c.current[t]=u.current},[t,c]);const m=Aoe.includes(t),p=_oe.includes(t);return i.jsxs("button",{type:"button",ref:u,title:Ll({chatMode:t}),onClick:()=>s(t),className:F("flex items-center justify-between gap-4 rounded-xl py-2 pe-4 ps-3.5",ur["subtle-dimmed"]),"data-testid":`${t}-mode-option`,role:"radio","aria-checked":n,tabIndex:t===o?0:-1,onFocus:()=>r(t),children:[i.jsxs("div",{className:"flex items-center gap-3.5",children:[i.jsx("div",{className:"flex size-6 items-center justify-around",children:Eoe[t]}),i.jsxs("div",{className:"pe-4 text-left",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsxs("div",{children:[" ",Ll({chatMode:t})," "]}),m&&i.jsx(Ii,{color:"accent",children:i.jsx("span",{children:l("common.new")})}),t==="computerUse"&&i.jsx(Ii,{color:"accent",children:i.jsx("span",{children:l("settings.labs.title")})}),p&&i.jsx(Ii,{children:i.jsx("span",{children:l(`composer.chatModes.${t}.latency`)})})]}),i.jsx("div",{className:"text-foreground-600 text-2xs dark:text-foreground-700",children:nJ(t)})]})]}),i.jsx(Noe,{isSelected:n})]})}function Noe(e){const{isSelected:t}=e;return i.jsx("div",{className:F("flex size-5 items-center justify-center rounded-full border-2",t?"border-foreground-800":"border-foreground-450"),children:t&&i.jsx("div",{className:"size-2.5 rounded-full bg-foreground-800 contrast-more:border-2"})})}function Moe(e){const{isChatModeMenuOpen:t,onRef:n,onClick:s,disableChatModeSwitcher:o}=e,{t:r}=V(),c=Bo(),l=u=>{Se({source:"composerChatModeSwitcher",customData:JSON.stringify({currentMode:c,isOpen:t})}),s(u)};return i.jsx(ee.div,{layout:"position",initial:!1,children:i.jsxs($,{testId:"chat-mode-switcher",title:r(t?"composer.chatModes.closeModeMenu":"composer.chatModes.openModeMenu"),onClick:l,color:"subtle-dimmed",ref:n,className:"my-1 border border-black/8",disabled:!o,"aria-haspopup":"menu","aria-expanded":t,children:[i.jsx("span",{className:"text-xs",children:Ll({chatMode:c,forceExcludeModelName:!0})}),i.jsx(Vn,{className:F("size-4",t?"-rotate-90":"rotate-90")})]})})}function E_({triggerComponent:e,offset:t=10,onInsideEvent:n}){const{t:s}=V(),o=jr(),{alreadyShown:r,dismissCoachmark:c}=Lo(Ru),l=E3(),u=m=>{m.stopPropagation(),c()};return i.jsx(iv,{className:"max-w-48 cursor-pointer bg-black dark:bg-midnight-150",arrowClassName:"dark:fill-midnight-150 fill-black",isOpen:!r,placement:o?"left":"right",offset:t,withArrow:!0,renderReferenceElement:m=>i.jsx(ee.div,{ref:m.ref,className:"relative",children:e}),portalId:"composer-container",onInsideEvent:()=>{n==null||n(),c()},children:i.jsxs("div",{className:"flex max-w-[160px] flex-col gap-0.5 bg-black text-white dark:bg-midnight-150 dark:text-black",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-2xs-strong",children:s("composer.chatModes.smart.coachmarkTitle")}),i.jsx("button",{onClick:u,type:"button",children:i.jsx(Yt,{className:"size-4"})})]}),i.jsx("div",{className:"text-2xs",children:l.coachmarkDescription})]})})}function Roe({disableChatModeSwitcher:e}){const[t,n]=Ee(fp),s=lc(),o=D("smart-mode-default"),r=D("smart-mode-coachmark"),{captureFocus:c,restoreFocus:l}=ZE(),u=d.useCallback(m=>{n(p=>m?(c(),"chatMode"):p==="chatMode"?(setTimeout(()=>{l()},0),null):p)},[n,c,l]);return i.jsx(Eu,{isOpen:t==="chatMode",onIsOpenChange:u,renderTrigger:(m,p)=>{const f=i.jsx(Moe,{isChatModeMenuOpen:p,onRef:m.ref,onClick:m.onClick,disableChatModeSwitcher:e});return s&&r&&!o?i.jsx(E_,{triggerComponent:f,offset:10,onInsideEvent:()=>{u(!0)}}):f},options:{placement:"top-start",offset:{mainAxis:10,crossAxis:-12},hideOnMenuClick:!0},className:W(kn,"p-2"),children:i.jsx(Toe,{})})}function Poe({state:e}){const{t}=V(),n=et(),s=Ns(),o=z(as),r=z(Ji),c=z(tp),l=cv();return i.jsx(vs,{data:{title:t("composer.goToHome"),testId:"home-button",onClick:async()=>{o(null),r(!1),c(void 0),yt({source:"homeButton"}),await s({to:"/discover",from:n})},isVisible:e!=="hidden",isDisabled:e==="disabled"},size:l?"small":"regular",children:i.jsx(mc,{className:"size-6","aria-hidden":!0})})}const A_=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 24",fill:"currentColor",...e},d.createElement("path",{d:"M12.5 2C18.0228 2 22.5 6.47715 22.5 12C22.5 17.5228 18.0228 22 12.5 22C6.97715 22 2.5 17.5228 2.5 12C2.5 6.47715 6.97715 2 12.5 2ZM12.5 3.5C7.80558 3.5 4 7.30558 4 12C4 16.6944 7.80558 20.5 12.5 20.5C17.1944 20.5 21 16.6944 21 12C21 7.30558 17.1944 3.5 12.5 3.5ZM12.5 7C12.9142 7 13.25 7.33579 13.25 7.75V11.25H16.75C17.1642 11.25 17.5 11.5858 17.5 12C17.5 12.4142 17.1642 12.75 16.75 12.75H13.25V16.25C13.25 16.6642 12.9142 17 12.5 17C12.0858 17 11.75 16.6642 11.75 16.25V12.75H8.25C7.83579 12.75 7.5 12.4142 7.5 12C7.5 11.5858 7.83579 11.25 8.25 11.25H11.75V7.75C11.75 7.33579 12.0858 7 12.5 7Z"})),$ye=Object.freeze(Object.defineProperty({__proto__:null,default:A_},Symbol.toStringTag,{value:"Module"})),lv=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e},d.createElement("path",{d:"M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5Zm.58 16.401-5.805-5.686a.75.75 0 0 0-.966-.071l-.084.07-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686L18.33 19.4ZM17.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116 5.822 5.702c.067-.186.104-.386.104-.595V6.25a1.75 1.75 0 0 0-1.75-1.75Zm-2.498 2a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z"})),qye=Object.freeze(Object.defineProperty({__proto__:null,default:lv},Symbol.toStringTag,{value:"Module"})),__=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 24",fill:"currentColor",...e},d.createElement("path",{d:"M12.5 2C18.0228 2 22.5 6.47715 22.5 12C22.5 17.5228 18.0228 22 12.5 22C6.97715 22 2.5 17.5228 2.5 12C2.5 6.47715 6.97715 2 12.5 2ZM15.7197 8.96967L11.25 13.4393L9.28033 11.4697C8.98744 11.1768 8.51256 11.1768 8.21967 11.4697C7.92678 11.7626 7.92678 12.2374 8.21967 12.5303L10.7197 15.0303C11.0126 15.3232 11.4874 15.3232 11.7803 15.0303L16.7803 10.0303C17.0732 9.73744 17.0732 9.26256 16.7803 8.96967C16.4874 8.67678 16.0126 8.67678 15.7197 8.96967Z"})),Kye=Object.freeze(Object.defineProperty({__proto__:null,default:__},Symbol.toStringTag,{value:"Module"}));function k_(e){return d.useCallback(t=>{if(t.key==="Enter"&&!t.shiftKey||t.key===" "){t.preventDefault();try{const n=e(t);n instanceof Promise&&n.catch(console.error)}catch(n){console.error("Error in useEnterOrSpaceKeyDown:",n)}}},[e])}const N_=(e={})=>{const{circular:t,axis:n,memorizeCurrent:s=!0,tabbable:o,ignoreDefaultKeydown:r,unstable_hasDefault:c}=e;return lp(A9),lm({mover:{cyclic:!!t,direction:Loe(n??"vertical"),memorizeCurrent:s,tabbable:o,hasDefault:c},...r&&{focusable:{ignoreKeydown:r}}})};function Loe(e){switch(e){case"horizontal":return kc.Horizontal;case"grid":return kc.Grid;case"grid-linear":return kc.GridLinear;case"both":return kc.Both;case"vertical":default:return kc.Vertical}}function joe(e){const t=e.children[0];return t instanceof HTMLElement?t:null}function Ooe(e,t=!0){d.useEffect(()=>{if(t&&e.current){const n=joe(e.current);n&&n.focus()}},[e,t])}const $o=e=>i.jsx(Uoe,{...e});$o.Motion=d.forwardRef(Doe);function Doe(e,t){const{children:n,axis:s="vertical",circular:o=!0,tabbable:r,autoFocus:c=!1,...l}=e,u=N_({axis:s,circular:o,tabbable:r}),m=d.useRef(null);return d.useImperativeHandle(t,()=>m.current,[]),hu(m,c),D("a11y-keyboard-navigation")?i.jsx(ee.div,{ref:m,...u,...l,children:n}):i.jsx(ee.div,{ref:m,...l,children:n})}function Uoe(e){const{children:t,axis:n="vertical",circular:s,tabbable:o,autoFocus:r=!1,...c}=e,l=N_({axis:n,circular:s,tabbable:o}),u=d.useRef(null);return Ooe(u,r),D("a11y-keyboard-navigation")?i.jsx("div",{ref:u,...l,...c,children:t}):i.jsx("div",{ref:u,...c,children:t})}const jx="ms-auto me-[2px] size-6 flex-none";function Foe(e,t){const{tab:n,onClick:s,showHighlight:o,showActionIcon:r=!0,onFocus:c,className:l,fallbackIcon:u,titleExtra:m,testId:p}=e,[f,h]=d.useState(!1),{t:g}=V(),y=d.useCallback(()=>{s==null||s({...n,addedToTabSelection:!n.addedToTabSelection})},[s,n]),b=k_(y),x=f||!n.favIconUrl,v=u??lv;return i.jsxs($o.Motion,{className:W(" box-border flex w-full cursor-pointer flex-row items-center rounded-lg p-1.5 active:bg-black/3 safe-hover:bg-black/5 dark:active:bg-white/5 dark:safe-hover:bg-black/30",o&&"bg-black/5 dark:bg-white/8","forced-colors:focus:outline forced-colors:focus:outline-2 forced-colors:focus:outline-black dark:forced-colors:focus:outline-white","contrast-more:focus:outline contrast-more:focus:outline-2 contrast-more:focus:outline-black dark:contrast-more:focus:outline-white",l),onClick:y,tabIndex:0,onKeyDown:b,ref:t,onFocus:c,role:"checkbox","aria-checked":n.addedToTabSelection?"true":"false",tabbable:!0,"aria-label":n.title,"data-testid":p,children:[i.jsx("div",{className:"relative flex size-4 flex-none flex-row items-center rounded-lg bg-black/5",children:x?i.jsx(v,{className:"size-full"}):i.jsx("img",{src:n.favIconUrl,alt:g("composer.multiTabs.tabFavIconAltText"),className:"size-full rounded-[1px] object-cover",onError:()=>{h(!0)}})}),i.jsxs("span",{className:"font-ligatures-none me-7 ms-2 max-h-full truncate text-foreground-850 text-xs",children:[m??n.title,i.jsx("span",{})]}),r&&(n.addedToTabSelection?i.jsx(__,{className:jx}):i.jsx(A_,{className:jx}))]})}const Boe=d.forwardRef(Foe);function Voe(e,t){const{groupTitle:n,tab:s,onClick:o,showHighlight:r,showActionIcon:c,onFocus:l,className:u,fallbackIcon:m,titleExtra:p,testId:f}=e;return i.jsxs(i.Fragment,{children:[n?i.jsx("span",{className:"font-semibold text-foreground-850 text-xs",children:n}):null,i.jsx(Boe,{ref:t,tab:s,onClick:o,showHighlight:r,showActionIcon:c,onFocus:l,className:u,fallbackIcon:m,titleExtra:p,testId:f})]})}const Hoe=d.forwardRef(Voe),M_=e=>d.createElement("svg",{viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M6.5 2C4.01472 2 2 4.01472 2 6.5V11.5002C1.39278 11.0441 1 10.3179 1 9.5V6.5C1 3.46243 3.46243 1 6.5 1H9.5C10.3179 1 11.0441 1.39278 11.5002 2H6.5ZM4.06095 6.3954C4.34069 5.02835 5.55025 4 7 4H13.5002C13.0441 3.39278 12.3179 3 11.5 3H7C4.79086 3 3 4.79086 3 7V11.5C3 12.3179 3.39278 13.0441 4 13.5002V7C4 6.79289 4.02099 6.59069 4.06095 6.3954ZM5 7.5C5 6.11929 6.11929 5 7.5 5H12.5C13.8807 5 15 6.11929 15 7.5V12.5C15 13.8807 13.8807 15 12.5 15H7.5C6.11929 15 5 13.8807 5 12.5V7.5ZM7.5 6C6.67157 6 6 6.67157 6 7.5V12.5C6 13.3284 6.67157 14 7.5 14H12.5C13.3284 14 14 13.3284 14 12.5V7.5C14 6.67157 13.3284 6 12.5 6H7.5Z"})),Zye=Object.freeze(Object.defineProperty({__proto__:null,default:M_},Symbol.toStringTag,{value:"Module"})),R_=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M12 4.5C16.1421 4.5 19.5 7.85786 19.5 12C19.5 16.1421 16.1421 19.5 12 19.5C7.85786 19.5 4.5 16.1421 4.5 12C4.5 11.6236 4.52772 11.2538 4.58123 10.8923C4.64845 10.4382 4.31609 10 3.85708 10C3.48623 10 3.161 10.2562 3.10471 10.6228C3.03576 11.0718 3 11.5317 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C9.69494 3 7.59227 3.86656 6 5.29168V4.25C6 3.83579 5.66421 3.5 5.25 3.5C4.83579 3.5 4.5 3.83579 4.5 4.25V7.25C4.5 7.66421 4.83579 8 5.25 8H8.25C8.66421 8 9 7.66421 9 7.25C9 6.83579 8.66421 6.5 8.25 6.5H6.90093C8.23907 5.25883 10.0309 4.5 12 4.5ZM12.5 7.75C12.5 7.33579 12.1642 7 11.75 7C11.3358 7 11 7.33579 11 7.75V12.25C11 12.6642 11.3358 13 11.75 13H14.75C15.1642 13 15.5 12.6642 15.5 12.25C15.5 11.8358 15.1642 11.5 14.75 11.5H12.5V7.75Z"})),Yye=Object.freeze(Object.defineProperty({__proto__:null,default:R_},Symbol.toStringTag,{value:"Module"}));function Pu(){const e=_(qq),t=D("edge-multi-tabs-history");return e&&t}const zoe=4,Woe=10,Goe=20,Ul={ADD:"add"};function uv(e){return e.sourceType==="history"}function dv(e){return e.sourceType==="opened"}function jo(e){return dv(e)?(e.id??0).toString():e.url??""}function P_(e){return e.sourceType===void 0||e.sourceType===null}function L_(e,t){const n=new Set(e.map(o=>o.id)),s=new Set(t.map(o=>o.id));if(n.size!==s.size)return!0;for(const o of n)if(!s.has(o))return!0;return!1}function j_(e,t=""){const n=t.trim().toLocaleLowerCase();return n===""||!e.title||e.title.toLocaleLowerCase().includes(n)}function O_(e,t=new Map){return t.has(jo(e))}function D_(e,t){const{selectedTabsSnapshot:n,keyword:s=""}=t??{};return{...e,isInSearchResult:j_(e,s),addedToTabSelection:O_(e,n)}}async function U_(e){const{tabs:t}=await E$.run(e);return(t==null?void 0:t.map(n=>({...n,sourceType:"history",isInSearchResult:!0})))??[]}async function F_(){const e={maxResults:Woe,states:[pa.RECENT],queries:[]};return(await U_(e)).slice(0,zoe)}async function $oe(){const{tabs:e}=await VE.run({});return(e==null?void 0:e.map(t=>({...t,sourceType:"opened",isInSearchResult:!0})))??[]}async function qoe({isEdgeHistoryEnabled:e=!1,triggeredByMention:t=!1,setUserOpenedTabs:n,setUserHistoryTabs:s,initialSelectedTabsSnapshot:o=new Map}){const[r,c]=await Promise.all([$oe(),e?F_():Promise.resolve([])]);n==null||n(r.map(m=>D_(m,{selectedTabsSnapshot:o})));const l=r.length===0,u=l?c:[];return s==null||s(u),t&&l}function Koe(e){return new Map(e.map(n=>[jo(n),{...n,addedToTabSelection:!0}]))}function Zoe(e,t){const n=Koe(e);return Array.from(t.values()).reduce((s,o)=>{const r=jo(o);return s.set(r,{...s.get(r),...o}),s},new Map(n))}async function Yoe(e,t){let n=[];return e===""?n=t?await F_():[]:n=await U_({queries:[e],states:[pa.RECENT,pa.HISTORY],maxResults:Goe}),n}async function Qoe(e,t){let n=[];const s=e.trim(),o=s==="";t.historyTabs&&t.historyTabs.length>0&&(n=t.historyTabs.map(l=>({...l,isInSearchResult:!0,addedToTabSelection:O_(l,t.userAddedTabs)})));const r=new Map([...t.userAddedTabs.values()].map(l=>[jo(l),{...l,isInSearchResult:j_(l,s)}])),c=t.userOpenedTabs.map(l=>D_(l,{selectedTabsSnapshot:t.userAddedTabs,keyword:s}));return{userAddedTabsFiltered:r,userOpenedTabsFiltered:c,historyTabsFiltered:n,isEmptyKeyword:o}}function Joe(e,t){switch(t.type){case"SET_DRAFT_SELECTED_TABS":return{...e,userDraftSelectedTabs:t.payload};case"SET_TABS_INITIALIZED":return{...e,isTabsInitialized:t.payload};case"SET_USE_RECENT_HISTORY":return{...e,isUseRecentHistoryEnabled:t.payload};case"MERGE_DRAFT_SELECTION":return{...e,userDraftSelectedTabs:Zoe(t.payload,e.userDraftSelectedTabs)};default:return e}}function Xoe(e){const{text:t}=e;return t?i.jsx("span",{className:"-ms-0.5 h-8 leading-8 text-foreground-850 text-xs",role:"status",children:t}):null}function eae(e){if(P_(e))return M_;if(uv(e))return R_}function Ox(e,t=!1){const n=B("composer.multiTabs.openTabs");if(uv(e)){const s=B("composer.multiTabs.recentlyClosedTabs"),o=B("composer.multiTabs.historyTabs");return t?s:o}return dv(e)?n:""}function tae(e,t){let n=!1,s=!1;return o=>{if(e){if(uv(o)&&!n)return n=!0,Ox(o,t);if(dv(o)&&!s)return s=!0,Ox(o,t)}}}function nae(e){const{tabs:t,onItemClick:n,highlightedIndex:s,activeMenuItemRef:o,onItemFocus:r,emptyStateText:c,isUseRecentHistoryEnabled:l=!1}=e,u=Pu(),m=_(Ur);if(t.length===0)return i.jsx(Xoe,{text:c});const p=tae(u,l);return i.jsx(i.Fragment,{children:t.map((f,h)=>i.jsx(Hoe,{tab:f,onClick:n,showHighlight:s===h,onFocus:()=>r==null?void 0:r(h),showActionIcon:!m,className:W(!m&&"py-2"),ref:h===s?o:null,groupTitle:p(f),fallbackIcon:eae(f),testId:`multi-tabs-menu-item-${h}`},jo(f)))})}function B_(e){const{highlightedIndex:t,activeMenuItemRef:n,onMenuItemClick:s,onFocus:o,tabs:r,emptyStateText:c,isUseRecentHistoryEnabled:l=!1}=e,u=_(Ur);return i.jsxs("div",{className:W("relative flex w-full overflow-hidden",u?"mb-0 mt-3":"my-3"),children:[i.jsx("div",{className:W("t-custom-scrollbar flex w-full flex-col gap-y-1 overflow-y-auto overflow-x-hidden p-1"),"data-testid":"multi-tabs-menu-items-container",children:i.jsx(nae,{tabs:r,onItemClick:s,highlightedIndex:t,activeMenuItemRef:n,onItemFocus:o,emptyStateText:c,isUseRecentHistoryEnabled:l})}),r.length>=4&&u&&i.jsx("div",{className:W("pointer-events-none absolute inset-x-0 bottom-0 h-8 rounded-b-lg px-4","bg-gradient-composer-tabs-menu-mask-light dark:bg-gradient-composer-tabs-menu-mask-dark")})]})}function V_(e){const{mode:t,disabled:n,onClick:s}=e,{t:o}=V(),r=o("composer.multiTabs.browserTabMenuShareButton"),c=o("composer.multiTabs.browserTabMenuShareButtonForUpdate"),l=t===Ul.ADD?r:c;return i.jsx($,{title:l,className:"mx-auto mt-auto w-full flex-none",disabled:n,testId:"multi-tabs-share-button",onClick:s,color:"strong",size:"48-lg","aria-label":l,children:l})}function H_(e){const{mode:t,onClose:n}=e,s=_(Ur),{t:o}=V(),r=Pu(),c=o("common.closeText"),l=d.useMemo(()=>r?t===Ul.ADD?o("composer.multiTabs.browserTabMenuTitleWithHistory"):o("composer.multiTabs.browserTabMenuTitleForUpdateWithHistory"):t===Ul.ADD?o("composer.multiTabs.browserTabMenuTitle"):o("composer.multiTabs.browserTabMenuTitleForUpdate"),[r,t,o]);return i.jsxs("div",{className:"flex w-full items-center justify-between pt-2",children:[i.jsx("span",{className:"text-foreground-900 text-xs",children:l}),!s&&i.jsx($,{color:"subtle-dimmed",title:c,size:"32-xs",onClick:n,"aria-label":c,children:i.jsx(Yt,{className:"size-5 cursor-pointer"})})]})}const Dx="";function z_(e){const{onChange:t,defaultValue:n}=e,{t:s}=V(),[o,r]=d.useState(n??Dx),c=d.useRef(null),l=Pu(),u=()=>{var g;(g=c.current)==null||g.focus(),r(Dx)},m=k_(u),p=d.useCallback(g=>{r(g.target.value)},[]);d.useEffect(()=>{t==null||t(o)},[t,o]),d.useEffect(()=>{c.current&&requestAnimationFrame(()=>{var g;(g=c.current)==null||g.focus()})},[c]);const f=s(l?"composer.multiTabs.browserTabMenuSearchPlaceholderWithHistory":"composer.multiTabs.browserTabMenuSearchPlaceholder"),h=s("composer.multiTabs.browserTabMenuSearchClear");return i.jsxs("div",{className:"mt-3 flex h-8 w-full flex-row items-center rounded-3xl bg-white/60 dark:bg-black/60",children:[i.jsx(Qb,{className:"mx-2 size-4"}),i.jsx("input",{type:"text",id:"browser-tab-search",autoComplete:"off",spellCheck:!1,autoCorrect:"off",className:"w-full flex-1 rounded-lg bg-transparent py-2 text-sm focus:outline-none",placeholder:f,"aria-label":f,onChange:p,value:o,maxLength:100,ref:c}),o&&i.jsx("div",{role:"button",tabIndex:0,className:"me-1 ms-auto h-6 cursor-pointer rounded-xl border border-midnight-250 bg-midnight-200 px-3 py-1 text-foreground-800 text-2xs dark:border-white/50 dark:bg-white/5",onKeyDown:m,onClick:u,"aria-label":h,children:h})]})}function sae(e,t=1e3){const n=d.useRef();return n.current=e,d.useMemo(()=>BA((...r)=>{var c;(c=n.current)==null||c.call(n,...r)},t),[t])}const oae={id:-1,title:"",addedToTabSelection:!1,isInSearchResult:!0,sourceType:null,active:!1,highlighted:!1,pinned:!1,selected:!1,incognito:!1,autoDiscardable:!0,discarded:!1,index:-1,windowId:-1,groupId:-1};function W_(e={}){return{...oae,...e}}const kd=20,aae=W_({sourceType:null});function rae(e,t){const{t:n}=V(),s=d.useMemo(()=>e.filter(u=>u.isInSearchResult),[e]),o=d.useMemo(()=>{const l=Math.min(s.length,kd);return t&&l>1&&l<kd?{...aae,title:n("composer.multiTabs.allTabs",{count:l}),isInSearchResult:!0}:null},[s.length,n,t]),r=d.useCallback(()=>e.map(l=>({...l,addedToTabSelection:s.slice(0,kd).some(u=>u.id===l.id)})),[s,e]),c=d.useMemo(()=>o?[o,...s]:s,[s,o]);return{appearedTabs:s,getUpdatedTabsBySpecialTab:r,specialTab:o,appearedTabsWithSpecialTab:c}}function iae(e){const t=d.useRef(0),n=d.useCallback(async()=>{const s=window.innerHeight;s!==t.current&&(t.current=s,await e(s))},[e]);$i(n,{initialize:!0},document.documentElement)}const cae=.2,lae=.2,uae=594,dae=46,mae=360,pae=240;function fae(){Ge.emit("edge:try-grow-content-height",uae)}function hae(e){const t=new Map;for(const n of e)n.id&&n.addedToTabSelection&&t.set(n.id.toString(),n);return t}function gae(e){const{styles:t,onRef:n,onSave:s,onClose:o=()=>{},outsideClickElements:r=[],originElement:c,mode:l=Ul.ADD}=e,[u,m]=Ee(to),p=d.useRef(new Map(u)),f=d.useRef(null),[h,g]=d.useState([]),[y,b]=d.useState(0),x=d.useRef(null),{t:v}=V(),S=d.useDeferredValue([...h]),C=_(Ur),{appearedTabsWithSpecialTab:T,getUpdatedTabsBySpecialTab:w}=rae(S,C),[I,A]=d.useState(!1),E=p.current,[R,U]=d.useState(0),[K,H]=d.useState(!1),te=d.useCallback(()=>{if(f.current&&c&&c.current){const G=c.current.getBoundingClientRect();U(G.top-dae)}},[U,c]);iae(()=>{fae(),te()}),d.useEffect(()=>{H(!1);async function G(){const{tabs:J}=await VE.run({});if(J&&J.length>0){const Ie=[];for(const X of J)X.id&&Ie.push({...X,addedToTabSelection:E.has(X.id.toString()),isInSearchResult:!0,sourceType:"opened"});g(Ie)}}G().catch(console.error).finally(()=>{H(!0)})},[E]),d.useLayoutEffect(()=>{f.current&&K&&te()},[te,K]);const oe=d.useMemo(()=>h.filter(G=>G.addedToTabSelection),[h]),ne=d.useMemo(()=>oe.length>kd,[oe]),ge=d.useCallback(G=>{n==null||n(G),f.current=G},[n]),me=d.useCallback(G=>{const J=hae(G);m(J);const Ie=Array.from(J.values()),X=L_(Ie,[...E.values()]);s==null||s(Ie,X)},[E,s,m]),be=d.useCallback(()=>{ne||me(h)},[ne,me,h]),we=d.useCallback(G=>{g(J=>J.map(X=>X.id===G.id?G:X))},[]),se=sae(d.useCallback(G=>{g(J=>J.map(Ie=>({...Ie,isInSearchResult:Ie.title?Ie.title.toLowerCase().includes(G.toLowerCase().trim()):!0})))},[]),yK),ae=d.useCallback(G=>{b(J=>G==="up"?J>0?J-1:T.length-1:J<T.length-1?J+1:0)},[b,T]);d.useEffect(()=>{x.current&&y>=0&&(x.current.scrollIntoView({block:"nearest"}),C||x.current.focus())},[y,x,C]);const fe=d.useCallback(G=>{let J=[];P_(G)?J=w():J=h.map(Ie=>Ie.id===G.id?{...G,addedToTabSelection:!0}:Ie),g(J),me(J)},[w,me,h]),re=d.useCallback(G=>{var J;if(["ArrowUp","ArrowDown"].includes(G.code))G.preventDefault(),ae(G.code==="ArrowUp"?"up":"down");else if(G.code==="Enter"){G.preventDefault();const Ie=T[y];Ie&&fe({...Ie,addedToTabSelection:!0})}else G.code==="Tab"&&((J=f.current)==null||J.focus())},[ae,y,T,fe]);d.useEffect(()=>(Ge.on("multi-tabs:search",se),Ge.on("multi-tabs:key-down",re),()=>{Ge.off("multi-tabs:search",se),Ge.off("multi-tabs:key-down",re)}),[re,se]),no({onOutsideEvent:o,elements:[f,...r],invokeOnce:!1,shouldAttachListeners:I}),d.useEffect(()=>{A(!0)},[]);const ke=d.useMemo(()=>C?pae:mae,[C]),q=d.useMemo(()=>({maxHeight:`${R>ke?ke:R}px`,...t}),[R,ke,t]);return i.jsxs($o.Motion,{className:W(Ke.modal,"pointer-events-auto relative z-40 box-border flex max-h-[400px] w-full flex-col rounded-b-6xl rounded-t-4xl border border-white p-4 shadow-lg backdrop-blur-2xl backdrop-saturate-150 contrast-more:border-2 dark:border-white/10","bg-gradient-composer-tabs-menu-light dark:bg-gradient-composer-tabs-menu-dark","bg-blend-normal","forced-colors:bg-stroke-150 dark:forced-colors:bg-midnight-850","contrast-more:bg-stroke-150 dark:contrast-more:bg-midnight-850",C?"px-4 pb-1.5 pt-4":"p-4"),style:q,tabbable:!0,tabIndex:0,ref:ge,"data-testid":"composer-multi-tabs-menu",initial:"start",animate:"end",variants:{start:Ce,end:{...Be,transition:{duration:cae,delay:lae}}},onKeyDown:C?void 0:re,children:[i.jsx(H_,{mode:l,onClose:o}),!C&&i.jsx(z_,{onChange:se}),i.jsx(B_,{highlightedIndex:y,onFocus:b,activeMenuItemRef:x,onMenuItemClick:C?fe:we,tabs:T,emptyStateText:h.length===0?v("composer.multiTabs.noTabsOpen"):v("composer.multiTabs.noTabsFound")}),!C&&i.jsx(V_,{mode:l,disabled:ne,onClick:be})]})}const G_=k([]),$_=k([]),bae=k(e=>{const t=e(G_),n=e($_),s=new Map;for(const o of t)o.id&&s.set(jo(o),o);for(const o of n)o.url&&!t.some(r=>r.url===o.url)&&s.set(jo(o),o);return[...s.values()]}),vae=k(e=>{const t=e(bae),n=e(to),s=e(Ur),o=new Map;for(const r of t)r.isInSearchResult&&o.set(jo(r),r);if(!s)for(const[r,c]of n)c.isInSearchResult&&o.set(r,c);return[...o.values()]}),Ux=20,Fx={opened:0,history:1},yae=W_({sourceType:null});function Cae(){const{t:e}=V(),t=_(Ur),n=Pu(),[s,o]=Ee(G_),r=z($_),[c,l]=Ee(to),u=d.useRef(new Map(c)),m=_(vae),[p,f]=d.useReducer(Joe,{isTabsInitialized:!1,isUseRecentHistoryEnabled:!1,userDraftSelectedTabs:u.current}),h=e("composer.multiTabs.noTabsOpen"),g=e("composer.multiTabs.noTabsFound"),y=d.useMemo(()=>m.map(w=>({...w,addedToTabSelection:p.userDraftSelectedTabs.has(jo(w))})),[m,p.userDraftSelectedTabs]),b=d.useMemo(()=>{const T=Math.min(y.length,Ux);return t&&T>1&&T<Ux?{...yae,title:e("composer.multiTabs.allTabs",{count:T}),isInSearchResult:!0}:null},[y.length,e,t]),x=d.useMemo(()=>{const T=[...y].sort((w,I)=>(w.lastAccessed??0)-(I.lastAccessed??0)).sort((w,I)=>(Fx[w.sourceType]??0)-(Fx[I.sourceType]??0));return!b||n?T:[b,...T]},[y,b,n]),v=d.useMemo(()=>n?g:m.length===0?h:g,[n,g,h,m.length]),S=d.useCallback(T=>L_(T,[...u.current.values()]),[]),C=d.useCallback(async T=>{const w=n?await Yoe(T.trim(),s.length===0):[],{userAddedTabsFiltered:I,userOpenedTabsFiltered:A,historyTabsFiltered:E,isEmptyKeyword:R}=await Qoe(T,{userAddedTabs:c,userOpenedTabs:s,historyTabs:w});n&&(f({type:"SET_USE_RECENT_HISTORY",payload:R&&t}),r(E)),l(I),o(A)},[n,l,r,o,t,c,s]);return d.useEffect(()=>{f({type:"SET_USE_RECENT_HISTORY",payload:!1}),qoe({isEdgeHistoryEnabled:n,triggeredByMention:t,setUserOpenedTabs:o,setUserHistoryTabs:r,initialSelectedTabsSnapshot:u.current}).then(T=>{f({type:"SET_USE_RECENT_HISTORY",payload:T})}).catch(T=>{}).finally(()=>{f({type:"SET_TABS_INITIALIZED",payload:!0})})},[n,r,o,t]),d.useEffect(()=>()=>{r([]),o([])},[r,o]),{triggeredByMention:t,isEdgeHistoryEnabled:n,checkSelectedTabsHaveChanged:S,appearedTabsWithSpecialTab:x,userOpenedTabs:s,menuContentEmptyStateText:v,setUserAddedTabs:l,searchTabs:C,appearedTabs:y,specialTab:b,isUseRecentHistoryEnabled:p.isUseRecentHistoryEnabled}}const xae=.2,Sae=.2;function wae(e){const{styles:t,onClose:n=()=>{},onRef:s,mode:o=Ul.ADD}=e,r=d.useRef(null),[c,l]=d.useState(0),u=d.useRef(null),{appearedTabsWithSpecialTab:m,isUseRecentHistoryEnabled:p,triggeredByMention:f,menuContentEmptyStateText:h}=Cae(),g=d.useCallback(y=>{s==null||s(y),r.current=y},[s]);return i.jsxs($o.Motion,{className:W(Ke.modal,"pointer-events-auto relative z-40 box-border flex max-h-[400px] w-full flex-col rounded-b-6xl rounded-t-4xl border border-white bg-gradient-composer-tabs-menu-light p-4 bg-blend-normal shadow-lg backdrop-blur-2xl backdrop-saturate-150 contrast-more:border-2 contrast-more:bg-stroke-150 dark:border-white/10 dark:bg-gradient-composer-tabs-menu-dark dark:contrast-more:bg-midnight-850 forced-colors:bg-stroke-150 dark:forced-colors:bg-midnight-850",f?"px-4 pb-1.5 pt-4":"p-4"),style:t,tabbable:!0,tabIndex:0,"data-testid":"composer-multi-tabs-menu",initial:"start",animate:"end",ref:g,variants:{start:Ce,end:{...Be,transition:{duration:xae,delay:Sae}}},children:[i.jsx(H_,{mode:o,onClose:n}),i.jsx(z_,{onChange:()=>{}}),i.jsx(B_,{highlightedIndex:c,onFocus:l,activeMenuItemRef:u,onMenuItemClick:()=>{},tabs:m,emptyStateText:h,isUseRecentHistoryEnabled:p}),!f&&i.jsx(V_,{mode:o,disabled:!1,onClick:()=>{}})]})}function Iae(e){return Pu()?i.jsx(wae,{...e}):i.jsx(gae,{...e})}const q_=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{id:"Shape",d:"M2 6.25C2 4.45507 3.45507 3 5.25 3H18.75C20.5449 3 22 4.45507 22 6.25V12H20.5V6.25C20.5 5.2835 19.7165 4.5 18.75 4.5H5.25C4.2835 4.5 3.5 5.2835 3.5 6.25V15.75C3.5 16.7165 4.2835 17.5 5.25 17.5H11V19H5.25C3.45507 19 2 17.5449 2 15.75V6.25ZM14 13C12.8954 13 12 13.8954 12 15V20C12 21.1046 12.8954 22 14 22H21C22.1046 22 23 21.1046 23 20V15C23 13.8954 22.1046 13 21 13H14Z",fill:"currentColor"})),Qye=Object.freeze(Object.defineProperty({__proto__:null,default:q_},Symbol.toStringTag,{value:"Module"}));function Tae(e){const{onClick:t}=e,{t:n}=V();return i.jsx(vs,{data:{title:n("videoCard.pictureInPicture.miniPlayer"),testId:"trigger-picture-in-picture",isVisible:!0,onClick:t},children:i.jsx(q_,{className:"size-6","aria-hidden":!0})})}function Eae(e){const{title:t,onClick:n,appearDelay:s,appearDuration:o,voiceAvailabilityStatus:r,payflowSkuType:c}=e,l=Zb(),u=_(xt);return d.useEffect(()=>{u!=null&&u.accountType&&M.trackEvent({name:"interaction",data:{eventName:"payflowEntryImpression",eventInfo_loginProvider:u.accountType,eventInfo_actionButton:"GetCopilotPro",eventInfo_payflowEntryPoint:"VoiceLimit",eventInfo_payflowType:l?"ProSubPaywall":"UniPux",eventInfo_payflowSkuType:c,eventInfo_upsellReason:r,eventInfo_upsellEntryStyle:"Button"}})},[r,c,l,u==null?void 0:u.accountType]),i.jsx(av,{className:"mx-2",title:t,onClick:n,appearDelay:s,appearDuration:o})}function K_(e){const{provider:t="microsoft",scenario:n,from:s}=e,o=Cr(),r=Ns(),{login:c}=Lr();return d.useCallback(async()=>{if(n&&yt({source:"signin",scenario:n}),o){await r({from:s,to:"/login"});return}await c({provider:t})},[s,r,o,c,t,n])}function Aae(){const{t:e}=V(),t=_(ol),n=Gt(),s=_(nc),o=Z.instance().config().proSubscription.enabled,r=_(z0),c=o&&r&&!s,l=Cr(),u=_(xt),m=z(eu),p=K_({scenario:"voice",from:"/"}),{handleSubscription:f,payflowType:h}=Yb({payflowEntryPoint:"VoiceLimit",skuType:c?"FreeTrial":"1Mo-Paid",upsellReason:t,entryStyle:"Button"});if(d.useEffect(()=>{s&&(u!=null&&u.accountType)&&M.trackEvent({name:"interaction",data:{eventName:"payflowHiddenEntryImpressionForTeenUser",eventInfo_loginProvider:u.accountType,eventInfo_actionButton:"GetCopilotPro",eventInfo_payflowEntryPoint:"VoiceLimit",eventInfo_payflowType:h,eventInfo_payflowSkuType:c?"FreeTrial":"1Mo-Paid",eventInfo_upsellReason:t}})},[t,s,n,c,h,u==null?void 0:u.accountType]),!s)return n?i.jsx(Eae,{voiceAvailabilityStatus:t,payflowSkuType:c?"FreeTrial":"1Mo-Paid",title:e(c?"voice.freeTrialToPro":"voice.v2.subscribeToPro"),onClick:async()=>{if(l&&(u==null?void 0:u.provider)==="auth0"){m({source:"Composer"});return}yt({source:"subscribeCopilotPro",scenario:"voice"}),await f()}}):i.jsx(av,{className:"mx-2",title:e("voice.signUpOrLogin"),onClick:p})}const _ae="/static/cmc/assets/settings-B9ohU3kQ.svg";function mv(){const e=_($q),t=D("edge-multi-tabs-reverse");return e&&!t}const kae=De();function Nae(){const e=mv(),[t,n]=d.useState("add"),[s,o]=d.useState(!1),[r,c]=d.useState(!1),[l,u]=d.useState(!1),[m,p]=Ee(Ur),f=z(to),{refs:h,floatingStyles:g}=QS({placement:"top-start",strategy:"absolute",whileElementsMounted:_a,middleware:[Ca(()=>({mainAxis:6,crossAxis:0})),xa({padding:12}),ZS({apply({rects:C,elements:T}){Object.assign(T.floating.style,{width:`${C.reference.width}px`})}})]}),y=d.useCallback(async C=>{const{isTrigger:T,keyword:w}=C;p(T),T&&(Ge.emit("multi-tabs:search",w),n("add")),c(T)},[p,c]),b=d.useCallback(()=>{m&&(p(!1),Ge.emit("mention:cancel","ignore")),c(!1)},[m,p]),x=d.useCallback(()=>{m&&(Ge.emit("mention:cancel","remove"),p(!1)),c(!1),u(!0),o(!0),Ge.emit("edge:maybe-fetch-page-context","onSaveMultiTabs")},[m,p]),v=d.useCallback(C=>e&&r&&m?(Ge.emit("multi-tabs:key-down",C),!0):!1,[m,e,r]),S=()=>m&&r&&e;return d.useEffect(()=>{const C=kae.sub(Ae,()=>{c(!1),u(!1),p(!1),f(new Map)});return()=>{C()}},[f,p]),d.useEffect(()=>{const C=()=>{o(!1)};return Ge.on("edge:multi-tabs-context-fetched-complete",C),()=>{Ge.off("edge:multi-tabs-context-fetched-complete",C)}},[]),{isMultiTabsMenuExpanded:r,floatingStyles:g,edgeTabMenuRefs:h,setIsMultiTabsMenuExpanded:c,isShowMultiTabsPreviewCard:l,setIsShowMultiTabsPreviewCard:u,handleMentionEvent:y,isMentionTriggered:m,handleMultiTabsMenuSaveBtnEvent:x,handleMultiTabsMenuCloseBtnEvent:b,handleUserInputEnterEvent:S,handleUserInputKeydownEvent:v,multiTabsMenuMode:t,setMultiTabsMenuMode:n,isFetchingTabsPageContext:s}}function Mae(){const{contentPageType:e}=io(),t=_(rc),n=d.useCallback(()=>{Se({pageName:e,source:"streamlinedComposer",scenario:"clickComposer",customData:JSON.stringify({isChatSidePaneOpened:t})})},[e,t]),s=d.useCallback(()=>{Se({pageName:e,source:"newsComposerInput",scenario:"newsClickNavigateToChat",customData:JSON.stringify({isChatSidePaneOpened:t})})},[e,t]);return{trackConsumptionPageComposerClick:n,trackConsumptionPageComposerSubmit:s}}const Z_=k(0),Y_=k(),Q_=k(),Jye=k({}),Xye=k({lastPosition:0,wasPlaying:!1}),gc="daily";function e2e(){M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"personalizeButton",eventInfo_clickScenario:"",eventInfo_pageName:gc}})}function t2e(e){M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Select",eventInfo_clickScenario:e,eventInfo_pageName:gc}})}function n2e(e){M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_UnSelect",eventInfo_clickScenario:e,eventInfo_pageName:gc}})}function s2e(e){M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Save",eventInfo_clickScenario:e.join(","),eventInfo_pageName:gc}})}function o2e(){M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Later",eventInfo_clickScenario:"",eventInfo_pageName:gc}})}const Qg={Podcast:"podcastPlayer",DailyBriefing:"dailyBriefingPlayer"},ul={Daily:gc,Podcast:"podcast"},na={Skip:"skip",Rewind:"rewind",Play:"play",Pause:"pause",Next:"next",Previous:"previous",Playback:"playback",Mute:"mute",Unmute:"unmute",Expand:"expand",Collapse:"collapse"};function $a(e,t,n){Se({source:e,pageName:e===Qg.Podcast?ul.Podcast:ul.Daily,scenario:t,customData:n})}function J_(e){const{url:t,podcastId:n,schema:s,includeTranscripts:o=!1}=e;return It(t,s,{query:{podcastId:n,includeTranscripts:String(o)}}).then(r=>r.data)}function Rae(e,t,n,s,o){return s&&n?{url:`/sharing/podcasts/${n}`,schema:sm}:e?t?{url:`/podcasts/${t}/${e}`,schema:sm}:{url:"/daily-briefing",podcastId:e,includeTranscripts:o,schema:OT}:null}function Pae(){const{podcastId:e,podcastType:t,shareId:n}=v1({strict:!1}),s=_(Y_),o=e??s,r=wp(),c=!!e||r,u=D("db-transcript")&&!c,m=z(Q_),{data:p,isLoading:f,error:h}=xr(Rae(o,t,n,c,u),J_);d.useEffect(()=>{if(p&&c){const b=sm.parse(p);m(b.podcastId)}},[p,c,m]);const g=()=>c?t?`${ul.Podcast}.${t}`:ul.Podcast:ul.Daily;if(p&&c){const b=sm.parse(p),{isAvailable:x,podcastId:v,chapters:S,playback:{positionInSeconds:C,chapterId:T}}=b,w=n?`/sharing/podcasts/${n}/Files`:`/podcasts/${t}/${v}/Files`,I=S.map(({id:R,title:U,image:K,audio:H})=>({id:R,title:U,image:{landscape:{...K.landscape,url:`${w}/${K.landscape.name}`},portrait:{...K.portrait,url:`${w}/${K.portrait.name}`}},audio:H})),A={isAvailable:x,podcastId:v,chapters:I.map(R=>({...R,audio:{default:{url:`${w}/${R.audio.name}`,duration:R.audio.duration,transcript:null}},transitionMusic:null,sources:[]})),playback:{position:C,chapterId:T}},E={...b,chapters:I};return{data:A,podcastData:E,isPodcast:c,isLoading:f,error:h,pageImpressionKey:g()}}return{data:!c&&p?OT.parse(p):void 0,isPodcast:c,isLoading:f,error:h,pageImpressionKey:g()}}function a2e(){const{data:e}=xr({url:"/daily-briefing/topics",schema:jT},J_);return{data:e}}async function r2e(e,t){await cn({path:"/daily-briefing/topics/unfollow",args:{body:{ids:t}}}),await cn({path:"/daily-briefing/topics/follow",args:{body:{ids:e}}})}const Lae=1;function jae(){const e=Ns(),t=z(as),n=z(Y_),[s,o]=Ee(Z_),{firstStoryId:r,formCode:c}=YS({strict:!1}),l=D("db-autoplay"),u=d.useCallback(async()=>{await e({from:"/daily",to:"/discover"}),n(void 0),t(null)},[n,t,e]),m=d.useCallback(async h=>{if(c&&M.setFormCode(c),l&&r){const g=h.split(",");if(g.length>=2){g[Lae]=r;const y=g.join(",");n(y)}else n(h)}else n(h);o(0),t("daily-briefing-player"),await e({from:"/",to:"/daily",search:{firstStoryId:r}})},[c,l,r,o,t,e,n]),p=d.useCallback(async()=>{o(s),await e({from:"/daily",to:"/topic-selection"}),t(null)},[t,o,s,e]),f=d.useCallback(async()=>{o(s),t("daily-briefing-player"),await e({from:"/topic-selection",to:"/daily"})},[s,o,t,e]);return{navigateToDailyBriefing:m,navigateToTopicSelection:p,exitDailyBriefing:u,returnToDailyBriefing:f,currentChapterIndex:s}}function Oae({media:e,thresholds:t,key:n}){const s=d.useRef(0),o=d.useRef([]),r=d.useRef(new Set);return d.useEffect(()=>{o.current=(t==null?void 0:t.sort((c,l)=>c.seconds-l.seconds))??[]},[t]),d.useEffect(()=>{s.current=0,r.current=new Set;let c=null;if(!e)return()=>{};function l(){c=performance.now()}function u(h){if(c!==null){const g=(performance.now()-c)/1e3;s.current+=g,c=h?performance.now():null,f()}}function m(){u(!1)}function p(){u(!0)}const f=()=>{for(let h=0;h<o.current.length;h+=1){const g=o.current[h];g&&s.current>=g.seconds&&!r.current.has(h)&&(r.current.add(h),g.callback())}};return e.addEventListener("playing",l),e.addEventListener("pause",m),e.addEventListener("ended",m),e.addEventListener("timeupdate",p),()=>{e.removeEventListener("playing",l),e.removeEventListener("pause",m),e.removeEventListener("ended",m),e.removeEventListener("timeupdate",p)}},[e,n]),{totalTimePlayedRef:s}}function dl(e){if(!e)return NaN;const t=e.split(":");if(t.length!==2)return NaN;const[n,s]=t,o=Number(n),r=Number(s);return o<0||r<0||r>=60?NaN:o*60+r}function Dae(e,t,n,s){var o,r;return e===n.length-1&&t===s.length-1?1/0:t===s.length-1?dl((o=n[e+1])==null?void 0:o.startTime):dl((r=s[t+1])==null?void 0:r.startTime)}function Uae(e){let t=-1;return e.map((s,o,r)=>{var c;return{...s,startTime:dl(s.startTime),endTime:o<r.length-1?dl((c=r[o+1])==null?void 0:c.startTime):1/0,words:s.words.map((l,u,m)=>(t+=1,{...l,startTime:dl(l.startTime),endTime:Dae(o,u,r,m),index:t}))}})}function X_(e,t,n){return{DailyBriefing:`${t}|${n}`,Podcast:t}[e]}function Bx(e,t,n){const s=X_(e,t,n);s&&cn({path:`/media/${e}/${s}/playback/completed`,args:{}}).catch(o=>{iI(o)})}function Fae(e,t,n,s){const o=X_(e,n,s);o&&cn({path:`/media/${e}/${o}/playback`,args:{options:{method:"PATCH"},body:{positionInSeconds:t}}}).catch(r=>{iI(r)})}function ah(e,t){const n=Object.keys(t);if(n.length!==0)return typeof e<"u"&&n.includes(e)?t[e]:Object.values(t)[0]}const Bae=5,Vae=5e3;function ek(){var Ve,j;const{exitDailyBriefing:e}=jae(),{data:t,isPodcast:n,pageImpressionKey:s}=Pae(),o=n?Qg.Podcast:Qg.DailyBriefing,r=_(Q_),c=_(cu),l=d.useMemo(()=>t?n?t.chapters.map(O=>{var Re;return[((Re=O.audio.default)==null?void 0:Re.duration)??0]}):t.chapters.map(O=>{var Re;const pe=[((Re=ah(c,O.audio))==null?void 0:Re.duration)??0];return O.transitionMusic&&pe.push(O.transitionMusic.duration),pe}):[],[t,n,c]),[u,m]=Ee(Z_),p=d.useRef(null),[f,h]=d.useState(!1),g=u<l.length-1,y=u>0,b=d.useRef(performance.now()),x=d.useRef(performance.now()),v=d.useMemo(()=>{var O;return(O=t==null?void 0:t.chapters[u])!=null&&O.id?t.chapters[u].id:r&&r.split(",")[u]},[t==null?void 0:t.chapters,u,r]),S=d.useMemo(()=>t?n?t.chapters.map(O=>{var pe;return[((pe=O.audio.default)==null?void 0:pe.url)??""]}):t.chapters.map(O=>{var Re;const pe=[((Re=ah(c,O.audio))==null?void 0:Re.url)??""];return O.transitionMusic&&pe.push(O.transitionMusic.url),pe}):[],[t,c,n]),[C,T]=d.useState(0),[w,I]=d.useState([]),[A,E]=d.useState(null),R=JSON.stringify({podcastId:r,eventInfo_chapterId:(Ve=t==null?void 0:t.chapters[u])==null?void 0:Ve.id,eventInfo_chapterPlayDuration:performance.now()-b.current}),[U,K]=Ee(VK),H=d.useCallback(()=>{K(O=>{const pe=!O,Re=pe?na.Mute:na.Unmute;return $a(o,Re,R),pe})},[R,o,K]);Oae({media:A,key:v,thresholds:[{seconds:Bae,callback:()=>{if(v&&!w.includes(v)){try{cn({path:`/daily-briefing/${v}/viewed`,args:{analytics:{anonymousPath:"/daily-briefing/*/viewed"}}})}catch{}I([...w,v])}}}]}),d.useEffect(()=>{if(!A||!f)return;const O=setInterval(()=>{const pe=A.currentTime;Fae("DailyBriefing",pe,r,v)},Vae);return()=>{clearInterval(O)}},[A,f,v,r]);function te(){var O;h(!0),(O=p.current)==null||O.playAnimation(),A==null||A.play(),$a(o,na.Play,R)}function oe(){var O;h(!1),(O=p.current)==null||O.pauseAnimation(),A==null||A.pause(),$a(o,na.Pause,R)}function ne(O){if(A){const pe=Math.min(A.currentTime+O,A.duration);A.currentTime=pe,$a(o,na.Skip,JSON.stringify({seconds:O}))}}function ge(O){if(A){const pe=Math.max(A.currentTime-O,0);A.currentTime=pe,$a(o,na.Rewind,JSON.stringify({seconds:O}))}}function me(){var O,pe,Re;Bx("DailyBriefing",r,v),t!=null&&t.chapters&&M.trackEvent({name:"system",data:{eventName:"chapterPlayDuration",eventInfo_podcastId:r,eventInfo_chapterIndex:u,eventInfo_isCompleted:u===t.chapters.length-1,eventInfo_publisherName:(pe=(O=t.chapters[u])==null?void 0:O.sources)==null?void 0:pe.map(xe=>xe.publisherName).join(","),eventInfo_impressionElement:s,eventInfo_customData:JSON.stringify({eventInfo_chapterId:(Re=t.chapters[u])==null?void 0:Re.id,eventInfo_chapterPlayDuration:performance.now()-b.current})}})}function be(){Bx("Podcast",r),M.trackEvent({name:"system",data:{eventName:"podcastPlayDuration",eventInfo_isCompleted:!0,eventInfo_podcastId:r,eventInfo_podcastPlayDuration:performance.now()-x.current,eventInfo_impressionElement:s}})}function we(){A&&(A.currentTime=0)}function se(O){me(),b.current=performance.now(),we(),Pe(-1),T(0),m(O)}function ae(){g&&(se(u+1),$a(o,na.Next,R))}function fe(){y&&(se(u-1),$a(o,na.Previous,R))}function re(O){A&&(A.playbackRate=O/100)}function ke(O){const Re=(pf.indexOf(O)+1)%pf.length;return pf[Re]??Kl}function q(){h(!0);const O=S[u]??[];C<O.length-1?T(pe=>pe+1):O.length-1===C&&g?ae():(J(),e())}function G(){b.current=performance.now(),x.current=performance.now()}function J(){n?be():me()}const Ie=D("db-transcript"),X=D("db-transcript-word"),he=Ie&&!n,Ue=d.useMemo(()=>{if(!he)return[];const O=t==null?void 0:t.chapters[u];if(!O)return[];const pe=ah(c,O.audio);return Uae((pe==null?void 0:pe.transcript)??[])},[he,c,t==null?void 0:t.chapters,u]),ie=d.useMemo(()=>Ue.flatMap(O=>O.words),[Ue]),ve=d.useMemo(()=>l[u]??[],[l,u]),Pe=z(HK),_e=d.useCallback(O=>{if(X){const Re=ie.find(xe=>O>=xe.startTime&&O<xe.endTime);return(Re==null?void 0:Re.index)??-1}return Ue.findIndex(Re=>O>=Re.startTime&&O<Re.endTime)},[Ue,ie,X]),Oe=d.useCallback(O=>{const pe=O.currentTarget;let{currentTime:Re}=pe;for(let qe=0;qe<C;qe+=1){const Le=ve[qe];Le&&(Re+=Le)}if(Re===0)return;const xe=_e(Re);Pe(xe)},[ve,C,_e,Pe]);return d.useEffect(()=>{if(!(!he||!A))return A.addEventListener("timeupdate",Oe),()=>{A.removeEventListener("timeupdate",Oe)}},[A,Oe,he]),{isPlaying:f,currentChapterId:v,currentChapterIndex:u,chapterDurations:l,currentChapterPartIndex:C,audioElement:A,setAudioElement:E,audioChaptersProgressBarRef:p,currentChapterAudioSrc:((j=S[u])==null?void 0:j[C])??"",isPlayerMuted:U,currentChapterTranscript:Ue,play:t?te:void 0,pause:t?oe:void 0,skipForward:t?O=>ne(O):()=>{},skipBack:t?O=>ge(O):()=>{},goToNextChapter:g?ae:void 0,goToPreviousChapter:y?fe:void 0,getNextPlaybackSpeed:t?O=>ke(O):void 0,applyPlaybackRate:t?O=>re(O):()=>{},onChapterEnded:q,resetAllTimers:G,trackPlayerEndEvents:J,togglePlayerMuted:H}}function Hae(){const{currentChapterId:e}=ek();return d.useMemo(()=>{if(e)return{type:"dailyBriefing",chapterId:e}},[e])}function zae(e){const[t,n]=d.useState(0);return d.useEffect(()=>{if(!e)return()=>{};const s=l=>{l.preventDefault(),n(u=>u+1)},o=l=>{l.preventDefault(),n(u=>Math.max(0,u-1))},r=l=>{l.preventDefault(),n(0)},c=()=>{document.hidden&&n(0)};return window.addEventListener("dragenter",s,!0),window.addEventListener("dragleave",o,!0),window.addEventListener("drop",r,!0),document.addEventListener("visibilitychange",c),()=>{window.removeEventListener("dragenter",s,!0),window.removeEventListener("dragleave",o,!0),window.removeEventListener("drop",r,!0),document.removeEventListener("visibilitychange",c)}},[e]),t>0}async function Wae(e,t){try{const n=await e.arrayBuffer(),s=new Uint8Array(n),o=await It("/attachments",fz,{options:{method:"POST",headers:{"Content-Type":Po(e)},body:new Blob([s]),signal:t}}).then(r=>r.data);if("errorCode"in o)throw new Error(o.errorCode);return o.url}catch(n){throw console.error("Error uploading image",n),n}}async function Gae(e,t){try{const n=new FormData;e.type!==""?n.append("file",e):n.append("file",new File([e],e.name,{type:Po(e)}),e.name);const s=await It("/attachments",FT,{options:{method:"POST",body:n,signal:t}}).then(o=>o.data);if("errorCode"in s)throw new Error(s.errorCode);return s.id}catch(n){throw console.error("Error uploading document",n),n}}async function $ae(e,t){try{const n=await It("/attachments/onedrive",FT,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id}),signal:t}}).then(s=>s.data);if("errorCode"in n)throw new Error(n.errorCode);return n.id}catch(n){throw console.error("Error uploading OneDrive file",n),n}}async function qae(e,t){switch(e.kind){case"local-file":return Gae(e.file,t);case"onedrive":return $ae(e.item,t);default:{const n=e;throw new Error(`Unhandled upload kind: ${n}`)}}}async function Kae(e){const{uploadTasks:t,signal:n,onSuccess:s,onError:o,onFinish:r,scenario:c}=e,l=t.map(async u=>{const m=u.upload;try{if(u.type==="document"){const f={content:{type:"document",attachmentId:await qae(u.upload,n)},item:{type:"document",partId:u.partId,fileName:u.metadata.name,contentType:u.metadata.contentType},size:u.metadata.size,type:u.metadata.contentType},h={id:u.id,file:u.upload.file,scenario:c,processing:!1,attachment:f};s(h)}else{const p=await Wae(m.file,n),f={content:{type:"image",url:p},item:{type:"image",url:p},size:u.metadata.size,type:u.metadata.contentType},h={id:u.id,file:m.file,scenario:c,processing:!1,attachment:f};s(h)}}catch(p){o&&o(p,u)}finally{r()}return null});return Promise.all(l)}function i2e(e,t){const n=t.split(".").pop()??"";return`/attachments/${e}.${n}`}function Vx(e){switch(e.kind){case"local-file":{const{file:t}=e;return{name:t.name,contentType:Po(t),size:t.size}}case"onedrive":{const{item:t}=e;return{name:t.name,contentType:zb(t.name),size:t.size}}default:{const t=e;throw new Error(`Unhandled upload kind: ${t}`)}}}function Zae(){const[e,t]=Ee(S3),{t:n}=V(),s=d.useRef(new Set),o=d.useRef(0),r=z(Fr),c=d.useCallback(()=>{for(const h of s.current)h.abort();s.current.clear()},[]);d.useEffect(()=>()=>{c()},[c]);const l=d.useCallback((h,g)=>{r({isOpen:!0,scenario:g??null,reason:h})},[r]),u=d.useCallback(()=>{l("fileUpload")},[l]),m=d.useCallback(()=>{t([]),o.current=0,c()},[c,t]),p=d.useCallback(async h=>{const{uploads:g,scenario:y,onError:b,replaceExisting:x=!1,shouldUploadImageAsDocument:v}=h;x&&m();const S=[],C=[];for(const w of g){const I=Vx(w),A=_u(I.contentType),E=MX();if(A||v){const R=String(o.current);o.current+=1,S.push({id:E,upload:w,partId:R,metadata:I,type:"document"}),C.push({id:E,file:w.file,scenario:y,processing:!0})}else S.push({id:E,upload:w,metadata:I,type:"image"}),C.push({id:E,file:w.file,scenario:y,processing:!0})}t(w=>[...w,...C]);const T=new AbortController;s.current.add(T),await Kae({signal:T.signal,uploadTasks:S,onSuccess:w=>{var I;if(t(A=>A.map(E=>E.id===w.id?w:E)),(I=w.attachment)!=null&&I.item){const{type:A}=w.attachment.item;Wr({msg:n(A==="image"?"fileUpload.uploadedImage":"fileUpload.uploadedFile")})}},onError:(w,I)=>{if(w instanceof Error&&w.message==="not-signed-in")throw m(),u(),w;const A={id:I.id,file:I.upload.file,scenario:y,processing:!1,error:w};t(E=>E.map(R=>R.id===I.id?A:R)),b&&b(w,I.upload)},onFinish:()=>{s.current.delete(T)}})},[m,u,t,n]),f=d.useCallback(h=>{t(g=>{const y=[...g];return y.splice(h,1),y})},[t]);return{uploadedAttachments:e,isUploadingAttachments:e.some(h=>h.processing===!0),clearAttachments:m,uploadAttachments:p,getUploadMetadata:Vx,removeAttachmentByIndex:f}}function Yae(e,t,n,s){const{t:o}=V(),{clearAttachments:r,uploadAttachments:c,getUploadMetadata:l,isUploadingAttachments:u,uploadedAttachments:m,removeAttachmentByIndex:p}=Zae(),f=_(Wo),{maxFilesPerMessage:h}=f,g=_(pc),y=d.useCallback(async S=>{const{uploads:C,scenario:T,replaceExisting:w=!0,supportedMimeTypes:I=g}=S,A=m.filter(({error:E})=>!E).length;if(!w&&A+C.length>h){t({title:o("composer.errors.multi.tooManyFiles.title",{maxFiles:h}),message:o("composer.errors.multi.tooManyFiles.message")});return}for(const E of C){const R=EX(E.file,{supportedMimeTypes:I});if(R){t(R),n();return}}e();try{await c({uploads:C,scenario:T,replaceExisting:w,onError:(E,R)=>{if(E instanceof Error){t(a4(E.message));const{name:U,size:K}=l(R);NX({name:U,size:K,message:E.message,kind:R.kind})}else t({title:o("composer.errors.default.title"),message:o("composer.errors.default.message")})}})}catch(E){E instanceof Error&&E.message==="not-signed-in"?s():t({title:o("composer.errors.default.title"),message:o("composer.errors.default.message")})}},[m,e,t,o,n,c,l,s,h,g]),b=d.useCallback(async S=>{const{rawFiles:C,scenario:T,replaceExisting:w=!0,supportedMimeTypes:I=g}=S;if(C.length===0)return;const A=[];for(const E of C)A.push({file:AX(E),kind:"local-file"});await y({uploads:A,scenario:T,replaceExisting:w,supportedMimeTypes:I})},[y,g]),x=d.useCallback(()=>{r(),n()},[r,n]),v=d.useCallback(S=>{m.length===1?x():p(S)},[p,m,x]);return{processUploadedFiles:y,processUploadedLocalFiles:b,isUploadingAttachments:u,uploadedAttachments:m,resetFileUpload:x,removeAttachment:v}}function Lu(){var s;const e=_(nn)==="side-by-side",t=lt({breakpoint:"sm"}),n=!!((s=Z.instance().config().actions)!=null&&s.alwaysLayoutChatDetailsOverChat);return e&&(t||n)}function tk(){const e=et();return nk(e)}function nk(e){return/^\/shares\/[a-zA-Z0-9_-]+$/.test(e)}function sk(e){return e.map(t=>{if(t.author==="human"||!t.content.find(l=>l.type==="citation"))return t;const s=t.content.find(l=>l.type==="text");if(!s)return t;const o=t.content.filter(l=>l.type==="citation").sort((l,u)=>l.position-u.position),{text:r,citationMetadata:c}=Qae(s.text,o);return s.text=r,s.citations=c,t})}function Qae(e,t){if(!t)return{text:e,citationMetadata:[]};let n=e;const s=[];let o=0;const r=new Map;for(const l of t){const u=l.url;if(!r.has(u)){o+=1;const m=`${o}`;r.set(u,m),s.push({index:m,title:l.title,url:l.url,iconUrl:l.iconUrl??null,publisher:l.publisher??null,snippet:l.snippet??null})}}const c=t.map((l,u)=>({citation:l,originalIndex:u})).sort((l,u)=>{const m=u.citation.position-l.citation.position;return m!==0?m:u.originalIndex-l.originalIndex}).map(l=>l.citation);for(const l of c){const u=l.url,m=r.get(u);m!==void 0&&(n=KR(n,y3(m,l.url),l.position))}return{text:n,citationMetadata:s}}function Jae(){const e=tk(),{conversationId:t}=v1({strict:!1}),{data:n,error:s,isLoading:o}=Pm({queryKey:["sharePage",t],queryFn:()=>Xae(`/conversations/shares/${t}`),staleTime:1/0,enabled:e&&!!t});return{data:n,error:s,isLoading:o}}async function Xae(e){const{data:t,response:n}=await It(e,lW,{parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/shares/*"}});if(n.status>=400&&n.status<500)throw new ere(n.status.toString());return{...t,messages:sk(t.messages.reverse())}}class ere extends Error{}function tre(){const e=tk(),{isMediaViewerOpen:t}=io(),n=_(as),s=D("share-continue-v2"),{error:o}=Jae();return e?o?!1:s||t||!!n:!0}function pv(){return X0("(hover: hover) and (pointer: fine)")}const nre={h550:"550",h600:"600",h760:"760"};function Sm(e){const{breakpoint:t}=e,n=nre[t];return!X0(`(min-height: ${n}px)`)}const sre=k(),c2e=k(!1),l2e=k(!1),ore=/\/(?:.*\/)?(ar|vi|gm)-([a-zA-Z0-9]{6,10})/,are="gemSnapshotKey";function rre(){const e=_(sre),{contentPageType:t}=io();return d.useMemo(()=>{if(!(!e||!t))try{const n=e.pathname.match(ore),s=(n==null?void 0:n[2])??null;if(!s)return;switch(t){case"newsGem":{const o=e.searchParams.get(are);return o?{type:"newsGem",gemId:s,snapshotKey:o}:void 0}case"newsArticle":return{type:"news",articleId:s};default:return}}catch{return}},[e,t])}function ire(){const e=Ns(),t=Bl();return d.useCallback(async()=>{await e({to:"/agents",params:{},from:t.state.location.pathname})},[e,t.state.location.pathname])}function cre(){const e=Sn("kill-domain-referrer");return d.useCallback(t=>ks(t,{preventReferrer:e}),[e])}function lre(){var p,f,h;const e=D("cross-promo-popup"),t=(h=(f=(p=Z.instance().config().crossPromotion)==null?void 0:p.aggressive)==null?void 0:f.popup)==null?void 0:h.secondDay,n=Mt(Jh),s=!bm(n,Gd),o=Mt(J1),r=!bm(o,2*Gd),c=Mt(Qd),l=Ib(c,2),u=_(f0);return d.useMemo(()=>!!(s&&e&&r&&l&&t&&(u===!0?!1:u!==void 0)),[t,e,r,l,s,u])}function ure(e){const{status:t,eventName:n,source:s,isMobile:o}=e;switch(n){case"crossPromotionStripCard":return{eventName:n,eventInfo_source:s,eventInfo_status:t};case"crossPromotionTopBanner":return{eventName:n,eventInfo_isMobilePlatform:o,eventInfo_status:t};case"copilotMobileCrossSelling":case"crossPromotionProfileBanner":case"crossPromotionProfileMenuItem":return{eventName:n,eventInfo_status:t};default:return{eventName:n,eventInfo_status:t}}}function gi(e){const{name:t}=e;M.trackEvent({name:t,data:ure(e)})}function ok(){const[e,t]=Ee(Io),n=D("cross-promo-popup"),s=D("top-banner-cross-promo-desktop");let o="setting";(n||(e==null?void 0:e.type)==="popup")&&(o="popup"),s&&(o="topBanner"),(e==null?void 0:e.type)==="card"&&(o="bottomRightCard");const r=z(as);return d.useCallback(()=>{const c=Date.now().toString();tn(J1,c);const l=Mt(Qd);tn(Qd,(parseInt(l??"0",10)+1).toString()),gi({name:"interaction",status:"Dismissed",eventName:"crossPromotionStripCard",source:o}),r(null),t(null)},[o,r,t])}function dre(){return D("allowanonymoususershare")}function ak({conversationId:e,messageId:t,scenario:n,trackShareClick:s=()=>{}}){const o=_(Ae),r=e??o,c=dre(),l=z(G4),u=d.useRef(null),m=d.useCallback(()=>{if(!r){Nq({conversationId:"",messageId:t,errorName:"conversationNotFound",errorMessage:"Conversation ID is missing"});return}l({conversationId:r,action:"share",messageId:t,scenario:n,onClose:()=>{setTimeout(()=>{var h;(h=u.current)==null||h.focus()},0)}}),s()},[r,t,n,l,s]),p=kA({callback:m,onShowSignIn:s,signInScenario:"loggedOutSharing",signInReason:"shareMessage"});return{shareClickHandler:d.useMemo(()=>c?m:p,[c,m,p]),shareRef:u}}function rk(e){d.useEffect(()=>{const t=()=>{e()};return Wt.on("languageChanged",t),()=>{Wt.off("languageChanged",t)}},[e])}function ik(e){const{onStartComplete:t}=e;d.useEffect(()=>{const n=()=>{t(),Ge.off("app:start-complete",n)};return Ge.on("app:start-complete",n),()=>{Ge.off("app:start-complete",n)}},[t])}const fv=1e3*60*60,mre={revalidateOnFocus:!1,refreshInterval:fv};async function pre(e,t,n){return It(e,vW,{query:{"api-version":"2",supportedWidgets:t.join(","),...n?{intent:n}:{}},options:{method:"GET",headers:{"Content-Type":"application/json"}},analytics:{anonymousPath:e}}).then(s=>s.data)}function fre(e){return e?["conversation-starter"]:["conversation-starter","feature-discovery","kickstarter","image-generation","conversation-starter-prompted-greeting","categorized-conversation-starter"]}function hre(e){var t;if(e.length>0){if(((t=e[0])==null?void 0:t.type)==="textAndGreeting")return e;const n=e[0];if(n)return[n]}}function gre(){var f;const e=z(NA),[t,n]=d.useState(!1),s=kb(),o=z(hp),r=Sn("kill-landing-widgets"),c=!!((f=Z.instance().config().landingPage)!=null&&f.shouldFetchWidgetsData);ik({onStartComplete:()=>{n(!0)}});const{data:l,isLoading:u,error:m,mutate:p}=xr(t&&c?"/activation/widgets":null,h=>pre(h,fre(r),s),mre);o(u),rk(p),d.useEffect(()=>{if(l!=null&&l.widgets){const h=hre(l.widgets);e(h)}},[l,e]),d.useEffect(()=>{m&&(M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"widgets",eventInfo_errorMessage:`${m}`,eventInfo_details:"Widget API error"}}),o(!1),e(void 0))},[m,e,o])}function bre(){const e=_(ub),t=Vr(),{isCompatibleLandingRoute:n}=dc(),s=e&&t&&n;return d.useMemo(()=>{if(s)return{type:"greeting",greetingMessage:e}},[e,s])}const vre=(e,t)=>{var n,s,o,r;if(e==="light"){const c=(s=(n=Z.instance().config().composer)==null?void 0:n.shadowBoxStyleOverride)==null?void 0:s.outerLargeBoxShadowLight;if(c)return c;if(t)return eoe}else if(e==="dark"){const c=(r=(o=Z.instance().config().composer)==null?void 0:o.shadowBoxStyleOverride)==null?void 0:r.outerLargeBoxShadowDark;if(c)return c;if(t)return toe}return Jse},yre=(e,t)=>{var n,s,o,r;if(e==="light"){const c=(s=(n=Z.instance().config().composer)==null?void 0:n.shadowBoxStyleOverride)==null?void 0:s.outerSmallBoxShadowLight;if(c)return c;if(t)return noe}else if(e==="dark"){const c=(r=(o=Z.instance().config().composer)==null?void 0:o.shadowBoxStyleOverride)==null?void 0:r.outerSmallBoxShadowDark;if(c)return c;if(t)return soe}return Xse},Cre=e=>e==="dark"?v_:b_;function ud(e){return e?aoe:ooe}function xre(e){return e?ioe:roe}function Sre(e,t,n){const s=De();return new Promise((o,r)=>{let c=null;t(s.get(e))&&o(s.get(e));const l=s.sub(e,()=>{const m=s.get(e);t(m)&&(l(),o(m))}),u=()=>{l(),c&&clearTimeout(c)};c=setTimeout(()=>{u(),r(new Error("Timeout waiting for atom to be ready"))},n)})}function wre(e){return e.some(t=>t.author==="human"&&t.content.some(n=>n.type==="image"||n.type==="document"))}function u2e(e){var n,s;const t=e.filter(o=>o.author==="human");if(t.length===1){const o=(s=(n=t[0])==null?void 0:n.content.find(r=>r.type==="image"||r.type==="document"))==null?void 0:s.type;return o==="image"?"image":o==="document"?"file":void 0}return wre(e)?"image|file":void 0}function Ire(e){const n=new URL(e).pathname.split("/").filter(Boolean);return n[n.length-1]??null}async function Hx(){Mq();const e=De(),t=Ire(window.location.href);let n;e.set(Ag,!0);try{const s=await Tre(`/conversations/shares/${t}/continue`),{id:o,title:r}=s.conversation;n=o;const c=new Date().toISOString(),l={id:o,updatedAt:c,isNew:!1,title:r,history:[],streamingState:"idle",continuedAt:c};e.set(Ct,u=>{const m=new Map(u);return m.set(o,l),m}),e.set(Ae,o),await Are(o)}catch(s){throw ia({title:Wt.t("composer.errors.continue.title"),message:Wt.t("composer.errors.continue.message")}),Rq({shareId:t??"",conversationId:n,error:s instanceof Error?s:new Error(String(s))}),s}finally{e.set(Ag,!1)}}async function Tre(e){return(await It(e,uW,{options:{method:"POST"}})).data}const Ere=1e4;async function Are(e){await Sre(Ct,t=>{const n=t.get(e);return((n==null?void 0:n.history)??[]).length>0},Ere)}function _re(e,t,n){if(!e||!t)return!1;const s=e.getTime(),o=t.getTime(),r=n?n.getTime():null;return o<=s||r===null?!1:r<=s}let ck=!0,lk=!0;function kre(e){lk=e}function _p(){return ck}function Nre(){Fb(()=>{lk||(ck=!1)})}function uk(){return`Copilot_${Qs(new Date,"yyyyMMdd_HHmmss")}`}async function d2e(e,t){const n=uk(),o=await(await fetch(e)).blob(),r=URL.createObjectURL(o),c=document.createElement("a");c.href=r,c.download=n,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(r)}function Mre(e){e.target instanceof HTMLImageElement&&URL.revokeObjectURL(e.target.src)}async function Rre(e,t=!1){try{const n=await Hn(e,{analytics:{anonymousPath:"/attachments/*.png"}});return t&&n.status!==200?null:await n.blob()}catch{return null}}async function Pre(e,t=!1){try{const n=await Rre(e,t);return n?URL.createObjectURL(n):null}catch{return null}}const dk=De(),hv=k(null),gv=k(null);function mk(e){dk.set(hv,e)}function pk(e){dk.set(gv,e)}function Lre(e,t){var c;const n={eventInfo_inputLength:e.length};let s=n;const o=ue(hv);if(o){const{source:l,type:u,prompt:m}=o;l==="widgets"?s={...n,widget:u,widgetPromptLength:m.length}:s={...n,pill:u,pillPromptLength:m.length}}const r=ue(gv);return r&&(s={...s,autoCompleteLength:r.prompt.length}),(t==null?void 0:t.length)!==0&&((c=t==null?void 0:t[0])!=null&&c.scenario)&&(s={...s,uploadFileScenario:t[0].scenario}),JSON.stringify(s)}function jre(e){const t=ue(hv),n=ue(gv),s=t==null?void 0:t.prompt.trim(),o=e.trim(),r=n==null?void 0:n.prompt.trim(),c=n==null?void 0:n.prefix.trim(),l=o.toLowerCase()===(r==null?void 0:r.toLowerCase());return!l&&!t?null:l?!s||!o.toLowerCase().includes(s.toLowerCase())?"autoComplete":c&&c.length>s.length?(t==null?void 0:t.source)==="widgets"?"widgetWithTextAndAutoComplete":"pillWithTextAndAutoComplete":(c==null?void 0:c.length)===s.length?(t==null?void 0:t.source)==="widgets"?"widgetWithAutoComplete":"pillWithAutoComplete":"autoComplete":!s||!o.toLowerCase().includes(s.toLowerCase())?null:o.length>s.length?(t==null?void 0:t.source)==="widgets"?"widgetWithText":"pillWithText":(t==null?void 0:t.source)==="widgets"?"widget":"pill"}function Ore(){mk(null),pk(null)}function Jg(e,t){const n=ft(e),s=ft(t);return n.getTime()>s.getTime()}function wm(e){const t=ft(e);return t.setHours(0,0,0,0),t}function bv(e,t){const n=wm(e),s=wm(t);return+n==+s}function Im(e,t){return Ym(e,-t)}const Dre=11,Ure=7,Fre=2,Bre=10,Vre=21,Hre=21,zre=10,zx=a.object({daysActive:a.array(a.coerce.date())}),Xg=a.object({result:a.enum(["dismissed","positive","negative"]),date:a.coerce.date(),dismissCounter:a.number()});function Wre(e){const t=new Date;let n=e;return e.some(s=>bv(s,t))||(n=[...e,t]),n.length>zre?n.slice(-10):n}function Gre(){const e=St(A2,zx),t=(e==null?void 0:e.daysActive)??[],n=Wre(t),s=Im(new Date,Ure),o=n.filter(r=>Jg(r,s)||bv(r,s)).length;return n!==t&&Xt(A2,zx,{daysActive:n}),o}function $re(){const e=St(Xh,Xg);if(!e)return!1;const t=e.result==="positive",n=e.result==="negative"&&Jg(e.date,Im(new Date,Hre)),s=e.result==="dismissed"&&Jg(e.date,Im(new Date,e.dismissCounter>5?Vre:Bre));return t||n||s}function qre(e,t){let n="popUpDismiss";t==="negative"?n="appThumbDown":t==="positive"&&(n="appThumbUp"),yt({source:n,conversationId:e});const s=St(Xh,Xg),o=(s==null?void 0:s.result)==="dismissed"?s.dismissCounter:0,r={result:t,date:new Date,dismissCounter:t==="dismissed"?o+1:0};Xt(Xh,Xg,r)}function kp({className:e,style:t}){return i.jsx("div",{className:F("animate-[shimmer_2s_infinite] bg-black/5 bg-gradient-to-r dark:bg-white/5","from-transparent via-background-150 to-transparent","bg-[length:50%_100%] bg-no-repeat",e),style:t})}function Kre(e){const{isImageOrVideo:t,isInlineImageOrVideo:n}=e;let s="h-[300px]";return n?s="h-[150px]":t&&(s="h-[144px] sm:h-[176px]"),i.jsx("div",{className:"flex flex-col gap-3 px-4",children:i.jsx(kp,{className:F("w-full",s),style:{clipPath:"var(--clip-path-squircle-36)"}})})}function Wx(e){const{type:t,length:n}=e;if(t==="ads")return i.jsx("div",{});const s=t==="image"||t==="video",o=t==="inlineImage"||t==="inlineVideo",r=s&&n===1;return i.jsx(vp,{size:"md",stroke:!0,className:F("relative flex",r?"w-[300px]":"w-full","flex-col py-3 transition-opacity duration-300 ease-in-out"),children:i.jsx(Kre,{isImageOrVideo:s,isInlineImageOrVideo:o})})}function m2e(e){if(e.type==="image")return e.images.length;if(e.type==="video")return e.videos.length}function e1(){return e1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},e1.apply(null,arguments)}function Zre(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var Yre=d.useLayoutEffect,Qre=function(t){var n=d.useRef(t);return Yre(function(){n.current=t}),n},Gx=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Jre=function(t,n){var s=d.useRef();return d.useCallback(function(o){t.current=o,s.current&&Gx(s.current,null),s.current=n,n&&Gx(n,o)},[n])},$x={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},Xre=function(t){Object.keys($x).forEach(function(n){t.style.setProperty(n,$x[n],"important")})},qx=Xre,fn=null,Kx=function(t,n){var s=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?s+n.borderSize:s-n.paddingSize};function eie(e,t,n,s){n===void 0&&(n=1),s===void 0&&(s=1/0),fn||(fn=document.createElement("textarea"),fn.setAttribute("tabindex","-1"),fn.setAttribute("aria-hidden","true"),qx(fn)),fn.parentNode===null&&document.body.appendChild(fn);var o=e.paddingSize,r=e.borderSize,c=e.sizingStyle,l=c.boxSizing;Object.keys(c).forEach(function(h){var g=h;fn.style[g]=c[g]}),qx(fn),fn.value=t;var u=Kx(fn,e);fn.value=t,u=Kx(fn,e),fn.value="x";var m=fn.scrollHeight-o,p=m*n;l==="border-box"&&(p=p+o+r),u=Math.max(p,u);var f=m*s;return l==="border-box"&&(f=f+o+r),u=Math.min(f,u),[u,m]}var Zx=function(){},tie=function(t,n){return t.reduce(function(s,o){return s[o]=n[o],s},{})},nie=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],sie=!!document.documentElement.currentStyle,oie=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var s=tie(nie,n),o=s.boxSizing;if(o==="")return null;sie&&o==="border-box"&&(s.width=parseFloat(s.width)+parseFloat(s.borderRightWidth)+parseFloat(s.borderLeftWidth)+parseFloat(s.paddingRight)+parseFloat(s.paddingLeft)+"px");var r=parseFloat(s.paddingBottom)+parseFloat(s.paddingTop),c=parseFloat(s.borderBottomWidth)+parseFloat(s.borderTopWidth);return{sizingStyle:s,paddingSize:r,borderSize:c}},aie=oie;function fk(e,t,n){var s=Qre(n);d.useLayoutEffect(function(){var o=function(c){return s.current(c)};if(e)return e.addEventListener(t,o),function(){return e.removeEventListener(t,o)}},[])}var rie=function(t){fk(window,"resize",t)},iie=function(t){fk(document.fonts,"loadingdone",t)},cie=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],lie=function(t,n){var s=t.cacheMeasurements,o=t.maxRows,r=t.minRows,c=t.onChange,l=c===void 0?Zx:c,u=t.onHeightChange,m=u===void 0?Zx:u,p=Zre(t,cie),f=p.value!==void 0,h=d.useRef(null),g=Jre(h,n),y=d.useRef(0),b=d.useRef(),x=function(){var C=h.current,T=s&&b.current?b.current:aie(C);if(T){b.current=T;var w=eie(T,C.value||C.placeholder||"x",r,o),I=w[0],A=w[1];y.current!==I&&(y.current=I,C.style.setProperty("height",I+"px","important"),m(I,{rowHeight:A}))}},v=function(C){f||x(),l(C)};return d.useLayoutEffect(x),rie(x),iie(x),d.createElement("textarea",e1({},p,{onChange:v,ref:g}))},uie=d.forwardRef(lie);function die(e,t){const n=d.useRef(null);d.useEffect(()=>{const s=e==null?void 0:e.current;if(!s)return;const o=c=>{const l=s.selectionStart,u=s.selectionEnd;if(l!==u&&c.key!=="Backspace"&&c.key!=="Delete")n.current={type:"replace",char:c.key,index:l};else if(c.key==="Backspace"&&l>0){const p=s.value[l-1];p!==void 0&&(n.current={char:p,index:l-1,type:"delete"})}else if(c.key==="Delete"&&l<s.value.length){const p=s.value[l];p!==void 0&&(n.current={char:p,index:l,type:"delete"})}else n.current=null},r=()=>{t&&t(n.current),n.current=null};return s.addEventListener("keydown",o),s.addEventListener("input",r),()=>{s.removeEventListener("keydown",o),s.removeEventListener("input",r)}},[e,t])}const t1="@",mie=new RegExp(`${t1}([^${t1}]*)`,"g");function pie(e,t){return[...e.slice(0,t).matchAll(mie)].map(s=>({keyword:s[1],start:s.index,end:s.index+s[0].length}))}function fie(e,t){const n=pie(e,t);if(n.length===0)return;const s=n[n.length-1];return(s==null?void 0:s.end)===t?s:void 0}function hie(e){const{className:t,textAreaRef:n,onMentionChange:s,textAreaValue:o,onCancelMention:r}=e,[c,l]=d.useState(void 0),{t:u}=V(),m=d.useRef(!1),p=d.useRef(s),f=d.useRef(null),h=d.useRef(new Set),g=d.useCallback(S=>{S&&S.char===t1&&S.type!=="insert"&&h.current.delete(S.index)},[]),y=d.useCallback(()=>{l(void 0),f.current=null},[l]);die(n,g),d.useEffect(()=>{p.current=s},[s]);const b=d.useCallback(()=>{const S=n==null?void 0:n.current;if(!S)return;const C=S.selectionStart,T=S.selectionEnd;if(C===T){const w=fie(o,C);w?h.current.has(w.start)?y():(f.current=w,l(I=>I!==w.keyword?w.keyword:I)):y()}},[y,n,o]),x=d.useCallback((S="remove")=>{var A,E;const C=f.current;if(!C)return;if(S==="ignore"){h.current.add(C.start),(A=p.current)==null||A.call(p,{isTrigger:!1}),l(void 0);return}const T=o.slice(0,C.start),w=o.slice(C.end),I=T+w;f.current=null,(E=p.current)==null||E.call(p,{isTrigger:!1}),r==null||r(I)},[r,o]);d.useEffect(()=>{o===""?(y(),h.current.clear()):b()},[b,o,l,y]),d.useEffect(()=>{var S,C;if(!m.current){m.current=!0;return}c!==void 0?(S=p.current)==null||S.call(p,{isTrigger:!0,keyword:c}):(C=p.current)==null||C.call(p,{isTrigger:!1})},[c,p]),d.useEffect(()=>(Ge.on("mention:cancel",x),()=>{Ge.off("mention:cancel",x)}),[x]);const v=c==="";return i.jsxs("div",{className:F("pointer-events-none absolute z-0 overflow-auto",t),"aria-hidden":"true",children:[i.jsx("span",{className:"invisible select-none whitespace-pre-wrap break-words",children:o}),v&&i.jsx("span",{className:"text-foreground-550 dark:text-foreground-600",children:u("userInput.mentionPlaceholderText")})]})}function gie(e,t){const n=d.useCallback(async s=>{s.key==="Enter"&&!s.shiftKey&&!t&&await e(s)},[e,t]);co(n)}function bie(e,t,n){const s=d.useRef(!1),o=d.useCallback(()=>{s.current=!0},[]),r=d.useCallback(()=>{setTimeout(()=>{s.current=!1},100)},[]);return gie(async c=>{var l;(l=e.current)!=null&&l.contains(document.activeElement)&&!s.current&&(c.preventDefault(),await t())},n),{handleCompositionStart:o,handleCompositionEnd:r}}const vie="pointer-events-none cursor-not-allowed select-none shadow-none",yie="opacity-40",Cie=.25,vv=d.forwardRef((e,t)=>{var ke;const{t:n}=V(),{inputValue:s,errorMessage:o,className:r,characterLimit:c,characterLimitErrorMessage:l,disabled:u,placeholder:m=n("userInput.placeholderText"),autoFocus:p=!0,testId:f,setInput:h,setError:g,onBlur:y,onChange:b,onFocus:x,onClick:v,onEnter:S,onKeyDown:C,onPaste:T,onMentionIfEnabled:w,rightButtons:I,isMultiLines:A,"aria-autocomplete":E,"aria-controls":R,disabledClassName:U,inputContainerClassName:K}=e,H=et(),{isCentralComposerEnabled:te}=dc(),oe=d.useRef(null),ne=d.useRef(null),ge=pv()||Z.instance().config().enterKeyButtonEnabled,me=n("userInput.characterLimitText",{maxCharacters:c.toString()});d.useEffect(()=>{var q;ge&&((q=ne.current)==null||q.focus())},[H,ge]);const be=d.useCallback(q=>{const{value:G}=q.target;h(G),b&&b(G),G.length>c?g(l??me):g(null)},[h,b,c,g,l,me]);d.useImperativeHandle(t,()=>({updateInputValue:q=>{const G=q(s);h(G)},focus:()=>{var q;(q=ne.current)==null||q.focus()},blur:()=>{var q;(q=ne.current)==null||q.blur()},contains:q=>{var G;return((G=ne.current)==null?void 0:G.contains(q))??!1},updateSelectionRange:(q,G)=>{var J;(J=ne.current)==null||J.setSelectionRange(q,G)},getTextAreaRef(){return ne}}),[s,h]),co(q=>{var G,J;q.key==="Escape"&&((G=oe.current)!=null&&G.contains(document.activeElement))&&((J=ne.current)==null||J.blur()),C==null||C(q)});const we=d.useCallback(q=>{const G=q.clipboardData.getData("text/plain")||"";G.length>0&&(q.stopPropagation(),T==null||T(G))},[T]),{handleCompositionStart:se,handleCompositionEnd:ae}=bie(oe,S,!ge),fe=(ke=Z.instance().config().composer)==null?void 0:ke.reducedUserInputHeight,re=u?U??yie:"";return i.jsxs(ee.div,{className:W("flex grow items-end",u&&vie,re,r),onClick:()=>{var q;v==null||v(),(q=ne.current)==null||q.focus()},ref:oe,onBlur:q=>y==null?void 0:y(q),layout:"preserve-aspect",children:[i.jsx(ee.div,{className:"relative grow overflow-hidden",layout:!0,children:i.jsx(ee.div,{className:"relative flex size-full cursor-text overflow-hidden text-black dark:text-white",layout:!0,children:i.jsxs(ee.div,{className:"flex grow flex-col gap-4 py-user-input",layout:!0,transition:{duration:0},children:[i.jsx("div",{className:W("overflow-y-auto px-4",{"max-h-[15dvh]":fe,"max-h-user-input-shallow":te&&!fe,"max-h-user-input":!te&&!fe},Z.instance().config().showScrollbarOnHover?"scrollbar-container":"",K),children:i.jsxs("div",{className:"relative",children:[i.jsx("label",{className:W(["invisible block h-0 w-0 overflow-hidden",{"whitespace-nowrap":!A}]),htmlFor:"userInput",children:m}),i.jsx(uie,{className:W("font-ligatures-none inline-block min-h-user-input w-full resize-none overflow-y-hidden whitespace-pre-wrap bg-transparent align-top text-black outline-none placeholder:text-foreground-450 dark:text-white dark:placeholder:text-foreground-600",so("composer")??"text-base",jl("composerVertical")),disabled:u,placeholder:m,ref:ne,id:D1,role:"textbox","aria-autocomplete":E,"aria-controls":R,spellCheck:!1,value:s,enterKeyHint:"enter",onChange:be,onFocus:()=>x==null?void 0:x(s),onCompositionStart:se,onCompositionEnd:ae,onPaste:we,autoFocus:p,"data-testid":f}),w&&i.jsx(hie,{className:W("font-ligatures-none inline-block min-h-user-input w-full resize-none overflow-y-hidden whitespace-pre-wrap bg-transparent align-top text-black outline-none placeholder:text-foreground-450 dark:text-white dark:placeholder:text-foreground-600",so("composer")??"text-base",jl("composerVertical"),"inset-0"),textAreaRef:ne,textAreaValue:s,onMentionChange:w,onCancelMention:q=>{h(q),g(null)}})]})}),o&&i.jsx("div",{className:"flex min-h-6 select-none items-center px-4 text-foreground-600 text-xs",children:o})]})})}),i.jsx(ee.div,{className:W("relative bottom-0 my-1.5 flex h-9 items-center",I!=null&&I.length?"mx-1.5 w-auto gap-1":"w-0"),children:I==null?void 0:I.map((q,G)=>i.jsx(at,{children:i.jsx(ee.div,{initial:Ce,animate:{...Be,transition:{delay:Cie}},transition:{duration:Fn.default},children:q})},G))})]})});vv.displayName="UserInput";function xie(e){var x;const{uploadedFile:t,onRemove:n,scenario:s,isUploading:o,role:r,ariaLabel:c}=e,{t:l}=V(),[u,m]=d.useState(null),[p,f]=d.useState(!1),h=s==="screenshot"?l("composer.screenshotAdded"):void 0;d.useEffect(()=>{const v=URL.createObjectURL(t);return f(!1),m(v),()=>{URL.revokeObjectURL(v)}},[t]);const g=v=>{f(!0),v.target instanceof HTMLImageElement&&URL.revokeObjectURL(v.target.src)},y=d.useCallback(()=>{n==null||n(),Wr({msg:l("fileUpload.imageRemoved")})},[n,l]);if(!u)return null;const b=(x=Z.instance().config().composer)==null?void 0:x.smallAttachmentCard;return i.jsxs(ee.div,{className:F("relative max-w-fit shrink-0",{"mx-1 mt-2 h-[58px]":b,"h-32":!b}),layout:"position",initial:Ce,animate:p?Be:Ce,exit:Ce,transition:{delay:qE},role:r,"aria-label":c,children:[i.jsx(ee.img,{className:F("w-auto rounded-xl border border-black/8 object-contain shadow-inner dark:border-white/8",{"h-[58px]":b,"h-32":!b}),src:u,role:"presentation",onLoad:g,onError:g,alt:"",draggable:!1}),h&&i.jsx(vr,{msg:h}),n&&i.jsx(ee.button,{type:"button",title:l("fileUpload.removeImageWithName",{name:t.name}),"aria-label":l("fileUpload.removeImageWithName",{name:t.name}),onClick:y,className:"absolute end-0.5 top-0.5 m-1 rounded-full border border-black/20 bg-white fill-black p-1 text-black",children:i.jsx(Yt,{className:"size-3","aria-hidden":!0})}),o&&i.jsxs(jt,{className:"absolute inset-0 grid place-items-center bg-white/80 dark:bg-white/45",children:[i.jsx(d.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:i.jsx($e,{type:"spinnerThemed",className:"size-11"})}),i.jsx(vr,{msg:l("fileUpload.uploadingImage"),type:"polite"})]})]})}const yv=d.memo(e=>{const{attachment:t,onRemove:n,role:s,ariaLabel:o}=e,{file:r,processing:c,error:l,scenario:u}=t;if(l||!r)return null;const m=Po(r);return _u(m)?i.jsx(Wb,{onRemove:n,filename:r.name,fileType:m,isUploading:c,role:s,ariaLabel:o}):i.jsx(xie,{uploadedFile:r,onRemove:n,scenario:u,isUploading:c,role:s,ariaLabel:o})});yv.displayName="AttachmentItem";function Sie(e){const t=d.useRef(null);d.useEffect(()=>{t.current=document.activeElement;const n=e==null?void 0:e.current;return()=>{n?n.focus():t.current&&t.current.focus()}},[e])}function wie(e){const{fileName:t,fileType:n,role:s}=e,o=n!==""?n:zb(t);return _u(o)?i.jsx(Wb,{filename:t,fileType:o,role:s}):null}const Iie=[{canHandle:e=>e.startsWith("https://"),getImageSrc:e=>e,shouldReleaseOnLoad:!1},{canHandle:e=>e.startsWith("/attachments"),getImageSrc:e=>Pre(e),shouldReleaseOnLoad:!0}];function Tie(e){return Iie.find(t=>t.canHandle(e))??null}function Eie({url:e}){const{t}=V(),[n,s]=d.useState(null),[o,r]=d.useState(!1);return d.useEffect(()=>{if(!e){s(null);return}const c=Tie(e);if(!c){s(null);return}(async()=>{const u=await c.getImageSrc(e);s(u),r(c.shouldReleaseOnLoad)})()},[e]),n?i.jsx("img",{className:"block h-full overflow-hidden rounded-2xl bg-background-static-250 object-cover object-center shadow-inner dark:bg-background-static-900",alt:t("chat.uploadedImageAltText"),src:n,onLoad:o?Mre:void 0}):null}function Aie(){const{t:e}=V();return i.jsx("div",{className:"flex w-fit justify-end",children:i.jsx("div",{className:"flex h-32 w-44 items-center justify-center rounded-xl border border-stroke-250 bg-accent-200 px-4 py-2 dark:bg-accent-250",children:i.jsx("span",{className:"text-center text-foreground-450 text-sm",children:e("share.imagePlaceholder")})})})}function hk(e){var u;const{messageItem:t,isForSharing:n,imageClassName:s,role:o}=e,r=!Sn("kill-share-c2");if(t.type==="document")return i.jsx(wie,{fileType:t.contentType,fileName:t.fileName,role:o});const c=t.type==="image"&&t.url.startsWith("/attachments");if(r&&n&&c)return i.jsx(Aie,{});const l=(u=Z.instance().config().composer)==null?void 0:u.smallAttachmentCard;return t.type==="image"?i.jsx("div",{className:W("inline-block h-full max-w-[min(80%,256px)] align-top",s,{"mt-2 h-[58px]":l}),role:o,children:i.jsx("div",{className:"h-full w-fit min-w-0",children:i.jsx(Eie,{url:t.url})})}):null}function gk(e){const{onRemove:t,onClose:n,messages:s=[],attachments:o=[],isForSharing:r,restoreFocusRef:c}=e;Sie(c);const{t:l}=V();return o.length===0&&s.length===0?null:i.jsxs(un,{isOpen:!0,fullBleed:!0,className:"max-h-[580px] min-h-[480px] w-full justify-between p-6 sm:w-[640px]",onClose:n,dialogName:l("userInput.filePreviewModalTitle"),children:[i.jsx("h1",{className:"w-full shrink-0 text-center leading-8 text-xl",children:l("userInput.filePreviewModalTitle")}),i.jsx("div",{className:"max-h-[450px] min-h-0 flex-1 overflow-y-auto p-4",children:i.jsx("div",{role:"list",className:"flex flex-wrap content-start gap-x-2 gap-y-1",children:o.length>0?o.map((u,m)=>i.jsx(yv,{attachment:u,onRemove:()=>t==null?void 0:t(m),role:"listitem",ariaLabel:l("fileUpload.ariaLabel.listitem",{index:m+1,total:o.length})},`attachment-${m}`)):s.map((u,m)=>i.jsx(hk,{messageItem:u,imageClassName:"h-32",role:"listitem",isForSharing:r},`message-${m}`))})}),i.jsx($,{color:"strong",className:"w-full shrink-0",title:l("common.dismiss"),onClick:n,children:l("common.dismiss")})]})}function _ie(e){var v;const{attachments:t,onRemove:n,onVisibilityChange:s}=e,{t:o}=V(),r=d.useRef(null),c=d.useMemo(()=>t.filter(S=>!S.error),[t]),l=d.useMemo(()=>c.slice(0,$d),[c]),u=d.useMemo(()=>c.slice($d),[c]),m=u.filter(S=>S.processing).length,[p,f]=d.useState(!1),h=d.useCallback(S=>{const C=t[S];C!=null&&C.file&&(n(S),c.length<=1&&(f(!1),s==null||s(!1)))},[t,n,c,s]),g=d.useCallback(()=>{Wr({msg:o("userInput.seeAll"),type:"polite"}),f(!0),s==null||s(!0)},[f,o,s]),y=d.useCallback(()=>{f(!1),s==null||s(!1)},[f,s]),b=m>0?o("userInput.uploadingProcess",{uploadingCount:m,totalCount:u.length}):o("userInput.seeAll"),x=(v=Z.instance().config().composer)==null?void 0:v.smallAttachmentCard;return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative flex max-h-64 min-w-0 max-w-full flex-wrap gap-2 overflow-y-auto overflow-x-hidden p-1",children:[l.map((S,C)=>i.jsx(yv,{attachment:S,onRemove:()=>h(t.indexOf(S)),ariaLabel:o("fileUpload.ariaLabel.listitem",{index:C+1,total:c.length})},S.id??`file-${C}`)),u.length>0&&i.jsx($,{ref:r,"aria-label":b,title:b,color:"overlay-dimmed-inverted",onClick:g,className:W("flex cursor-pointer items-center justify-center rounded-xl border-none px-3.5 py-1 text-xs",{"mx-1 mt-2 h-[58px]":x,"h-32":!x}),children:m>0?i.jsxs(i.Fragment,{children:[i.jsx($e,{className:"size-6"}),o("userInput.uploadingProcess",{uploadingCount:m,totalCount:u.length})]}):i.jsx(i.Fragment,{children:o("userInput.seeAll")})})]}),p&&i.jsx(gk,{onClose:y,attachments:t,onRemove:h,restoreFocusRef:r})]})}function kie(e){const{categories:t,onClose:n,selectedCategoryIndex:s,handleCategoryClick:o}=e,{t:r}=V(),c=d.useRef(null),l=Um(c,{amount:"all"});return d.useEffect(()=>{l&&_s({page:"chatPage",element:"chatStarterPillCategory",customData:JSON.stringify({visibleItems:t.map(u=>u.id)})})},[l,t]),i.jsx(I4,{onClose:n,className:"px-3",children:i.jsxs("div",{className:"flex w-full flex-col items-center gap-4",ref:c,children:[i.jsx("h1",{className:"mt-2 px-3 text-md-strong",children:r("widgets.categorySelectorModalHeader")}),i.jsx("ul",{className:"flex w-full list-none flex-col items-center",role:"list",children:t.map((u,m)=>i.jsx("li",{className:"w-full",children:i.jsx($,{className:"w-full",variant:"rect",color:"subtle-dimmed-inverted",title:u.label,onClick:()=>o(m),children:i.jsxs("span",{className:"flex w-full items-center justify-between",children:[i.jsx("span",{className:"truncate text-start",children:u.label}),s===m&&i.jsx(Nu,{className:"ms-2 size-4 shrink-0 text-foreground-600 contrast-more:text-current"})]})})},u.id))})]})})}const Nie="contrast-more:outline contrast-more:after:border-2 contrast-more:after:absolute contrast-more:after:pointer-events-none contrast-more:after:w-2/3 contrast-more:after:h-2/3",Mie="text-stone-550 active:text-stone-350 dark:text-slate-400 active:dark:text-slate-450",Rie="bg-white/30 safe-hover:bg-black/3 active:bg-black/2 dark:bg-black/3 dark:safe-hover:bg-white/5 dark:active:bg-white/3",Pie="border-[1px] border-black/8 dark:border-white/8",Lie=`${Mie} ${Rie} ${Pie}`;function bk(e){const{children:t,isSelected:n,className:s,onClick:o,disabled:r,unselectedColorClass:c,variant:l="standard",testId:u,ariaLabel:m}=e,{focusable:p}=yr({autoRestoreFocus:!0,forceFocus:!0});let f;return n?f=ur.strong:l==="flat"?f=Lie:f=ur[c??"overlay-dimmed-inverted"],i.jsx("button",{disabled:r,type:"button",ref:p.ref,className:W("shadow-none dark:shadow-none",bl,B1["40-base"],V1["40-base"],Fh["40-base"],Yl,f,s,n&&Nie),onClick:o,"aria-pressed":n||void 0,"aria-label":m,"data-spatial-focus-key":p.focusKey,"data-testid":u,children:t})}function jie(e){const{text:t,onClick:n,className:s,testId:o,ariaLabel:r}=e;return i.jsx(bk,{isSelected:!1,variant:"flat",className:W("min-w-fit",s),onClick:n,testId:o,ariaLabel:r,children:i.jsx("span",{className:"px-1 text-xs",children:t})})}const Oie=1e3;function Cv(){var u;const e=!!((u=Z.instance().config().landingPage)!=null&&u.enablePromptedGreetings),t=kb(),n=D("conversation-starter-prompted-greeting-c1"),s=D("qa-conversation-starter-prompted-greeting-c1"),o=D("qa-conversation-starter-prompted-greeting-debug"),r=D("isenvironmentalsignallmgreeting"),c=D("isprovocativesignallmgreeting");return e&&(!!t||n||s||o||(r||c))}function Die(){const[e,t]=Ee(MA),n=Cv();return d.useEffect(()=>{let s;return n?(t(!1),s=window.setTimeout(()=>{t(!0)},Oie)):t(!1),()=>{s&&clearTimeout(s)}},[t,n]),e}const Uie=(e,t)=>{var n;return!e||t===void 0?null:e.type==="categories"?((n=e.categories[t])==null?void 0:n.items)??[]:e.type==="text"||e.type==="textAndGreeting"?e.items:null};function Fie(e){const{className:t,onWidgetClick:n,pageName:s="chatPage",widgetSource:o,starterPromptsData:r,shouldStackChips:c,shouldCenterChips:l,containerId:u="",selectedCategory:m,onCategoryClick:p}=e,f=d.useRef(null),{t:h}=V(),g=Um(f,{once:!0,amount:"all"}),y=lt({breakpoint:"sm"});d.useEffect(()=>{g&&_s({page:s,scenario:o,element:"chatStarterPills"})},[g,o,s]);const b=x=>{const{prompt:v,id:S,actionType:C,uri:T,source:w,text:I,index:A}=x;Se({pageName:s,source:o,scenario:S,customData:JSON.stringify({prompt:v,text:I,index:A,category:m==null?void 0:m.id})}),n({actionType:C,id:S,prompt:v,uri:T,source:w})};return i.jsxs(jt,{role:"list",className:W("flex w-full gap-2 px-1 py-1 sm:flex-wrap sm:py-4",c?"mb-3 flex-col items-end space-y-1 sm:flex-row":"scrollbar-container max-h-[110px] overflow-x-auto overflow-y-hidden",l?"sm:justify-center":"sm:justify-start",t),id:u,ref:f,children:[m&&y&&i.jsx($,{onClick:p,title:m.label,className:"min-w-fit",color:"overlay-dimmed-inverted",children:i.jsxs("span",{className:"flex items-center gap-2",children:[m.label,i.jsx(Vn,{className:"size-4 -rotate-90"})]})}),r.map((x,v)=>{const{id:S,text:C}=x,{type:T}=x.action,w="prompt"in x.action?x.action.prompt:void 0,I="uri"in x.action?x.action.uri:void 0,A=h("composer.starterPromptAriaLabel",{text:C,index:v+1,total:r.length});return i.jsx(jie,{text:C,onClick:()=>b({prompt:w,uri:I,id:S,actionType:T,source:"pills",text:C,index:v}),className:F(c&&"w-auto min-w-min max-w-[80%] text-start"),testId:`starter-prompt-${S}`,ariaLabel:A},S)})]})}function Bie(e){var x;const{className:t,onWidgetClick:n,pageName:s="chatPage",selectedCategory:o,selectedCategoryIndex:r,onCategoryClick:c}=e,l=_(Br),u=Cv(),m=_(MA),{isAppearanceOnHomeEnabled:p}=dc(),f=p||(l==null?void 0:l.type)==="categories",h=_(ub),g=(x=Z.instance().config().landingPage)==null?void 0:x.stackStarterChipsForSmallScreens;let y="";h?y=h:o&&(y=o.id);const b=Uie(l,r);return u&&!m||!b?null:i.jsx(Fie,{onWidgetClick:n,className:t,pageName:s,starterPromptsData:b,widgetSource:(l==null?void 0:l.source)??"chatStarterPills",shouldStackChips:g,shouldCenterChips:f,containerId:y,selectedCategory:o,onCategoryClick:c})}const Vie=d.lazy(()=>P(()=>import("./starter-prompt-category-B2FRiOb7.js"),__vite__mapDeps([364,0,1])));function Hie(e){const{className:t,onWidgetClick:n,pageName:s="chatPage"}=e,o=_(Br),r=lt({breakpoint:"sm"}),[c,l]=Ee(sK),[u,m]=d.useState(!1),p=y=>{var b;y!==c&&(l(y),Se({source:"chatStarterPillCategory",pageName:"chatPage",destination:f?(b=f[y])==null?void 0:b.id:void 0})),m(!1)},f=o&&o.type==="categories"?o.categories.map(y=>({id:y.id,label:y.label})):void 0,h=f&&!r,g=u&&f&&r;return!o||!["text","textAndGreeting","categories"].includes(o.type)?null:i.jsxs("div",{className:W("mx-auto flex w-full flex-col gap-3 px-2",t),children:[h&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"mt-2 h-8 w-full"}),children:i.jsx(Vie,{categories:f,handleCategoryClick:p,selectedCategoryIndex:c,className:"mt-2"})}),i.jsx(Bie,{onWidgetClick:n,pageName:s,selectedCategory:f?f[c]:void 0,selectedCategoryIndex:c,onCategoryClick:f?()=>m(!0):void 0}),g&&i.jsx(kie,{categories:f,handleCategoryClick:p,selectedCategoryIndex:c,onClose:()=>m(!1)})]})}function zie(e){const{imgAlt:t,imgSrc:n,text:s,className:o,onClick:r,fetchPriority:c}=e,[l,u]=d.useState(!1);return i.jsx("div",{className:"aspect-[155/190] w-full min-w-[100px] max-w-full sm:w-[155px] sm:min-w-[120px] sm:max-w-[155px]",children:i.jsxs("button",{className:W("relative flex h-full w-full flex-col items-center gap-2 rounded-lg bg-white p-2 shadow-md transition-all duration-[400ms] ease-[cubic-bezier(0,0,0,1)] hover:scale-[1.025] hover:shadow-lg dark:bg-slate-700",o),onClick:r,type:"button",children:[!l&&i.jsx(kp,{className:"aspect-square w-full rounded-md"}),i.jsx("img",{className:W("aspect-square w-full rounded-md object-cover",l?"opacity-100":"opacity-0"),src:n,alt:t,onLoad:()=>u(!0),onError:()=>u(!1),fetchPriority:c}),i.jsx("div",{className:"flex w-full flex-1 items-center justify-center px-2",children:i.jsx("p",{className:"truncate text-center text-xs-strong",children:s})})]})})}function Yx(e){const{className:t,text:n,imgSrc:s,imgAlt:o,variant:r,onClick:c,fetchPriority:l}=e,[u,m]=d.useState(!1);return i.jsx("div",{className:W("max-w-full drop-shadow-md transition-shadow hover:drop-shadow-lg sm:min-w-[120px]",r==="kickstarter"&&"aspect-[166/200] w-[166px] sm:max-w-[166px]",r==="feature-discovery"&&"aspect-[155/200] w-[155px] sm:max-w-[155px]"),children:i.jsxs(vp,{interactable:!0,stroke:!0,onClick:c,className:W("relative h-full w-full transition-transform duration-[400ms] ease-[cubic-bezier(0,0,0,1)] hover:scale-[1.025]",t),children:[!u&&i.jsx(kp,{className:"absolute size-full"}),i.jsx("img",{src:s,alt:o,className:W("absolute size-full object-cover",u?"opacity-100":"opacity-0"),onLoad:()=>m(!0),onError:()=>m(!1),fetchPriority:l}),u&&i.jsx("div",{className:"absolute z-10 flex size-full flex-col px-4 py-5",children:i.jsx("p",{className:F("mt-auto line-clamp-2 overflow-hidden text-center text-xs-strong",r==="feature-discovery"&&"text-white/80",r==="kickstarter"&&"text-white"),children:n})})]})})}const Wie={deepLink:"deepLink",prefillComposer:"chatBox",sendMessage:"chat"};function Gie(e){const{className:t,onWidgetClick:n}=e,s=lt({breakpoint:"md"}),o=Wn(),r=_(eo),c=o&&r&&!s,l=d.useRef(null),u=_(Br),m=Um(l,{once:!0,amount:"all"});d.useEffect(()=>{m&&u&&"items"in u&&_s({page:"chatPage",scenario:"widgets",element:u.id,customData:JSON.stringify({visibleItems:u.items.map(h=>h.id)})})},[m,u]);const p=h=>{const{prompt:g,id:y,actionType:b,uri:x,widgetName:v,source:S}=h,C=b==="deepLink"?JSON.stringify({uri:x}):void 0;Se({pageName:"chatPage",sectionName:"widgets",scenario:v,source:y,destination:Wie[b],customData:C}),n({actionType:b,id:y,prompt:g,uri:x,source:S})},f=h=>{const g=new URL(h);return g.searchParams.set("o","7"),g.searchParams.set("rm","3"),g.toString()};return!u||u.type!=="textAndImage"?null:i.jsx("div",{className:W("grid w-full grid-cols-2 gap-6 px-2 sm:flex sm:items-center",c&&"scrollbar-container justify-start overflow-x-auto bp-960:justify-center bp-960:overflow-x-hidden",!c&&"sm:justify-center",t),ref:l,children:u.items.map((h,g)=>{const{id:y,text:b}=h,{type:x}=h.action,v="prompt"in h.action?h.action.prompt:void 0,S="uri"in h.action?h.action.uri:void 0,{altText:C,url:T}=h.thumbnail,w={actionType:x,id:y,prompt:v,uri:S,widgetName:u.id,source:"widgets"},I=g%2===0?"-rotate-2 hover:rotate-0":"rotate-2 hover:rotate-0";switch(u.id){case"kickstarter":return i.jsx(Yx,{text:b,imgSrc:f(T),imgAlt:C,variant:"kickstarter",onClick:()=>p(w),className:I,fetchPriority:"high"},y);case"feature-discovery":return i.jsx(Yx,{text:b,imgSrc:f(T),imgAlt:C,variant:"feature-discovery",onClick:()=>p(w),className:I,fetchPriority:"high"},y);case"image-generation":return i.jsx(zie,{text:b,imgSrc:f(T),imgAlt:C,className:I,onClick:()=>p(w),fetchPriority:"high"},y);default:return null}})})}function $ie(e){var r;const{item:t,onClick:n}=e,s=_(Ae),o=d.useRef(void 0);return d.useEffect(()=>{s&&o.current!==s&&t.onImpression&&(o.current=s,t.onImpression(s))},[s,t]),i.jsxs($,{title:t.title,"aria-label":t.title,variant:"rect",color:"subtle-dimmed-inverted",onClick:n,size:"40-base",alignment:"start",className:"min-w-[230px] gap-2.5 px-3 py-2",testId:t.testId,children:[i.jsx("div",{children:t.icon}),i.jsxs("div",{className:"grow text-left",children:[i.jsxs("div",{className:"line-clamp-1 inline-flex gap-1.5 text-xs",children:[t.title,(r=t.tags)==null?void 0:r.map(c=>i.jsx("div",{className:"flex items-center",children:i.jsx(Ii,{color:c.color,children:i.jsx("span",{className:"leading-4",children:c.label})},c.label)},c.label))]}),t.description&&i.jsx("p",{className:"line-clamp-1 leading-4 text-foreground-600 text-2xs dark:text-foreground-700",children:t.description})]})]},t.key)}const vk="/static/cmc/assets/dismiss-BcarQlxK.svg";function xv(e){const{items:t,value:n,defaultValue:s,onSelect:o,onReset:r,onMenuClick:c,disabled:l,showDefaultItemInDropdown:u=!1,headerElements:m,footerElements:p,alwaysShowDefault:f=!1,floatingOffset:h=4}=e,g=_(Ae),y=d.useRef(void 0),{selectedItem:b,dropdownItems:x,selectedNonDefault:v}=d.useMemo(()=>({selectedItem:t.find(S=>S.key===(f?s:n)),dropdownItems:u?t:t.filter(S=>S.key!==s),selectedNonDefault:n!==s&&!f}),[t,n,s,u,f]);return d.useEffect(()=>{g&&y.current!==g&&b&&b.onImpression&&(y.current=g,b.onImpression(g))},[g,b]),i.jsx(t_,{color:"default",renderTrigger:({openPopover:S})=>b&&i.jsxs($,{title:b.title,"aria-label":b.title,variant:"rect",size:"36-sm",disabled:l,color:v?"composer-selected":"subtle-dimmed",className:W("h-9 select-none gap-1 rounded-2xl border border-black/8 dark:border-white/8",b.isIconEnabledInButton?"pe-3 ps-2":"px-3",b.hideButtonTitle&&"p-0"),onClick:C=>{var T;c==null||c(),(T=b.beforeClick)==null||T.call(b,g??""),v?r():S(C)},testId:b.testId,children:[v?i.jsx(pt,{url:vk,className:"size-4"}):b.isIconEnabledInButton&&b.icon,!b.hideButtonTitle&&i.jsx("span",{className:"text-xs",children:b.buttonTitle??b.title}),!v&&b.isChevronEnabledInButton&&i.jsx(Vn,{className:"size-4 rotate-90"})]}),renderSurface:({closePopover:S})=>i.jsxs("div",{className:"flex flex-col",children:[m,x.map(C=>i.jsx($ie,{item:C,onClick:T=>{var w;(w=C.beforeClick)==null||w.call(C,g??""),o(C.key),S(T)}},C.key)),p]}),containerClassNames:{surface:"p-1.5 border-white/25 dark:border-slate-600/25 shadow-tinted-xl"},placement:"bottom-start",floatingOffset:h})}xv.displayName="ComposerDropdownButton";const qie="/static/cmc/assets/think-DxNkOoJG.svg";function Kie(e,t){M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerCreateButton",eventInfo_impressionScenario:e??"off",eventInfo_conversationId:t}})}function Zie(e,t){M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerThinkButton",eventInfo_impressionScenario:e?"thinkDeeperOn":"thinkDeeperOff",eventInfo_conversationId:t}})}function yk(e){M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerScreenshotButton",eventInfo_conversationId:e}})}function Yie(e,t){M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerCreateButton",eventInfo_clickScenario:Qie(e),eventInfo_conversationId:t}})}function Qie(e){if(!e)return"showDrawer";switch(e){case"actions":return"exitActions";case"image":return"exitImage";case"podcast":return"exitPodcast";case"researchReport":return"exitResearchReport";case"quiz":return"exitQuiz";default:return"showDrawer"}}function Jie(e,t){M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerThinkButton",eventInfo_clickScenario:e?"disableThinkDeeper":"enableThinkDeeper",eventInfo_conversationId:t}})}function Ck(e){M.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerScreenshotButton",eventInfo_conversationId:e}})}const Xie=["chat","smart","reasoning","study","search"];function ece(e){const{disabled:t=!1}=e,n=tce(),s=lc(),o=D("smart-mode-default"),r=D("smart-mode-coachmark"),c=Bo(),{dismissCoachmark:l}=Lo(Ru),u=d.useCallback(f=>{_n(f),f==="smart"&&l()},[l]),m=Xie.includes(c)?c:"chat",p=i.jsx(xv,{items:n,onSelect:u,value:m,defaultValue:ln(),showDefaultItemInDropdown:!0,onReset:()=>{_n(ln())},disabled:t,onMenuClick:()=>Se({source:"composerChatModeDropdownButton",pageName:"chatPage",customData:JSON.stringify({currentMode:c})})});return s&&r&&!o?i.jsx(E_,{triggerComponent:p,offset:10}):p}function rh(e){return t=>Zie(e,t)}function ih(e){return t=>Jie(e,t)}function tce(){const{t:e}=V("translation"),t=lc(),n=E3(),s=D("model-in-mode-name"),o=D("smart-mode-default"),r=D("searchmode"),c=D("study-mode"),l=[],u={key:"smart",title:n.title,icon:i.jsx(pt,{url:C_,className:"size-6"}),description:n.description,testId:"composer-chat-mode-smart-button",isChevronEnabledInButton:!0};t&&o&&l.push(u);const m={key:"chat",title:e(s?"composer.chatModes.chat.titleWithModel":"composer.chatModes.chat.title"),buttonTitle:e(s?"composer.chatModes.chat.titleWithModel":"composer.chatModes.chat.title"),icon:i.jsx(pt,{url:y_,className:"size-5"}),description:e("composer.chatModes.chat.description"),testId:"composer-chat-mode-quick-button",onImpression:rh(!1),beforeClick:ih(!1),isChevronEnabledInButton:!0,isIconEnabledInButton:!1};l.push(m);const p={key:"reasoning",title:pw,icon:i.jsx(pt,{url:qie,className:"size-6"}),description:e("composer.chatModes.reasoning.description"),testId:"composer-chat-mode-reasoning-button",onImpression:rh(!0),beforeClick:ih(!0)};T_()||l.push(p);const f={key:"study",title:e("composer.chatModes.study.title"),icon:i.jsx(pt,{url:x_,className:"size-6"}),description:e("composer.chatModes.study.description"),testId:"composer-chat-mode-study-button",onImpression:rh(!0),beforeClick:ih(!0)};c&&l.push(f),t&&!o&&l.push(u);const h={key:"search",title:FR,icon:i.jsx(pt,{url:w_,className:"size-6"}),description:e("composer.chatModes.search.description"),testId:"composer-chat-mode-search-button"};return r&&l.push(h),l}const nce="/static/cmc/assets/tab-add-oCy3Y4-6.svg";function sce(e){const{onSelectUserOpenedTabs:t}=e,{t:n}=V();return i.jsx($,{title:n("composer.multiTabs.addTab"),"aria-label":n("composer.multiTabs.addTab"),variant:"rect",color:"subtle-dimmed-inverted",onClick:t,size:"40-base",alignment:"start",className:"min-w-[230px] rounded-xl p-0",testId:"add-tabs-button",children:i.jsxs("div",{className:"flex h-10 w-full items-center gap-2.5 rounded-xl px-3 py-2",children:[i.jsx(pt,{url:nce,className:"size-5"}),i.jsx("div",{className:"grow text-left",children:i.jsx("div",{className:"line-clamp-1 inline-flex gap-1.5 text-xs",children:n("composer.multiTabs.addTab")})})]})})}const oce="/static/cmc/assets/paperclip-DvPSG_ju.svg";function ace(e){const{onSelectFile:t,uploadButtonDisabled:n}=e,{t:s}=V(),o=s("composer.connector.addImagesFiles");return i.jsx($,{title:o,"aria-label":o,variant:"rect",color:"subtle-dimmed-inverted",onClick:t,size:"40-base",alignment:"start",className:"min-w-[230px] rounded-xl p-0",testId:"add-images-files",disabled:n,children:i.jsxs("div",{className:"flex h-10 w-full items-center gap-2.5 rounded-xl bg-black/3 px-3 py-2",children:[i.jsx(pt,{url:oce,className:"size-5"}),i.jsx("div",{className:"grow text-left",children:i.jsx("div",{className:"line-clamp-1 inline-flex gap-1.5 text-xs",children:o})})]})})}const rce="/static/cmc/assets/add-BTcFT5ig.svg",ice="/static/cmc/assets/image-zMo0jLdY.svg",cce="/static/cmc/assets/podcast-BQmBU8ew.svg",lce="/static/cmc/assets/quiz-mPcJG41j.svg",uce="/static/cmc/assets/research-i8a7tpJF.svg";function dce(){const{t:e}=V("translation",{keyPrefix:"composer.create"});return{setComposerCreateModeWithPrefill:d.useCallback(n=>{let s="";switch(n){case"image":s=e("image.prompt");break;case"podcast":s=e("podcast.prompt");break;case"researchReport":s=e("researchReport.prompt");break;case"quiz":s=e("quiz.prompt");break;case"actions":s=e("actions.prompt");break}hb(n),s&&wi({prompt:s,prefillSource:"create"})},[e])}}function xk(){const e=z(R4),t=d.useCallback(s=>{e(s)},[e]),n=d.useCallback(s=>{e(s)},[e]);return{handleFeatureUpsell:t,handleFeatureLimitReached:n}}function Sk(){const e=_(wt),t=_(Ra),n=D("cmc-m365-sku"),s=_(sc),o=_(W0),r=_(nc),c=_(sn);return d.useMemo(()=>e?!n&&t||n&&((s==null?void 0:s.tier)==="m365-premium-admin"||t)?{subscriptions:[],disabledReason:"AlreadyPurchased"}:r?{subscriptions:[],disabledReason:"RestrictedAgeGroup"}:!c||L1.includes(c)?{subscriptions:[],disabledReason:"RestrictedRegion"}:n&&((s==null?void 0:s.tier)==="m365-family-guest"||(s==null?void 0:s.tier)==="m365-premium-guest"||(s==null?void 0:s.tier)==="m365-family-classic-guest")?{subscriptions:[],disabledReason:"Guest"}:n?o.length===0?{subscriptions:["m365-personal","m365-premium"]}:o.some(l=>l.tier==="pro")?{subscriptions:["m365-premium"]}:o.some(l=>v0.includes(l.tier))?{subscriptions:[]}:o.some(l=>EI.includes(l.tier))?{subscriptions:["m365-premium"]}:{subscriptions:["m365-personal","m365-premium"]}:{subscriptions:["pro"]}:{subscriptions:[],disabledReason:"UserProfileUnavailable"},[e,n,t,s==null?void 0:s.tier,r,c,o])}function mce(){const{t:e}=V(),{handleFeatureUpsell:t,handleFeatureLimitReached:n}=xk(),s=Sk();return d.useCallback(()=>{if(s.disabledReason??s.subscriptions.length===0){n({title:e("proSubscription.modal.featureLimitReached.deepResearch.title"),subtitle:e("proSubscription.modal.featureLimitReached.deepResearch.subtitleIneligible"),entryPoint:"DeepResearchLimit",dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit"});return}const{subscriptions:o}=s;let r;o.includes("pro")?r="proSubscription.modal.featureLimitReached.deepResearch.subtitleFreePro":o.includes("m365-personal")?r="proSubscription.modal.featureLimitReached.deepResearch.subtitleFree":o.includes("m365-premium")?r="proSubscription.modal.featureLimitReached.deepResearch.subtitleUpgradable":r="",t({title:e("proSubscription.modal.featureLimitReached.deepResearch.title"),subtitle:e(r),entryPoint:"DeepResearchLimit",confirmButton:e("actions.proSubscription.subscribeToPro"),dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit"})},[s,t,e,n])}function pce(){const{t:e}=V(),{handleFeatureUpsell:t,handleFeatureLimitReached:n}=xk(),s=Sk();return d.useCallback(()=>{if(s.disabledReason??s.subscriptions.length===0){n({title:e("proSubscription.modal.featureLimitReached.podcast.title"),subtitle:e("proSubscription.modal.featureLimitReached.podcast.subtitleIneligible"),entryPoint:"PodcastLimit",dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit"});return}const{subscriptions:o}=s;let r;o.includes("pro")?r="proSubscription.modal.featureLimitReached.podcast.subtitleFreePro":o.includes("m365-personal")?r="proSubscription.modal.featureLimitReached.podcast.subtitleFree":o.includes("m365-premium")?r="proSubscription.modal.featureLimitReached.podcast.subtitleUpgradable":r="",t({title:e("proSubscription.modal.featureLimitReached.podcast.title"),subtitle:e(r),entryPoint:"PodcastLimit",confirmButton:e("actions.proSubscription.subscribeToPro"),dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit"})},[s,t,e,n])}const fce="/static/cmc/assets/screenshot-BgQbvY1A.svg";function hce(e){const{onTakeScreenshot:t}=e,{t:n}=V(),s=_(Ae),o=d.useRef(void 0);return d.useEffect(()=>{o.current!==s&&yk(s)},[s]),i.jsx($,{title:n("composer.takeScreenshot"),"aria-label":n("composer.takeScreenshot"),variant:"rect",color:"subtle-dimmed-inverted",onClick:()=>{t(),Ck(s)},size:"40-base",alignment:"start",className:"min-w-[230px] rounded-xl p-0",testId:"add-tabs-button",children:i.jsxs("div",{className:"flex h-10 w-full items-center gap-2.5 rounded-xl px-3 py-2",children:[i.jsx(pt,{url:fce,className:"size-5"}),i.jsx("div",{className:"grow text-left",children:i.jsx("div",{className:"line-clamp-1 inline-flex gap-1.5 text-xs",children:n("composer.takeScreenshot")})})]})})}const Qx="create";function gce(e){const{disabled:t=!1,onSelectFile:n,onSelectUserOpenedTabs:s,onTakeScreenshot:o,uploadButtonDisabled:r}=e,c=_(rp),l=_(uu),u=_(Ma),m=Bo(),p=_(wt),f=Gt(),h=z(Fr),g=pce(),y=mce(),b=wk({remainingPodcastGeneration:c,remainingResearchReportGeneration:l,isPro:(p==null?void 0:p.isPro)??!1}),x=WA(),v=gb(),S=d.useRef(v),C=d.useRef(!1);d.useEffect(()=>{S.current.length>0&&(C.current=!0),S.current=v},[v]);const{setComposerCreateModeWithPrefill:T}=dce(),w=d.useCallback(E=>{switch(E){case"image":T("image");break;case"podcast":if(c===0){f?g():h({isOpen:!0,scenario:"podcast",reason:"createPodcast"});return}T("podcast");break;case"researchReport":if(l===0){f?y():h({isOpen:!0,scenario:"researchReport",reason:"createResearchReport"});return}T("researchReport");break;case"quiz":T("quiz");break;case"actions":T("actions");break;default:T(null);break}},[T,f,c,l,h,g,y]),I=d.useCallback(()=>{hb(null),fm(),_n(ln())},[]);d.useEffect(()=>{v.length===0&&C.current&&x!==null&&m!=="research"&&m!=="computerUse"&&m!=="study"&&I()},[v,I,m,x]);const A=!!o||!!s;return i.jsx(xv,{items:b,onSelect:w,value:x??Qx,defaultValue:Qx,onReset:I,disabled:t,onMenuClick:()=>Se({source:"composerCreateButton",pageName:"chatPage"}),alwaysShowDefault:!0,headerElements:u?null:i.jsxs(i.Fragment,{children:[i.jsx(ace,{onSelectFile:n,uploadButtonDisabled:r}),i.jsx(As,{verticalMargin:!1,className:"my-1.5"})]}),footerElements:A&&i.jsxs(i.Fragment,{children:[i.jsx(As,{verticalMargin:!1,className:"my-1.5"}),o&&i.jsx(hce,{onTakeScreenshot:o}),s&&i.jsx(sce,{onSelectUserOpenedTabs:s})]}),floatingOffset:{mainAxis:4,crossAxis:-10}})}function ei(e){return t=>{Kie(e,t)}}function ti(e){return t=>{Yie(e,t)}}function wk({remainingPodcastGeneration:e,remainingResearchReportGeneration:t,isPro:n}){const s=D("podcast-in-create-drawer"),o=I_(),r=Vb(),c=s,l=o,u=D("quiz-in-create-drawer"),{t:m}=V("translation",{keyPrefix:"composer.create"}),{t:p}=V();return d.useMemo(()=>{const h={key:"create",title:p("common.open"),icon:i.jsx(pt,{url:rce,className:"size-6"}),hideButtonTitle:!0,testId:"composer-create-button",onImpression:ei(null),beforeClick:ti(null),isIconEnabledInButton:!0},g={key:"image",title:m("image.title"),icon:i.jsx(pt,{url:ice,className:"size-5"}),testId:"composer-create-image-button",onImpression:ei("image"),beforeClick:ti("image")};function y(){return{key:"podcast",title:m("podcast.title"),icon:i.jsx(pt,{url:cce,className:"size-5"}),testId:"composer-create-podcast-button",onImpression:ei("podcast"),beforeClick:ti("podcast"),tags:e!==null&&n===!1?[{label:m("podcast.remainingCalls",{remainingCalls:e.toString()}),color:e>0?"neutral":"accent"}]:void 0}}function b(){return{key:"researchReport",title:m("researchReport.title"),icon:i.jsx(pt,{url:uce,className:"size-5"}),testId:"composer-create-research-report-button",onImpression:ei("researchReport"),beforeClick:ti("researchReport"),tags:t!==null&&n===!1?[{label:m("researchReport.remainingCalls",{remainingCalls:t.toString()}),color:t>0?"neutral":"accent"}]:void 0}}function x(){return{key:"quiz",title:m("quiz.title"),icon:i.jsx(pt,{url:lce,className:"size-5"}),testId:"composer-create-quiz-button",onImpression:ei("quiz"),beforeClick:ti("quiz")}}function v(){return{key:"actions",title:m("actions.title"),icon:i.jsx(pt,{url:S_,className:"size-5"}),testId:"composer-create-actions-button",onImpression:ei("actions"),beforeClick:ti("actions"),tags:n===!1?[{label:m("actions.labsTag"),color:"accent"}]:void 0}}return[h,g,l?b():void 0,c?y():void 0,u?x():void 0,r?v():void 0].filter(S=>S!==void 0)},[e,n,m,p,r,c,l,t,u])}function bce(e){const{t}=V(),{createMode:n,onReset:s}=e,o=t(`composer.create.${n}.selectedText`);return i.jsxs($,{title:o,"aria-label":o,variant:"rect",size:"36-sm",color:"composer-selected",className:W("h-9 select-none gap-1 rounded-2xl border border-black/8 px-3 dark:border-white/8"),onClick:s,testId:`composer-${n}-mode-selected`,children:[i.jsx(pt,{url:vk,className:"size-4"}),i.jsx("span",{className:"text-xs",children:o})]})}function Ik(){const[e,t]=d.useState(!1);return d.useEffect(()=>{async function n(){const{uiOverrides:{showScreenshotButton:s=()=>Promise.resolve(!1)}={}}=Z.instance().config(),o=await s();t(o)}n().catch(()=>{})},[]),e}function vce(e){const{onSelectFile:t,onSelectUserOpenedTabs:n,onTakeScreenshot:s,uploadButtonDisabled:o}=e,r=WA(),c=_(rp),l=_(uu),u=_(wt),p=wk({remainingPodcastGeneration:c,remainingResearchReportGeneration:l,isPro:(u==null?void 0:u.isPro)??!1}).find(g=>g.key===r),f=d.useCallback(()=>{hb(null),fm(),_n(ln())},[]),h=Ik();return i.jsxs(i.Fragment,{children:[i.jsx(gce,{disabled:!1,onSelectFile:t,onSelectUserOpenedTabs:n,onTakeScreenshot:h?s:void 0,uploadButtonDisabled:o}),r!==null&&p?i.jsx(bce,{createMode:r,onReset:f}):i.jsx(ece,{disabled:!1})]})}function yce(e){const[t,n]=d.useState(!1),{tab:s,className:o=""}=e,{t:r}=V();return t||!s.favIconUrl?i.jsx(lv,{className:F("size-5",o)}):i.jsx("img",{src:s.favIconUrl,alt:r("composer.multiTabs.tabFavIconAltText"),className:F("size-4 rounded bg-white",o),onError:()=>{n(!0)}})}function Cce(e){try{return new URL(e).hostname.replace(/^www\./,"")}catch{return null}}function xce(e,t=5){const n=new Set;for(const s of e){if(n.size>=t)break;if(s.url){const o=Cce(s.url);o&&n.add(o)}}return Array.from(n).join(", ")}function Sce(e,t=5){const n=new Set;for(const s of e){if(n.size>=t)break;s.title&&n.add(s.title)}return Array.from(n).join(", ")}function wce(e){const{tabs:t}=e,n=d.useMemo(()=>Sce(t,5),[t]),s=t.length-1;return i.jsxs("div",{className:"flex",children:[i.jsx("span",{className:"min-w-0 truncate font-semibold text-foreground-750 text-xs",children:n}),s>0&&i.jsxs("span",{className:"ms-1 font-semibold text-foreground-750 text-xs",children:["+",s]})]})}function Ice(e){const{tabs:t}=e,n=d.useMemo(()=>xce(t,5),[t]);return i.jsx("span",{className:"truncate text-foreground-750 opacity-60 text-2xs",children:n})}function Tce(e,t){return`${e.id}-${e.url??""}-${t}`}function Tk(e){const{tabs:t,onRemove:n,showRemoveIcon:s,onClick:o,isLoading:r=!1}=e,{t:c}=V(),l=d.useMemo(()=>t.slice(0,3),[t]),u=p=>{p.stopPropagation(),n==null||n()},m=p=>{p.stopPropagation(),o==null||o()};return i.jsxs(ee.div,{className:"relative flex h-[58px] w-full flex-row items-center justify-center gap-2 overflow-hidden rounded-xl border border-black/8 bg-white/90 p-3 dark:border-white/8 dark:bg-midnight-800/80",layout:"position",initial:Ce,animate:Be,exit:Ce,onClick:m,children:[i.jsx("div",{className:F("flex h-5 min-w-5 flex-none items-center justify-center rounded bg-white/90 dark:bg-midnight-800/80"),children:l.map((p,f)=>i.jsx(yce,{tab:p,className:F(f>0&&"-ms-[6px]")},Tce(p,f)))}),i.jsxs("div",{className:"me-7 flex min-w-0 flex-1 flex-col",children:[i.jsx(wce,{tabs:t}),i.jsx(Ice,{tabs:t})]}),r&&i.jsx(jt,{className:"absolute inset-0 grid place-items-center bg-white/80 dark:bg-white/45","data-testid":"multi-tabs-loading",children:i.jsx(d.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:i.jsx($e,{type:"spinnerThemed",className:"size-11"})})}),s&&i.jsx("button",{type:"button",title:c("composer.removeImage"),"aria-label":c("composer.removeImage"),onClick:u,tabIndex:0,className:"absolute end-0.5 top-0.5 m-1 rounded-full p-1 text-foreground-850 safe-hover:bg-black/5 dark:safe-hover:bg-black/30",children:i.jsx(Yt,{className:"size-3"})})]})}function Ece({onClick:e,showRemoveIcon:t=!0,isLoading:n=!1}){const[s,o]=Ee(to),r=d.useMemo(()=>Array.from(s.values()),[s]);return s.size===0?null:i.jsx("div",{className:"flex min-h-[60px] cursor-pointer flex-col gap-2","data-testid":"manual-multi-tabs-preview-card",children:i.jsx(Tk,{showRemoveIcon:t,tabs:r,onRemove:()=>{o(new Map)},onClick:e,isLoading:n})})}const Ek=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M11.7498 3C12.1295 3 12.4434 3.28201 12.4931 3.64808L12.5 3.74985L12.5012 11H19.7543C20.1685 11 20.5043 11.3358 20.5043 11.75C20.5043 12.1297 20.2221 12.4435 19.8561 12.4932L19.7543 12.5H12.5012L12.5032 19.7491C12.5033 20.1633 12.1676 20.4993 11.7534 20.4993C11.3737 20.4993 11.0598 20.2173 11.0101 19.8512L11.0032 19.7494L11.0012 12.5H3.7522C3.33798 12.5 3.0022 12.1642 3.0022 11.75C3.0022 11.3703 3.28435 11.0565 3.65043 11.0068L3.7522 11H11.0012L11 3.75015C10.9999 3.33594 11.3356 3 11.7498 3Z"})),p2e=Object.freeze(Object.defineProperty({__proto__:null,default:Ek},Symbol.toStringTag,{value:"Module"}));function Ace({onRef:e,onClick:t,onButtonRef:n}){const{t:s}=V(),o=_(fp);return i.jsx(vs,{data:{title:s("common.open"),testId:"plus-button",isVisible:!0,ariaExpanded:o==="plus",onClick:t},ref:e,onButtonRef:n,children:i.jsx(Ek,{className:"size-6","aria-hidden":!0})})}const Ak=e=>d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("g",null,d.createElement("path",{id:"Shape",d:"M11.7717 3.74212C14.1132 1.39853 17.9121 1.39853 20.2553 3.74168C22.5384 6.02474 22.5969 9.68995 20.4309 12.0439L20.2428 12.2413L11.4427 21.0395L11.4062 21.0697C9.94492 22.3865 7.69092 22.3417 6.28355 20.9344C4.96453 19.6153 4.84241 17.5527 5.9172 16.096C5.94054 16.0506 5.96879 16.0068 6.002 15.9657L6.05556 15.9061L6.14247 15.8183L6.28355 15.6704L6.28647 15.6733L13.7222 8.21901C13.9881 7.95239 14.4047 7.92763 14.6986 8.14509L14.7829 8.2176C15.0495 8.48351 15.0742 8.90014 14.8568 9.19404L14.7843 9.27826L7.18966 16.8913C6.47202 17.7669 6.5219 19.0612 7.3393 19.8786C8.16836 20.7077 9.48801 20.7472 10.3638 19.997L19.1965 11.1666C20.952 9.40894 20.952 6.5597 19.1946 4.80234C17.4922 3.0999 14.765 3.0467 12.9986 4.64274L12.8307 4.80234L12.8181 4.81665L3.28179 14.353C2.9889 14.6459 2.51403 14.6459 2.22113 14.353C1.95487 14.0867 1.93066 13.67 2.14852 13.3764L2.22113 13.2923L11.77 3.74168L11.7717 3.74212Z",fill:"currentColor"}))),f2e=Object.freeze(Object.defineProperty({__proto__:null,default:Ak},Symbol.toStringTag,{value:"Module"})),_k=e=>d.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",...e},d.createElement("path",{fill:"currentColor",d:"M6.3 3A3.2 3.2 0 0 0 3 6.3v11.4C3 19.6 4.5 21 6.3 21h11.4c1.8 0 3.3-1.5 3.3-3.3V6.3C21 4.5 19.5 3 17.7 3H6.3ZM4.5 6.3c0-1 .8-1.8 1.8-1.8h11.4c1 0 1.8.8 1.8 1.8v11.4c0 1-.8 1.8-1.8 1.8H6.3c-1 0-1.8-.8-1.8-1.8V6.3ZM8 7.5c-.3 0-.5.2-.5.5v2.3a.8.8 0 0 1-1.5 0V8c0-1.1.9-2 2-2h2.3a.8.8 0 0 1 0 1.5H8Zm0 9a.5.5 0 0 1-.5-.5v-2.3a.8.8 0 0 0-1.5 0V16c0 1.1.9 2 2 2h2.3a.8.8 0 0 0 0-1.5H8ZM16.5 8c0-.3-.2-.5-.5-.5h-2.3a.8.8 0 0 1 0-1.5H16a2 2 0 0 1 2 2v2.3a.8.8 0 0 1-1.5 0V8Zm-.5 8.5c.3 0 .5-.2.5-.5v-2.3a.8.8 0 0 1 1.5 0V16a2 2 0 0 1-2 2h-2.3a.8.8 0 0 1 0-1.5H16Z"})),h2e=Object.freeze(Object.defineProperty({__proto__:null,default:_k},Symbol.toStringTag,{value:"Module"})),kk=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e},d.createElement("path",{d:"M3 5.75A2.75 2.75 0 0 1 5.75 3h12.5A2.75 2.75 0 0 1 21 5.75v6.272a6.471 6.471 0 0 0-1.5-.709V5.75c0-.69-.56-1.25-1.25-1.25H5.75c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25h5.563c.173.534.412 1.037.709 1.5H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM23 17.5a5.5 5.5 0 1 0-11 0 5.5 5.5 0 0 0 11 0Zm-5 .5.001 2.503a.5.5 0 1 1-1 0V18h-2.505a.5.5 0 0 1 0-1H17v-2.5a.5.5 0 1 1 1 0V17h2.497a.5.5 0 0 1 0 1H18Z"})),g2e=Object.freeze(Object.defineProperty({__proto__:null,default:kk},Symbol.toStringTag,{value:"Module"})),Bc=F("flex w-full flex-row items-center gap-2");function _ce(e){const{startNewChatDisabled:t,startNewConversation:n,selectFile:s,selectOneDriveFile:o,takeScreenshot:r,selectUserOpenedTabs:c,uploadButtonDisabled:l=!1}=e,u=d.useRef(null),{t:m}=V(),p=_(Ma),f=_(Ae),h=d.useRef(void 0);return hu(u),d.useEffect(()=>{r&&h.current!==f&&yk(f)},[f,r]),i.jsxs($o,{className:"pointer-events-auto relative flex flex-col rounded-2xl contrast-more:border-2","data-testid":"composer-plus-menu",role:"menu",circular:!0,children:[i.jsx($,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:"ps-3.5",title:m("composer.startNewChat"),onClick:n,testId:"new-chat-button",ref:u,disabled:t,children:i.jsxs("div",{className:Bc,children:[i.jsx(Au,{className:"size-5"}),m("composer.startNewChatShort")]})}),s&&!p&&i.jsx($,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:m("composer.upload"),disabled:l,testId:"file-upload-button",onClick:g=>{g.preventDefault(),s()},children:i.jsxs("div",{className:Bc,children:[i.jsx(Ak,{className:"size-6"})," ",m("composer.upload")]})}),r&&i.jsx($,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:m("composer.takeScreenshot"),onClick:g=>{g.preventDefault(),g.stopPropagation(),r(),Ck(f)},children:i.jsxs("div",{className:Bc,children:[i.jsx(_k,{className:"size-6"}),m("composer.takeScreenshotShort")]})}),o&&i.jsx($,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:m("composer.addFromOneDrive"),onClick:g=>{g.preventDefault(),g.stopPropagation(),o()},children:i.jsxs("div",{className:Bc,children:[i.jsx(ov,{className:"size-6"}),m("composer.addFromOneDrive")]})}),c&&i.jsx($,{role:"menuitem",variant:"rect",testId:"add-tabs-button",color:"subtle-dimmed-inverted",title:m("composer.multiTabs.addTab"),onClick:g=>{g.preventDefault(),g.stopPropagation(),c()},children:i.jsxs("div",{className:Bc,children:[i.jsx(kk,{className:"size-6"}),m("composer.multiTabs.addTab")]})})]})}function kce({startNewChatDisabled:e,uploadButtonDisabled:t=!1,onStartNewConversation:n,onSelectFileIfEnabled:s,onSelectOneDriveFileIfEnabled:o,onTakeScreenshot:r,onSelectUserOpenedTabsIfEnabled:c,onRef:l}){const[u,m]=Ee(fp),p=Ik(),h=`plus-menu-${Vr()}`,g=u==="plus";return i.jsx(Eu,{isOpen:g,onIsOpenChange:y=>m(b=>y?"plus":b==="plus"?null:b),renderTrigger:y=>i.jsx(Ace,{onRef:y.ref,onButtonRef:l,onClick:b=>{y.onClick(b),Se({source:"composerPlusButton",pageName:"chatPage",customData:JSON.stringify({isOpen:g})})}}),options:{placement:"top-start",offset:{mainAxis:10,crossAxis:-12},hideOnMenuClick:!0},className:W(kn,"p-2"),children:i.jsx(_ce,{startNewChatDisabled:e,uploadButtonDisabled:t,startNewConversation:n,selectFile:s,selectOneDriveFile:o,takeScreenshot:p?r:void 0,selectUserOpenedTabs:c})},h)}function Np(){const[e,t]=Ee(WO),n=et();return d.useEffect(()=>{n.endsWith("/chats/new/talk")&&(M.setLandingPage("deepLinkVoiceCall"),t("audioCall"))},[n,t]),[e,()=>t(null)]}function Nk(){const e=w3(),t=_(Ae),n=_(m0),s=d.useCallback(async o=>{const{pageParam:r}=o,{url:c,args:l,conversationId:u}=r,m=await It(c,ZT,{query:l,analytics:{anonymousPath:"/conversations/*/history"},parseOptions:{safe:!0}}).then(p=>p.data);return m.results.length>0&&(m.results=sk(m.results),e(u,p=>{var f;p.length===0&&Nce((f=m.results.at(0))==null?void 0:f.createdAt),m.results.reverse(),p.unshift(...m.results)})),m},[e]);return vu({queryKey:["history",t],queryFn:s,initialPageParam:{url:t?`/conversations/${t}/history`:"",conversationId:t??""},getNextPageParam:o=>o.next&&t?{url:`/conversations/${t}/history`,args:{cursor:o.next},conversationId:t}:null,enabled:!!t&&!(n!=null&&n.prompt)})}function Nce(e){try{const t=ue(wn),n=t==null?void 0:t.updatedAt;if(!e||!n)return;const s=new Date(n),o=new Date(e);(s.getTime()-o.getTime())/1e3/60>1&&M.trackEvent({name:"system",data:{eventName:"historyUpdatedAtDiscrepancy",eventInfo_conversationId:t.id,eventInfo_conversationUpdatedAt:n,eventInfo_lastMessageCreatedAt:e}})}catch{}}const Mce=3,Rce=10,Pce=3,Jx={SUCCESS:"success",FAILED:"failed"};function Lce({toggleVoiceChat:e,enabled:t=!1}){const n=d.useRef(e);n.current=e;const s=d.useRef({hasAudio:!0,hasText:!0,retryCount:0,consecutiveErrors:0,isFirstTurn:!0}),[o,r]=d.useState(!1),c=_(Ae),l=d.useCallback(g=>{const y=s.current;let b="initialAutoRetry";o?b="userManualRetry":y.isFirstTurn?b="initialAutoRetry":y.consecutiveErrors>0&&(b="backendAutoRecover");const x=JSON.stringify({retryCount:y.retryCount,consecutiveErrors:y.consecutiveErrors});M.trackEvent({name:"system",data:{eventName:"voiceRecoveryEventData",eventInfo_result:g,eventInfo_scenario:b,eventInfo_customData:x,eventInfo_conversationId:c??""}})},[o,c]),u=d.useCallback(async()=>{n.current("end",{force:!0}),await Ab(),n.current("start",{force:!0}),s.current.isFirstTurn=!0,s.current.retryCount+=1},[]),m=d.useCallback(()=>{l(Jx.FAILED),n.current("end",{force:!0}),s.current.retryCount=0,s.current.consecutiveErrors=0,r(!0)},[l,r]),p=d.useCallback(()=>{(s.current.retryCount>0||s.current.consecutiveErrors>0||o)&&l(Jx.SUCCESS),s.current.retryCount=0,s.current.consecutiveErrors=0,r(!1)},[r,l,o]),f=d.useCallback(()=>{const g=s.current;if(!o&&g.isFirstTurn&&g.retryCount<Rce){u();return}if(!(!g.isFirstTurn&&!o&&(g.consecutiveErrors+=1,g.consecutiveErrors<Pce))){if(o&&g.retryCount<Mce){u();return}m()}},[o,u,m]);return{voiceRecoveryHandler:d.useCallback(g=>{if(t)switch(g.event){case"startMessage":s.current.hasAudio=!1,s.current.hasText=!1;break;case"appendText":s.current.hasText=!0;break;case"audio":s.current.hasAudio=!0,p();break;case"done":s.current.hasText&&!s.current.hasAudio&&f(),s.current.isFirstTurn=!1;break}},[p,f,t]),isNoAudioErrorVisible:t?o:!1}}const Am=class Am{constructor(){N(this,"readyTime",0);N(this,"startCallTime",0);N(this,"startMessageTime",0);N(this,"mostRecentTokenTime",0);N(this,"interruptAudioTime",0);N(this,"speechEndTime",0);N(this,"currentConversationId","");N(this,"currentCallId","");N(this,"currentMessageId","");N(this,"introComplete",!1);N(this,"receivedTranscript",!1);N(this,"receivedText",!1);N(this,"receivedAudio",!1);N(this,"receivedFirstToken",!1);N(this,"receivedLastToken",!1);N(this,"receivedFirstAnimation",!1);N(this,"hasAudioStarted",!1);N(this,"scenario")}static getInstance(){return this.instance||(this.instance=new Am),this.instance}onBeforeStartCall(t){this.readyTime=performance.now(),this.scenario=t?"appearance":void 0}onStartCall(t,n){this.interruptAudioTime=0,this.speechEndTime=0,this.introComplete=!1,this.startCallTime=performance.now(),this.currentConversationId=t,this.currentCallId=crypto.randomUUID(),M.trackEvent({name:"interaction",data:{eventName:"copilotCompose",eventInfo_conversationId:this.currentConversationId,eventInfo_inputMethod:"voice",eventInfo_landingPage:M.getLandingPage(),eventInfo_scenario:this.scenario,eventInfo_mode:n}}),M.trackEvent({name:"interaction",data:{eventName:"audioStartSent",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:this.startCallTime-this.readyTime,eventInfo_scenario:this.scenario,eventInfo_mode:n}})}onStartMessage(t){this.receivedTranscript=!1,this.receivedText=!1,this.receivedAudio=!1,this.receivedFirstToken=!1,this.receivedLastToken=!1,this.receivedFirstAnimation=!1,this.hasAudioStarted=!1,this.currentMessageId=t,this.startMessageTime=performance.now(),om.onStartMessage(t,this.startMessageTime),this.speechEndTime&&M.trackEvent({name:"system",data:{eventName:"copilotAudioReqtoResp",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:this.startMessageTime-this.speechEndTime,eventInfo_scenario:this.scenario}}),M.trackEvent({name:"system",data:{eventName:"copilotAudioStartMessage",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_scenario:this.scenario,eventInfo_firstTurn:!this.introComplete}})}onTranscriptReceived(){this.receivedTranscript=!0}onTextReceived(t){t===this.currentMessageId&&(this.receivedText=!0)}onAudioInterrupt(){this.interruptAudioTime=performance.now()}onAudioReceived(){this.receivedAudio=!0,!(!this.introComplete||!this.currentMessageId)&&(this.mostRecentTokenTime=performance.now(),this.receivedFirstToken||(this.receivedFirstToken=!0,this.startMessageTime&&M.trackEvent({name:"system",data:{eventName:"copilotAudioResptoReceived",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:this.mostRecentTokenTime-this.startMessageTime,eventInfo_scenario:this.scenario}}),this.speechEndTime&&M.trackEvent({name:"system",data:{eventName:"copilotAudioFirstTokenReceived",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:this.mostRecentTokenTime-this.speechEndTime,eventInfo_scenario:this.scenario}})))}onSpeechEndDetected(){this.speechEndTime=performance.now(),om.onSpeechEndDetected(this.speechEndTime),this.interruptAudioTime&&M.trackEvent({name:"system",data:{eventName:"copilotAudioInput",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:this.speechEndTime-this.interruptAudioTime,eventInfo_scenario:this.scenario}})}onServerVADLatencyMeasured(t){M.trackEvent({name:"system",data:{eventName:"copilotAudioSpeechEndDetected",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:t,eventInfo_scenario:this.scenario}})}onCallUIEventReceived(){const t=performance.now(),n=this.speechEndTime?t-this.speechEndTime:void 0;M.trackEvent({name:"system",data:{eventName:"callUIEventReceived",eventInfo_scenario:"adaptiveUI",eventInfo_conversationId:this.currentConversationId,eventInfo_duration:n}})}onCharacterAnimationReceived(){this.receivedFirstAnimation||(this.receivedFirstAnimation=!0,M.trackEvent({name:"system",data:{eventName:"copilotAudioCharacterAnimationReceived",eventInfo_conversationId:this.currentConversationId,eventInfo_duration:performance.now()-this.speechEndTime,eventInfo_messageId:this.currentMessageId,eventInfo_callId:this.currentCallId,eventInfo_scenario:this.scenario}}))}onCharacterAnimationEnd(){M.trackEvent({name:"system",data:{eventName:"copilotAudioCharacterAnimationEnd",eventInfo_conversationId:this.currentConversationId,eventInfo_duration:performance.now()-this.speechEndTime,eventInfo_messageId:this.currentMessageId,eventInfo_callId:this.currentCallId,eventInfo_scenario:this.scenario}})}onMessageDone(t){const{messageId:n,voiceType:s}=t;if(M.trackEvent({name:"system",data:{eventName:"copilotAudioMessageDone",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:n,eventInfo_scenario:this.scenario,eventInfo_firstTurn:!this.introComplete,eventInfo_transcriptReceived:this.receivedTranscript,eventInfo_textReceived:this.receivedText,eventInfo_audioReceived:this.receivedAudio}}),!this.introComplete){this.introComplete=!0,M.trackEvent({name:"system",data:{eventName:"copilotAudioCallSetUp",eventInfo_duration:performance.now()-this.readyTime,eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_responseVoiceType:s,eventInfo_scenario:this.scenario}});return}!this.receivedLastToken&&n===this.currentMessageId&&(this.receivedLastToken=!0,this.speechEndTime&&M.trackEvent({name:"system",data:{eventName:"copilotAudioLastTokenReceived",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:n,eventInfo_callId:this.currentCallId,eventInfo_duration:this.mostRecentTokenTime-this.speechEndTime,eventInfo_scenario:this.scenario}}),M.trackEvent({name:"system",data:{eventName:"copilotResponseRender",eventInfo_inputMethod:"voice",eventInfo_responseMethod:"voice",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:this.currentMessageId,eventInfo_responseVoiceType:s,eventInfo_landingPage:M.getLandingPage(),eventInfo_scenario:this.scenario}}))}onEndCall(t){const n=performance.now()-this.startCallTime;M.trackEvent({name:"system",data:{eventName:"copilotAudioCallEnd",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:n,eventInfo_numMessages:t,eventInfo_scenario:this.scenario}}),this.currentCallId=""}onAudioStartFailed(t){M.trackEvent({name:"system",data:{eventName:"copilotAudioStartFailed",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:performance.now()-this.startCallTime,eventInfo_reason:t,reason:t,eventInfo_scenario:this.scenario}})}onAudioStartTimeout(t){M.trackEvent({name:"system",data:{eventName:"copilotAudioStartTimeout",eventInfo_conversationId:this.currentConversationId,eventInfo_duration:t,eventInfo_scenario:this.scenario}})}onTerminated(t){M.trackEvent({name:"system",data:{eventName:"copilotAudioTerminated",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:performance.now()-this.startCallTime,eventInfo_reason:t,reason:t,eventInfo_scenario:this.scenario}})}onError(t){M.trackEvent({name:"system",data:{eventName:"copilotAudioError",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:performance.now()-this.startCallTime,eventInfo_errorCode:t,eventInfo_scenario:this.scenario}})}onAudioStart(){if(!this.hasAudioStarted){this.hasAudioStarted=!0;const t=Math.round(performance.now()-(this.speechEndTime||this.startMessageTime));M.trackEvent({name:"system",data:{eventName:"copilotAudioStart",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:t,eventInfo_scenario:this.scenario}})}}};N(Am,"instance");let n1=Am;const jce=null;function Oce(e){return e instanceof Error&&(e.name==="NotFoundError"||e.name==="OverconstrainedError")}function Dce(){if(Vo()==="study"&&ce("study-mode-voice"))return"study"}function Uce({initAudio:e,getAudioConstraints:t,onCallTerminated:n,onSpeechEndDetected:s,keepAudioInputAlive:o=!1,shouldRefetchHistory:r=!0,isVoiceRecoveryEnabled:c=!1}){const l=z(cr),u=z(jJ),m=z(ro),p=D("voice-call-jingles"),f=z(BO),h=_(Ae),g=_(Xm),y=_(cu),b=z(ol),x=z(VO),v=z(fr),S=z(Ji),C=D("voice-speed"),T=_(OW),w=w3(),{refetch:I}=Nk(),{showBoundary:A}=tw(),{isPortraitEnabled:E,portraitId:R,portraitVoiceId:U}=du(),K=z(JA),H=d.useRef("inactive"),te=bse(),oe=d.useRef(0),[ne,ge]=d.useState(!e),me=n1.getInstance();d.useEffect(()=>{e||(ge(!0),b("waiting-for-user-interaction"))},[e,ge,b]),d.useEffect(()=>{it.AudioIn.toggleMute(ne)},[ne]);const be=d.useCallback(async()=>{h&&(w(h,j=>j.splice(0)),await I())},[I,h,w]),we=d.useCallback(()=>{it.AudioOut.stopAudioPlayback(),hs()&&it.Animation.stopAnimation()},[]),se=d.useCallback(async j=>{H.current="ending",it.AudioIn.stopAudioCapture(),we(),ge(!1),j.sendAudioEnd(),f("idle"),ue(ol)==="available"&&(p&&it.AudioOut.playCallEndJingle(),r&&await be(),me.onEndCall(oe.current),oe.current=0,S(!0))},[we,f,p,r,me,S,be]),ae=d.useCallback(async j=>{const{AudioIn:O}=it,pe=xe=>{xe instanceof CustomEvent&&typeof xe.detail=="string"&&j.sendAudio(xe.detail)},Re=async()=>{o&&H.current==="active"&&ae(j),O.removeEventListener("audioData",pe),O.removeEventListener("audioTrackEnded",Re)};try{await O.startAudioCapture(t),O.addEventListener("audioData",pe),O.addEventListener("audioTrackEnded",Re)}catch(xe){xe instanceof Error&&(xe.name==="NotAllowedError"||xe.name==="NotSupportedError")?(b("microphone-denied"),await se(j),M.trackEvent({name:"system",data:{eventName:"copilotNoMicrophoneAccess"}})):Oce(xe)?(b("microphone-not-found"),await se(j),M.trackEvent({name:"system",data:{eventName:"copilotMicrophoneNotFound"}})):A(new Error(`Error starting audio capture: ${xe}`))}},[o,t,b,se,A]),fe=d.useCallback(j=>{const O=j==="mute";ge(O),ot(FK,O)},[]),re=d.useCallback(async j=>{it.currentTurnIndex+=1,it.AudioIn.audioContext||ae(j);const O=C?T:Kl;await it.AudioOut.initialize(O),await it.Animation.initialize(hs()),ue(h0)&&ue(Lb)&&fe("mute")},[T,C,ae,fe]),ke=d.useCallback(()=>{if(E)return"portrait";const j=Z.instance().config().audioConfigClientType;if(j)return j;if(hs())return"character"},[E]),q=d.useCallback(()=>{var j;return U??y??((j=g[0])==null?void 0:j.id)},[U,y,g]),G=d.useCallback(async(j,O)=>{if(!O||!e||H.current==="ending")return;b("checking-availability"),x(null);const{sendAudioStart:pe}=j,Re=ke(),xe=q(),qe=Dce();pe({conversationId:O,options:{voice:xe},clientType:Re,mode:qe,context:R?[{type:"portrait",portraitId:R}]:void 0}),it.currentTurnIndex=0;const Le=1e4;setTimeout(()=>{ue(ol)==="checking-availability"&&H.current==="active"&&me.onAudioStartTimeout(Le)},Le),me.onStartCall(O,qe),p&&await it.AudioOut.playCallStartJingle(),fi("onStartVoiceChat")},[e,b,me,x,p,ke,q,R]),J=d.useCallback(async(j,O)=>{await se(j),n(O)},[se,n]),Ie=d.useRef(null),X=d.useRef(null),he=d.useCallback(async j=>{try{if(!j.length)return;let O;const pe=[];for(const Le of j){if(Le.op==="replace"&&Le.path==="/selectedComponentPath"&&Le.value!==null){O=Le.value;continue}pe.push(Le)}if(O!==void 0&&ot(BK,O),!X.current){const{applyPatch:Le}=await P(async()=>{const{applyPatch:Je}=await import("./index-DS1hydBz.js");return{applyPatch:Je}},[]);X.current={applyPatch:Le}}const Re=ue(vC)??[],{applyPatch:xe}=X.current,{newDocument:qe}=xe(Re,pe);ot(vC,qe)}catch{}},[]),Ue=(j,O)=>{if(!j)return null;switch(j.type){case"topicList":return Array.isArray(j.topics)?{...j,selectedIndex:j.selectedIndex??-1}:{...j,topics:(O==null?void 0:O.type)==="topicList"?O.topics:null};case"summary":return j;default:return null}},ie=d.useCallback((j,O)=>{const pe=Ue(j,O);ot(Ng,pe)},[]),ve=d.useCallback(j=>O=>{var pe,Re;switch(O.event){case"startMessage":{const{messageId:xe}=O;if(me.onStartMessage(xe),we(),H.current==="inactive")break;re(j),b("available"),f("listening");break}case"transcriptEvent":{me.onTranscriptReceived();break}case"appendText":{const{messageId:xe}=O;me.onTextReceived(xe);break}case"audioStartFailed":{const{reason:xe}=O,{success:qe}=XT.safeParse(xe);b(qe?xe:"error"),me.onAudioStartFailed(xe);break}case"audioTimeRemaining":{const{seconds:xe}=O;x(xe);break}case"audio":{if(H.current==="inactive")break;me.onAudioReceived(),it.AudioOut.appendAudioData(O.audio);break}case"characterAnimation":{me.onCharacterAnimationReceived(),hs()&&it.Animation.setFrameData(O);break}case"characterAnimationEnd":{me.onCharacterAnimationEnd(),hs()&&it.Animation.setAnimationDone();break}case"callUI":{const{callUI:xe}=O,qe=ue(Ng);ie(xe,qe),me.onCallUIEventReceived();break}case"callUIUpdate":{const{update:xe}=O;he(xe);break}case"characterAppearance":{hs()&&te&&u({body:O.body,props:O.props});break}case"characterEmotion":{hs()&&it.Animation.setEmotionData({emotion:O.emotion,bodyReaction:O.bodyReaction});break}case"interruptAudio":{f("listening"),l("listening"),me.onAudioInterrupt(),we(),Ge.emit("portrait:interrupt-audio");break}case"speechEndDetected":{me.onSpeechEndDetected(),Ge.emit("portrait:end-speech"),l("thinking");const xe=it.AudioIn.onServerSpeechEndDetected();xe!==null&&me.onServerVADLatencyMeasured(xe),s==null||s();break}case"callTerminated":{J(j,O.reason),me.onTerminated(O.reason);break}case"error":{const{errorCode:xe}=O;switch(xe){case"over-turn-limit":{v(0);break}case"character-out-of-capacity":{j.setCallType("standard");break}}H.current==="active"&&me.onError(xe);break}case"done":{const{messageId:xe}=O;oe.current+=1,it.AudioOut.setAudioDone(),me.onMessageDone({messageId:xe,voiceType:y??((pe=g[0])==null?void 0:pe.id)});break}case"banned":{const{expiresAt:xe}=O,qe=Tb(xe);qe&&(Eb(qe,"voice",xe),we(),se(j));break}case"callTypeChanged":{const{callType:xe}=O;m(xe==="character"?Ir:void 0);break}}try{(Re=Ie.current)==null||Re.call(Ie,O)}catch{}},[me,we,re,b,f,x,u,l,s,J,v,y,g,se,m,te,he,ie]),Pe=d.useCallback(()=>j=>{switch(j.event){case"callEnded":{H.current="inactive";break}}},[]),_e=d.useCallback(async(j,O)=>{const{force:pe=!1}=O??{},Re=ue(Ae);if(j==="start"&&H.current!=="inactive"&&!pe||(j==="start"&&me.onBeforeStartCall(hs()),j==="end"&&H.current==="inactive"&&!pe))return;H.current=j==="start"&&e?"active":"inactive",om.onVoiceChatToggled(j,Re);const xe=await Ms({useMockConnection:!!jce});j==="start"?(xe.setOnEvent(ve(xe)),hs()&&te&&await it.Animation.initSyncHandler(),await G(xe,Re)):(xe.setOnEvent(Pe()),await se(xe))},[e,te,me,ve,G,Pe,se]),{voiceRecoveryHandler:Oe,isNoAudioErrorVisible:Ve}=Lce({toggleVoiceChat:_e,enabled:c});return Ie.current=Oe,d.useEffect(()=>{const{AudioOut:j}=it,O=()=>{K(!0),f("responding"),l("responding"),me.onAudioStart()},pe=()=>{K(!1),f("listening"),l("listening")};return j.addEventListener("audioStart",O),j.addEventListener("audioEnd",pe),()=>{j.removeEventListener("audioStart",O),j.removeEventListener("audioEnd",pe)}},[l,K,f,me]),{toggleVoiceChat:_e,toggleMute:fe,isInputMuted:ne,inputVolume:it.AudioIn.volume,isNoAudioErrorVisible:Ve}}const b2e="https://picassostaticassetsstg.azureedge.net/character/try-now/lumi_intro_394_222";function Xx(e,t){if(!e)return!1;const n=St(Xw,a.boolean())??St(Dj,a.boolean());return!t&&!n}function eS(e,t,n){return e?!t&&n&&!St(Oj,a.boolean()):!1}function Fce({isAudioCall:e,onCallTerminated:t,onMute:n,onUnmute:s}){const o=et(),r=OA(),[c,l]=Np(),u=c==="audioCall",[m,p]=d.useState(!1),f=_(ro),h=D("appearance-try-now-modal"),g=_(h0),y=_(Lb),b=_(LJ),x=D("appearance-discoverability"),v=_(Db),{state:S,setState:C}=Nb({defaultValue:!u}),{toggleVoiceChat:T,toggleMute:w,inputVolume:I,isInputMuted:A}=Uce({initAudio:S,onCallTerminated:t}),E=d.useRef(T);E.current=T,d.useEffect(()=>{e?!u&&!Xx(h,f)&&!g&&!eS(x,b,v)&&E.current("start"):E.current("end")},[o,e,u,E,f,g,h,x,y,b,v]);const R=d.useCallback(()=>{T("start"),S&&!m&&(p(!0),w("unmute"))},[T,S,m,w]),U=d.useCallback(()=>{l(),C(!0),T("end")},[l,C,T]),K=d.useCallback(()=>{C(!0),w(A?"unmute":"mute"),A?s==null||s():n==null||n()},[C,w,A,n,s]);d.useEffect(()=>{e&&u&&S&&R()},[S,e,u,R]);const H=d.useCallback(async(ne=!1)=>{(!e||ne)&&await te()!=="NotSupported"||(await r({talk:!0}),!Xx(h,f)&&!eS(x,b,v)&&R())},[x,b,e,h,r,f,R,v]);d.useEffect(()=>{u&&H(!0)},[u,H]);async function te(){return(await h$.run({onAudioCall:async()=>"NotSupported"})).onAudioCall()}const oe=d.useCallback(ne=>{const{toLocation:ge}=ne,me=ge.pathname;e&&!me.endsWith("/talk")&&E.current("end")},[e]);return Fb(oe),{launchAudioCall:H,startAudioCallIfNotStartedAlready:R,endAudioCall:U,toggleAudioInput:K,inputVolume:I,isInputMuted:A,isAudioDeepLink:u,canInitAudio:S}}const Mk=crypto.randomUUID();function Bce(){return{sdk:"8.0",messaging:{origin:window.location.origin,channelId:Mk},accessibility:{showFocusOnLoad:!1,enableFocusTrap:!0},authentication:{},entry:{oneDrive:{recent:{}}},typesAndSources:{mode:"files",filters:TX(),pivots:{oneDrive:!0,recent:!0,photos:!1}}}}function Vce(){const e=new URLSearchParams({app:"CMC",scenario:"AnalyzeDoc",filePicker:JSON.stringify(Bce()),locale:Wt.resolvedLanguage??"en-US"});return`${Rk}/picker?${e}`}const Rk="https://onedrive.live.com";async function Pk(){const e=await fq();return(e==null?void 0:e.accessToken)??""}function Hce(e){return e!==null&&typeof e=="object"&&"type"in e&&e.type==="initialize"&&"channelId"in e&&typeof e.channelId=="string"}function zce({port:e,onClose:t,onPick:n,setIsLoading:s,onError:o}){return async r=>{let c;switch(r.data.type){case"notification":r.data.data.notification==="page-loaded"&&s(!1);break;case"command":switch(e.postMessage({type:"acknowledge",id:r.data.id}),r.data.data.command){case"authenticate":c=await Pk(),typeof c<"u"?e.postMessage({type:"result",id:r.data.id,data:{result:"token",token:c}}):(e.postMessage({type:"result",id:r.data.id,data:{result:"error",error:{code:"authTokenError",message:"Could not get OneDrive authentication token."}}}),s(!1),o(),t());break;case"close":t();break;case"pick":r.data.data.items!==void 0&&r.data.data.items.length>0&&r.data.data.items[0]!==void 0&&(n(r.data.data.items[0]),e.postMessage({type:"result",id:r.data.id,data:{result:"success"}}),t());break;default:s(!1),e.postMessage({result:"error",error:{code:"unsupportedCommand",message:r.data.data.command},isExpected:!0}),o(),t();break}break}}}function Wce({onClose:e,onPick:t,onError:n}){const s=d.useRef(null),{t:o}=V(),[r,c]=d.useState(!0);return d.useEffect(()=>{var f;const l=()=>{const h={title:o("composer.errors.attachmentOneDrive.title"),message:o("composer.errors.attachmentOneDrive.message")};n(h),M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:h.message,eventInfo_details:"Error submitting message"}})},u=(f=s.current)==null?void 0:f.contentWindow;let m,p;return u&&(async()=>{const g=u.document.createElement("form");g.method="POST",g.action=Vce(),u.document.body.appendChild(g);const y=u.document.createElement("input");y.type="hidden",y.name="access_token",y.value=await Pk(),g.appendChild(y),window.addEventListener("message",b=>{if(b.origin&&b.origin===Rk){const x=b.data;if(Hce(x)&&x.channelId===Mk){if([p]=b.ports,!p){c(!1),l(),e();return}m=zce({port:p,onClose:e,onPick:t,onError:l,setIsLoading:c}),p.addEventListener("message",m),p.start(),p.postMessage({type:"activate"})}}}),g.submit()})(),()=>{m&&window.removeEventListener("message",m),p&&p.close()}},[e,t,n,o]),i.jsxs(un,{isOpen:!0,onClose:e,className:"flex h-[90vh] max-h-[680px] w-[90vw] max-w-[1080px]",fullBleed:!0,children:[r&&i.jsxs("div",{className:"flex size-full items-center justify-center","aria-live":"polite",role:"status","aria-label":o("oneDrive.pickerLoading"),children:[i.jsx("span",{className:"sr-only",children:o("oneDrive.pickerLoading")}),i.jsx($e,{className:"size-20"})]}),i.jsx("iframe",{title:o("onedrive.filePicker"),ref:s,hidden:r,width:"100%",height:"100%"})]})}const Gce=10;function $ce(e){const{triggerComponent:t,offset:n=Gce,onInsideEvent:s}=e,{t:o}=V(),{alreadyShown:r,dismissCoachmark:c}=Lo(foe);return i.jsx(iv,{className:"max-w-48 cursor-pointer bg-black dark:bg-midnight-150",arrowClassName:"dark:fill-midnight-150 fill-black",isOpen:!r,placement:"top",offset:n,withArrow:!0,renderReferenceElement:l=>i.jsx(ee.div,{ref:l.ref,className:"relative",children:t}),portalId:"composer-container",onInsideEvent:()=>{s==null||s(),c()},children:i.jsx("div",{className:"flex max-w-[160px] flex-col gap-0.5 bg-black text-white dark:bg-midnight-150 dark:text-black",children:i.jsx("div",{className:"text-2xs",children:o("settings.appearanceSettingCoachmarkText")})})})}function qce(){const e=D("pay-shopify-checkout"),t=D("pay-native-checkout"),n=D("pay-webview-checkout"),s=D("pay-marketplace"),o=D("pay-buy-for-me");return e||t||n||s||o}const Kce=d.lazy(()=>P(()=>import("./wallet-section-SVDq_ix3.js"),__vite__mapDeps([365,0,1,322,366,312,308,349,314,315,316,317,318,319,307])).then(e=>({default:e.WalletSection}))),Lk=64,Zce=8,Yce=4,v2e={opacity:0,translateY:Lk},Qce={opacity:1,scale:1,translateY:0};function Jce(){return ce("chat-layout-v2")?{opacity:1,scale:1,translateY:0}:{opacity:0,translateY:Lk}}const ni="size-6",Xce=d.lazy(()=>P(()=>import("./upsell-block-CF9yHmoz.js"),__vite__mapDeps([367,0,1,368]))),ele=d.lazy(()=>P(()=>import("./price-tracking-block-CWAbnvnc.js").then(e=>e.p),__vite__mapDeps([369,0,1,323,370,325,371,328,327])).then(e=>({default:e.PriceTrackingBlock}))),tle=d.lazy(()=>P(()=>import("./composer-auto-complete-Cf9eqBpF.js"),__vite__mapDeps([372,0,1]))),nle=d.lazy(()=>P(()=>import("./composer-actions-prompt-suggestions-Ksw5enjj.js"),__vite__mapDeps([373,0,1,374,375,376,377,378,379,380,381,382,383])).then(e=>({default:e.ComposerActionsPromptSuggestions}))),sle=d.lazy(()=>P(()=>import("./voice-options-O1qAi1Kw.js").then(e=>e.v),__vite__mapDeps([303,0,1,304]))),ole=d.lazy(()=>P(()=>import("./think-deeper-pro-subscription-BUNq1XT2.js"),__vite__mapDeps([384,0,1]))),ale=d.lazy(()=>P(()=>import("./over-task-quota-DKoB5sB5.js"),__vite__mapDeps([385,0,1,386])).then(e=>({default:e.OverTaskQuota}))),rle=d.lazy(()=>P(()=>import("./computer-use-task-closed-DpxpfCbO.js"),__vite__mapDeps([387,0,1,388,389,390,391,392,393,394,395,396,397,398,386])).then(e=>({default:e.ComputerUseTaskClosed}))),ile=d.lazy(()=>P(()=>import("./safety-risk-card-BYuPEr4y.js"),__vite__mapDeps([399,0,1,400,386])).then(e=>({default:e.SafetyRiskCard}))),cle=d.lazy(()=>P(()=>import("./add-to-page-Ctlhppiy.js"),__vite__mapDeps([401,0,1])).then(e=>({default:e.AddToPage}))),lle=d.lazy(()=>P(()=>import("./cross-selling-strip-consumer-Dg7U3JRn.js"),__vite__mapDeps([402,0,1,368]))),ule=d.lazy(()=>P(()=>import("./composer-prompt-review-7O_xkaR3.js"),__vite__mapDeps([403,0,1,333]))),ch=d.lazy(()=>P(()=>import("./composer-action-CNHYCeAo.js"),__vite__mapDeps([386,0,1]))),dle=d.lazy(()=>P(()=>import("./biometric-consent-CAmvHNQg.js"),__vite__mapDeps([404,0,1])).then(e=>({default:e.BiometricConsent}))),mle=d.lazy(()=>P(()=>import("./daily-briefing-chat-Bx9JW8NB.js"),__vite__mapDeps([405,0,1,406,407])).then(e=>({default:e.DailyBriefingChat}))),ple=d.lazy(()=>P(()=>import("./composer-sign-in-DdzVujRH.js"),__vite__mapDeps([408,0,1,409]))),fle=d.lazy(()=>P(()=>import("./daily-briefing-composer-player-JQlPryGl.js"),__vite__mapDeps([410,0,1,397,392,393,394,395,407])));function hle(){var by,vy;const{t:e}=V(),{isPortraitEnabled:t}=du(),n=z(vE),s=z(yE),o=D("image-copy-paste"),r=_(Ma),c=qce(),l=D("shopping-card"),u=wu(),m=D("anonymousattachmentupload"),p=D("onedrive-file-upload"),f=D("ds-editprompt"),h=D("ds-new-progress"),g=!_p(),y=_(aE),b=D("multi-file-upload"),x=D("dr-nano-single-file-upload"),v=Hr(),S=Ns(),C=OA(),T=ire(),w=et(),I=_(xt),A=Wn(),E=_(eo),R=z(rc),U=lt({breakpoint:"sm"}),K=Sm({breakpoint:"h760"}),H=Sm({breakpoint:"h600"}),te=nb(),oe=wK(),ne=gb(),ge=SK(),[me,be]=d.useState(null),we=z(dI),[se,ae]=Ee(Fr),fe=_(Kq),re=_(Zq),ke=_(zO),q=_(gI),G=_(UO),J=_(Ag),[Ie,X]=d.useState(!1),he=D("appearance-discoverability"),Ue=_(ro),ie=_(Ob),ve=G||Ie,{startConversationDisabled:Pe}=yb(),_e=_(zn),[Oe,Ve]=d.useState(!1),[j,O]=Ee(as),pe=z(Vq),[Re,xe]=Ee(cK),[qe,Le]=Ee(yu),Je=z(p0),Dt=_(Io),cs=(Dt==null?void 0:Dt.type)==="popup",Tn=lre(),La=cs||Tn,uo=ok(),Gn=(by=Z.instance().config().composer)==null?void 0:by.enableAppShadow,{isPlaying:mo,pause:dn,resetAllTimers:Mn}=ek(),ls=Hae(),qo=bre(),po=rre(),ja=Gt(),Rs=d.useRef(null),Rt=d.useRef(null),ht=d.useRef(null),Ps=d.useRef(null),[Oa,Ko]=d.useState(!1),[Xe,on]=d.useState(null),Da=d.useCallback(Q=>{on(Q)},[on]),Ua=d.useCallback(()=>{Ko(!1)},[Ko]),fo=D("imagegenv3"),Fa=D("logged-out-sharing"),Ba=D("remove-prefill-space-after-prompt-cmc"),{isMediaViewerOpen:Vt,closeMediaViewer:$n,isPictureInPictureSupported:Gr,triggerPictureInPicture:Ou,showOneLineComposerWhenMediaViewerOpen:ho,contentComposerType:$r,contentPageType:Du}=io(),{trackConsumptionPageComposerClick:us,trackConsumptionPageComposerSubmit:Uu}=Mae(),mn=$$(),Fu=$r===um.IMAGE_VIEWER,Bu=$r===um.CLOSE_BUTTON,Vu=z(pp),Te=w.endsWith("/talk"),L=w.endsWith("/daily"),de=D("1s-dbchat"),Ne=D("db-transcript"),dt=D("discover-composer-off"),mt=wp(),Ut=L||mt,Qt=Cp(),an=dp(),Rn=w.startsWith("/chats")&&!Te,Pt=w.startsWith("/shares"),Hu=Du==="weather",bc=_(ol),{login:G6}=Lr(),qr=j==="dialog",zu=c&&j==="checkout",$6=tre(),Zo=Bo(),[q6,K6]=d.useState(!1),ds=mv(),{isCentralComposerEnabled:Z6,isAutoSuggestEnabled:Y6,isStarterPromptsEnabled:Q6,isWidgetSectionEnabled:J6,isAppearanceOnHomeEnabled:X6,overrideUserInputPlaceholderFromWidget:e7}=dc(),{floatingStyles:t7,edgeTabMenuRefs:Lp,isMultiTabsMenuExpanded:n7,setIsMultiTabsMenuExpanded:Nv,multiTabsMenuMode:s7,setMultiTabsMenuMode:Mv,handleMentionEvent:o7,handleMultiTabsMenuSaveBtnEvent:Rv,handleMultiTabsMenuCloseBtnEvent:Pv,handleUserInputEnterEvent:a7,handleUserInputKeydownEvent:Lv,isMentionTriggered:jv,isFetchingTabsPageContext:Ov}=Nae(),Dv=_(VQ),vc=Zo==="computerUse",Kr=Z6&&(!j||j==="biometric-consent"),Uv=Y6&&!j&&!vc,Fv=ge==="autosuggest"&&Uv,Bv=d.useId(),r7=_(db),i7=Q6&&(!j||j==="biometric-consent")&&!vc&&!r7&&(!H||U),c7=Kr&&J6&&!vc&&!U&&!K,yc=d.useRef(null),l7=cre(),u7=!Te&&!L&&!mt&&!Kr&&!zu&&!Hu;let Vv=!0;const d7=D("composer-free-chat"),jp=(an||Rn||Qt||Pt)&&(!j||j==="biometric-consent")&&!(Vt&&!ho);jp&&((vy=Z.instance().config().composer)!=null&&vy.disableTextInput)&&(Vv=d7);const Op=zu,Dp=_(ib),Hv=_(GO),[Up,zv]=Ee(Wq),Wv=_(Gq);D("multiple-research-tasks-in-conversation");const Zr=HZ(),Cc=_(nn),Va=Cc==="side-by-side"&&(Zr==null?void 0:Zr.type)==="computerUse"&&Rn,Gv=Lu(),Wu=Va&&!m3(Zr.status),xc=Va&&qZ(Zr),m7=Va&&KZ(Zr),p7=!w.endsWith("/agents")&&!L&&!Qt&&!Pt&&!X6&&!Vt&&!v,Gu=Wv&&!0&&!h,$v=xc||Va||L||Gu||Vt,f7=d.useCallback(()=>{const Q=[];if(Rt.current){const Me=Rt.current.getTextAreaRef();Me.current&&Q.push(Me)}return Q},[Rt]),qv=!(Vt&&!ho)&&!Te&&(!j||j==="daily-briefing-chat"),$u=ke||!qv||Wu||xc||m7||Gu,[h7,g7]=d.useState(!1),Fp=zae(qv),Sc=_(zq),Yo=_(Hq),[go,Kv]=Ee(AA),Bp=Cr(),{dismissCoachmark:Zv}=Lo(Ru),{dismissCoachmark:Yv}=Lo(rv),wc=j==="prompt-sign-in"||j==="prompt-3p-sign-in"||j==="prompt-location"||j==="prompt-review"||j==="confirm-link-navigation"||j==="cross-promo-card"||j==="shopping-upsell-card"||j==="shopping-price-tracking"||j==="add-to-page"||j==="safety-risk-card"||j==="computer-use-task-closed"||j==="over-task-quota"||j==="daily-briefing-chat"||j==="biometric-consent",Qv=!Te&&j!=="daily-briefing-player"&&j!=="audioSettings"&&j!=="reasoning-mode-pro-subscription"&&j!=="checkout"&&!wc&&!(Vt&&!ho),b7=d.useCallback(Q=>{ia(Q)},[]),v7=()=>{var Me;const Q=((Me=Z.instance().config().composer)==null?void 0:Me.homeButtonState)??"enabled";return Q!=="enabled"?Q:an?"disabled":"enabled"},y7=d.useCallback(()=>{var Q;(Q=Rt.current)==null||Q.focus(),qa(!0)},[]),C7=d.useCallback(()=>{ht.current&&(ht.current.value="")},[]),Yr=d.useCallback((Q,Me)=>{ae({isOpen:!0,scenario:Me??null,reason:Q})},[ae]),x7=d.useCallback(()=>{Yr("fileUpload")},[Yr]),{processUploadedFiles:Jv,processUploadedLocalFiles:Qo,isUploadingAttachments:S7,uploadedAttachments:Qr,resetFileUpload:w7,removeAttachment:Vp}=Yae(y7,ia,C7,x7),I7=_(BQ),ms=Qr.filter(({error:Q})=>!Q),Hp=(ms.length>0||Fp)&&!Te,Xv=ms.length>0||Dv,T7=S7||ds&&Ov,ey=!!(ne.trim().length>0||Xv)&&!$u,ty=!!((me&&me.length>0)===!0||T7||ve||J||ne.trim().length===0&&Zo==="computerUse"),E7=D("file-upload-config"),Ic=_(Wo),ny=b&&ms.length>=Ic.maxFilesPerMessage,[A7,_7]=d.useMemo(()=>{const{reason:Q}=se;return Q?[e(`signInPrompt.${Q}Header`,e("signInPrompt.header")),e(`signInPrompt.${Q}Text`,e("signInPrompt.text"))]:[e("signInPrompt.header"),e(Fa?"signInPrompt.textV2":"signInPrompt.textV3")]},[Fa,se,e]),[sy,k7]=d.useState({onSubmitCallback:null,onCancelCallback:null}),N7=d.useCallback(()=>{var Q;Rv(),(Q=Rt.current)==null||Q.focus()},[Rv]),M7=d.useCallback(()=>{var Q;jv||(Q=Rs.current)==null||Q.focus(),Pv()},[Pv,jv]),R7=d.useCallback(async()=>new Promise(Q=>{if(ue(iE)||ms.length===0){Q(!0);return}O("biometric-consent"),k7({onSubmitCallback:()=>{O(null),Q(!0)},onCancelCallback:()=>{O(null),Q(!1)}})}),[ms,O]),P7=d.useCallback(Q=>{var tt;if(!Lv(Q)&&Q.key==="ArrowDown"&&(tt=Rt.current)!=null&&tt.contains(document.activeElement)&&yc.current){Q.preventDefault();const Ye=yc.current.querySelector("button");Ye&&Ye.focus()}},[Lv]),L7=async()=>{var Q;await Ks.stopMessage(),(Q=Rt.current)==null||Q.focus()},zp=async Q=>{var Me,tt;if(Pt&&await Hx(),!ey||!ne&&!Xv||ty){await Ks.onSubmitMessageBlocked();return}if(!(fo&&!await R7())){if(h&&Zo==="research"&&Wv){const Ye=ue(Ae);if(Ye){Zc(e("error.researchTaskNotAllowedWhileRunningAnother"),Ye),_n(ln());return}}Zv(),Yv(),fm(),$7?(tt=Rt.current)==null||tt.focus():(Me=Rt.current)==null||Me.blur(),await X7(Q??ne)}},j7=d.useCallback(async()=>{await C()},[C]),Wp=_(JA),{launchAudioCall:Gp,startAudioCallIfNotStartedAlready:$p,endAudioCall:Tc,toggleAudioInput:O7,inputVolume:D7,isInputMuted:U7,isAudioDeepLink:F7,canInitAudio:B7}=Fce({isAudioCall:Te,onCallTerminated:j7,onMute:()=>yt({source:"audioCall",scenario:"mute"})});d.useEffect(()=>{fe&&(O(Bp?"prompt-3p-sign-in":"prompt-sign-in"),se.isOpen&&ae({...se,isOpen:!1,reason:se.reason??(ke?"overTurnLimit":null)}),qa(!0))},[O,ae,fe,se,Bp,ke]),d.useEffect(()=>{re&&("geolocation"in navigator?setTimeout(()=>{O("prompt-location"),qa(!0),tn("hasBeenPromptedForLocation","true"),M.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"seen"}})},_R):M.trackEvent({name:"system",data:{eventName:"geolocationUnavailable"}}))},[O,re]),d.useEffect(()=>{Ut?O("daily-briefing-player"):La?(qa(!0),O("cross-promo-card")):O(xc?"safety-risk-card":Wu?"computer-use-task-closed":null)},[O,La,Wu,xc,Ut]);const qp=d.useRef(null),qu=$i(Q=>{const Me=document.getElementById("app");Me&&(pe(Q.height),Me.style.setProperty("--composer-container-height",`${Q.height}px`))}),V7=$i(Q=>{qu.current&&(Q.height===0?qu.current.style.removeProperty("--composer-attachments-height"):qu.current.style.setProperty("--composer-attachments-height",`${Q.height+Zce}px`))}),H7=()=>{En(),xe(void 0)},oy=()=>{Oe&&($p(),Ve(!1))},En=()=>{if(L&&j==="daily-briefing-chat"&&(O("daily-briefing-player"),fm()),j==="prompt-3p-sign-in"&&(mt||L)&&O("daily-briefing-player"),!(ke||L||mt||xc)){if(Wu){O("computer-use-task-closed");return}if(qr&&(Yo!=null&&Yo.closeDialogCallback)){Yo.closeDialogCallback();return}j==="prompt-review"&&qre(ue(Ae),"dismissed"),j==="cross-promo-card"&&uo(),j==="audioSettings"&&oy(),O(null),j==="prompt-sign-in"&&se.scenario&&ae({isOpen:!1,scenario:null})}},Kp=d.useCallback(async()=>{t&&(s(!1),n(null)),Tc(),Vu("bottom"),t?await S({to:"/labs/portrait",from:w}):await C()},[t,n,s,Tc,Vu,S,w,C]);d.useEffect(()=>{Z.instance().config().endAudioOnVisibilityHidden&&!Hv&&(mo?dn==null||dn():Te&&Kp())},[Kp,Te,mo,dn,Hv]);const ay={title:e("composer.endAudioCall"),icon:i.jsx(Yt,{className:ni,"aria-hidden":!0}),isVisible:!0,onClick:Kp},z7=Aae(),ry=Q=>{t&&(Ge.emit("portrait:change-voice",Q),s(!0)),L||mt?dn==null||dn():Te&&Tc(),Ve(!0)},Ku=z(fp),Zp=(["chat","reasoning","smart","study"].includes(Zo)||Zo==="research"&&x)&&!Va&&!h7,W7=_(pc),Pn=Zo==="research"?Ic.document.mimeTypes:W7,G7=n4(Pn);d.useEffect(()=>{for(const[Q,Me]of Qr.entries())Hb(Me.file,{supportedMimeTypes:Pn})||Vp(Q)},[Pn,Qr,Vp]);const $7=pv(),rn=cv(),Ec=rn&&!Te&&!Vt,Ac=d.useCallback(()=>{Ku(null)},[Ku]);d.useEffect(()=>{Ac()},[Qv,Ac]),d.useEffect(()=>{Td(ne&&Dp?"autosuggest":vc&&(!ne||rn)?"actions-autosuggest":"starter-prompts")},[Dp,ne,rn,vc]),no({onOutsideEvent:()=>{En()},elements:[qp],includeScroll:!1,invokeOnce:!1}),no({onOutsideEvent:Yc,elements:[qp,yc],includeScroll:!1,invokeOnce:!1});const iy={title:e("composer.closeVoiceSettings"),icon:i.jsx(Yt,{className:ni,"aria-hidden":!0}),isVisible:!0,onClick:py},Zu={title:e("imageCard.composer.closeImageViewer"),icon:i.jsx(Yt,{className:ni,"aria-hidden":!0}),isVisible:!0,onClick:$n},Yp=_(ac),{shareClickHandler:q7}=ak({messageId:Yp==null?void 0:Yp.messageId,scenario:"shareAsLinkSingleImage",trackShareClick:()=>EA({scenario:"shareAsLinkSingleImage",pageName:"imageDetailPage"})}),cy={title:e("imageCard.composer.shareImageViewer"),icon:i.jsx(Ap,{className:ni,"aria-hidden":!0}),isVisible:!0,onClick:q7},ly={title:e("imageCard.composer.downloadImageViewer"),icon:i.jsx(Tp,{className:ni,"aria-hidden":!0}),isVisible:!0,onClick:async()=>{if((mn==null?void 0:mn.type)==="image")try{await i4({url:mn.url,fileName:uk()})}catch(Q){const Me=Q instanceof Error?Q.message:"unknown error on downloading image";Bg(Me)}}},K7=Q=>{var Ye;qa(!0),u&&R3("idle");const{relatedTarget:Me}=Q;((Ye=yc.current)==null?void 0:Ye.contains(Me))||setTimeout(()=>Yc(),100)},Z7=Q=>{Uv&&Q&&a3(Q)},Y7=async()=>{p7&&(an&&Se({source:"composerInput",scenario:"clickNavigateToChat",pageName:"discover"}),Rn||await fy()),Vt&&ho&&us()},uy=d.useCallback(async Q=>{const{actionType:Me,id:tt,prompt:Ye,uri:Ls,source:js}=Q;switch(Me){case"prefillComposer":{if(Ye){tt&&mk({prompt:Ye,type:tt,source:js});const Os=Ba?Ye:`${Ye} `;wi({prompt:Os,prefillSource:js==="widgets"?"widget":"starterPill"})}break}case"sendMessage":{if(Ye)try{X(!0),await C(),await Ks.submitMessage({text:Ye,inputMethod:"text"})}finally{X(!1)}break}case"deepLink":{Ls&&Ls==="copilotn://voiceCall"&&await Gp();break}}},[Ba,Gp,C]),Q7=(Q,Me)=>{pk({prompt:Q,prefix:Me}),zp(Q)},dy=d.useCallback(Q=>{wi({prompt:Q,prefillSource:"promptPassThrough"}),Le(null),Je(null)},[Le,Je]);d.useEffect(()=>{((qe==null?void 0:qe.source)==="promptInUrl"||(qe==null?void 0:qe.source)==="edgeOnAskCopilot")&&dy(qe.prompt)},[qe,dy]);const Qp=d.useCallback((Q,Me)=>{const{scenario:tt,reasonIfSignInError:Ye}=Me;Q.message==="not-signed-in"?Yr(Ye,tt):ia(a4(Q.message))},[Yr]),J7=D("local-agents"),X7=async Q=>{var js,Os,yy,Cy;const Me=jre(Q),tt=Lre(Q,Qr),Ye=Q.trim(),Ls=Zo==="research"&&f?{research:{awaitUserConfirmation:!0}}:void 0;if(j!=="daily-briefing-chat"&&(w7(),qa(!0),zA(!1),we(!0),O(null)),Yc(),J7){if(Ye.startsWith("/agent")){await T();return}if(w.endsWith("/agents"))return}Vt&&ho?(R(!0),Uu()):j!=="daily-briefing-chat"&&!v&&await C();try{X(!0);let Jo;ls&&(Jo=ls),qo&&(Jo=qo),po&&(Jo=po),await Ks.submitMessage({text:Ye,filesWithAttachment:Qr,inputMethod:"text",scenario:Me??void 0,customData:tt??void 0,reference:Jo,context:Ls})}catch(Jo){if(Jo instanceof Error){let xy={};ms.length>0&&(xy={eventInfo_uploadFileSize:((Os=(js=ms[0])==null?void 0:js.file)==null?void 0:Os.size)??0,eventInfo_uploadFileType:((Cy=(yy=ms[0])==null?void 0:yy.file)==null?void 0:Cy.type)??"",eventInfo_numDocumentsUploaded:ms.length}),M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:Jo.message,eventInfo_details:"Error submitting message",...xy}}),Qp(Jo,{reasonIfSignInError:"fileUpload"})}else M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:"Unknown error",eventInfo_details:"Error submitting message"}}),ia({title:e("composer.errors.default.title"),message:e("composer.errors.default.message")})}finally{X(!1),Ore()}},_c=d.useCallback(Q=>{const Me=!ja&&!m;return Me&&Yr("fileUpload",Q),Me},[ja,m,Yr]),my=d.useCallback(()=>{var Q;_c()||(Q=ht.current)==null||Q.click()},[_c]);d.useEffect(()=>{if($u||!o)return()=>{};const Q=async Me=>{const{file:tt,error:Ye}=_X(Me);(tt??Ye)&&(Me.preventDefault(),Ye?Qp(Ye,{reasonIfSignInError:"fileUpload"}):tt&&Qo({rawFiles:[tt],scenario:"pasteUpload",replaceExisting:!b,supportedMimeTypes:Pn}))};return document.addEventListener("paste",Q),()=>document.removeEventListener("paste",Q)},[Qo,$u,o,Qp,b,Pn]),d.useEffect(()=>{Up!==null&&(Qo({rawFiles:[Up],scenario:"fileUpload",replaceExisting:!b,supportedMimeTypes:Pn}),zv(null))},[Up,Qo,zv,b,Pn]),d.useEffect(()=>{Xe&&!Oa&&(Jv({uploads:[{kind:"onedrive",item:Xe,file:new File([],Xe.name)}],scenario:"fileUpload",replaceExisting:!b,supportedMimeTypes:Pn}),on(null))},[Xe,on,Oa,Jv,b,Pn]),d.useEffect(()=>{L&&Mn()},[L]);function e9(Q){const Me=Array.from(Q.target.files??[]),tt=Me[0];if(Me.length===0||!tt)return;Qo({rawFiles:b?Me:[tt],scenario:"fileUpload",replaceExisting:!b,supportedMimeTypes:Pn})}const t9=Q=>{if(!Zp||(Q.preventDefault(),_c()))return;Ac();const Me=Q.dataTransfer.files[0],tt=Array.from(Q.dataTransfer.files);Me&&Qo({rawFiles:b?tt:[Me],scenario:"fileUpload",replaceExisting:!b,supportedMimeTypes:Pn})};function py(){K6(!0),O(Q=>Q==="audioSettings"?(oy(),null):"audioSettings")}async function n9(){Pt&&await Hx(),yt({source:"audioCallButton"}),await Gp()}d.useEffect(()=>{const Q=Me=>Me==="start"?$p():Tc();return Ge.on("composer:request-voice",Q),()=>{Ge.off("composer:request-voice",Q)}},[Tc,$p]),d.useEffect(()=>{const Q=()=>{var Me;(Me=Rt.current)==null||Me.focus()};return Ge.on("composer:focus-input",Q),()=>{Ge.off("composer:focus-input",Q)}},[]);const s9=d.useCallback(()=>{var Q;(Q=Rt.current)==null||Q.focus()},[Rt]),fy=zo(s9),hy=d.useCallback(async()=>{if(_c())return;Ac();const{file:Q,error:Me}=await p$.run({});Q?Qo({rawFiles:[Q],scenario:"screenshot",replaceExisting:!b,supportedMimeTypes:Pn}):Me&&ia(Me)},[Ac,_c,Qo,b,Pn]),o9=async()=>{En(),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(async Q=>{const{latitude:Me,longitude:tt,accuracy:Ye}=Q.coords;M.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"shared",eventInfo_locationAccuracy:Ye}}),await cn({path:"/user/location",args:{body:{latitude:Me,longitude:tt,accuracyInMeters:Ye,provider:Ye<100?"gps":"wifi"}}})},Q=>{M.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"denied",eventInfo_error:{code:Q.code,message:Q.message}}}),ia({title:e("composer.errors.location.title"),message:e("composer.errors.location.message")})},{enableHighAccuracy:!0})},a9=K_({from:"/",scenario:"voice"}),r9=()=>{const Q=i.jsx(vs,{className:"end-0",data:ay,children:ay.icon});if(j==="dismiss-audio-call-only")return Q;switch(bc){case"requires-account":case"signed-out":return i.jsxs(i.Fragment,{children:[Q,i.jsx(av,{className:"mx-2",title:e("voice.signUpOrLogin"),onClick:a9})]});case"time-expired-non-pro":case"time-expired-month-non-pro":return i.jsxs(i.Fragment,{children:[Q,z7]});case"time-expired":case"checking-availability":case"error":case"not-in-flight":case"throttled":case"throttled-non-pro":case"region-not-available":case"time-expired-month":case"microphone-denied":case"microphone-not-found":return Q;case"waiting-for-user-interaction":case"available":{const Me=he&&!Ue&&ie,tt=i.jsx(vs,{className:"start-0",data:{title:e("composer.voiceSettings"),isVisible:!0,onClick:py},children:i.jsx(pt,{url:_ae,className:ni,"aria-hidden":!0})});return i.jsx(ee.div,{className:F(j!=="audioSettings"&&"flex"),children:j==="audioSettings"?i.jsx(vs,{className:"end-0",data:iy,children:iy.icon}):i.jsxs(i.Fragment,{children:[Q,i.jsx(ise,{className:"mx-2",inputVolume:D7,isMuted:U7,isOutputPlaying:Wp,coachUserUnmute:F7&&!B7&&!q6,onClick:O7}),i.jsx(ld,{children:Me?i.jsx($ce,{triggerComponent:tt,offset:Yce}):tt})]})})}default:return bc}},i9=()=>ms.length>0?e("userInput.messageRequiredPlaceholderText"):Fp?Zp?E7?e("userInput.fileUploadLimit",{imageSizeLimit:Ic.image.maxBytes/(1024*1024),documentSizeLimit:Ic.document.maxBytes/(1024*1024),maxCount:Ic.maxFilesPerMessage}):e("userInput.imageDropPreviewPlaceHolderText"):e("userInput.fileDropNotSupportedPlaceHolderText",{chatMode:Ll({chatMode:Zo})}):Pt?e("userInput.continueConversationInputPlaceholderText"):y!=null&&y.name&&u?e("userInput.characterPlaceholderText",{character:y.name}):Gu?e("research.placeholder"):de&&L?e(j==="daily-briefing-chat"?"userInput.dailyChatInputPlaceholderText":"userInput.dailyComposerInputPlaceholderText"):ds?e("userInput.placeholderTextWithMention"):e7??e("userInput.placeholderText"),Jp=({enableActionButtons:Q})=>{var Ls;const Me=(Ls=Z.instance().config().composer)==null?void 0:Ls.smallAttachmentCard,Ye=j==="daily-briefing-player"&&de&&L?"":void 0;return i.jsxs(i.Fragment,{children:[i.jsxs(ee.div,{className:F("w-full",{"mt-2 h-auto min-h-32 px-2":Hp&&!ds&&!Me,"mt-2 h-[58px] px-2":Hp&&!ds&&Me,"h-auto":ds,"h-0":!Hp&&!ds}),ref:V7,layout:!0,children:[I7&&i.jsx(_ie,{onRemove:Vp,attachments:Qr,onVisibilityChange:g7}),ds&&Dv&&i.jsx(ee.div,{className:"z-10 mt-2 w-full px-2","data-testid":"browser-tabs-preview",children:i.jsx(Ece,{onClick:()=>{Mv("update"),Nv(!0)},isLoading:Ov})})]}),i.jsx(vv,{ref:Rt,className:F("w-auto grow",rn&&!L&&"mt-1"),disabled:$u,disabledClassName:Ye,inputValue:ne,errorMessage:me,onClick:Y7,onBlur:K7,onChange:js=>{D3({text:js,attachments:ms}),Zv(),Yv()},onFocus:Z7,onEnter:async()=>{a7()||await zp()},onKeyDown:P7,onMentionIfEnabled:ds?o7:void 0,setInput:kg,setError:be,placeholder:i9(),characterLimit:q,rightButtons:Q?[i.jsx(Lx,{config:gy()},"composer-action-button")]:void 0,testId:"composer-input","aria-autocomplete":"both","aria-controls":Fv?Bv:void 0})]})},gy=()=>{if(ve||Gu)return{mode:"stop",onClick:L7};if(ey)return{mode:"submit",disabled:ty,onClick:zp};if(!r&&!$v)return{mode:"microphone",onClick:n9}},c9=({homeButtonState:Q,enableInputActionButtons:Me})=>{var js;const tt=rn?"to-stone-400/8 from-stone-400/5 dark:from-midnight-800/65 dark:to-midnight-800/65":"from-stone-400/10 to-white/35 dark:from-slate-700/35 dark:to-midnight-800/65",Ye=ds?()=>{Ku(null),Mv("add"),Nv(!0)}:void 0,Ls=(js=Z.instance().config().composer)==null?void 0:js.disableActions;return i.jsx(ee.div,{className:F("relative max-h-full w-expanded-composer max-w-chat bg-gradient-to-b p-1.5",tt),layout:!0,style:{borderRadius:ud(Ec),boxShadow:_e==="dark"?v_:b_},ref:Lp.setReference,children:i.jsxs(ee.div,{className:F(rn?doe:uoe),layout:!0,style:{borderRadius:xre(Ec)},children:[i.jsx(ee.div,{className:F(coe,loe,Fp?"before:opacity-100 before:delay-100 before:duration-200":"before:opacity-0"),layout:!0,onDragOver:Os=>Os.preventDefault(),onDrop:Os=>t9(Os),children:Jp({enableActionButtons:Me&&!Ls})}),!Me&&!Ls&&i.jsxs(ee.div,{className:F("relative bottom-0 flex justify-between pb-0.5",rn?"pe-2.5 ps-1.5":"px-2"),layout:!0,children:[i.jsxs("div",{className:"flex gap-1",children:[i.jsx(Poe,{state:Q}),i.jsxs("div",{className:W("flex gap-2",rn&&"items-center"),children:[!rn&&i.jsx(Roe,{disableChatModeSwitcher:!$v}),rn&&i.jsx(vce,{onSelectFile:my,uploadButtonDisabled:ny,onSelectUserOpenedTabs:Ye,onTakeScreenshot:hy})]})]}),i.jsxs("div",{className:W("flex gap-2",rn&&"items-center"),children:[!rn&&i.jsx(kce,{startNewChatDisabled:Pe,onStartNewConversation:()=>fy(),onSelectFileIfEnabled:Zp?my:void 0,uploadButtonDisabled:ny,onSelectOneDriveFileIfEnabled:(I==null?void 0:I.provider)==="microsoft"&&p?()=>{Ko(!0),Ku(null)}:void 0,onTakeScreenshot:hy,onSelectUserOpenedTabsIfEnabled:Ye,onRef:Os=>{Rs.current=Os}}),i.jsx(Lx,{config:gy()})]})]})]})})},l9=async()=>{se.scenario&&(yt({source:"signin",scenario:se.scenario}),ae({isOpen:!1,scenario:null})),Bp?await S({from:"/conversations",to:"/login"}):await G6({provider:"microsoft"})};return!$6||!Vv||an&&dt&&!Vt?null:i.jsxs(i.Fragment,{children:[Op&&i.jsx("div",{className:F("fixed inset-0 size-full bg-stone-850/30 backdrop-blur-[10px] dark:bg-midnight-850/70",Ke.composerDimmedBackground)}),i.jsxs("div",{"data-testid":"composer",ref:qu,className:F("pointer-events-none absolute bottom-0 flex",Kr&&"sm:bottom-1/2 sm:translate-y-1/2 sm:pt-36",Ke.composer,Cc==="side-by-side"&&Rn&&A&&!Gv&&"mb-2",Cc==="side-by-side"&&Rn&&!Gv&&"w-1/4 min-w-chat-side-by-side",Cc==="side-by-side"&&Rn&&"end-0 pe-1",(Cc==="chat-only"||U||!Rn)&&"w-full",Op&&Ke.composerModalOnDimmedBackground),children:[i.jsx("input",{type:"file",accept:G7.join(","),className:"hidden",ref:ht,onChange:e9,"aria-hidden":"true",multiple:b}),i.jsx(at,{children:u7&&i.jsx(Gse,{dynamicHeight:j===null&&!an})}),i.jsxs(ee.div,{className:F("relative flex w-full flex-col-reverse items-center px-3 sm:flex-col",Kr?"sm:mb-0":"sm:mb-8",Gn?"mb-3":"mb-4",(L||mt)&&"min-w-72"),initial:g?"enter":!1,animate:"animate",variants:{enter:Jce(),animate:Qce},transition:J0,style:zd,children:[c7&&i.jsx(jt,{className:"pointer-events-auto flex h-[250px] w-full max-w-chat justify-center px-2 pb-4",initial:g?"initial":!1,children:i.jsx(Gie,{onWidgetClick:uy})}),i.jsxs(r5,{transition:oe?P$:{duration:0},children:[i.jsxs(ee.div,{className:F("relative max-h-full min-h-composer min-w-16 max-w-chat rounded-5xl",ds&&"z-40",A&&E&&!Kr&&!te&&"md:top-2"),children:[u&&Qv&&i.jsx(Qse,{}),i.jsx(ee.div,{className:"absolute inset-0",layout:!0,style:{borderRadius:ud(Ec),boxShadow:vre(_e,rn)}}),i.jsx(at,{children:Wp&&i.jsx(Px,{})}),i.jsx(ee.div,{className:F("relative",CL),layout:!0,style:{borderRadius:ud(Ec),boxShadow:yre(_e,rn)},children:i.jsxs(ee.div,{className:F("pointer-events-auto relative flex flex-col overflow-hidden contrast-more:border-2",qr&&"max-w-72",Op&&ua),"data-testid":"composer-content",ref:qp,layout:!0,style:{borderRadius:ud(Ec),boxShadow:Cre(_e)},children:[i.jsx(at,{children:Wp&&i.jsx(Px,{isNested:!0})}),i.jsxs(at,{children:[j&&j!=="daily-briefing-player"&&j!=="dismiss-audio-call-only"&&i.jsxs(ee.div,{className:F(!qr&&!wc&&j!=="reasoning-mode-pro-subscription"&&"border-b border-black/10 dark:border-white/10",j==="reasoning-mode-pro-subscription"&&"sm:w-think-deeper-pro-subscription",j==="audioSettings"&&"w-settings",wc&&j!=="daily-briefing-chat"&&"w-prompt-sign-in",wc&&(j==="computer-use-task-closed"||j==="safety-risk-card")&&"max-w-single-image",j==="daily-briefing-chat"&&(E?"min-w-chat-side-by-side bp-960:max-w-full lg:w-expanded-composer":"w-expanded-composer")),layout:!0,children:[j!=="dialog"&&i.jsxs(ee.div,{"data-testid":"audio-settings-dialog",className:F("t-custom-scrollbar max-h-expanded-section overflow-auto",j==="audioSettings"&&"px-2 py-4"),layout:!0,initial:Ce,animate:{...Be,transition:{delay:Fn.default}},ref:Ps,children:[i.jsx(at,{children:wc&&i.jsxs(ld,{children:[j==="biometric-consent"&&i.jsx(d.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:i.jsx(dle,{onSubmit:sy.onSubmitCallback,onCancel:sy.onCancelCallback})}),j==="prompt-sign-in"&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})}),children:i.jsx(ch,{header:A7,text:_7,primaryAction:{title:e("common.loginText"),onClick:l9},testid:"prompt-sign-in-composer-action",secondaryAction:ke?void 0:{onClick:En,title:e("common.maybeLater"),testid:"maybe-later-button"},onClose:En})}),j==="prompt-3p-sign-in"&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})}),children:i.jsx(ple,{dismiss:En})}),j==="daily-briefing-chat"&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})}),children:i.jsx(mle,{dismiss:En,inputUI:Jp({enableActionButtons:!0})})}),j==="prompt-location"&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})}),children:i.jsx(ch,{header:e("locationPermission.header"),text:e("locationPermission.text"),primaryAction:{title:e("locationPermission.share"),onClick:o9},secondaryAction:{onClick:En,title:e("common.maybeLater")},onClose:En})}),j==="confirm-link-navigation"&&(go==null?void 0:go.url)&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})}),children:i.jsx(ch,{showImage:!1,header:e("composer.linkConfirmation.header"),text:e("composer.linkConfirmation.text",{url:go.url}),primaryAction:{title:e("common.continue"),onClick:()=>{go.url&&(yt({source:"linkNavigationConfirmButton",conversationId:go.conversationId,messageId:go.messageId,destination:Cs(go.url)}),l7(ha(Cs(go.url))),En(),Kv(void 0))}},secondaryAction:{onClick:()=>{En(),Kv(void 0)},title:e("common.cancel")},onClose:En,restoreFocusOnUnmount:!0})}),j==="prompt-review"&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})}),children:i.jsx(ule,{})}),j==="cross-promo-card"&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})}),children:i.jsx(lle,{variant:"aggressive"})}),l&&j==="shopping-upsell-card"&&i.jsx(d.Suspense,{fallback:i.jsx(Wx,{}),children:i.jsx(Xce,{onDismiss:()=>O(null)})}),j==="shopping-price-tracking"&&Re&&i.jsx(d.Suspense,{fallback:i.jsx(Wx,{}),children:i.jsx(ele,{content:Re.data,messageId:Re.messageId,cardType:Re.cardType,onConfirm:()=>O("shopping-upsell-card"),onCancel:H7})}),j==="add-to-page"&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})}),children:i.jsx(cle,{onClose:En})}),j==="safety-risk-card"&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})}),children:i.jsx(ile,{})}),j==="computer-use-task-closed"&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})}),children:i.jsx(rle,{})}),j==="over-task-quota"&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})}),children:i.jsx(ale,{})})]})}),j==="audioSettings"&&i.jsx(ld,{children:i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})}),children:i.jsx(sle,{onVoiceSelected:ry,onVoiceSpeedChange:()=>ry()})})}),j==="reasoning-mode-pro-subscription"&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})}),children:i.jsx(ole,{})}),zu&&i.jsx(ld,{children:i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex max-h-expanded-section w-prompt-sign-in flex-col overflow-auto rounded-t-5xl p-5 sm:w-checkout-composer",children:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx($e,{className:"size-12"})})}),children:i.jsx(Kce,{onDismiss:En})})})]}),qr&&Sc&&Yo&&i.jsx(poe,{titleKey:Sc.titleKey,textKey:Sc.textKey,buttonTextKey:Sc.buttonTextKey,onClick:Sc.onClick,button:Yo.button,cancelButton:Yo.cancelButton,closeDialogCallback:Yo.closeDialogCallback})]}),(L&&j!=="daily-briefing-chat"||mt)&&i.jsx(d.Suspense,{fallback:i.jsx("div",{className:W("flex h-composer items-center justify-center",Ne&&L?"w-daily-briefing-lg":"w-daily-briefing"),children:i.jsx($e,{className:"size-12"})}),children:i.jsx(fle,{isPodcast:mt,inputUI:de&&!mt?Jp({enableActionButtons:!1}):void 0})}),Te&&(!j||j==="audioSettings"||j==="dismiss-audio-call-only")&&i.jsx("div",{className:"flex justify-center p-2",children:r9()}),jp&&c9({homeButtonState:Va||rn?"hidden":v7(),enableInputActionButtons:Vt&&ho||rn&&Va}),Vt&&Bu&&!zu&&i.jsxs(ee.div,{className:F("relative flex max-h-full max-w-chat justify-center",!j&&"p-2",!qr&&"h-composer"),layout:!0,children:[i.jsx(vs,{data:Zu,children:Zu.icon}),Gr&&i.jsx(Tae,{onClick:Ou})]}),Vt&&Fu&&i.jsxs(ee.div,{className:F("relative flex max-h-full max-w-chat justify-center",!j&&"p-2",!qr&&"h-composer"),layout:!0,children:[i.jsx(vs,{data:Zu,children:Zu.icon}),(mn==null?void 0:mn.type)==="image"&&mn.shareable&&i.jsx(vs,{data:cy,children:cy.icon}),(mn==null?void 0:mn.type)==="image"&&mn.downloadable&&i.jsx(vs,{data:ly,children:ly.icon})]}),Oa&&i.jsx(Wce,{onPick:Da,onClose:Ua,onError:b7})]})]})})]}),Kr&&i.jsxs(jt,{id:ge,className:F("pointer-events-auto flex h-[150px] w-full max-w-chat flex-none items-end px-2 sm:flex-initial sm:items-start",Ke.composerBottomSlot),delay:.2,initial:g?"initial":!1,children:[Fv&&i.jsx(d.Suspense,{fallback:null,children:i.jsx(tle,{id:Bv,dataResponse:Dp,onClick:(Q,Me)=>Q7(Q,Me),onHighlight:Q=>kg(Q),onDismiss:Yc,className:"mb-3 sm:mb-0 sm:mt-3",ref:yc})}),ge==="actions-autosuggest"&&i.jsx(d.Suspense,{fallback:null,children:i.jsx(nle,{onClick:Q=>wi({prompt:Q,prefillSource:"action"})})}),ge==="starter-prompts"&&i7&&i.jsx(Hie,{className:"sm:mt-8",onWidgetClick:uy})]}),ds&&n7&&jp&&i.jsx(Iae,{onSave:N7,styles:t7,onRef:Lp.setFloating,onClose:M7,outsideClickElements:f7(),mode:s7,originElement:Lp.reference})]})]})]})]})}function gle(e){const{isChecked:t,label:n,description:s,className:o,onChange:r,accessory:c,disabled:l,testId:u}=e,m=d.useId(),[p,f]=d.useState(!1),h=()=>f(!0),g=()=>f(!1),{focusable:y}=yr({autoRestoreFocus:!0,forceFocus:!0});let b=t?"bg-system-green-400":"bg-black/20 dark:bg-white/20";return l&&(b="bg-black/20 after:bg-white/40 dark:bg-white/20 dark:after:bg-black/40"),i.jsxs("label",{className:F("flex items-center justify-between gap-4",!l&&"cursor-pointer",o),htmlFor:m,ref:y.ref,"data-testid":u,children:[i.jsxs("div",{className:"flex flex-1 flex-col",children:[i.jsx("span",{className:"text-foreground-800 text-sm",children:n}),s&&i.jsx("span",{className:"font-medium text-foreground-450 text-xs",children:s})]}),i.jsxs("span",{className:"flex flex-row items-center gap-2",children:[c,i.jsx("input",{id:m,type:"checkbox",title:n,checked:t,onChange:x=>r(x.target.checked),onFocus:h,onBlur:g,className:"sr-only",disabled:l}),i.jsx("div",{className:F("relative h-6 w-10 rounded-full","after:absolute after:start-[2px] after:top-[2px] after:size-5 after:rounded-full after:transition-all contrast-more:forced-color-adjust-none",b,!l&&"after:bg-white after:shadow-switch after:hover:scale-110 after:active:w-6",t&&"after:translate-x-4",t&&!l&&"after:active:translate-x-3",p&&"outline")})]})]})}function ble(){const e=Sn("kill-cookie-banner"),t=_(sn),[n,s]=Ee(g0),[o,r]=d.useState("main"),c=wr(),[l,u]=d.useState(()=>c.analytics),[m,p]=d.useState(c.advertising),[f,h]=d.useState(c.socialMedia),g=mp(t),y=!!e0(),[b,x]=Ee(oA),v=!e&&(!!b||g&&!y&&!n);if(d.useEffect(()=>{v&&M.trackEvent({name:"system",data:{eventName:"cookieBannerShown",eventInfo_region:t}})},[t,v]),!v)return null;const S=T=>{M.trackEvent({name:"interaction",data:{eventName:"cookieBannerChoice",eventInfo_analytics:T.analytics,eventInfo_advertising:T.advertising,eventInfo_socialMedia:T.socialMedia}}),Kj(T),r("main"),x(void 0),s(!0)},C=b==="more-options";return i.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-0 flex w-full justify-center p-3",children:[i.jsx("div",{className:"absolute top-0 h-3.5 w-full bg-stone-150 opacity-90 dark:bg-midnight-850"}),i.jsx("div",{className:F("relative w-full max-w-cookie-banner rounded-xl border border-black/5 shadow-xl dark:border-black/40",kn,Ke.modal),children:i.jsxs("div",{className:"pointer-events-auto relative max-h-[90vh] overflow-auto p-5",id:"cookie-banner",children:[b!=="more-options"&&o==="main"&&i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("h3",{className:"text-md",children:B("cookies.heading")}),i.jsxs("div",{className:"flex flex-col gap-x-8 gap-y-6 text-2xs sm:flex-row",children:[i.jsxs("div",{className:"flex flex-col gap-x-5 gap-y-4 text-2xs sm:flex-row",children:[i.jsx("p",{children:B("cookies.bannerIntro")}),i.jsxs("p",{children:[B("cookies.bannerExplanation"),i.jsx(ws,{href:Gi,title:B("cookies.privacyLink"),className:"ps-1 underline",children:B("cookies.privacyLink")})]})]}),i.jsxs("div",{className:"flex min-w-44 shrink-0 grow flex-col gap-2",children:[i.jsx($,{variant:"rect",size:"32-xs",onClick:()=>S({analytics:!0,advertising:!0,socialMedia:!0}),title:B("cookies.accept"),testId:"cookie-banner-accept-button",children:B("cookies.accept")}),i.jsx($,{variant:"rect",size:"32-xs",onClick:()=>S({analytics:!1,advertising:!1,socialMedia:!1}),title:B("cookies.reject"),testId:"cookie-banner-reject-button",children:B("cookies.reject")}),i.jsx($,{variant:"rect",color:"subtle-dimmed",size:"32-xs",onClick:()=>{r("more-options")},title:B("cookies.moreOptions"),testId:"cookie-banner-options-button",children:B("cookies.moreOptions")})]})]})]}),(b==="more-options"||o==="more-options")&&i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex items-center",children:[!C&&i.jsx($,{title:B("common.backText"),variant:"circle",color:"subtle-dimmed",size:"32-xs",onClick:()=>r("main"),children:i.jsx(Vn,{className:"rotate-180"})}),i.jsx("h3",{className:F({"ps-3":!C},"text-md"),children:B("cookies.moreOptionsHeading")})]}),i.jsx("p",{className:"py-3 text-2xs",children:B("cookies.essentialCookiesExplanation")}),i.jsx(lh,{label:B("cookies.advertisingLabel"),explanation:B("cookies.advertisingDescription"),isChecked:m,onChange:()=>p(T=>!T),testId:"cookie-banner-advertising-option"}),i.jsx(lh,{label:B("cookies.analyticsLabel"),explanation:B("cookies.analyticsDescription"),isChecked:l,onChange:()=>u(T=>!T),testId:"cookie-banner-analytics-option"}),i.jsx(lh,{label:B("cookies.socialMediaLabel"),explanation:B("cookies.socialMediaDescription"),isChecked:f,onChange:()=>h(T=>!T),testId:"cookie-banner-social-option"}),i.jsx("div",{className:"flex justify-end",children:i.jsx($,{variant:"rect",size:"36-sm",className:"w-fit px-7",onClick:()=>{S({analytics:l,advertising:m,socialMedia:f})},title:B("cookies.savePreferences"),testId:"cookie-banner-save",children:B("cookies.savePreferences")})})]})]})})]})}function lh(e){const{label:t,explanation:n,isChecked:s,onChange:o,testId:r}=e;return i.jsxs(i.Fragment,{children:[i.jsx(As,{horizontalMargin:!1}),i.jsx(gle,{label:t,className:"w-full py-2 pe-1",isChecked:s,onChange:o,testId:r}),i.jsx("p",{className:"pb-4 pt-1 text-2xs",children:n})]})}function vle(){const[e,t]=d.useState(!0),n=_(Io),s=ok(),o=d.useMemo(()=>n==null?void 0:n.images,[n]),r=d.useMemo(()=>({title:n==null?void 0:n.title,subTitle:n==null?void 0:n.subTitle}),[n]),l=_(zn)==="dark"?o==null?void 0:o.dark:o==null?void 0:o.light,u=r;d.useEffect(()=>{gi({name:"interaction",status:"Shown",eventName:"crossPromotionStripCard",source:"bottomRightCard"})},[]);const m=()=>{t(!1),s()};return n===null||!e?null:i.jsx(jt,{mode:"sync",className:"fixed bottom-5 end-5 z-[1000]",children:i.jsxs("div",{className:F("flex h-32 w-96 flex-col justify-center rounded-5xl border border-white bg-background-100 p-3 dark:border-white/5 dark:bg-background-250"),children:[i.jsxs("div",{className:"flex items-center",children:[l&&i.jsx("img",{src:l,alt:B("crossSelling.imageAlt"),className:"size-24 rounded-lg object-cover"}),i.jsxs("div",{className:"me-6 ms-3",children:[i.jsx("div",{className:"mb-1 text-sm",children:i.jsx("strong",{children:u.title})}),i.jsx("div",{className:"text-sm",children:u.subTitle})]})]}),i.jsx("div",{className:"absolute end-1.5 top-1.5 flex self-start",children:i.jsx($,{title:B("common.closeText"),variant:"square",color:"subtle-dimmed","aria-label":B("common.closeText"),onClick:m,className:"flex size-8 items-center justify-center p-1.5",children:i.jsx(Yt,{className:"m-0 size-5 self-center p-0"})})})]})})}function tS({icon:e,text:t,buttonText:n,buttonColor:s,buttonOnClick:o,className:r=""}){return i.jsxs("div",{className:F("flex items-center justify-between",r),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex size-10 items-center justify-center rounded-[8.5px] border border-black/10 bg-background-200 dark:border-white/10",children:i.jsx("div",{className:"m-1 size-6",children:e})}),i.jsx("p",{className:"text-base",children:t})]}),i.jsx($,{className:"h-10 w-24",color:s,title:n,"aria-label":n,variant:"rect",onClick:o,children:n})]})}const jk=e=>d.createElement("svg",{viewBox:"0 0 192 192",xmlns:"http://www.w3.org/2000/svg",fill:"none",...e},d.createElement("circle",{cx:96,cy:96,r:74,stroke:"currentColor",strokeWidth:12}),d.createElement("ellipse",{cx:96,cy:96,stroke:"currentColor",strokeWidth:12,rx:30,ry:74}),d.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:12,d:"M28 72h136M28 120h136"})),y2e=Object.freeze(Object.defineProperty({__proto__:null,default:jk},Symbol.toStringTag,{value:"Module"})),yle="https://ercz.adj.st/home?network=1g17o7tz&campaign=1gl0zo0u&adj_t=1gl0zo0u&adj_deep_link=sapphirecopilot%3A%2F%2Fhome%3Fnetwork%3D1g17o7tz%26campaign%3D1gl0zo0u&adj_redirect_android=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.microsoft.copilot&adj_redirect_ios=https%3A%2F%2Fapps.apple.com%2Fus%2Fapp%2Fmicrosoft-copilot%2Fid6472538445%3Fct%3DCMC_Copilot_ContinueChatting%26pt%3D80423";function Cle(){const e=pv(),t=s0(),n=gO(),s=bO(),o=d.useRef(null),[r,c]=d.useState(!1),l=_(iu),u=_(Sr),m=_(hI);d.useEffect(()=>{if(!m||!l||u||e||n||s||!t){c(!1);return}const h=Mt(I2),g=Mt(Sf),y=!bm(h,3*Gd),b=Ib(g,3);y||b?(c(!0),gi({name:"system",status:"Shown",eventName:"copilotMobileCrossSelling"})):gi({name:"system",status:"TriggeredButSnoozed",eventName:"copilotMobileCrossSelling"})},[u,e,n,s,l,m,t]);const p=()=>{tn(I2,Date.now().toString());const h=Mt(Sf);tn(Sf,`${parseInt(h??"0",10)+1}`),c(!1),gi({name:"interaction",status:"Dismissed",eventName:"copilotMobileCrossSelling"})},f=()=>{ks(yle),c(!1),gi({name:"interaction",status:"Clicked",eventName:"copilotMobileCrossSelling"})};return r?i.jsx(jt,{mode:"sync",className:F("relative",Ke.modal),children:i.jsx("div",{className:"fixed inset-0 grid bg-stone-850/30 dark:bg-midnight-850/70",children:i.jsx("div",{ref:o,className:"mb-0 h-fit w-full self-end justify-self-center rounded-t-3xl border border-white/10 bg-background-200 p-2 contrast-more:border-2 md:mb-5 md:w-fit md:rounded-3xl",children:i.jsxs("div",{className:"mx-3 mb-6 mt-3 flex flex-col gap-4",children:[i.jsx("div",{className:"text-md md:text-center",children:B("crossSelling.header")}),i.jsx(tS,{icon:i.jsx(mc,{}),text:B("crossSelling.copilotApp"),buttonText:B("common.open"),buttonColor:"strong",buttonOnClick:f,className:"gap-14"}),i.jsx(tS,{icon:i.jsx(jk,{}),text:B("crossSelling.browser"),buttonText:B("common.continue"),buttonColor:"subtle-bright",buttonOnClick:p,className:"gap-14"})]})})})}):null}function xle(e){const{className:t}=e,{t:n}=V(),[s,o]=d.useState(!1),r=_(V3),c=z(eo),l=d.useRef(null),u=d.useCallback(p=>{l.current=p},[]),m=d.useCallback(p=>{p.key==="Escape"&&(p.preventDefault(),p.stopPropagation(),o(!1))},[]);return i.jsx(Eu,{isOpen:s,onIsOpenChange:o,renderTrigger:p=>i.jsx($,{ref:f=>{p.ref(f),u(f)},onClick:p.onClick,color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",title:n("edgeHeader.dropdownMenuButtonTitle"),className:"ms-auto",testId:"header-dropdown","aria-haspopup":"menu","aria-expanded":s,children:i.jsx(sv,{className:"size-5"})}),options:{overrideZIndex:Ke.header,placement:"bottom-end",offset:{mainAxis:4,crossAxis:0},hideOnMenuClick:!0},className:W(kn,"flex p-1",t),children:i.jsxs($o,{axis:"vertical",className:"flex flex-col items-start gap-1",role:"menu",circular:!0,onKeyDown:m,children:[!r&&i.jsx($,{variant:"rect",color:"subtle-dimmed-inverted",className:"w-full justify-start text-sm",onClick:()=>{c(!0),Se({source:"sidebarHeader"})},title:n("edgeHeader.conversationHistory"),testId:"header-conversation-history-button",role:"menuitem",children:n("edgeHeader.conversationHistory")}),i.jsx($,{variant:"rect",color:"subtle-dimmed-inverted",className:"w-full justify-start text-sm",onClick:p=>{p.stopPropagation(),c(!1),nq("menu",{onPopPageCallback:()=>{var f;(f=l.current)==null||f.focus()}}),o(!1)},title:n("settings.settings"),testId:"header-settings-button",role:"menuitem",children:n("settings.settings")}),i.jsx($,{variant:"rect",color:"subtle-dimmed-inverted",className:"w-full justify-start text-sm",onClick:()=>{Ge.emit("edge:header-command","sendFeedback")},title:n("settings.feedbackButton"),testId:"header-feedback-button",role:"menuitem",children:n("settings.feedbackButton")})]})})}const Ok=e=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M16.2425 2.93189L21.0682 7.75765C22.3955 9.08491 22.0324 11.3224 20.3535 12.1619L15.4826 14.5973C15.3073 14.685 15.1732 14.8379 15.1092 15.0232L13.6699 19.1895C13.3684 20.0622 12.2574 20.3181 11.6045 19.6653L8.50002 16.5607L4.06074 21.0001H3L3.00008 19.9394L7.43936 15.5001L4.33487 12.3956C3.682 11.7427 3.93791 10.6317 4.81061 10.3302L8.97688 8.89096C9.16223 8.82694 9.31512 8.69287 9.40281 8.51748L11.8382 3.6466C12.6777 1.96772 14.9152 1.60462 16.2425 2.93189ZM20.0076 8.81831L15.1818 3.99255C14.5785 3.38924 13.5614 3.55429 13.1799 4.31742L10.7445 9.18829C10.4814 9.71446 10.0227 10.1167 9.46666 10.3087L5.67812 11.6175L12.3826 18.322L13.6914 14.5335C13.8835 13.9774 14.2857 13.5188 14.8118 13.2557L19.6827 10.8202C20.4458 10.4387 20.6109 9.42161 20.0076 8.81831Z",fill:"currentColor"})),C2e=Object.freeze(Object.defineProperty({__proto__:null,default:Ok},Symbol.toStringTag,{value:"Module"})),Dk=e=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M3.28035 2.21967C2.98746 1.92678 2.51258 1.92677 2.21968 2.21966C1.92678 2.51255 1.92677 2.98742 2.21967 3.28032L8.12461 9.18526L4.81064 10.3301C3.93794 10.6315 3.68202 11.7426 4.3349 12.3954L7.43942 15.4999L3.00009 19.9392L3.00001 20.9999H4.06077L8.50009 16.5605L11.6046 19.665C12.2575 20.3179 13.3686 20.062 13.67 19.1893L14.8148 15.8755L20.7196 21.7803C21.0125 22.0732 21.4874 22.0732 21.7803 21.7803C22.0732 21.4874 22.0732 21.0126 21.7803 20.7197L3.28035 2.21967ZM13.6353 14.696L12.3827 18.3218L5.67816 11.6174L9.30412 10.3648L13.6353 14.696ZM19.6829 10.8201L15.8957 12.7137L17.0137 13.8317L20.3537 12.1617C22.0326 11.3223 22.3957 9.08476 21.0684 7.75751L16.2426 2.93179C14.9153 1.60453 12.6778 1.96763 11.8383 3.6465L10.1684 6.98637L11.2864 8.10441L13.18 4.31731C13.5616 3.55419 14.5786 3.38914 15.1819 3.99244L20.0078 8.81817C20.6111 9.42146 20.446 10.4385 19.6829 10.8201Z",fill:"currentColor"})),x2e=Object.freeze(Object.defineProperty({__proto__:null,default:Dk},Symbol.toStringTag,{value:"Module"}));function Sle(e){const{isPinned:t,showCloseButton:n,showPinButton:s,className:o}=e,{t:r}=V();return i.jsxs("div",{className:W("flex items-center",o),"data-testid":"header-controls",children:[i.jsx(xle,{}),s&&i.jsx($,{variant:"square",color:"subtle-dimmed-inverted",size:"28-xxs",onClick:()=>{Ge.emit("edge:header-command","togglePinState")},title:r(t?"edgeHeader.unpinButtonTitle":"edgeHeader.pinButtonTitle"),testId:"header-pin-button",children:t?i.jsx(Dk,{className:"size-5"}):i.jsx(Ok,{className:"size-5"})}),n&&i.jsx($,{variant:"square",color:"subtle-dimmed-inverted",size:"28-xxs",onClick:()=>{Ge.emit("edge:header-command","closePane")},title:r(t?"edgeHeader.closeButtonAsPinnedTitle":"edgeHeader.closeButtonAsUnpinnedTitle"),testId:"header-close-button",children:i.jsx(Yt,{className:"size-5"})})]})}function wle({pixelUrl:e,onComplete:t}){return d.useEffect(()=>{const n=setTimeout(()=>{t()},3e3);return()=>{clearTimeout(n)}},[e,t]),i.jsx("img",{className:"hidden",src:e,width:"1",height:"1",alt:"",referrerPolicy:"no-referrer-when-downgrade",onLoad:t,onError:t})}function Ile(){const e=D("ads-pixels"),[t,n]=Ee(yI),s=_(g0),o=_(sn),r=(o&&Fm.includes(o))===!0,c=d.useMemo(()=>wr(),[s]),l=!r||c.advertising;if(!e||!l)return null;const u=Object.values(t).filter(m=>m.isMounted).map(m=>m.url);return i.jsx("div",{className:"absolute start-[-9999px] top-[-9999px] size-px overflow-hidden",children:u.map(m=>i.jsx(wle,{pixelUrl:m,onComplete:()=>n(p=>p[m]?{...p,[m]:{...p[m],isMounted:!1}}:p)},m))})}const Vc=typeof HTMLElement<"u"&&"showPopover"in HTMLElement.prototype&&typeof HTMLElement.prototype.showPopover=="function";function Tle(){const e=d.useRef(null),t=d.useCallback(()=>{const o=e.current;if(o&&Vc)try{o.showPopover()}catch(r){Nt({feature:"toast",scenario:"showPopoverToast",errorMessage:r instanceof Error?r.message:void 0})}},[]),n=d.useCallback(()=>{const o=e.current;if(o&&Vc)try{o.hidePopover()}catch(r){Nt({feature:"toast",scenario:"hidePopoverToast",errorMessage:r instanceof Error?r.message:void 0})}},[]),s=Ug(()=>{n(),t()},50);return d.useEffect(()=>{if(t(),Vc){const o=requestAnimationFrame(()=>{s()});return()=>cancelAnimationFrame(o)}return()=>{}},[t,s]),d.useEffect(()=>{if(!Vc)return()=>{};const o=new MutationObserver(()=>{document.querySelectorAll("dialog[open]").length>0&&requestAnimationFrame(s)});return o.observe(document.documentElement,{childList:!0,subtree:!0,attributeFilter:["open"]}),()=>o.disconnect()},[s]),{toastRef:e,supportsPopover:Vc}}function Ele({onClick:e}){return i.jsx("div",{className:"absolute end-0 top-0 z-10 p-1 rtl:right-auto",children:i.jsx($,{title:B("product.dismiss"),"aria-label":B("product.dismiss"),variant:"rect",color:"subtle-bright-inverted",size:"32-xs",onClick:e,children:i.jsx(Yt,{className:"size-4"})})})}const Ale=["overflow-hidden","rounded-3xl","border","border-solid","border-white/20","shadow-lg","backdrop-blur-[30px]","bg-acrylic-default-tint-light/95","dark:bg-acrylic-default-tint-dark/95"];function _le(e){const{title:t,subtitle:n,dismiss:s,link:o,dismissable:r=!0,className:c,Icon:l,iconClassName:u,isRTL:m,onClick:p,onActiveChange:f,customColorTheme:h,intent:g="info",removeIconBorder:y}=e,b=_(zn),x=h??b,[v,S]=d.useState(!1),[C,T]=d.useState(!1),w=v||C,{toastRef:I,supportsPopover:A}=Tle();d.useEffect(()=>{f==null||f(w)},[w,f]);const E=oe=>{(oe.key==="Enter"||oe.key===" ")&&(oe.preventDefault(),p==null||p())},R=n??o?i.jsxs(i.Fragment,{children:[typeof n=="string"?`${n} `:n,o&&i.jsx("span",{className:"font-sans font-normal leading-5 text-accent-450 underline text-sm dark:text-accent-600",role:"button",tabIndex:0,"aria-label":o,onKeyDown:E,children:o})]}):null,U="top-5 start-1/2 -translate-x-1/2",K=Z.instance().config(),H=(A?K.toastPopoverNotificationPositioning:K.toastNotificationPositioning)??U,te=A?{popover:"manual"}:{};return i.jsx("div",{"data-theme":x,className:W("pointer-events-none",A?"fixed m-0 overflow-visible bg-transparent":"absolute",Ke.toastNotification,H,c),onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),onFocus:()=>T(!0),onBlur:()=>T(!1),ref:I,...te,children:i.jsx(at,{children:i.jsxs(ee.div,{className:F("pointer-events-auto","relative",Ale,p&&"cursor-pointer"),initial:{opacity:0,y:-40,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-40,scale:.98},transition:{type:"spring",stiffness:400,damping:30},onClick:p,children:[r&&i.jsx(Ele,{onClick:s}),i.jsx("div",{className:F("flex","flex-col","items-center","justify-center","py-2","ps-2","pe-1.5",{"w-[min(381px,100vw)]":!!R}),children:i.jsxs("div",{className:F("relative flex w-full items-center p-0",{"gap-x-3":l,"flex-row-reverse":l&&m}),children:[l&&i.jsx("div",{className:W("flex size-16 shrink-0 items-center justify-center rounded-xl",!y&&"border border-black/10 dark:border-white/10"),children:i.jsx(l,{className:u})}),i.jsxs("div",{className:F("flex flex-1 flex-col justify-center py-1",{"ps-4":!l&&R,"pe-10":r&&(R??t),"px-4":!R}),children:[i.jsx("header",{className:F("flex w-full overflow-hidden",{"items-center":!!R,"items-center justify-center":!R}),children:i.jsx("h2",{className:F("font-sans text-foreground-750 text-sm-strong",{"text-base-strong":!!R,"text-sm":!R},g==="error"&&"text-system-red-550"),children:t})}),R&&i.jsx("p",{className:"w-full font-sans font-normal leading-5 text-foreground-700 text-sm",children:R}),i.jsx(vr,{msg:`${t??""} ${typeof n=="string"?n:""}`,type:"assertive"})]})]})})]})},t)})}function kle(){const[e,t]=Ee(is),n=jr(),[s,o]=d.useState(!1),[r,c]=d.useState(!1),l=d.useCallback(()=>{e!=null&&e.trackingArgs&&Se({source:"toastNotification",scenario:e.trackingArgs.scenario,customData:e.trackingArgs.customData})},[e]),u=d.useCallback(()=>{t(null)},[t]),m=d.useCallback(()=>{var f;if(!(e!=null&&e.action))return;l();const{action:p}=e;p(),u(),(f=e.onClick)==null||f.call(e)},[e,l,u]);return d.useEffect(()=>{let p;return c(!1),o(!1),e!=null&&e.dismissAfter&&(p=window.setTimeout(()=>c(!0),e.dismissAfter)),()=>clearTimeout(p)},[e]),d.useEffect(()=>{r&&!s&&u()},[r,s,u]),e?i.jsx(_le,{title:e.title,subtitle:e.subtitle,link:e.link,dismissable:e.dismissable,className:e.className,Icon:e.iconProvider??e.Icon,iconClassName:e.iconClassName,intent:e.intent,dismiss:p=>{var f;p==null||p.stopPropagation(),(f=e.onDismiss)==null||f.call(e),u()},isRTL:n,onClick:e.action?m:void 0,onActiveChange:o,customColorTheme:e.customColorTheme,removeIconBorder:e.removeIconBorder}):null}function Nle(){var o;const e=D("top-banner-upgrade-surface-app"),t=(o=Z.instance().config().uiOverrides)==null?void 0:o.showUpgradeAppTopBanner,n=e&&t;d.useEffect(()=>{n&&M.trackEvent({name:"system",data:{eventName:"upgradeSurfaceApp",eventInfo_status:"Shown"}})},[n]);const s=()=>{M.trackEvent({name:"interaction",data:{eventName:"upgradeSurfaceApp",eventInfo_status:"Clicked"}}),ks("macappstore://apps.apple.com/app/id6738511300")};return n?i.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-0 flex w-full justify-center p-3",children:[i.jsx("div",{className:"absolute top-0 h-3.5 w-full bg-stone-150 opacity-90 dark:bg-midnight-850"}),i.jsx("div",{className:F("relative w-full max-w-cookie-banner rounded-xl border border-black/5 shadow-xl dark:border-black/40",kn,Ke.modal),children:i.jsx("div",{className:"pointer-events-auto relative max-h-[90vh] overflow-auto p-5",id:"cookie-banner",children:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("h3",{className:"text-md",children:B("upgradeSurface.heading")}),i.jsxs("div",{className:"flex flex-col gap-x-8 gap-y-6 text-2xs sm:flex-row",children:[i.jsxs("div",{className:"flex flex-col gap-x-5 gap-y-4 text-2xs sm:flex-row",children:[i.jsx("p",{children:B("upgradeSurface.primaryDescription")}),i.jsx("p",{children:B("upgradeSurface.secondaryDescription")})]}),i.jsx("div",{className:"flex min-w-44 shrink-0 grow flex-col justify-center gap-2",children:i.jsx($,{variant:"rect",size:"32-xs",onClick:s,title:B("upgradeSurface.buttonText"),children:B("upgradeSurface.buttonText")})})]})]})})})]}):null}const Mle=d.lazy(()=>P(()=>Promise.resolve().then(()=>ab),void 0)),Rle=pX(()=>P(()=>import("./settings-wrapper-1kH1CgnU.js"),__vite__mapDeps([411,0,1,330,301,412])),"settings-wrapper"),Ple=d.lazy(()=>P(()=>import("./media-viewer-BM070lGV.js").then(e=>e.m),__vite__mapDeps([413,0,1])).then(e=>({default:e.MediaViewer}))),Lle=d.lazy(()=>P(()=>import("./picture-in-picture-CDF7MKhO.js"),__vite__mapDeps([414,0,1,394,395,415,416,417,418,419])).then(e=>({default:e.PictureInPicture}))),jle=d.lazy(()=>P(()=>import("./composer-large-screen-CmM1Tpdw.js"),__vite__mapDeps([420,0,1,304,421])));function Ole(e){const{children:t,sidebar:n,customLayout:s}=e,o=et(),{isPictureInPictureOpen:r}=sA(),c=Z.instance().config().appLayout,l=_(Io),u=(l==null?void 0:l.type)==="card",m=_(B3),p=cX(),f=_(NJ),h=iX();return i.jsxs(i.Fragment,{children:[h&&i.jsx("div",{className:W("pointer-events-none sticky top-0 w-full",Ke.header),children:i.jsx("div",{className:"pointer-events-auto absolute end-2 top-2",children:i.jsx(Sle,{isPinned:f,showCloseButton:m,showPinButton:p})})}),i.jsxs(JJ,{sidebar:n,children:[s?t:i.jsxs(Bb,{className:"flex-1",children:[t,i.jsx(Uk,{}),i.jsx(Fk,{}),i.jsx(Bk,{})]}),i.jsx(kle,{}),r&&i.jsx(d.Suspense,{fallback:i.jsx(vX,{}),children:i.jsx(Lle,{})})]}),c.showMobileCrossSelling&&o.startsWith("/chats")&&!o.endsWith("/talk")&&i.jsx(Cle,{}),u&&i.jsx(vle,{}),c.showCookieBanner&&i.jsx(ble,{}),i.jsx(Nle,{}),i.jsx(Jne,{}),i.jsx("div",{id:"inAppFeedbackOcv"}),i.jsx("div",{id:"popoverPortal"}),i.jsx(Ile,{})]})}function Uk(){const{isMediaViewerOpen:e}=io();return e?i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"pointer-events-auto absolute inset-0 flex items-center justify-center",children:i.jsx(Mle,{type:"spinnerThemed",className:"size-12"})}),children:i.jsx(Ple,{})}):null}function Fk(){const e=oX(),t=aX();return i.jsxs(i.Fragment,{children:[e&&i.jsx(hle,{}),t&&i.jsx(d.Suspense,{fallback:null,children:i.jsx(jle,{})})]})}function Bk(){const e=Z.instance().config().appLayout,t=rX({showSettings:e.showSettings,showSettingsRelyOnChatDetailLayout:e.showSettingsRelyOnChatDetailLayout}),n=Wn();return t?i.jsx(d.Suspense,{fallback:null,children:i.jsx(Rle,{className:F("top-6",n&&"-me-1 -mt-3")})}):null}function Dle(){const{t:e}=V(),t=_(dE);let n="main";Mt(Qh)&&t==="permanent"&&(n="confirm-submission");const[s,o]=d.useState(n),[r,c]=d.useState(""),[l,u]=d.useState(!1),m=!r||r.trim().length===0||l,p=t==="permanent"?e("composer.userBan.permanent"):e("composer.userBan.temporary",{duration:e(t==="1-hr"?"composer.userBan.duration1Hr":"composer.userBan.duration24Hr")}),f=e(t==="permanent"?"composer.userBan.banMessagePermanent":"composer.userBan.banMessageTemporary"),h=async()=>{if(!m){yt({source:"submitBanAppeal"}),u(!0);try{await cn({path:"/user/bans/appeal",args:{body:{appealText:`APPEAL: ${r}`}}}),o("confirm-submission"),tn(Qh,new Date().toISOString())}catch(g){M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitBanAppeal",eventInfo_errorMessage:`${g}`,eventInfo_details:"Error submitting ban appeal"}})}u(!1)}};return i.jsxs("main",{className:"relative size-full",children:[i.jsx(Or,{forceGradient:!0}),i.jsxs(jt,{id:s,className:"relative z-10 m-auto flex h-dvh max-w-[540px] flex-col items-center justify-center gap-3 p-12 text-center",children:[s==="main"&&i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-3xl",children:p}),i.jsx("p",{children:f}),t==="permanent"&&i.jsx($,{color:"strong",size:"56-xl",className:"mt-6 w-full",title:e("composer.userBan.submitAppeal"),onClick:()=>o("submit-appeal"),children:e("composer.userBan.submitAppeal")}),i.jsx(vr,{msg:`${p}. ${f}`})]}),s==="submit-appeal"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex w-full items-center pb-4",children:[i.jsx($,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:e("common.backText"),onClick:()=>o("main"),children:i.jsx(fu,{className:"size-5 -rotate-90"})}),i.jsx("h2",{className:"grow pe-8",children:e("composer.userBan.submitAppeal")})]}),i.jsx("textarea",{className:"h-[240px] w-full resize-none rounded-xl bg-background-100 p-4 placeholder:text-foreground-650 contrast-more:border-2 dark:text-white",onChange:g=>c(g.target.value),disabled:l,placeholder:e("composer.userBan.submitAppealPlaceholder")}),i.jsx($,{color:"strong",className:"w-full",size:"56-xl",title:e("common.submitText"),onClick:h,disabled:m,children:e("common.submitText")})]}),s==="confirm-submission"&&i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-3xl",children:e("composer.userBan.appealSubmitted")}),i.jsx("p",{children:e("composer.userBan.appealSubmittedDescription")}),i.jsx(vr,{msg:`${e("composer.userBan.appealSubmitted")}, ${e("composer.userBan.appealSubmittedDescription")}`})]})]})]})}class Ule{generateClientEventId(t){if(this.shouldLogForEventName(t.data.eventName))return crypto.randomUUID()}onBeforeTrackEvent(t){this.logEventIfNeededNonBlocking(t,"prepared")}eventsSent(t){for(const n of t)this.logEventIfNeededNonBlocking(n,"success")}eventsDiscarded(t,n){for(const s of t)this.logEventIfNeededNonBlocking(s,this.getStatusFromDiscardedReason(n))}logEventIfNeededNonBlocking(t,n){this.logEventIfNeeded(t,n).catch(()=>{})}async logEventIfNeeded(t,n){var s,o,r,c,l,u,m,p;this.shouldLogForEventName((s=t.data)==null?void 0:s.eventName)&&await Hn("/client-telemetry",{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:(o=t.data)==null?void 0:o.eventInfo_clientEventId,eventName:(r=t.data)==null?void 0:r.eventName,status:n,retryCount:"sendAttempt"in t?t.sendAttempt:0,appInfoName:(c=t.data)==null?void 0:c.appName,userId:(l=t.data)==null?void 0:l.userPicassoId,userMuid:(u=t.data)==null?void 0:u.userMuid,conversationId:(m=t.data)==null?void 0:m.eventInfo_conversationId,messageId:(p=t.data)==null?void 0:p.eventInfo_messageId,isSdkInitialized:!0,clientTimestamp:t.time??new Date().toISOString()})}})}getStatusFromDiscardedReason(t){switch(t){case 1:return"nonRetryableStatus";case 2:return"invalidEvent";case 3:return"sizeLimitExceeded";case 4:return"killSwitch";case 5:return"queueFull";default:return"unknown"}}shouldLogForEventName(t){switch(t){case"copilotCompose":case"copilotResponseRender":case"copilotStart":return!0;default:return!1}}}const Fle=.05,Ble=.1;function Vle(){return Z.instance().config().sentryDsnOverride??"https://323dd84fb4f632ccd95493debe9312e0@o4508134825000960.ingest.us.sentry.io/4508799962644480"}async function Hle(){const e=await P(()=>import("./vendor-Dmlf5KxN.js").then(o=>o.au),__vite__mapDeps([0,1]));if(Zt("kill-sentry"))return;const n=[e.browserTracingIntegration(),e.tanstackRouterBrowserTracingIntegration(Pa)],s=[];e.init({dsn:Vle(),release:Gj(),sampleRate:Ble,environment:"production",integrations:[...n,...s],tracesSampleRate:Fle,profilesSampleRate:0}),e.setTag("surface","cmc"),e.setTag("isMobile",s0()?"1":"0"),e.setTag("server",window.isStudioServer?"studio":"snr")}function zle(e){const t=_(sn);d.useEffect(()=>{M.ensureInitialized(Wle()),e&&(window.appEnd=performance.now(),performance.mark("startupTime-begin",{startTime:window.appStart}),performance.mark("startupTime-end",{startTime:window.appEnd}),performance.measure("startupTime","startupTime-begin","startupTime-end"),Hle().catch(console.error))},[e]),d.useEffect(()=>{e&&t&&setTimeout(()=>{fi("onPageLoad")},1e3)},[e,t])}function Wle(){return()=>ce("picasso-telemetry")?new Ule:null}function Gle(){const e=_(sE),t=d.useRef(!1);d.useEffect(()=>{e&&!t.current&&(M.trackEvent({name:"system",data:{eventName:"copilotStart",eventInfo_duration:window.appEnd-window.appStart,eventInfo_landingPage:M.getLandingPage()}}),t.current=!0)},[e])}function $le(e){d.useEffect(()=>(document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}),[e])}function qle(){$le(()=>{document.visibilityState==="visible"?M.trackEvent({name:"system",data:{eventName:"copilotVisible",eventInfo_landingPage:M.getLandingPage()}}):M.trackEvent({name:"system",data:{eventName:"copilotBackground"}})})}function Kle(){const e=cO(),t=z(lu);e&&(s=>PO.includes(s))(e)&&t(e)}function Zle(){const e=_(xt),t=D("account-change-chat-reset");d.useEffect(()=>{t&&Ab()},[e,t])}function Yle(){ik({onStartComplete:()=>{e()}});const e=()=>{try{const n="n59ae4ieqq";if(Zt("kill-clarity")||!t(n))return()=>{};window.clarity||(window.clarity=function(...c){window.clarity&&(window.clarity.q=window.clarity.q??[]).push(c)});const o=document.createElement("script");return o.type="text/javascript",o.async=!0,o.src=`/cl/tag/${n}`,document.body.appendChild(o),window.clarity("signal",async r=>{if(r.type==="cl_dtrs"&&r.value){const c=ue(Ae);try{await cn({path:"/clarity/signal",args:{body:{token:r.value,conversationId:c}}}),M.trackEvent({name:"system",data:{eventName:"copilotFeatureSuccess",eventInfo_feature:"Clarity",eventInfo_scenario:"Clarity signal event sent via API",eventInfo_customData:JSON.stringify(r)}})}catch(l){M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ClaritySignalError",eventInfo_details:"Failed to send clarity via API",eventInfo_errorMessage:l instanceof Error?l.message:"Unknown clarity signal error"}})}}}),window.clarity("metadata",()=>{Og({surface:"cmc"});const r=ue(pE);r!==null&&Og({isNewUser:r.toString()})},!1,!0),()=>{delete window.clarity,o.remove()}}catch(n){return M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"useClarity",eventInfo_details:"Error loading Clarity",eventInfo_errorMessage:`${n}`}}),()=>{}}},t=n=>n.trim()!==""}function Qle(){d.useEffect(()=>{t0(["ak_failover"])},[])}function uh(e){if(Z.instance().config().persistThemeChoice){const n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e!==n?(tn(ma,e),El(ma,e,{expireDays:365*10})):(ct(ma),tI(ma))}document.documentElement.setAttribute("data-theme",e),Ge.emit("theme:color-applied",e)}function Jle(){const e=pr(ma),t=Mt(ma);return e??t??null}function Xle(){const{persistThemeChoice:e,enforceTheme:t}=Z.instance().config(),[n,s]=Ee(zn);d.useEffect(()=>{const o=window.matchMedia("(prefers-color-scheme: dark)"),r=l=>{const u=l.matches?"dark":"light";s(u),uh(u),e&&(ct(ma),tI(ma))};let c=e?Jle():"";return c!=="dark"&&c!=="light"&&(c=o.matches?"dark":"light"),t&&(c=t),s(c),uh(c),o.addEventListener("change",r),()=>{o.removeEventListener("change",r)}},[s,e,t]),d.useEffect(()=>{n&&uh(n)},[n])}const eue={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:fv};function tue(e){return function(n){return It(n,JH,e?{query:{"api-version":"2"}}:void 0).then(s=>s.data)}}function Ds(e){return Array.isArray(e)?Qn(e):{positive:Qn(e.positive),negative:Qn(e.negative)}}function Qn(e){const t=e,n=t.slice(0,-1),s=t.slice(-1);return[...Zse(n),...s]}function nue(e){return{newsArticle:Qn(e.newsArticle),newsVideo:Qn(e.newsVideo),newsGem:Qn(e.newsGem),chat:Qn(e.chat),dailyBriefing:Qn(e.dailyBriefing),podcast:Qn(e.podcast),default:Qn(e.default)}}function sue(){const e=D("adspositivefeedbacksurvey"),t=D("file-upload-config"),n=tue(e),{data:s,mutate:o}=xr("/config",n,eue),r=z(Xm),c=z(pI),l=z(gI),u=z(dQ),m=z(mQ),p=z(pQ),f=z(u0),h=z(d0),g=z(fI),y=z(Wo),b=z(HO);rk(o),d.useEffect(()=>{if(s){if(r(s.voices),c(s.signInPrompts),l(s.maxTextMessageLength),u(s.maxPageContentLength),p(s.pageLimit),m(s.maxPageTitleLength),s.characters&&h(s.characters),s.feedbackOptions.text=Qn(s.feedbackOptions.text),s.feedbackOptions.image=Qn(s.feedbackOptions.image),s.feedbackOptions.discover&&(s.feedbackOptions.discover=nue(s.feedbackOptions.discover)),s.feedbackOptions.card.local=Ds(s.feedbackOptions.card.local),s.feedbackOptions.card.ads=Ds(s.feedbackOptions.card.ads),s.feedbackOptions.card.video=Ds(s.feedbackOptions.card.video),s.feedbackOptions.card.image=Ds(s.feedbackOptions.card.image),s.feedbackOptions.card.shopping=Ds(s.feedbackOptions.card.shopping),s.feedbackOptions.card.recipe=Ds(s.feedbackOptions.card.recipe),s.feedbackOptions.card.sports=Ds(s.feedbackOptions.card.sports),s.feedbackOptions.card.finance=Ds(s.feedbackOptions.card.finance),s.feedbackOptions.card.quiz=Ds(s.feedbackOptions.card.quiz),s.feedbackOptions.card.weather=Ds(s.feedbackOptions.card.weather),f(s.feedbackOptions),g(s.messagePreview),t){const x=w=>{const I={};for(const A of w)A in ss&&ss[A]&&(I[A]=ss[A]);return I},v=x(s.attachments.image.mimeTypes),S=x(s.attachments.document.mimeTypes),C=ue(t4),T=(w,I)=>({maxBytes:w.maxBytes??I.maxBytes,mimeTypes:Object.keys(w.mimeTypes??{}).length?w.mimeTypes??{}:I.mimeTypes});y({maxFilesPerMessage:s.attachments.maxFilesPerMessage||C.maxFilesPerMessage,image:T({maxBytes:s.attachments.image.maxBytes,mimeTypes:v},C.image),document:T({maxBytes:s.attachments.document.maxBytes,mimeTypes:S},C.document)})}b(s.portraits??[])}},[s,c,r,l,u,m,f,h,p,g,y,t,b])}const Sv=new Set;function oue(e=!1){return Mt(Yh)!==null&&!e?!1:(ct(Zm),ct(Bi),lue(),tn(Yh,"true"),!0)}function Vk(){return parseInt(Mt(Zm)??"0",10)}function aue(){return new Date(Mt(Bi)??new Date().toISOString())}function rue(e){Mt(Bi)||tn(Bi,e)}function iue(e){let t;try{t=Vk()}catch{t=0}t<Oh&&(t+=1,tn(Zm,`${t}`),Sv.add(e),t===Oh&&rue(new Date().toISOString()))}function cue(e){e&&(Sv.has(e)||iue(e))}function lue(){Sv.clear()}function uue(){const e=Gt(),t=z(mE);d.useEffect(()=>{e&&oue()&&t(!0)},[e,t])}function due(){d.useEffect(()=>{if(window.ReportingObserver===void 0)return()=>{};const e=new ReportingObserver(t=>{for(const n of t){if(n.type!=="csp-violation"||!n.body)continue;const{body:s}=n,{blockedURL:o,documentURL:r,effectiveDirective:c,disposition:l}=s;console.error("Reporting CSP violation",{blockedURL:o,documentURL:r,effectiveDirective:c,disposition:l}),M.trackEvent({name:"system",data:{eventName:"copilotCSPViolation",eventInfo_blockedURL:o,eventInfo_documentURL:r,eventInfo_effectiveDirective:c,eventInfo_disposition:l}})}},{buffered:!0,types:["csp-violation"]});return e.observe(),()=>{e.disconnect()}},[])}function mue(){const e=D("custom-1ds"),t=_(sn);d.useEffect(()=>{if(!e||!Z.instance().config().enableCustom1DS)return oI(),()=>{};if(!t)return()=>{};const n=()=>{if(window.oneDS){const{ApplicationInsights:r}=window.oneDS;return new r}},s=()=>{var u;window.OneDsAzureAnalytics=window.OneDsAzureAnalytics??n();function r(){var p;return!!!((p=window.OneDsAzureAnalytics)!=null&&p.getCookieMgr().get("MSCC"))}const c={adobe:r(),google:r()},l={instrumentationKey:"c72e6b24df604532a6282edd268b4ba4-9cdee1fe-5d2f-4626-9620-dbad9b53a8e5-8065",channelConfiguration:{eventsLimitInMem:50,autoFlushEventsLimit:1},propertyConfiguration:{userConsentCookieName:Qm.name,gpcDataSharingOptIn:nI(),callback:{userConsentDetails:()=>{if(!Fm.includes(t))return{Required:!0,Analytics:!0,SocialMedia:!0,Advertising:!0};const m=wr();return{Required:Object.values(m).includes(!0),Analytics:m.analytics,SocialMedia:m.socialMedia,Advertising:m.advertising}}}},webAnalyticsConfiguration:{coreData:{appId:"JS:Copilot_microsoft_com"},cookiesToCollect:["_mkto_trk"],urlCollectQuery:!0,syncMuid:r()},extensionConfig:{IdSyncPlugin:c}};window.postConsAzure1DSInit||((u=window.OneDsAzureAnalytics)==null||u.initialize(l,[]),window.postConsAzure1DSInit=!0)},o=document.createElement("script");return o.src="https://az416426.vo.msecnd.net/scripts/c/ms.analytics-web-4.min.js",o.async=!0,o.onload=s,document.head.appendChild(o),()=>{document.head.removeChild(o)}},[e,t])}function pue(e){const{handler:t}=K3({deferred:!0}),{handler:n}=Q3({deferred:!0}),{passthroughType:s,prompt:o}=J3(),r=d.useCallback(u=>{M.setLandingPage("chatWithPartialPromptPassthrough"),t(u)},[t]),c=d.useCallback(u=>{M.setLandingPage("chatWithFullPromptPassthrough"),n(u)},[n]),l=d.useCallback(()=>{if(o&&s)switch(s){case"partial":r(o);break;case"full":c(o);break}},[c,r,s,o]);d.useEffect(()=>{e&&l()},[e,l])}function fue(){const e=et(),t=d.useRef(!1),n=_(wt),[s,o]=Ee(ro),r=xE();d.useEffect(()=>{e.startsWith("/chats")&&Bt("appearance-talk")==="1"&&(t.current=!0)},[e]),d.useEffect(()=>{r&&n&&t.current&&(t.current=!1,o(Ir))},[n,t,s,o,r])}function hue(){const e=_(Ae),t=_(sE),n=D("adsidsync"),s=_(sn),o=Gt(),r=mp(s),c=_(g0),l=Hr();d.useEffect(()=>{const{adsEnabled:u,enforceAdsOptOutOfPersonalization:m}=Z.instance().config(),p=u&&!l;if(e&&t&&n){const f=e0(),g=wr().advertising;if(M.trackEvent({name:"system",data:{eventName:"copilotAdsSignal",eventInfo_scenario:"syncAdvertisingId",eventInfo_conversationId:e,eventInfo_additionalData:JSON.stringify({isAdsEnabled:p,isAdPersonalizationEnabled:g,isAuthenticated:o,isGdprPlusRegion:r,isChoiceCookieEmpty:!f})}}),!p)return;const y=new URLSearchParams;if(y.append("cpid",t),y.append("cvid",e),o&&y.append("cp","1"),f){if(r&&!g)return;g&&!m?y.append("ps","1"):y.append("ps","0")}else{if(r)return;y.append("ps","1")}const b=`https://c.bing.com/cp?${y}`,x=performance.now();fetch(b,{method:"GET",mode:"no-cors",credentials:"include"}).then(v=>{const S=performance.now();wE(b,"GET",S-x,v.clone())}).catch(v=>{M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"adsError",eventInfo_errorMessage:"Ads Id Sync failed with error",eventInfo_details:`Ads Id Sync failed: ${v}`}})})}},[c,e,s,r,n,t,o,l])}function gue(e){const t=_(xt),n=_(iu),s=_(nc),o=_(Ra),r=_(z0),{upsellFromAuth0:c}=Z.instance().config().proSubscription,u=Gt()&&(t==null?void 0:t.provider)==="microsoft",m=D("cmc-m365-sku"),p=Ys("shouldStartSubscription"),f=Ys("parsedPayflowEntryPoint")??"Unknown",h=et(),g=d.useRef(!1),{handleResumeSubscriptionWithCurrentInstanceId:y}=Yb({payflowEntryPoint:f,skuType:r?"FreeTrial":"1Mo-Paid",upsellReason:"",entryStyle:"Redirect"});d.useEffect(()=>{if(p&&m&&u&&!h.startsWith("/subscription/start")){Cg("shouldStartSubscription"),setTimeout(()=>{y()},0);return}if(!(c!=null&&c.navigateToProSubPageAfterLogin))return;const b=sessionStorage.getItem(Bh);if(!b)return;async function x(v){const[,S]=v.split("-");if(S==="link"){const C=performance.now(),{getAuth0AccessToken:T,auth0:w}=await Yn.get(),I=await T(vl);if(!I){Nt({feature:"accountLinkAuth0WithMSA",errorType:"LinkStartedWithoutAuth0Token"});return}try{await cn({path:"/user/link",args:{body:{token:I}}})}catch(A){A instanceof Error&&Nt({feature:"accountLinkAuth0WithMSA",errorType:A.name,errorMessage:A.message,exception:A.stack})}finally{w.logout({openUrl:!1}),Xs({feature:"accountLinkAuth0WithMSA",duration:performance.now()-C}),o||await y()}}}if(e&&!g.current&&n){if(g.current=!0,sessionStorage.removeItem(Bh),Cg("parsedPayflowEntryPoint"),(t==null?void 0:t.accountType)!=="MSA"||s)return;x(b)}},[e,y,c,t,o,s,n,h,u,m,p])}function bue(e){const{isEnabled:t,onIntercept:n}=e;d.useEffect(()=>{if(!t)return()=>{};const s=c=>zE(c)?(n(c.toString()),!0):!1,o=c=>{const l=c.target.closest("a");l&&l instanceof HTMLAnchorElement&&s(l.href)&&c.preventDefault()},r=window.open;return window.open=function(...l){return l.length>0&&typeof l[0]=="string"&&!s(l[0])?r.apply(window,l):null},document.addEventListener("click",o),()=>{window.open=r,document.removeEventListener("click",o)}},[t,n])}function vue(){const e=Hr(),[t,n]=Ee(r0),s=z(Ae),o=zo();d.useEffect(()=>{!e&&t&&n(void 0),e&&!t&&(s(void 0),o({createConversationParams:{isPrivate:!0}}))},[e,t,s,n,o])}function yue(){d.useEffect(()=>{const e=Mt(Jh),t=Date.now();e||tn(Jh,t.toString())},[])}function Cue(){d.useEffect(()=>{},[])}function xue(){const e=z(is);return i.jsx("p",{children:i.jsx(en,{i18nKey:"settings.copilotBeta.announcementSubtitle",components:{settingsLink:i.jsx(Mu,{pages:["menu","copilot-beta"],className:"underline",clickSource:"disclaimerSettingsLink",onClick:()=>e(null)})}})})}function Sue(){if(!ce("copilot-beta-automatic-opt-in"))return;const e=ue(Vi);if(e===void 0)ot(wf,!0),ot(Vi,!0),pu();else if(e&&ue(wf)){const n={title:B("settings.copilotBeta.announcementTitle"),subtitle:i.jsx(xue,{})};ot(is,n),ot(wf,void 0)}}async function wue(e){try{return(await It(`/conversations/${e}/history`,ZT,{analytics:{anonymousPath:"/conversations/*/history"}}).then(n=>n.data)).results.length>0}catch{return!1}}const S2e=k([]),Iue=k(null);function Tue(e){return/\/gallery\/\w+/.test(e)}async function Eue(e){const{id:t,isLiked:n}=e,s=await Hn(`/gallery/${t}/react/like`,{options:{method:n?"POST":"DELETE"},analytics:{anonymousPath:"/gallery/*"}});if(!s.ok)throw new Error("Failed to fetch Gallery Like data");return s}async function w2e(e){try{const{id:t,isLiked:n,scenario:s}=e;Se({source:n?"like":"unlike",scenario:s,customData:JSON.stringify({eventInfo_galleryArtifactId:t})}),await Eue(e)}catch{}}async function I2e(e,t,n="/gallery"){De().set(Iue,e);const{id:o}=t;await Dr({from:n,to:`/gallery/${o}`})}async function Aue(e){const{conversationIdFromUrl:t,conversationIdFromStart:n}=e;return t&&t!=="new"&&await wue(t)?{conversationId:t,isNew:!1}:n?{conversationId:n,isNew:!0}:{conversationId:null,isNew:!0}}async function _ue(e){const{pathname:t,conversationIdFromUrl:n,conversationFromUrlExists:s,urlPrompt:o,features:r,isBanned:c,enablePageRedirect:l,deepLinkTarget:u,search:m}=e;if(!l||c||Sb()||navigator.userAgent.toLowerCase().includes("googlebot")&&t==="/")return null;if(o||n==="new")return{to:u==="audioCall"?"/chats/$conversationId/talk":"/",from:t,needsConversationId:u==="audioCall"};if(t.startsWith("/shares"))return t.startsWith("/shares/pages")?r.includes("pages")&&!r.includes("kill-shared-page")?null:Tt(t):t.startsWith("/shares/podcasts")?null:t.startsWith("/shares/3d-generations")?r.includes("kill-share-3d-generations")?Tt(t):null:t.startsWith("/shares/tasks")?null:r.includes("kill-share-conversation")||!nk(t)?Tt(t):null;if(t.startsWith("/campaigns"))if(t.startsWith("/campaigns/gallery")){if(!r.includes("share-campaign-gallery"))return Tt(t)}else if(t.startsWith("/campaigns/image-expression-tool")){if(!r.includes("gallery-expression-tool"))return Tt(t)}else return r.includes("share-campaign")?null:Tt(t);if(["/pro/subscribe","/pro/ewallet/return"].includes(t)||t==="/fang")return null;if(t.startsWith("/referrals")&&!r.includes("user-referral")||t.startsWith("/connector")&&!r.includes("google-drive-connector")||t.startsWith("/subscription")&&!r.includes("cmc-m365-sku"))return Tt(t);if(t.startsWith("/memory/narrative"))return r.includes("memory-narrative")?null:Tt(t);if(t.endsWith("/talk"))return t.startsWith("/labs/portrait/talk")&&r.includes("labs-portrait-enabled")?{from:t,to:"/labs/portrait",needsConversationId:!1}:Tt(t);if(t.startsWith("/chats")&&!s)return Tt(t);if(t.startsWith("/pages"))return r.includes("pages")?null:Tt(t);if(t.startsWith("/labs")&&(t.startsWith("/labs/portrait")&&!r.includes("labs-portrait-enabled")||t.startsWith("/labs/career-coach")&&!r.includes("labs-career-coach")||t.startsWith("/labs/audio-expression")&&!r.includes("labs-audio-expression")||!Z.instance().config().enableLabs)||t.startsWith("/login"))return Tt(t);if(t.startsWith("/podcasts"))return t.startsWith("/podcasts/user")||t.startsWith("/podcasts/public")?null:Tt(t);if(t.startsWith("/library")&&!r.includes("library"))return Tt(t);if(t==="/"){if(r.includes("start-in-voice"))return null;const p=m==null?void 0:m.get("back");return kue(p)&&Z.instance().config().redirectBackEnabled?{from:"/login",to:new URL(p).pathname,needsConversationId:!1}:Tt(t)}return Tue(t)?r.includes("kill-gallery-detail")?Tt(t):null:t.startsWith("/gallery")?r.includes("creator-gallery")?null:Tt(t):null}function kue(e){if(!e)return!1;try{if(new URL(e).origin===window.location.origin)return!0;throw new Error("Invalid redirect URL: not from same origin")}catch{throw new Error("Invalid redirect URL, malformed URL")}}function Tt(e){return{from:e,to:"/"}}function Nue(){try{const{timeZone:e}=Intl.DateTimeFormat().resolvedOptions();return e}catch{return}}const Mue=rO(),s1=1e4;function Rue(){return setTimeout(()=>{Nt({feature:"start",scenario:"callStartTimeout",errorType:"timeout",errorMessage:`Start call exceeded ${s1}ms timeout`})},s1)}async function Pue(e){let t=ko("sessionId");const n=ko("referralCode");!t&&n&&(t=crypto.randomUUID(),wa("sessionId",t));const s=XW(),o={timeZone:Nue(),startNewConversation:!0,teenSupportEnabled:!0,deviceFingerprint:t??void 0,referralCode:n??void 0,correctPersonalizationSetting:!0,performUserMerge:s,deferredDataUseCapable:!0},r={};Mue&&(r.overrideFeatures="1");const l=St(tg,a.boolean())?{maxRetries:3,initialDelayMs:100,maxDelayMs:500,backoffFactor:2,jitterFactor:.1}:void 0,{data:u,response:m,zodError:p}=await It(e,VH,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},parseOptions:{safe:!0},query:r,...l&&{retry:l},requestTimeoutMs:s1});if(Tl.trackClientExperimentationAssignment(m.headers),Tl.trackLatestApiAssignment(m.headers),m.status===j1)throw new Error(O1);if(p)throw p;return u}function Lue(){const{i18n:e}=V(),{showBoundary:t}=tw(),n=z(_l),s=z(OO),o=z(lw),r=z(Ct),c=z(r0),l=z(fr),u=z(Ae),m=z(pE),p=z(a0),f=z(G0),h=Ns(),[g]=Np(),y=et(),b=d.useRef(y);b.current=y;const x=v1({strict:!1}),v=d.useRef(x);v.current=x;const S=d.useRef(Xj()),C=_(yu),T=d.useRef(C);T.current=C;const w=d.useRef(!0),I=d.useRef(!1),{trigger:A}=cb("/start",Pue);return d.useCallback(async E=>{var H;if(!e.language||I.current&&!E.eventDriven)return!1;I.current=!0;const R=bq(),{enablePageRedirect:U,overwriteData:K}=E;s(!0);try{const te=Rue(),{isNewUser:oe,banExpiresAt:ne,remainingTurns:ge,features:me,currentConversationId:be,allowBeta:we,userId:se,inDataUseWaitingPeriod:ae}=await A();clearTimeout(te),await n3(),Ge.emit("app:start-complete");const fe=M.getPicassoId();fe!==null&&se!==null&&fe!==se&&M.trackEvent({name:"health",data:{eventName:"userIdMismatch",eventInfo_customData:JSON.stringify({existingPicassoId:fe,newPicassoId:se??"",origin:"start"})}}),M.setFeatures(me),M.setIsNewUser(oe),Og({isNewUser:oe.toString()});const re=pA({featureOverrides:[],localFeatureOverrides:fA(),serverFeatures:me,surfaceConfig:Z.instance().config()});re.includes("kill-picasso-id-on-start")||M.setPicassoId(se??null),re.includes("msal-silent-sso")?Xt(eg,a.boolean(),!0):ct(eg),re.includes("auth-module-refactor")?Xt(k2,a.boolean(),!0):ct(k2),re.includes("auth-rf-init-auth-account")?Xt(og,a.boolean(),!0):ct(og),re.includes("auth-rf-msal-event-removal")?Xt(ag,a.boolean(),!0):ct(ag),re.includes("msal-v4-upgrade")?Xt(cg,a.boolean(),!0):ct(cg),re.includes("token-retry-max-2")?Xt(rg,a.boolean(),!0):ct(rg),re.includes("token-retry-max-2-auth0")?Xt(ig,a.boolean(),!0):ct(ig),re.includes("start-retry")?Xt(tg,a.boolean(),!0):ct(tg),re.includes("reauth-redirect")?Xt(lg,a.boolean(),!0):ct(lg);const ke=Tb(ne),q=Sb(re),G=await Aue({conversationIdFromUrl:q?void 0:v.current.conversationId,conversationIdFromStart:q?void 0:be});let{conversationId:J}=G;if(!J){const{id:X}=await QA("/conversations",{arg:{isPrivate:q}});J=X,q&&c(X)}const Ie=await _ue({pathname:b.current,conversationIdFromUrl:v.current.conversationId,conversationFromUrlExists:v.current.conversationId===J,urlPrompt:((H=T.current)==null?void 0:H.prompt)??null,features:re,enablePageRedirect:U,isBanned:!!ke,deepLinkTarget:g,search:new URLSearchParams(window.location.search),userAccount:ue(xt)});r(X=>{if(!K&&X.size>0)return X;const he=new Map([[J,{id:J,updatedAt:new Date().toISOString(),history:[],isNew:G.isNew,characterId:null,streamingState:"idle",continuedAt:null}]]);return!G.isNew&&be&&he.set(be,{id:be,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:null,streamingState:"idle",continuedAt:null}),he}),u(X=>X&&!K?X:J),o(X=>X.length>0&&!K?X:re),l(ge),m(oe),f(ae??null),p(we??!1),we&&Sue(),Eb(ke,"start",ne),w.current&&(w.current=!1,Ie&&await h({...Ie,params:Ie.needsConversationId?{conversationId:J}:{},search:S.current}))}catch(te){if(M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"StartEndpointError",eventInfo_errorMessage:te instanceof Error?te.message:"",eventInfo_details:te instanceof Error?te.stack??"":""}}),te instanceof Error&&te.message===O1)return n("age-verification"),!0;console.error(te),t(te)}finally{s(!1),kre(!1)}return!0},[A,r,u,c,n,s,o,l,m,p,f,h,e.language,t,g])}function jue(){const e=_(Z1),[t,n]=d.useState(!1),s=Lue();return d.useEffect(()=>{t||!e||s({enablePageRedirect:!0,overwriteData:!1}).then(o=>{o&&n(!0)}).catch(console.error)},[s,t,e]),d.useEffect(()=>{const o=()=>{s({enablePageRedirect:!1,overwriteData:!0,eventDriven:!0}).catch(console.error)};return Ge.on("auth:account-set-by-msal-sso",o),()=>{Ge.off("auth:account-set-by-msal-sso",o)}},[s]),{appInitialized:t}}let Hk=-1;const ju=e=>{addEventListener("pageshow",t=>{t.persisted&&(Hk=t.timeStamp,e(t))},!0)},Ea=(e,t,n,s)=>{let o,r;return c=>{t.value>=0&&(c||s)&&(r=t.value-(o??0),(r||o===void 0)&&(o=t.value,t.delta=r,t.rating=((l,u)=>l>u[1]?"poor":l>u[0]?"needs-improvement":"good")(t.value,n),e(t)))}},zk=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},wv=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Mp=()=>{const e=wv();return(e==null?void 0:e.activationStart)??0},Aa=(e,t=-1)=>{const n=wv();let s="navigate";return Hk>=0?s="back-forward-cache":n&&(document.prerendering||Mp()>0?s="prerender":document.wasDiscarded?s="restore":n.type&&(s=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:s}},dh=new WeakMap;function Wk(e,t){return dh.get(e)||dh.set(e,new t),dh.get(e)}const Rp=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const s=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return s.observe({type:e,buffered:!0,...n}),s}}catch{}},Gk=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let bi=-1;const nS=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,Tm=e=>{document.visibilityState==="hidden"&&bi>-1&&(bi=e.type==="visibilitychange"?e.timeStamp:0,Oue())},sS=()=>{addEventListener("visibilitychange",Tm,!0),addEventListener("prerenderingchange",Tm,!0)},Oue=()=>{removeEventListener("visibilitychange",Tm,!0),removeEventListener("prerenderingchange",Tm,!0)},$k=()=>{var e;return bi<0&&(bi=(document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden")[0])==null?void 0:e.startTime)??nS(),sS(),ju(()=>{setTimeout(()=>{bi=nS(),sS()})})),{get firstHiddenTime(){return bi}}},Pp=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},oS=[1800,3e3],Due=(e,t={})=>{Pp(()=>{const n=$k();let s,o=Aa("FCP");const r=Rp("paint",c=>{for(const l of c)l.name==="first-contentful-paint"&&(r.disconnect(),l.startTime<n.firstHiddenTime&&(o.value=Math.max(l.startTime-Mp(),0),o.entries.push(l),s(!0)))});r&&(s=Ea(e,o,oS,t.reportAllChanges),ju(c=>{o=Aa("FCP"),s=Ea(e,o,oS,t.reportAllChanges),zk(()=>{o.value=performance.now()-c.timeStamp,s(!0)})}))})};let qk=0,mh=1/0,dd=0;const Uue=e=>{for(const t of e)t.interactionId&&(mh=Math.min(mh,t.interactionId),dd=Math.max(dd,t.interactionId),qk=dd?(dd-mh)/7+1:0)};let o1;const aS=()=>o1?qk:performance.interactionCount??0,Fue=()=>{"interactionCount"in performance||o1||(o1=Rp("event",Uue,{type:"event",buffered:!0,durationThreshold:0}))};let rS=0;class Bue{constructor(){N(this,"u",[]);N(this,"l",new Map);N(this,"m");N(this,"p")}v(){rS=aS(),this.u.length=0,this.l.clear()}P(){const t=Math.min(this.u.length-1,Math.floor((aS()-rS)/50));return this.u[t]}h(t){var o,r;if((o=this.m)==null||o.call(this,t),!t.interactionId&&t.entryType!=="first-input")return;const n=this.u.at(-1);let s=this.l.get(t.interactionId);if(s||this.u.length<10||t.duration>n.T){if(s?t.duration>s.T?(s.entries=[t],s.T=t.duration):t.duration===s.T&&t.startTime===s.entries[0].startTime&&s.entries.push(t):(s={id:t.interactionId,entries:[t],T:t.duration},this.l.set(s.id,s),this.u.push(s)),this.u.sort((c,l)=>l.T-c.T),this.u.length>10){const c=this.u.splice(10);for(const l of c)this.l.delete(l.id)}(r=this.p)==null||r.call(this,s)}}}const Kk=e=>{const t=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?e():(t(e=Gk(e)),document.addEventListener("visibilitychange",e,{once:!0}))},iS=[200,500],Vue=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Pp(()=>{Fue();let n,s=Aa("INP");const o=Wk(t,Bue),r=l=>{Kk(()=>{for(const m of l)o.h(m);const u=o.P();u&&u.T!==s.value&&(s.value=u.T,s.entries=u.entries,n())})},c=Rp("event",r,{durationThreshold:t.durationThreshold??40});n=Ea(e,s,iS,t.reportAllChanges),c&&(c.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(r(c.takeRecords()),n(!0))}),ju(()=>{o.v(),s=Aa("INP"),n=Ea(e,s,iS,t.reportAllChanges)}))})};let Hue=class{constructor(){N(this,"m")}h(t){var n;(n=this.m)==null||n.call(this,t)}};const cS=[2500,4e3],zue=(e,t={})=>{Pp(()=>{const n=$k();let s,o=Aa("LCP");const r=Wk(t,Hue),c=u=>{t.reportAllChanges||(u=u.slice(-1));for(const m of u)r.h(m),m.startTime<n.firstHiddenTime&&(o.value=Math.max(m.startTime-Mp(),0),o.entries=[m],s())},l=Rp("largest-contentful-paint",c);if(l){s=Ea(e,o,cS,t.reportAllChanges);const u=Gk(()=>{c(l.takeRecords()),l.disconnect(),s(!0)});for(const m of["keydown","click","visibilitychange"])addEventListener(m,()=>Kk(u),{capture:!0,once:!0});ju(m=>{o=Aa("LCP"),s=Ea(e,o,cS,t.reportAllChanges),zk(()=>{o.value=performance.now()-m.timeStamp,s(!0)})})}})},lS=[800,1800],a1=e=>{document.prerendering?Pp(()=>a1(e)):document.readyState!=="complete"?addEventListener("load",()=>a1(e),!0):setTimeout(e)},Wue=(e,t={})=>{let n=Aa("TTFB"),s=Ea(e,n,lS,t.reportAllChanges);a1(()=>{const o=wv();o&&(n.value=Math.max(o.responseStart-Mp(),0),n.entries=[o],s(!0),ju(()=>{n=Aa("TTFB",0),s=Ea(e,n,lS,t.reportAllChanges),s(!0)}))})},Gue=e=>{const n=performance.getEntriesByType("navigation")[0],s=n==null?void 0:n.type;let o;const r=navigator;r.connection&&typeof r.connection.effectiveType=="string"&&(o=r.connection.effectiveType);const c={eventName:e.name,eventInfo_duration:e.value,eventInfo_navigationType:s,eventInfo_connectionType:o};M.trackEvent({name:"system",data:c});try{const l=`web-vitals-${e.name}`;performance.mark(l),performance.measure(`web-vitals-measure-${e.name}`)}catch{}};let uS=!1;function $ue(){const e=z(SI);if(typeof window>"u"||uS)return;uS=!0;let t=!1;const n=o=>{Gue(o),e(r=>({...r,[o.name.toLowerCase()]:o.value}))},s=o=>{t||(t=!0,n(o))};Wue(n),Due(n),zue(s,{reportAllChanges:!0}),Vue(n)}function que(){d.useEffect(()=>(window.addEventListener("unhandledrejection",P2),()=>{window.removeEventListener("unhandledrejection",P2)}),[])}function Kue(){const e=Xl(Ct);return d.useCallback(n=>{e(s=>{for(const{id:o,title:r,updatedAt:c,characterId:l,continuedAt:u}of n){const m=s.get(o);m?(m.title=r,m.updatedAt=c,m.characterId=l??null,m.continuedAt=u):s.set(o,{id:o,title:r,updatedAt:c,characterId:l??null,streamingState:"idle",history:[],continuedAt:null})}})},[e])}function Zue(){const e=Kue(),t=z(Jm);return d.useCallback(async({url:s,args:o,isFirstPage:r})=>{const c=await It(s,gz,{query:o}).then(l=>l.data);if(c.results.length>0){const l=c.results.map(u=>({...u,history:[],streamingState:"idle"}));e(l),t(!0)}else r&&t(!1);return c},[e,t])}function Yue(){const e=Zue();return vu({queryKey:["conversations"],queryFn:({pageParam:t})=>e(t),initialPageParam:{url:"/conversations",isFirstPage:!0},getNextPageParam:t=>t.next?{url:"/conversations",args:{cursor:t.next}}:null})}const Que="aster";function Jue(){const e=z(sn),t=z(WW),n=!Sn("kill-picasso-id-on-start");return d.useCallback(async()=>{const s=await It("/user",DT,{parseOptions:{safe:!0},query:{"api-version":"3"}}).then(u=>u.data),{id:o,anid:r,isHistoryMigrationPending:c}=s;M.setAnid(r);const l=M.getPicassoId();return l!==null&&l!==o&&M.trackEvent({name:"health",data:{eventName:"userIdMismatch",eventInfo_customData:JSON.stringify({existingPicassoId:l,newPicassoId:o,origin:"user"})}}),n||M.setPicassoId(o),t(c),e(s.regionCode),s},[n,t,e])}function Xue(){const e=_(xt),t=_(Sr),{refetch:n}=Yue(),s=Jue(),o=z(wt),r=z(DO),c=z(fr),l=z(cu),u=z(oE),m=z(rE),p=z(H0),f=z(ap),h=z(UW),g=z(QO),y=z(iE),b=z(FW),x=z(BW),v=z(cE),S=z(VW),C=z(tE),T=z(rp),w=z(uu),I=z(HW),A=z(KW),E=wu(),R=D("account-change-chat-reset"),U=Np()[0]==="audioCall";d.useEffect(()=>{(async()=>{r(!0);try{const H=Promise.all([s(),It("/user/settings",pz).then(pe=>pe.data),n()]),te=Ro.instance().getUserInfo(),[{id:oe,firstName:ne,isPro:ge,inEeaPlusRegion:me,isEligibleForFreeTrial:be,phoneLink:we,ageGroup:se,allowedToggles:ae,remainingCalls:fe,subscriptions:re,accountTier:ke,requiredConsents:q},{preferredVoice:G,preferredCharacter:J,optOutOfTraining:Ie,optInToVoiceTraining:X,optOutOfPersonalization:he,optOutOfPhoneConnection:Ue,optInToGenerativeUI:ie,allowBiometricDataUse:ve,allowOneDriveAccess:Pe,allowOutlookAccess:_e,allowBrowserActions:Oe,allowComputerUseActions:Ve,features:j}]=await H;if(M.setIsAad(t),o({id:oe,firstName:ne,isPro:ge&&!t,inEeaPlusRegion:me,isEligibleForFreeTrial:be,phoneLink:we,ageGroup:se,allowedToggles:ae,subscriptions:re,accountTier:ke,isStudent:void 0,requiredConsents:q}),C(ne??void 0),!R&&!U&&await Ab(),l(G||Que),E&&J){const pe=cI(J);u(pe)}m(Ie),p(X),f(he),h(!!Ue),g(!!ie),y(!!ve),b(!!Pe),x(!!_e),v(Oe),S(Ve),I((j==null?void 0:j.suggestedFollowups)??!0),A(q),fe&&(T(fe.podcastGeneration),w(fe.research)),M.setSettings({userSettingVoiceType:G??void 0,userConsentPersonalization:!he,userConsentModelTraining:!Ie,userSettingBrowserActions:Oe??void 0,userSettingComputerUseActions:Ve??void 0,userSubscription:ge?"pro":"free",accountTier:ke??"free",activeSubscriptions:(re==null?void 0:re.map(pe=>pe.tier).join(","))??""});const O=await te;if(O){const{mail:pe,givenName:Re,imgSrc:xe,isStudent:qe}=O;o(Le=>Le&&{...Le,givenName:Re,email:pe,imgSrc:xe,isStudent:qe}),Re&&!ne&&C(Re),t||c(null)}}finally{r(!1)}})().catch(console.error)},[e,R,o,r,c,n,m,l,E,h,g,p,f,y,b,v,S,s,t,u,U,C,T,w,I,A,x])}function ede(e={}){const{isAppInitialized:t=!1}=e,n=window.appStart;return d.useEffect(()=>!t||!n?()=>{}:(window.addEventListener("beforeunload",Z2),()=>{window.removeEventListener("beforeunload",Z2)}),[t,n]),{startTime:n}}const tde=()=>{const e=D("google-drive-connector"),{isGoogleDriveEnabled:t=!1}=Z.instance().config().connectorPlatform??{};return e&&!!t},E2e="userConnectors",nde="/connections",dS=["google-drive"];async function sde(){const{data:e}=await It(nde,yW,{options:{method:"GET",headers:{"Content-Type":"application/json"}}});return e.connections}function ode(){const e=Gt(),t=tde(),n=e&&t,s=z(eD),o=_(xt),r=d.useMemo(()=>(o==null?void 0:o.provider)==="auth0"&&o.accountType==="Google"?dS.filter(p=>p!=="google-drive"):dS,[o]),{data:c,error:l,isLoading:u}=Pm({queryKey:["userConnectors"],queryFn:sde,enabled:n});return d.useEffect(()=>{if(c!==void 0){const m=r.map(p=>{const f=c.find(h=>h.type===p);return{type:p,status:(f==null?void 0:f.status)??"disconnected",id:(f==null?void 0:f.id)??`${p}-${crypto.randomUUID()}`}});s(m)}},[c,s,r]),{isLoading:u,error:!!l,data:u||!c?null:c}}const ade=a.object({isMobileAppInstalled:a.boolean()}),rde="/user/install-status";async function ide(){try{return(await It(rde,ade,{options:{method:"GET"}})).data.isMobileAppInstalled}catch(e){throw console.error("Failed to fetch mobile app install status:",e),e}}function cde(){const e=z(f0),{data:t,error:n,isLoading:s,mutate:o}=xr("mobileAppInstallStatus",ide,{revalidateOnFocus:!1,revalidateOnReconnect:!1,dedupingInterval:6e4});return d.useEffect(()=>{t!==void 0&&e(t)},[t,e]),{isMobileAppInstalled:t,isLoading:s,error:n||null,refetch:o}}function lde(){const e=D("memory-narrative"),t=Gt(),n=_(ap),s=_(G0);return e&&t&&!n&&!s}const ude="/user/narrative";function mS(e,t){var n;return(n=e.filter(s=>s.name===t)[0])==null?void 0:n.url}function A2e(e){const{background1:t,background2:n,background3:s}=e,r=[n,t,s].filter(l=>typeof l=="object"&&"light"in l&&"dark"in l);if(r.length===0)return[];const c=[];for(let l=0;l<r.length;l+=1){const u=r[l],m=r[(l+1)%r.length];!u||!m||(c.push({type:"gradient",from:u,to:m}),c.push({type:"solid",color:m}))}return c}function _2e(e,t,n){const s=e[t%e.length];return s?s.type==="gradient"?`linear-gradient(to bottom, ${n?`#${s.from.dark}`:`#${s.from.light}`}, ${n?`#${s.to.dark}`:`#${s.to.light}`})`:n?`#${s.color.dark}`:`#${s.color.light}`:"var(--background-color)"}function k2e(e,t){return t==="wavy-shape"?mS(e,"hero-image-wavy-tablet"):mS(e,`hero-image-${t}-tablet`)}const dde=a.object({from:a.string()});function mde(e){return dde.safeParse(e).success}function N2e(e){return mde(e)?e.from:"/"}const M2e={start:{...Ce,y:300},end:{...Be,y:0}},R2e={duration:L$,ease:j$},pde={revalidateOnFocus:!1,shouldRetryOnError:!1,refreshInterval:fv};async function fde(e){const{data:t,response:n}=await It(e,wH,{options:{method:"GET",headers:{"Content-Type":"application/json"}},query:{"api-version":"2"}});if(!n.ok)return null;const{id:s,sections:o,theme:r,masks:c,font:l,fontHandwriting:u}=t;return{id:s,sections:o.filter(m=>m.type!=="shareDefault"),config:{theme:r,masks:c,font:l,...u?{fontHandwriting:u}:{}}}}function hde(){const e=Gt(),t=lde(),n=e&&t,{data:s,error:o,isLoading:r}=xr(n?ude:null,fde,pde);return{isLoading:r,error:o,data:r||!s?null:s}}const pS="ms-copilot://chat",gde=1e3;function bde(e){if(typeof window>"u")return new URLSearchParams;const t=new URLSearchParams,n=M.getFormCode();return n&&t.set("form",n),e!=null&&e.prompt&&t.set("q",e.prompt),t}function vde(e){return e?`${pS}?${e.toString()}`:pS}async function yde(e){if(!aI())return!1;try{const t=bde(e),n=vde(t),s=document.createElement("iframe");return s.style.display="none",s.src=n,document.body.appendChild(s),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},gde),!0}catch{return!1}}function Cde(){const e=Sn("kill-windows-protocol-launcher"),t=_(p0),n=_(lI);d.useEffect(()=>{if(e||!aI()||!n)return;(async()=>{try{await yde({prompt:t??void 0})}catch(o){console.error(o)}})()},[n,e,t])}function xde(){return St(eg,a.boolean().nullable())===!0}function Sde(){return St(Yd,a.boolean().nullable())===!0}function wde(){return Pa.state.location.pathname==="/login"}function Ide(e){for(const t of e)if(t.tenantId===Wd)return t;return e[0]}function ph(e){return ys(e)?"AAD":"MSA"}async function Tde(){const e=De();async function t(){return await Ro.instance().getAccountFromProviders()!==null}function n(){return xde()?!Sde():!1}function s(r){var c;if(r===null){e.set(xt,null),M.setUserAccountType(void 0);return}e.set(xt,{id:((c=r.idTokenClaims)==null?void 0:c.oid)??"",tenantId:r.tenantId,provider:"microsoft",accountType:ph(r.tenantId)}),M.setUserAccountType(ph(r.tenantId))}async function o(){try{Z.instance().config().enableAuth0&&await Yn.get();const{msal:r}=await bn.get();M.trackEvent({name:"system",data:{eventName:"copilotMsalInit",eventInfo_initTrigger:"DCL",eventInfo_timing:performance.now()-window.appStart}});const c=oG();r.addEventCallback(async f=>{if(l$(f),c){f.eventType===window.msal.EventType.ACCOUNT_ADDED?e.set(Hs,{reason:"login"}):f.eventType===window.msal.EventType.ACCOUNT_REMOVED&&e.set(Hs,{reason:"logout"});return}if((f.eventType===window.msal.EventType.LOGIN_SUCCESS||f.eventType===window.msal.EventType.ACQUIRE_TOKEN_SUCCESS)&&f.payload&&"account"in f.payload&&f.payload.account){const{account:h}=f.payload,g=r.getActiveAccount();(!g||g.homeAccountId!==h.homeAccountId)&&(An({authWorkflowAccountType:"microsoft",apiName:"msal:differentAccountLogin",extraInfo:{eventInfo_eventType:f.eventType}}),r.setActiveAccount(h),s(h))}else if(f.eventType===window.msal.EventType.LOGOUT_SUCCESS){const h=Ide(r.getAllAccounts());r.setActiveAccount(h??null),s(h??null)}else f.eventType===window.msal.EventType.ACCOUNT_ADDED?e.set(Hs,{reason:"login"}):f.eventType===window.msal.EventType.ACCOUNT_REMOVED&&e.set(Hs,{reason:"logout"})});let l=!1;if(yg()){const f=Ro.instance();await f.initAuthAccount(),l=!!await f.getAccountFromProviders()}else l=await t();e.set(Z1,!0);const{monitorAccountChangesAcrossTabs:m,enableAuth0:p}=Z.instance().config();if(m&&r.enableAccountStorageEvents(),!l){const f=St(wo,a.string());f&&(SG(),await r.loginRedirect({...Ql,prompt:"none",loginHint:f}))}if(!l&&n()){const f=performance.now();try{const h=await r.ssoSilent(UL),g=performance.now()-f,y=ph(h.account.tenantId)==="MSA";y||Pf({message:"SSO Silent returned an AAD account",errorCode:"unexpected_account_type"}),Xt(Yd,a.boolean(),!0),wde()&&Pf({message:"User is on login page, skipping account update",errorCode:"sso_on_login_page"}),y?(r.setActiveAccount(h.account),s(h.account),u$({accountUpdate:!0,accountType:"MSA",message:"Account set by MSAL silent SSO",duration:g}),Ge.emit("auth:account-set-by-msal-sso")):await r.logoutRedirect({account:h.account,onRedirectNavigate:()=>!1})}catch(h){Pf({message:h instanceof Error?h.message:"Unknown error",errorCode:h instanceof window.msal.AuthError?h.errorCode:""})}}p&&m&&Sd.addEventListener("message",f=>{const h=Qj.safeParse(f.data);if(!h.success)return;const{eventName:g}=h.data;g==="auth0.accountAdded"?e.set(Hs,{reason:"login"}):g==="auth0.accountRemoved"&&e.set(Hs,{reason:"logout"})})}catch(r){M.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"MsalInitError",eventInfo_details:"DCL",eventInfo_errorMessage:r instanceof Error?r.message:""}})}}return o()}function Ede(){typeof window<"u"&&(Object.defineProperty(window,"APP_VERSION",{value:X1()}),Object.defineProperty(window,"APP_SURFACE",{value:"cmc"}))}function Ade({sidebar:e,customLayout:t=!1}){uue(),vue(),yue(),Np(),Kle(),eX(),Nre();const{appInitialized:n}=jue();gre(),pue(n),Xle(),que();const s=Y4(),o=z(ep);bue({isEnabled:s,onIntercept:o});const r=_(Hs),c=_(Z1);ede({isAppInitialized:n}),qle(),YQ(),zle(n),mue(),fue();const l=_(_l);return $ue(),Zle(),gue(n),Cue(),Yle(),due(),hue(),Qle(),l==="user-banned"?i.jsx(Dle,{}):l==="age-verification"?i.jsx(uq,{}):l?i.jsx(tb,{}):!n||!c?null:r?i.jsx(YE,{accountActionRequired:r}):i.jsx(_de,{children:i.jsx(Ole,{sidebar:e,customLayout:t,children:i.jsx(_9,{})})})}function _de(e){const{children:t}=e;return Xue(),ode(),cde(),hde(),sue(),CJ(),Gle(),Cde(),t}function kde(e){const{sidebar:t,customLayout:n,onError:s=rI}=e;return i.jsxs(ew,{fallback:i.jsx(tb,{}),onError:s,children:[i.jsx(u4,{}),i.jsx(Ade,{sidebar:t,customLayout:n,onError:s})]})}Ede();document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>Tde(),0)});n3();function Nde(){const e=D("discover-with-pane-layout"),t=D("pages-layout-v2"),n=D("chat-layout-v2"),s=et();let o=!1;return(t&&s.startsWith("/pages")||e&&s.startsWith("/discover")||n&&s.startsWith("/chats"))&&(o=!0),i.jsx(kde,{customLayout:o})}const Mde=a.object({"prompt-branch":a.string().optional(),"use-sxs":a.union([a.boolean(),a.string()]).transform(e=>typeof e=="string"?e==="true":e).optional(),branch:a.string().optional(),"sxs-feature":a.string().optional()}),We=k9({component:Nde,validateSearch:HM(Mde),search:{middlewares:[N9(["prompt-branch","use-sxs","branch","sxs-feature"])]}});function Rde(){const e=zo(),t=Vr(),n=et(),s=d.useRef(null);d.useEffect(()=>{const o=s.current;s.current=n,n==="/"&&o!=="/"&&(t||e({shouldNavigateToLanding:!1}))},[t,n,e])}const Pde=100,fS=.3,Lde=2*oi,jde="bottom-[60px] sm:bottom-[120px] h-[50px]",Zk="min-h-[60px] sm:min-h-[120px]",Yk="min-h-[calc(100dvh-60px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-120px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",Ode="min-h-[calc(100dvh-48px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-48px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",Dde="min-h-[calc(100dvh-80px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-80px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",Ude="bottom-[var(--character-component-height)] h-[50px]",Fde="min-h-[calc(100dvh-var(--character-component-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))]";function Bde(e,t,n,s,o){const[r,c]=Ee(dI),l=d.useCallback(()=>{c(T=>!T)},[c]),u=Wn(),m=d.useMemo(()=>({variants:{start:{opacity:0},exiting:{opacity:0,y:-100,transition:{duration:.2,y:{duration:.3}}}},initial:"start",animate:r?"exiting":"default"}),[r]),p=d.useMemo(()=>({initial:{opacity:0,y:Pde},animate:{opacity:1,y:0,transition:{duration:.4,y:{duration:fS}}},exit:{opacity:0,y:-100,transition:{duration:.2,y:{duration:fS}}},onAnimationStart:T=>{typeof T=="object"&&!Array.isArray(T)&&T.opacity===1&&(setTimeout(()=>e(),10),c(!1))}}),[e,c]),f=n?Ude:jde,h=n?`min-h-[${s}px]`:Zk,{highlighted:g,backstage:y}=Hde(o,r),b=zde(n,y,g),x=d.useRef(null),{scrollYProgress:v}=jM({target:x,container:t,offset:["end start","start start"]}),S=Oi(v,[Lde/100,1],[0,1]);return{toggleMessagesAreExiting:l,backstageMessagesProps:m,highlightedMessagesProps:p,opacity:u?S:v,sentinelRef:x,sentinelClasses:f,backstageClasses:h,highlightedClasses:b,highlighted:g,backstage:y}}function Vde(e){const t=Qk(e);if(!t)return[];const n=e.at(-2),s=[];Ta(n)&&s.push(n),Ta(t)&&s.push(t);const o=e.at(-3);if((o==null?void 0:o.author)==="human"&&s.length===2)return[o,...s];const r=t.author==="human",c=!r&&(n==null?void 0:n.author)==="ai";return r||c?[t]:e.slice(-2)}function Qk(e){return e.at(-1)}function Hde(e,t){const n=Vde(e),s=e.slice(0,-(n.length+(t?2:0)));return{highlighted:n,backstage:s}}function zde(e,t,n){return e?Fde:Z.instance().config().smallAnochorTopWithoutHeader&&n.length>0?t.length===0?Dde:Ode:Yk}function Jk(){return F(jl("pageContainer")??"px-6","mx-auto w-full max-w-chat")}function Wde(e){const{children:t,onClick:n,title:s,className:o,spatialNavigationAutofocus:r=!0,disabled:c=!1,testId:l,hoverVariant:u=!1}=e,[m,p]=d.useState(!1),[f,h]=d.useState(!1),g=()=>p(!0),y=()=>p(!1),b=()=>h(!0),x=()=>h(!1),v=m||f&&u?"acrylic-thin-inverted":"acrylic-thin";return i.jsx($,{disabled:c,variant:"pill",color:v,size:"64-xxl",testId:l,className:F("w-conversations items-center justify-center",o),onClick:n,onFocus:g,onBlur:y,onMouseEnter:b,onMouseLeave:x,title:s,spatialNavigationAutofocus:r,children:t})}async function r1(e,t,n){try{await cn({path:`/conversations/${e}/react`,args:{body:{[n]:t},analytics:{anonymousPath:"/conversations/*/react"}}})}catch{}}async function Xk(e,t,n){try{await cn({path:`/conversations/${e}/feedback`,args:{body:{types:Array.from(t),text:n},analytics:{anonymousPath:"/conversations/*/feedback"}}})}catch{}}const e6=e=>d.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M6 2C6.4075 2 6.77654 2.16302 7.04688 2.42676L7.05273 2.4248C7.70431 2.14511 8.40698 2 9.11816 2H14.7871C15.7302 2 16.5456 2.65891 16.7432 3.58105L17.9492 9.20801C17.9832 9.36686 18 9.52895 18 9.69141C18 10.9663 16.9663 12 15.6914 12H12.1904C12.3947 12.6629 12.5 13.3526 12.5 14.0469V14.668C12.5 15.6352 12.2133 16.581 11.6768 17.3857C11.4528 17.7215 11.0952 17.9399 10.7002 17.9893L10.5293 18H10.4775C9.66177 18 9 17.3382 9 16.5225V15.1719C8.9999 13.8855 8.54907 12.6397 7.72559 11.6514L6.91895 10.6836C6.66492 10.8811 6.34669 11 6 11H3.5C2.67157 11 2 10.3284 2 9.5V3.5C2 2.67157 2.67157 2 3.5 2H6ZM9.11816 3C8.55774 3 8.0038 3.11128 7.48828 3.32617C7.49488 3.38327 7.5 3.44114 7.5 3.5V9.5C7.5 9.59759 7.48948 9.69276 7.47168 9.78516L8.49316 11.0107C9.46653 12.1788 9.9999 13.6514 10 15.1719V16.5225C10 16.7859 10.2141 17 10.4775 17H10.5293L10.6221 16.9883C10.7122 16.9655 10.7919 16.9101 10.8447 16.8311C11.2717 16.1906 11.5 15.4377 11.5 14.668V14.0469C11.5 13.4073 11.3966 12.7718 11.1943 12.165L11.0254 11.6582C11.0223 11.6489 11.0211 11.6392 11.0186 11.6299C11.0142 11.6139 11.0105 11.5977 11.0078 11.5811C11.0046 11.5614 11.0028 11.542 11.002 11.5225C11.0016 11.515 11 11.5075 11 11.5C11 11.4948 11.0008 11.4896 11.001 11.4844C11.0016 11.4643 11.0038 11.4445 11.0068 11.4248C11.0089 11.4113 11.0106 11.3979 11.0137 11.3848C11.0179 11.3671 11.0242 11.3501 11.0303 11.333C11.0355 11.3184 11.0404 11.3039 11.0469 11.29C11.0531 11.2765 11.0609 11.2639 11.0684 11.251C11.077 11.236 11.0856 11.221 11.0957 11.207C11.1052 11.1939 11.1162 11.1821 11.127 11.1699C11.1369 11.1587 11.1463 11.147 11.1572 11.1367C11.17 11.1246 11.1841 11.1143 11.1982 11.1035C11.2105 11.0942 11.2223 11.0844 11.2354 11.0762C11.2399 11.0733 11.2443 11.0701 11.249 11.0674L11.3057 11.0391C11.3117 11.0365 11.318 11.0346 11.3242 11.0322C11.3301 11.03 11.3358 11.0274 11.3418 11.0254C11.3508 11.0224 11.3601 11.021 11.3691 11.0186C11.3852 11.0142 11.4014 11.0106 11.418 11.0078C11.4376 11.0045 11.457 11.0029 11.4766 11.002C11.4844 11.0016 11.4921 11 11.5 11H15.6914C16.414 11 17 10.414 17 9.69141C17 9.59931 16.99 9.50704 16.9707 9.41699L15.7656 3.79004C15.6667 3.32914 15.2585 3 14.7871 3H9.11816ZM3.5 3C3.22386 3 3 3.22386 3 3.5V9.5C3 9.77614 3.22386 10 3.5 10H6C6.27614 10 6.5 9.77614 6.5 9.5V3.5C6.5 3.22386 6.27614 3 6 3H3.5Z",fill:"currentColor"})),P2e=Object.freeze(Object.defineProperty({__proto__:null,default:e6},Symbol.toStringTag,{value:"Module"})),t6=e=>d.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M10.7002 2.01074C11.0952 2.06005 11.4528 2.2785 11.6768 2.61426C12.2133 3.41901 12.5 4.36484 12.5 5.33203V5.95312C12.5 6.64737 12.3947 7.33709 12.1904 8H15.6914C16.9663 8 18 9.03369 18 10.3086C18 10.471 17.9832 10.6331 17.9492 10.792L16.7432 16.4189C16.5456 17.3411 15.7302 18 14.7871 18H9.11816C8.40698 18 7.70431 17.8549 7.05273 17.5752L7.04688 17.5723C6.7765 17.8363 6.40775 18 6 18H3.5C2.67157 18 2 17.3284 2 16.5V10.5C2 9.67157 2.67157 9 3.5 9H6C6.34648 9 6.665 9.11814 6.91895 9.31543L7.72559 8.34863C8.54907 7.36035 8.9999 6.11453 9 4.82812V3.47754C9 2.66177 9.66177 2 10.4775 2H10.5293L10.7002 2.01074ZM3.5 10C3.22386 10 3 10.2239 3 10.5V16.5C3 16.7761 3.22386 17 3.5 17H6C6.27614 17 6.5 16.7761 6.5 16.5V10.5C6.5 10.2239 6.27614 10 6 10H3.5ZM10.4775 3C10.2141 3 10 3.21405 10 3.47754V4.82812C9.9999 6.34856 9.46653 7.82122 8.49316 8.98926L7.47168 10.2139C7.48959 10.3066 7.5 10.4021 7.5 10.5V16.5C7.5 16.5585 7.4948 16.6161 7.48828 16.6729C8.00389 16.8878 8.55762 17 9.11816 17H14.7871C15.2585 17 15.6667 16.6709 15.7656 16.21L16.9707 10.583C16.99 10.493 17 10.4007 17 10.3086C17 9.58598 16.414 9 15.6914 9H11.5C11.4921 9 11.4844 8.99743 11.4766 8.99707C11.457 8.99614 11.4376 8.99451 11.418 8.99121C11.4013 8.98845 11.3852 8.98483 11.3691 8.98047C11.3602 8.97803 11.3507 8.97757 11.3418 8.97461C11.3357 8.97258 11.3302 8.96904 11.3242 8.9668C11.307 8.96032 11.2906 8.95259 11.2744 8.94434C11.261 8.93755 11.2479 8.93071 11.2354 8.92285C11.2217 8.91426 11.2091 8.90437 11.1963 8.89453C11.1828 8.88414 11.1695 8.87392 11.1572 8.8623C11.146 8.85165 11.1362 8.83977 11.126 8.82812C11.1156 8.81623 11.1049 8.80477 11.0957 8.79199C11.0856 8.77799 11.077 8.76309 11.0684 8.74805C11.0609 8.73511 11.0531 8.72253 11.0469 8.70898C11.0393 8.69254 11.0331 8.67555 11.0273 8.6582C11.0225 8.64364 11.0172 8.62925 11.0137 8.61426C11.0106 8.60113 11.0089 8.58772 11.0068 8.57422C11.0038 8.55451 11.0016 8.53476 11.001 8.51465C11.0008 8.50978 11 8.50491 11 8.5C11 8.49212 11.0016 8.48435 11.002 8.47656C11.0029 8.45704 11.0045 8.43757 11.0078 8.41797C11.0106 8.40136 11.0142 8.38516 11.0186 8.36914C11.021 8.36013 11.0224 8.35077 11.0254 8.3418L11.1943 7.83496C11.3966 7.22817 11.5 6.59274 11.5 5.95312V5.33203C11.5 4.56227 11.2717 3.80943 10.8447 3.16895C10.7919 3.08985 10.7122 3.03448 10.6221 3.01172L10.5293 3H10.4775Z",fill:"currentColor"})),L2e=Object.freeze(Object.defineProperty({__proto__:null,default:t6},Symbol.toStringTag,{value:"Module"}));function n6(e){const{titleText:t,subtitleText:n,positiveButtonText:s,negativeButtonText:o,positiveButtonTitle:r,negativeButtonTitle:c,modalHeaderText:l,onPositiveClick:u,onNegativeClick:m,isModalOpen:p,onModalClose:f,modalContent:h,className:g="",isDebugAudioRecorderEnabled:y=!1}=e;return i.jsxs("div",{className:g,children:[i.jsx("div",{className:"relative w-full pb-6 after:absolute after:mt-3 after:w-full after:border-b after:border-stroke-300"}),i.jsx("h2",{className:"mt-5 text-foreground-600 text-xs",children:i.jsx("strong",{children:t})}),i.jsx("p",{className:"mt-1 text-foreground-600 text-xs",children:n}),i.jsxs("div",{className:F("mt-3.5 grid w-fit min-w-72 grid-rows-1 gap-2",y?"grid-cols-3":"grid-cols-2"),children:[i.jsxs($,{onClick:u,title:r,variant:"rect",size:"36-sm",children:[i.jsx(t6,{className:"size-5"})," ",s]}),i.jsxs($,{onClick:m,title:c,variant:"rect",size:"36-sm",children:[i.jsx(e6,{className:"size-5"})," ",o]}),y&&i.jsx($,{onClick:async()=>{const{AUDIO_RECORDER:b}=await P(async()=>{const{AUDIO_RECORDER:x}=await import("./audio-recorder-DHIlb5Zz.js");return{AUDIO_RECORDER:x}},__vite__mapDeps([422,0,1]));await b.download()},title:"Download audio debug",variant:"rect",size:"36-sm",children:"Download audio debug"})]}),p&&i.jsx(un,{isOpen:!0,onClose:f,headerText:l,className:"w-full max-w-[400px]",children:h})]})}function Gde(){}function $de({inputValue:e,handleChange:t,className:n=""}){const[s,o]=d.useState(""),{t:r}=V();return Sn("kill-free-form-text")?null:i.jsx(vv,{disabled:!1,className:W(n,"max-h-[8rem] grow-0 basis-[8rem] !items-start overflow-auto rounded-xl border-2 border-stone-700 bg-black/5 px-0.5"),inputValue:e,characterLimit:VR,autoFocus:!1,setInput:l=>{t(l)},placeholder:r("chat.feedback.placeholder"),errorMessage:s,setError:o,onEnter:Gde,isMultiLines:!0})}function s6(e){const{feedbackOptions:t,onSubmit:n}=e,{t:s}=V(),[o,r]=d.useState(new Set),[c,l]=d.useState(""),u=o.size===0,m=f=>{r(h=>{const g=new Set(h);return o.has(f)?g.delete(f):g.add(f),g})},p=async()=>{n(o,c),r(new Set)};return t?i.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[i.jsx("ul",{role:"list",className:"mt-0 flex list-none flex-col gap-2",children:t.map(f=>i.jsx("li",{children:i.jsx(W4,{label:f.label,setChecked:()=>m(f.type),checked:o.has(f.type)})},f.type))}),u?null:i.jsx($de,{inputValue:c,handleChange:l}),i.jsx($,{title:s("chat.feedback.submitFeedbackButton"),size:"48-lg",color:"strong",className:"mt-4 max-h-12",disabled:u,onClick:p,children:s("chat.feedback.submitFeedbackButton")})]}):null}function qde(e){var v,S;const{className:t}=e,n=_(u0),[s,o]=Ee(tp),[r,c]=d.useState(!1),[l,u]=d.useState(),m=D("ads-showroom-picasso-feedback"),{t:p}=V(),f=C=>{yt({source:"feedback",scenario:IO[C],conversationId:s==null?void 0:s.conversationId,additionalData:{brandId:s==null?void 0:s.brandId,brandName:(s==null?void 0:s.brandName)??""}})},h=()=>{c(!1),o(void 0)},g=async C=>{s!=null&&s.conversationId&&m&&await r1(s.conversationId,C,"showroomReaction")},y=()=>{var C;f("thumbs-up"),u("thumbs-up"),(C=n==null?void 0:n.showroom)!=null&&C.positive?c(!0):h(),g("thumbs-up")},b=()=>{var C;f("thumbs-down"),u("thumbs-down"),(C=n==null?void 0:n.showroom)!=null&&C.negative?c(!0):h(),g("thumbs-down")},x=async(C,T)=>{h(),s&&M.trackEvent({name:"interaction",data:{eventName:"copilotSubmitFineConversationFeedback",eventInfo_fineFeedbackTypes:Array.from(C).join(","),eventInfo_conversationId:s.conversationId,eventInfo_additionalData:JSON.stringify({brandId:s.brandId,brandName:s.brandName,reactionType:l,showroomMessageId:s.messageId})}}),s!=null&&s.conversationId&&C.size>0&&Xk(s.conversationId,C,T)};return i.jsx(n6,{titleText:p("ads.showroomFeedbackTitle",{brand:s==null?void 0:s.brandName}),subtitleText:p("ads.showroomFeedbackDescription"),positiveButtonText:p("ads.showroomFeedbackPositive"),negativeButtonText:p("ads.showroomFeedbackNegative"),positiveButtonTitle:p("reviewPrompt.positive"),negativeButtonTitle:p("reviewPrompt.negative"),modalHeaderText:p("ads.showroomFeedbackModalTitle"),onPositiveClick:y,onNegativeClick:b,isModalOpen:r,onModalClose:h,modalContent:i.jsx(s6,{onSubmit:x,feedbackOptions:l==="thumbs-up"?((v=n==null?void 0:n.showroom)==null?void 0:v.positive)??void 0:(S=n==null?void 0:n.showroom)==null?void 0:S.negative}),className:t,isDebugAudioRecorderEnabled:!1})}function Kde(e){const{onSubmit:t}=e,{t:n}=V(),[s,o]=d.useState(!1),r=async c=>{o(!0),await t(c),o(!1)};return i.jsxs("div",{children:[i.jsx("p",{children:n("voice.feedback.reviewReason")}),i.jsx($,{title:n("voice.feedback.okay"),size:"48-lg",color:"strong",className:"mt-4 max-h-12 w-full",disabled:s,onClick:()=>r(!0),children:n("voice.feedback.okay")}),i.jsx($,{title:n("voice.feedback.noThanks"),size:"48-lg",color:"default",className:"mt-3 w-full",onClick:()=>r(!1),children:n("voice.feedback.noThanks")})]})}function Zde({className:e}){const t=_(Ae),n=_(u0),s=z(Ji),[o,r]=Ee(H0),[c,l]=d.useState(),u=D("debug-audio-recorder")&&!1,m=uG(),{t:p}=V(),f=()=>{yt({source:"voiceFeedback",scenario:"thumbsUp",conversationId:t,destination:m?"appearance":void 0}),t&&r1(t,"thumbs-up","audioReaction"),s(!1),Ge.emit("feedback:ai-message-reaction","positive")},h=()=>{yt({source:"voiceFeedback",scenario:"thumbsDown",conversationId:t,destination:m?"appearance":void 0}),t&&r1(t,"thumbs-down","audioReaction"),l("feedback-options")},g=()=>{l(null),s(!1)},y=async(v,S)=>{Se({source:"voiceFeedback",scenario:"feedbackSubmit",conversationId:t,destination:m?"appearance":void 0,customData:JSON.stringify({selectedOptionsCount:v.size,feedbackTypes:[...v].join(",")})}),t&&v.size>0&&Xk(t,v,S),o?g():l("review-request")},b=async v=>{v&&(r(!0),await x3({optInToVoiceTraining:!0})),g()},x=()=>c==="feedback-options"?i.jsx(s6,{onSubmit:y,feedbackOptions:m?n==null?void 0:n.appearance:n==null?void 0:n.call}):c==="review-request"?i.jsx(Kde,{onSubmit:b}):null;return i.jsx(n6,{titleText:p(m?"voice.feedback.howWasAppearanceChat":"voice.feedback.howWasVoiceChat"),subtitleText:p("voice.feedback.giveFeedback"),positiveButtonText:p("voice.feedback.good"),negativeButtonText:p("voice.feedback.bad"),positiveButtonTitle:p("reviewPrompt.positive"),negativeButtonTitle:p("reviewPrompt.negative"),modalHeaderText:p(c==="feedback-options"?"voice.feedback.chooseWhatHappened":"voice.feedback.canMicrosoftReview"),onPositiveClick:f,onNegativeClick:h,isModalOpen:!!c,onModalClose:g,modalContent:x(),className:e,isDebugAudioRecorderEnabled:u})}const Yde=d.lazy(()=>P(()=>import("./index.es-w3_8LO18.js"),__vite__mapDeps([297,1,0]))),Qde=TA();function Jde({onAnimationClicked:e}){const t=d.useRef(null),{t:n}=V(),[s,o]=d.useState(null);d.useEffect(()=>{Qde.load("../../assets/lottie/character-thinking-cloud-animation.json").then(o).catch(()=>o(null))},[]),d.useEffect(()=>{const l=t.current;return l&&s&&l.playSegments([0,67],!0),()=>{l&&s&&l.playSegments([350,370],!0)}},[s]);const r=()=>{var u,m;(u=t.current)==null||u.playSegments([320,345],!0),(m=t.current)==null||m.pause(),e();const l=document.getElementById(D1);l==null||l.focus()},c=l=>{l.key==="Enter"&&r()};return i.jsx("div",{children:i.jsx(d.Suspense,{fallback:i.jsx("div",{}),children:i.jsx(Yde,{lottieRef:t,role:"button",tabIndex:0,"aria-label":n("characterAnimation.characterThinkingCloudAriaLabelText"),title:n("characterAnimation.characterThinkingCloudAriaLabelText"),animationData:s,loop:!1,onMouseDown:r,onMouseEnter:()=>{var l;return(l=t.current)==null?void 0:l.playSegments([275,295],!0)},onMouseLeave:()=>{var l;return(l=t.current)==null?void 0:l.playSegments([296,315],!0)},onKeyDown:c,onComplete:()=>{var l;return(l=t.current)==null?void 0:l.playSegments([68,274],!0)}})})})}const hS=1,Xde=d.lazy(()=>P(()=>import("./character-B3F1MwQv.js"),__vite__mapDeps([362,0,1,363])).then(e=>({default:e.Character})));function eme({animatingMessageId:e,isStreamingMessage:t,displayedCharacterId:n,setCharacterComponentHeight:s}){const o=D("characterspeech"),[r,c]=d.useState(0),[l,u]=d.useState(!1),[m,p]=Ee(cr),f=_(ao),h=()=>{c(0),u(!1)};d.useEffect(()=>{let b;return o&&m==="idle"&&(b=setInterval(()=>{c(x=>x<hS?x+1:x),f.length>0&&r===hS&&!t&&(u(!0),M.trackEvent({name:"system",data:{eventName:"characterTalkToMeDisplayed",eventInfo_conversationId:ue(Ae),eventInfo_characterId:n}}))},1e3)),()=>clearInterval(b)},[m,n,f.length,o,r,t]),d.useEffect(()=>{o&&m!=="idle"&&m!=="hovering"&&h()},[m,o]);const g=async()=>{h(),p("responding"),await Ks.submitMessage({command:{type:"promptCharacterSpeech"},inputMethod:"promptCharacterSpeech"}),M.trackEvent({name:"interaction",data:{eventName:"characterTalkToMeClicked",eventInfo_conversationId:ue(Ae),eventInfo_characterId:n}})};function y(){switch(n){case"aqua":return"translate-x-9";case"mica":return"translate-x-14";case"erin":return"translate-x-16";default:throw new Error("Invalid characterId provided to getTranslateXClass")}}return i.jsx(ew,{fallback:i.jsx(tb,{}),onError:jO(e,n),children:i.jsxs("div",{"data-testid":"character-div",className:F("sticky top-0 h-2/5 min-h-[40vh] w-full bg-gradient-chat-light-character dark:bg-midnight-850 dark:bg-none",Ke.babylonCharacter),style:{maskImage:"linear-gradient(to bottom, #000 95%, transparent 100%)"},children:[i.jsx(at,{children:l&&i.jsx(ee.div,{className:F("absolute start-1/2 top-12 size-36",y()),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},children:i.jsx(Jde,{onAnimationClicked:g})})}),i.jsx(d.Suspense,{fallback:i.jsx("div",{className:"flex h-full items-center justify-center",children:i.jsx($e,{type:"spinnerThemed",className:"size-12"})}),children:i.jsx(Xde,{characterId:n,setCharacterComponentHeight:s})})]})})}function tme({className:e}){const{t}=V();return i.jsxs("div",{className:W("flex items-center gap-2",e),children:[i.jsx($e,{type:"reasoning",className:"size-11"}),i.jsxs("div",{className:"flex flex-col text-sm",children:[i.jsx("span",{children:t("chat.reasoningLoading.title")}),i.jsx("span",{className:"text-foreground-450 dark:text-foreground-600",children:t("chat.reasoningLoading.description")})]})]})}function nme(e){const{isActive:t,animationDuration:n="5s",children:s,className:o,...r}=e;return i.jsx("div",{className:W(t&&"bg-gradient-to-l from-foreground-800 via-foreground-300 to-foreground-800 bg-[size:200%_100%] bg-clip-text text-transparent",o),style:{...t&&{animation:`shimmer-reverse ${n} linear infinite 0.5s`}},...r,children:s})}const sme="rounded-2xl border border-stroke-250 p-3";function ome(e){const{title:t}=e,{t:n}=V(),s=n("chat.reasoningLoading.title"),o=t&&t.trim()!==""?t:s;return i.jsx("div",{className:"text-base",children:i.jsx(nme,{isActive:!0,children:o})})}function ame(){return i.jsx(ee.div,{initial:Ce,animate:Be,className:F("w-max",sme),children:i.jsx(ome,{})})}function Iv(e){const{loadingType:t}=e;switch(t){case"spinner":return i.jsx($e,{type:"spinnerThemed",className:"absolute -ms-2.5 -mt-2 size-11"});case"thinking-card":return i.jsx(ame,{});case"reasoning-chat":return i.jsx(tme,{className:"absolute -ms-2.5 -mt-2 w-max"});default:return null}}function Tv(){const e=Bo(),t=_(_K),n=D("think-deeper-cot");switch(e){case"chat":case"computerUse":case"study":case"research":case"search":return t?null:"spinner";case"reasoning":return n?"thinking-card":"reasoning-chat";case"smart":return null;default:return null}}function o6(e){const{delay:t,className:n}=e,{t:s}=V(),o=D("announce-loading"),r=d.useId(),c=Bo(),l=Tv();return l?i.jsxs(ee.div,{"aria-hidden":!0,className:W("relative size-7",n),initial:"start",animate:"end",variants:{start:{...Ce},end:{...Be,transition:{delay:t}}},children:[o&&i.jsx(vr,{id:r,timeout:3e3,msg:s(c==="reasoning"?"chat.reasoning":"chat.loading"),type:"polite"}),i.jsx(Iv,{loadingType:l})]}):null}const rme={"56-sm":"h-14","64-default":"h-16"};function a6(e){const{center:t,left:n,right:s,sectionClassName:o,height:r="64-default"}=e;return i.jsx("div",{className:W("sticky top-0 w-full",Ke.stickyHeader),children:i.jsx(at,{children:i.jsx(ee.div,{className:W("absolute flex w-full",rme[r],kn,"bg-background-150/95 dark:bg-background-150/90"),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Ce,animate:Be,exit:Ce},transition:_t,"data-testid":"sticky-header",children:i.jsxs("section",{className:W("flex w-full py-2.5",o),children:[i.jsx("div",{className:"flex flex-1 items-center justify-start ps-3 sm:gap-2",children:n}),i.jsx("div",{className:"flex items-center overflow-hidden px-2 sm:gap-2",children:t}),i.jsx("div",{className:"flex flex-1 items-center justify-end pe-3 sm:gap-2",children:s})]})})})})}const Ev=e=>d.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("mask",{id:"mask0_12117_44960",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:20,height:20},d.createElement("path",{d:"M7.19253 7.24894C7.46962 6.94112 7.94384 6.91617 8.25172 7.1932L10.7517 9.44267C10.9098 9.58487 11 9.78745 11 10C11 10.2126 10.9098 10.4152 10.7517 10.5574L8.25172 12.8068C7.94384 13.0839 7.46962 13.0589 7.19253 12.7511C6.91543 12.4433 6.94039 11.9692 7.24827 11.6922L8.29553 10.7499H4.75C4.33579 10.7499 4 10.4141 4 10C4 9.58591 4.33579 9.2502 4.75 9.2502H8.29553L7.24828 8.30789C6.94039 8.03086 6.91543 7.55675 7.19253 7.24894ZM20 15.2506C20 16.7691 18.7688 18 17.25 18L2.75 18C1.23122 18 0 16.7691 0 15.2506V4.74937C0 3.23093 1.23122 2 2.75 2H17.25C18.7688 2 20 3.23094 20 4.74937L20 15.2506ZM17.25 16.5003C17.9404 16.5003 18.5 15.9408 18.5 15.2506L18.5 4.74937C18.5 4.05917 17.9404 3.49966 17.25 3.49966L13.9958 3.49966L13.9958 16.5003H17.25ZM12.4958 16.5003L12.4958 3.49966L2.75 3.49965C2.05965 3.49965 1.5 4.05917 1.5 4.74937L1.5 15.2506C1.5 15.9408 2.05964 16.5003 2.75 16.5003L12.4958 16.5003Z",fill:"currentColor"})),d.createElement("g",{mask:"url(#mask0_12117_44960)"},d.createElement("rect",{width:24,height:24,transform:"translate(-2 -2)",fill:"currentColor"}))),j2e=Object.freeze(Object.defineProperty({__proto__:null,default:Ev},Symbol.toStringTag,{value:"Module"}));function r6(){const e=!Sn("kill-share-c2"),t=et(),n=_(wn),s=_(Ma),o=Hr();return!!(!s&&e&&t.startsWith("/chats")&&!t.endsWith("/talk")&&(n!=null&&n.history.length)&&!o)}function ime(e){const{title:t,onSave:n=()=>{},as:s="h2",inputClassName:o="",displayClassName:r="","aria-label":c,placeholder:l,maxLength:u,leftSlot:m,editable:p=!0}=e,{t:f}=V(),[h,g]=d.useState(!1),[y,b]=d.useState(!1),[x,v]=d.useState(t),S=s,C=()=>{p&&(h||b(!0))},T=E=>{u!==void 0&&E.target.value.length>u||v(E.target.value)},w=()=>{A()},I=E=>{E.key==="Enter"||E.key==="Return"?A():E.key==="Escape"&&(v(t),b(!1))},A=async()=>{if(b(!1),x!==t){g(!0);try{await n(x)}catch{v(t)}finally{g(!1)}}};return y&&p?i.jsx(cme,{disabled:h,type:"text",value:x,onChange:T,onBlur:w,onKeyDown:I,"aria-label":c,className:F("rounded-xl bg-background-200 p-2 text-center dark:bg-background-150",o),maxLength:u}):i.jsxs(i.Fragment,{children:[m,i.jsx(S,{className:F("cursor-default truncate rounded-xl px-4 py-2",r,p&&"cursor-pointer hover:bg-black/5 active:bg-black/3 dark:hover:bg-black/30 dark:active:bg-black/20"),tabIndex:0,role:"button","aria-label":f("editableTitle.titleLabel",{title:t}),onClick:C,disabled:h||!p,onKeyDown:E=>{(E.key==="Enter"||E.key===" ")&&C()},children:x!==""?x:l})]})}function cme(e){const{autoFocus:t,...n}=e,s=d.useRef(null);return hu(s),i.jsx("input",{ref:s,...n})}function lme(){const{t:e}=V(),{hideConversationTitle:t,hideConversationActions:n}=Z.instance().config().uiOverrides??{},s=_(wn),o=Vr(),r="chatPage",{shareClickHandler:c}=ak({scenario:r,trackShareClick:()=>EA({scenario:r,sectionName:"topRight"})}),l=_(nn)==="side-by-side",u=z(nn),m=d.useCallback(()=>{u("detail-only")},[u]),p=s==null?void 0:s.title,f=p===""?e("conversations.newConversationTitle"):p,h=!t&&!o&&!l&&f?i.jsx(at,{children:i.jsx(ee.div,{initial:Ce,animate:Be,exit:{transition:{duration:0},...Ce},transition:_t,children:i.jsx(ime,{title:f,editable:!1,displayClassName:"max-w-[60vw] md:max-w-[60vw]"},f)})}):void 0,g=lt({breakpoint:"sm"}),y=l&&!g,b=y&&i.jsx(at,{children:i.jsx(ee.div,{initial:Ce,animate:Be,exit:{transition:{duration:0},...Ce},transition:_t,children:i.jsx($,{title:e("actions.hideDetails"),color:"subtle-dimmed",variant:"square",size:"36-sm",onClick:m,children:i.jsx(Ev,{className:"size-5"})})})}),x=r6(),v=!n&&x&&!l&&i.jsx(at,{children:i.jsx(ee.div,{initial:Ce,animate:Be,exit:{transition:{duration:0},...Ce},transition:_t,children:i.jsx($,{variant:"square",color:"subtle-dimmed-inverted",size:"36-sm",title:e("chat.actions.share"),onClick:c,children:i.jsx(Ap,{className:"size-6"})})})}),S=_(rc);return!Lu()&&!S&&i.jsx(a6,{left:i.jsxs(i.Fragment,{children:[b,h]}),right:v,sectionClassName:y?void 0:"ps-[calc(var(--sidebar-header-secondary-buttons-collapsed-width))]"})}const ume=d.lazy(()=>P(()=>import("./actions-chat-detail-B2MzT5aN.js"),__vite__mapDeps([423,0,1,424,425,426,427,428,400])).then(e=>({default:e.ActionsChatDetail}))),dme=d.lazy(()=>P(()=>import("./showroom-chat-detail-MYJNxxSp.js"),__vite__mapDeps([429,0,1])).then(e=>({default:e.ShowroomChatDetail})));function mme(){const e=_(No);return i.jsx("div",{className:"flex size-full items-center justify-center",children:e?i.jsx(d.Suspense,{fallback:i.jsx(gS,{}),children:i.jsx(dme,{})}):i.jsx(d.Suspense,{fallback:i.jsx(gS,{}),children:i.jsx(ume,{})})})}function gS(){return i.jsx("div",{className:"flex size-full items-center justify-center",children:i.jsx($e,{className:"size-12"})})}const fh=376,hh="0.5rem";function i6(e){const{children:t}=e,n=_(nn),s=Wn(),o=n==="side-by-side",r=Lu(),c=n==="side-by-side"&&!r,l=s?"bg-stone-150":"bg-gradient-chat-light",u=$i(p=>{const f=document.getElementById("app");f&&f.style.setProperty("--chat-details-container-height",r?`${p.height}px`:null)}),m=()=>n==="detail-only"?"0px":c?`max(${fh}px, 25%)`:"100%";return i.jsxs("div",{className:F("flex size-full max-h-[100vh] min-h-0",r&&"flex-col",o&&"bg-sidebar-light dark:bg-sidebar-dark",s&&o&&"pb-2"),style:c?{gap:hh}:void 0,children:[n!=="chat-only"&&i.jsx(ee.div,{ref:u,className:F("rounded-lg",r&&"h-fit",o&&"shadow-lg","dark:bg-midnight-850 dark:bg-none",l),initial:{width:c?`calc(100% - ${hh} - max(${fh}px, 25%))`:"100%"},animate:{width:c?`calc(100% - ${hh} - max(${fh}px, 25%))`:"100%"},transition:_t,children:i.jsx(mme,{})}),i.jsx(ee.div,{className:F(n==="detail-only"&&"hidden",o&&l,r?"h-[calc(100vh-var(--chat-details-container-height))]":"h-full",o&&"rounded-lg pb-px shadow-lg dark:bg-midnight-850 dark:bg-none"),initial:{width:m()},animate:{width:m()},transition:_t,children:t})]})}function bS(e){const t=ft(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Nd(e,t){const n=wm(e),s=wm(t),o=+n-bS(n),r=+s-bS(s);return Math.round((o-r)/IQ)}function ml(e,t){const n=ft(e),s=ft(t),o=n.getTime()-s.getTime();return o<0?-1:o>0?1:o}function pme(e,t){const n=ft(e),s=ft(t),o=n.getFullYear()-s.getFullYear(),r=n.getMonth()-s.getMonth();return o*12+r}function fme(e){const t=ft(e);return t.setHours(23,59,59,999),t}function hme(e){const t=ft(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function gme(e){const t=ft(e);return+fme(t)==+hme(t)}function bme(e,t){const n=ft(e),s=ft(t),o=ml(n,s),r=Math.abs(pme(n,s));let c;if(r<1)c=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-o*r);let l=ml(n,s)===-o;gme(ft(e))&&r===1&&ml(e,s)===1&&(l=!1),c=o*(r-Number(l))}return c===0?0:c}function vme(e,t){const n=ft(e),s=ft(t);return n.getFullYear()-s.getFullYear()}function yme(e,t){const n=ft(e),s=ft(t),o=ml(n,s),r=Math.abs(vme(n,s));n.setFullYear(1584),s.setFullYear(1584);const c=ml(n,s)===-o,l=o*(r-+c);return l===0?0:l}function Cme(e,t){const n=ft(e),s=ft(t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}let xme={};function Sme(){return xme}function wme(e,t){var l,u,m,p;const n=Sme(),s=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,o=ft(e),r=o.getDay(),c=(r<s?7:0)+r-s;return o.setDate(o.getDate()-c),o.setHours(0,0,0,0),o}function Ime(e,t,n){const s=Nd(e,t),o=wme(t,{weekStartsOn:1}),r=Nd(o,t),c=Nd(Im(o,7),t),l=Qs(e,"EEEE"),u=n(`dates.weekdays.${l.toLowerCase()}`),m=n(`dates.months.${Qs(e,"MMMM").toLowerCase()}Abbr`),p=Qs(e,"d"),f=n("dates.dayMonthDate",{day:u,month:m,date:p});return s>=1?f:s>=0?`${n("dates.today")}`:s>=-1?`${n("dates.yesterday")}`:s>=r?u:s>=c?n("dates.previousDay",{day:u}):f}function Tme(e,t,n){const s=Nd(t,e);if(s===0)return n("dates.today");if(s<=1)return n("dates.yesterday");if(s<7)return n("dates.weekThis");if(Cme(e,t))return n("dates.monthThis");if(bme(t,e)<12){const c=Qs(e,"MMMM").toLowerCase();return n(`dates.months.${c}`)}const r=yme(t,e);return r===1?n("dates.yearAgo"):n("dates.yearsAgoPlural",{count:r})}function Eme(e,t){return Ime(e,new Date,t)}function O2e(e,t){return Tme(e,new Date,t)}function D2e(e){const t=Math.max(0,e),n=Math.floor(t/60),s=t%60;return`${n}:${s<10?"0":""}${s}`}function Ame(e){const{date:t,className:n}=e,{t:s}=V();return i.jsxs("div",{className:F("flex items-center",n),children:[i.jsx("span",{className:"opacity-70 text-xs-strong","data-testid":"date-divider",children:Eme(t,s)}),i.jsx(As,{verticalMargin:!1,color:"accent",className:"mt-px grow"})]})}function _me(){const e=Gt(),{isPortraitEnabled:t}=du(),n=_(rE),s=_(H0),o=_(ap),r=_(Ma),c=_(GW),l=!!_($W),u=!!_(qW),m=!!(Fg({key:"shouldShowTextModelTrainingSettings",default:!0})&&l),p=!!(Fg({key:"shouldShowVoiceModelTrainingSettings",default:!0})&&u),f=D("view-settings-disclaimer"),h=m||p,g=!h||n&&!s,y=Vk(),[b,x]=Ee(mE),[v,S]=d.useState(!1);d.useEffect(()=>{if((h||c)&&e&&!r){if(b){S(!0),x(!1);return}if(y<Oh){S(!0);return}let w;try{w=aue()}catch{w=new Date}const I=QE(w,6),A=new Date;A>I&&(S(!0),tn(Bi,A.toISOString()))}},[e,h,r,y,c,b,x]);const C=()=>g===void 0||o===void 0||c===void 0?null:t?"chat.livingPortraitDisclaimer":r||!e?"chat.unauthenticatedDisclaimer":!c||!v?"chat.firstTurnDisclaimerBase":!g&&!o?f?"chat.firstTurnDisclaimerPersonalizationTrainingViewSettings":"chat.firstTurnDisclaimerPersonalizationTraining":g&&!o?f?"chat.firstTurnPersonalizationDisclaimerViewSettings":"chat.firstTurnPersonalizationDisclaimer":o&&!g?f?"chat.firstTurnTrainingDisclaimerViewSettings":"chat.firstTurnTrainingDisclaimer":"chat.firstTurnDisclaimerBase";return(()=>{var I,A,E;let w=C();return w?(I=Z.instance().config().uiOverrides)!=null&&I.hideTrainingDisclaimer?"chat.firstTurnDisclaimerBase":(w=((E=(A=Z.instance().config()).textOverrides)==null?void 0:E.call(A,w))??w,w):null})()}const Av="text-foreground-450 text-xs dark:text-foreground-600",kme="underline",vS={settingsLink:i.jsx(Mu,{pages:["menu","account","privacy"],className:F(Av,kme),clickSource:"disclaimerSettingsLink"}),learnMoreLink:i.jsx(c1,{link:dm})},md={termsLink:i.jsx(c1,{link:Pl}),privacyLink:i.jsx(c1,{link:Gi})},Nme={settingsLink:i.jsx(Mu,{pages:["menu","account","privacy"],className:F(Av),disableLink:!0})};function i1(e){const{forceVisible:t,disableDisclaimerSettingsLink:n,className:s,testId:o,shouldUpdateNewConversationCount:r}=e,c=_me(),l=_(wn),u=l==null?void 0:l.id,p=((l==null?void 0:l.isNew)??t)&&c;if(d.useEffect(()=>{!r||!p||!u||cue(u)},[r,p,u]),!p)return null;const f=h=>{switch(h){case"chat.unauthenticatedDisclaimer":return i.jsxs(i.Fragment,{children:[i.jsx(en,{i18nKey:"chat.firstTurnDisclaimerBase"})," ",i.jsx(en,{i18nKey:h,components:{termsLink:md.termsLink,privacyLink:md.privacyLink}})]});case"chat.firstTurnTrainingDisclaimer":case"chat.firstTurnPersonalizationDisclaimer":case"chat.firstTurnDisclaimerPersonalizationTraining":case"chat.firstTurnTrainingDisclaimerViewSettings":case"chat.firstTurnPersonalizationDisclaimerViewSettings":case"chat.firstTurnDisclaimerPersonalizationTrainingViewSettings":return i.jsxs(i.Fragment,{children:[i.jsx(en,{i18nKey:"chat.firstTurnPersonalizationDisclaimerBase"})," ",i.jsx(en,{i18nKey:h,components:{settingsLink:n?Nme.settingsLink:vS.settingsLink}})]});case"chat.edge.firstTurnPersonalizationDisclaimer":case"chat.edge.firstTurnPersonalizationSettingsDisclaimer":return i.jsxs(i.Fragment,{children:[i.jsx(en,{i18nKey:"chat.firstTurnPersonalizationDisclaimerBase"})," ",i.jsx(en,{i18nKey:h,components:{learnMoreLink:vS.learnMoreLink,bold:i.jsx("strong",{})}})]});case"chat.firstTurnDisclaimerBase":case"chat.firstTurnPersonalizationDisclaimerBase":case"chat.tv.firstTurnDisclaimer":return i.jsx(en,{i18nKey:h});case"chat.livingPortraitDisclaimer":return i.jsx(en,{i18nKey:h,components:{termsLink:md.termsLink,privacyLink:md.privacyLink}});default:return null}};return i.jsx(jt,{id:c,mode:"wait",className:F("space-y-8 pb-8",Av,s),"data-testid":o,children:f(c)})}function c1(e){const{children:t,link:n,className:s}=e;return i.jsx(ws,{className:F("underline",s),href:n,title:"",children:t})}function c6(e){const{customBottomDisclaimer:t}=e,n=D("async-disclaimer-text"),s=gb(),[o,r]=d.useState(!n);return d.useEffect(()=>{s&&s.length>0&&r(!0)},[s]),t||(o?i.jsx(jt,{className:"absolute bottom-0 flex max-w-chat justify-center px-6 text-center","data-testid":"bottom-disclaimer",children:i.jsx(i1,{shouldUpdateNewConversationCount:!0})}):null)}function Mme(){return i.jsx("div",{"aria-hidden":!0,className:"flex size-full flex-col items-center justify-center"})}const si="absolute animate-dot-ellipsis size-2 rounded-full bg-background-450";function Rme(e){const{className:t}=e;return i.jsxs("div",{className:W("flex items-center justify-center gap-3",t),children:[i.jsxs("div",{className:"relative flex items-center justify-center",children:[i.jsx("div",{className:si,style:{animationDelay:"0ms"}}),i.jsx("div",{className:si,style:{animationDelay:"30ms"}})]}),i.jsxs("div",{className:"relative flex items-center justify-center",children:[i.jsx("div",{className:si,style:{animationDelay:"100ms"}}),i.jsx("div",{className:si,style:{animationDelay:"130ms"}})]}),i.jsxs("div",{className:"relative flex items-center justify-center",children:[i.jsx("div",{className:si,style:{animationDelay:"200ms"}}),i.jsx("div",{className:si,style:{animationDelay:"230ms"}})]})]})}function Pme(e){const{text:t,staggerChildren:n=.018,delayChildren:s=0,initialOpacity:o=0}=e;return i.jsx(ee.div,{variants:{show:{transition:{staggerChildren:n,delayChildren:s}}},initial:"hidden",animate:"show",children:Gb(t).map((r,c)=>i.jsx(ee.span,{variants:{hidden:{opacity:o},show:{opacity:1,transition:{duration:m4}}},children:r},c))})}const Lme={sm:"text-md",md:"text-xl",lg:"text-3xl"},yS=25;function jme(e){const{subheading:t}=e;return i.jsx("h2",{className:"mt-4 text-foreground-800 text-base",children:t})}function Ome(e){const{className:t,fontSize:n="lg"}=e,s=_(hp),o=_(nE),{t:r}=V(),{greetingKey:c,widgetGreeting:l,widgetSubheading:u}=LA(),{isCentralComposerEnabled:m,isGreetingCentered:p}=dc(),f=Cv(),h=Die(),g=o&&o.length>yS?`${o.slice(0,yS)}`:o,y=c?r(c,{name:g}):"";return f?i.jsx("div",{className:W(t,"flex w-full flex-col items-start justify-start gap-2 sm:mb-6 sm:h-[100px] sm:justify-end"),children:i.jsx("div",{className:"flex justify-start sm:min-h-8",children:!h||s?i.jsx("div",{className:"ms-2 mt-6 flex size-full sm:mt-0",children:i.jsx(Rme,{className:"flex-1"})}):i.jsxs("div",{className:"flex flex-col items-start gap-2",children:[i.jsxs(jt,{className:"flex items-center gap-2 text-foreground-550 dark:text-foreground-750",id:l??y,children:[i.jsx("p",{className:"text-xs-strong",children:r("common.copilotText")}),i.jsx("p",{className:"text-xs",children:Qs(new Date,"h:mm aa")})]}),i.jsx("h1",{className:"text-lg",children:i.jsx(l6,{text:l??y},l)})]})})}):i.jsxs("div",{className:W("flex w-full flex-col items-start justify-start sm:mb-8 sm:h-[100px] sm:justify-end",p&&"sm:items-center",!m&&"sm:justify-start",Lme[n],u&&"sm:mb-4",t),"data-testid":"launch-greeting",children:[i.jsx("h1",{children:y}),u&&i.jsx(jme,{subheading:u})]})}const l6=d.memo(e=>{const{text:t}=e;return i.jsx(Pme,{text:t,staggerChildren:.02,delayChildren:.1},t)});l6.displayName="AnimatedTextMemo";function Dme(e){const{customLaunchGreeting:t,className:n}=e;return t||i.jsx(Ome,{className:n,fontSize:"md"})}function Ume(e){const{className:t}=e,n=_(Ma),s="top-disclaimer";return n?i.jsx(i1,{forceVisible:!0,className:t,testId:s,shouldUpdateNewConversationCount:!0}):i.jsx(i1,{className:t,testId:s,shouldUpdateNewConversationCount:!0})}function Fme({characterId:e,className:t}){const n=_(wn),[s,o]=Ee(mI),{t:r}=V();return d.useEffect(()=>{(n==null?void 0:n.isNew)===!1&&o(!1)},[o,n==null?void 0:n.isNew]),n!=null&&n.isNew?i.jsxs(jt,{id:"character-disclaimer",mode:"wait",className:F("pb-2 text-stone-550/90 text-xs dark:text-slate-250/60",t),children:[r("characterAnimation.characterDisclaimerTextV2",{characterName:LO(e,r)})," ",s&&i.jsx(en,{i18nKey:"characterAnimation.characterSettingDisclaimerText",components:{settingsLink:i.jsx(Mu,{pages:["menu","character-options"],className:"text-stone-550/90 underline text-xs dark:text-slate-250/60"})}})]}):null}function Bme(){return i.jsx(vp,{size:"sm",stroke:!0,className:"flex h-[172px] w-[324px] cursor-pointer flex-col p-4",children:i.jsx("div",{className:"flex flex-1",children:i.jsx(kp,{className:"size-full",style:{clipPath:"var(--clip-path-squircle-36)"}})})})}const Vme=d.lazy(()=>P(()=>import("./contextual-shopping-card-BbvRsS4Q.js"),__vite__mapDeps([430,0,1,431,327,323,324,432,433,326,434,371,312,435,370,325,329,330,436,437,438,439,318,319,348,440])).then(e=>({default:e.AnimatedContextualShoppingCard})));function u6(e){const{customLaunchGreeting:t,chatItemClasses:n,postContent:s}=e,{isCentralComposerEnabled:o,isWidgetSectionEnabled:r,isAppearanceOnHomeEnabled:c,isGreetingCentered:l}=dc(),u=lt({breakpoint:"sm"}),m=Sm({breakpoint:"h760"}),p=Sm({breakpoint:"h600"}),f=D("appr-home-toggle"),h=_(DW),g=c&&(!f||!h)&&!p,y=wu(),b=Vr(),x=_(l0),v=_(mK),S=!_p(),C=y&&x!==null,T=X3(),{launchGreetingShown:w,widgetSubheading:I}=LA(),A=_(xI),{showShoppingCardInNewChat:E,shoppingProductMetadata:R,isCopilotOpenedViaEdgeCTAs:U}=mb(),K=!U&&!v&&!C&&!w&&b&&!T,te=Z.instance().config().smallScreenShowTopDisclaimerAfterSendingMessage??!1?!b:!K,oe=C||u&&te,ge=Bo()==="computerUse",me=r&&!ge&&!u&&!m,be=K&&"pb-2",we=d.lazy(()=>c?P(()=>import("./appearance-chat-DGFT5spc.js"),__vite__mapDeps([441,0,1,442])).then(ae=>({default:ae.AppearanceChat})):Promise.resolve({default:()=>null})),se=i.jsxs(jt,{delay:.2,initial:S?"initial":!1,className:W(o?"mt-2 flex flex-col items-start text-pretty pe-0 sm:absolute sm:inset-x-0 sm:inset-y-0 sm:mx-auto sm:mt-0 sm:max-w-chat sm:px-4 sm:pb-[calc(var(--composer-container-height))]":be,E&&"mx-auto mt-2 max-w-sm sm:relative sm:mt-6 sm:max-w-md sm:px-4",g&&u&&"grow",me&&!I&&"sm:pb-[calc(var(--composer-container-height)-64px)]",me&&I&&"sm:pb-[calc(var(--composer-container-height)-32px)]"),children:[g&&o&&i.jsx("div",{className:W("order-2 flex w-full flex-col items-center justify-center sm:absolute sm:h-[calc(50%-60px-var(--composer-container-height)/2)]",u&&"grow"),children:i.jsx(d.Suspense,{fallback:i.jsx(Mme,{}),children:i.jsx(we,{voiceAppearanceId:Ir})})}),i.jsxs("div",{className:"order-1 flex w-full flex-col gap-2 sm:top-0 sm:h-full sm:justify-center",children:[K&&i.jsx(Dme,{customLaunchGreeting:t,className:W(l?"sm:text-center":"sm:ps-2")}),C&&i.jsx(Fme,{characterId:x}),E&&R&&!A&&i.jsx(d.Suspense,{fallback:i.jsx(Bme,{}),children:i.jsx(Vme,{content:R})}),oe&&i.jsx(Ume,{}),s]})]},"chat-welcome");return n?i.jsx("div",{className:n,children:se}):se}function Hme(e){const{content:t}=e;return i.jsx("div",{className:"text-center text-foreground-450 text-xs dark:text-foreground-600",children:t})}const CS=10,zme=0,Wme=.2;function Gme({onClick:e,shouldShowScrollToBottomButton:t,bottomButtonClass:n=""}){const{t:s}=V(),o=_(nn),r=Lu(),c=o==="side-by-side"&&!r;return i.jsx(at,{children:t&&i.jsx(ee.div,{className:W("pointer-events-none absolute flex justify-center",Ke.chatScrollToBottomButton,c?"end-0 w-1/4 min-w-chat-side-by-side":"inset-x-0",n),initial:{...Ce,y:CS},animate:{...Be,y:zme},exit:{...Ce,y:CS},transition:{duration:Wme},children:i.jsx($,{color:"acrylic",variant:"circle",size:"36-sm",title:s("chat.scrollToBottom"),onClick:e,className:"pointer-events-auto border-none shadow-xl",testId:"scroll-to-bottom-button",children:i.jsx("span",{className:W("relative rounded-full bg-white/40 p-2 shadow-xl hover:bg-white hover:p-[9px] dark:bg-background-350/60","after:absolute after:inset-0 after:rounded-full after:shadow-xl","before:absolute before:-inset-px before:rounded-full before:border before:border-black/8"),children:i.jsx(fu,{className:"size-5 rotate-180 fill-foreground-900 dark:fill-white"})})})})})}const xS=d.lazy(()=>P(()=>import("./ai-message-Dev3NyOE.js").then(e=>e.g),__vite__mapDeps([443,0,1,426,330,444,436,421,445,446,447,448,449])));function $me(e){const{message:t,animatingMessageIds:n,conversationId:s,sideBySideComparisonId:o,isStreamingComplete:r,shouldAnimate:c,reactionsToDisable:l,isLastMessage:u}=e,{t:m}=V(),p=z(is),f=Tv();if(!s)return null;if(!GA(t))return i.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.25},children:i.jsx(d.Suspense,{fallback:f&&i.jsx(Iv,{loadingType:f}),children:i.jsx(xS,{message:t,isStreamingComplete:r,shouldAnimate:!1,reactionsToDisable:l,isLastMessage:u})})});if(!o)return null;const{left:h,right:g}=t,y=v=>!(n!=null&&n.has(v.id))&&!v.sideBySideConfig.isStreamingComplete,b=(v,S)=>{yQ({sideBySideComparisonId:o,sideBySideConfig:S}),Ks.selectSideBySideMessage({selectedMessageId:v,sideBySideComparisonId:o}),LK(s,v),p({title:m("chat.sideBySide.selectedResponseToastTitle"),subtitle:m("chat.sideBySide.selectedResponseToastSubtitle"),dismissAfter:2e3})},x=i.jsx(o6,{delay:.5,className:"mt-2"});return i.jsxs("div",{className:"flex w-full flex-col items-center gap-6 pb-4",children:[i.jsx("p",{children:m("chat.sideBySide.preambleMessage")}),i.jsx("div",{className:"flex flex-col justify-center gap-6 @5xl/chat:w-[100cqw] @5xl/chat:flex-row @5xl/chat:items-stretch @5xl/chat:px-6",children:[h,g].map(v=>i.jsxs("div",{className:"flex min-h-24 flex-col rounded-2xl border-[0.5px] border-black/12 bg-white/45 p-6 @5xl/chat:min-w-[480px] @5xl/chat:max-w-[600px] @5xl/chat:flex-[1_1_600px] dark:bg-midnight-350/10",children:[i.jsx("div",{className:"flex-1",children:y(v)?x:i.jsx(d.Suspense,{fallback:x,children:i.jsx(xS,{message:v,isStreamingComplete:r,shouldAnimate:c,reactionsToDisable:"all",isLastMessage:!0,groupHasTopMargin:!1,isInSideBySide:!0})})}),r&&i.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},children:i.jsx($,{size:"36-sm",className:"mx-auto mt-6",title:m("chat.actions.selectResponse"),color:"strong",onClick:()=>b(v.id,v.sideBySideConfig),children:m("chat.actions.selectResponse")})})]},v.id))})]})}function d6(){const{t:e}=V(),t=lt({breakpoint:"md"}),n=lt({breakpoint:"sm"}),s=lt({breakpoint:"xl"}),o=_(nn)==="side-by-side",r=_(eo),c=_(rc),l=et(),u=z(nn),m=Lu(),p=o&&!n&&l.startsWith("/chats"),f=r6()&&s,h=(t||!r||p||f)&&!m&&!c,g=d.useCallback(()=>{u("detail-only")},[u]);return i.jsx("div",{className:W("sticky top-0 w-full",Ke.stickyHeader),children:i.jsx(at,{children:h&&i.jsx(ee.div,{className:W("absolute h-16 w-full",kn,"bg-background-150/95 dark:bg-background-150/90"),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Ce,animate:Be,exit:Ce},transition:_t,"data-testid":"sticky-header",children:p&&i.jsx(ee.div,{initial:Ce,animate:Be,exit:{transition:{duration:0},...Ce},transition:_t,children:i.jsx($,{title:e("actions.hideDetails"),color:"subtle-dimmed",variant:"square",size:"36-sm",className:"ms-3.5 mt-1.5",onClick:g,testId:"collapse-chat-button",children:i.jsx(Ev,{className:"size-5"})})})})})})}function qme(e){const{query:t,messageId:n,index:s,onClick:o}=e,r=_(Ae),c=()=>{yt({source:"suggestionChip",conversationId:r,messageId:n}),M.trackEvent({name:"interaction",data:{eventName:"copilotSuggestionFollowupSelection",eventInfo_messageId:n,eventInfo_conversationId:r??"",eventInfo_suggestionIndex:s}}),o()};return i.jsx(bk,{isSelected:!1,variant:"flat",className:"max-w-[80%] text-start sm:max-w-fit",onClick:c,children:i.jsx("span",{className:"p-1",children:t})})}function Kme(e){const{mostRecentMessageId:t,className:n}=e,s=_(Ae),o=_(YO),r=o&&t===o.messageId;return d.useEffect(()=>{r&&M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"chat",eventInfo_messageId:t,eventInfo_impressionScenario:"suggestionReceived",eventInfo_conversationId:s??""}})},[r,t,s]),i.jsx("div",{className:F("mt-auto",n),children:r&&i.jsx(Yme,{suggestions:o.suggestions,messageId:o.messageId,conversationId:s??""})})}async function Zme(e){await Ks.submitMessage({text:e,inputMethod:"suggestion"}),Ge.emit("composer:focus-input")}function Yme({suggestions:e,messageId:t,conversationId:n}){const s=d.useRef(null),o=Um(s,{amount:"all",once:!0});return d.useEffect(()=>{o&&M.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"chat",eventInfo_messageId:t,eventInfo_impressionScenario:"suggestionRender",eventInfo_conversationId:n}})},[o,t,n]),i.jsx(jt,{ref:s,duration:Fn.suggestions,className:"flex flex-col items-end gap-3 pb-8",children:e.map((r,c)=>i.jsx(qme,{index:c,messageId:t,onClick:()=>Zme(r),query:r},r))})}const Qme="answerCards.ariaLabel.numberOfLocalResultsSingle",Jme="answerCards.ariaLabel.numberOfLocalResultsPlural";function Xme(e){let t="";for(const s of e.entities){if(t+=s.name,s.category&&(t+=`, ${s.category}`),s.price&&(t+=`, ${epe(s.price)}`),s.reviews[0]){const o=s.reviews[0];t+=", ",t+=B("answerCards.ariaLabel.ratedByReviewer",{rating:o.rating,reviewCount:o.count,reviewProvider:o.providerName})}s.phoneNumber&&(t+=", ",t+=B("answerCards.ariaLabel.phoneNumber",{phoneNumber:s.phoneNumber})),s.location.address&&(t+=", ",t+=B("answerCards.ariaLabel.address",{address:s.location.address})),s.openState&&(t+=", ",t+=B("answerCards.ariaLabel.openState",{openState:s.openState})),t+=". "}const n=e.entities.length===1?Qme:Jme;return B(n,{count:e.entities.length,resultSummary:t})}function epe(e){switch(e.length){case 1:return B("answerCards.ariaLabel.inexpensivePrices");case 2:return B("answerCards.ariaLabel.averagePrices");default:return B("answerCards.ariaLabel.expensivePrices")}}function tpe(e){const{content:t,announce:n}=e;let s;for(const o of t){switch(o.type){case"text":s=o.text;break;case"image":o.url?s=B("chat.imageGenerated",{prompt:o.prompt??""}):s=B("chat.imageGenerating");break;case"page":break;case"citation":break;case"card":s=npe(o.card);break;case"error":s=o.text;break;case"task":break;case"deleted":break;case"chainOfThought":break;case"chainOfThoughtGroup":break;case"document":break;case"activity":break;case"memorySignal":s=o.text;break;case"indicator-ai-response":s=o.text;break}s&&n({msg:s})}}function npe(e){switch(e.type){case"localEntity":return Xme(e);case"healthcareEntity":return"";case"healthcareInfo":return"";case"ads":case"weather":case"weatherTemperatureHourly":case"weatherTemperatureDaily":case"weatherPrecipitationHourly":case"weatherPrecipitationDaily":case"image":case"person":case"phoneImages":case"phoneLinking":case"phoneAlarm":case"phoneTimer":case"phoneSendMessage":case"video":case"sportsSchedule":case"sportsGame":case"safetyHelpline":case"shopping":case"shoppingProducts":case"shoppingCurated":case"job":case"inlineVideo":case"quiz":case"financeChart":case"generativeUI":case"recipe":case"mediaSpotlight":case"inlineImage":case"m365":case"file":case"computerUseFeedback":case"document":case"personalArtifacts":case"flashcard":case"consent":case"newsCarousel":case"webResult":case"mediaCarousel":return"";default:return""}}function spe(e,t){const n=d.useRef();d.useEffect(()=>{var o;if(t==="streaming")return;const s=e.at(-1);s&&s.author==="ai"&&s.id!==((o=n.current)==null?void 0:o.id)&&(tpe({content:s.content,announce:Wr}),n.current=s)},[e,t])}function ope(e){const{colorTheme:t}=e,{t:n}=V();return i.jsx("video",{src:t==="dark"?Mb:Rb,title:n("settings.appearanceIconAlt"),className:"size-16 rounded-xl",autoPlay:!0,loop:!0,muted:!0})}const ape=e=>{const{t}=V(),n=z(is),s=z(ro),o=_(zn),[r,c]=Ee(jb),l=D("appearance-discoverability"),u=z(Db),m=_(Ob);d.useEffect(()=>{if(l&&!m){const p=r?null:{title:t("settings.appearanceDiscoveryToastTitle"),subtitle:t("settings.appearanceDiscoveryToastSubtitle"),link:t("settings.appearanceDiscoveryToastTryIt"),iconProvider:()=>ope({colorTheme:o}),action:async()=>{c(Pb),u(!0),s(Ir),await Cu({talk:!0}),Se({pageName:e,source:"appearanceCtaChatToast",scenario:"open",destination:"AudioCallWithAppearance"})},onDismiss:()=>{c(Ip),Se({pageName:e,source:"appearanceCtaChatToast",scenario:"dismiss"})},removeIconBorder:!0};n(p),p&&_s({page:e,scenario:"Displayed",element:"appearanceCtaChatToast"})}},[l,n,s,t,o,r,c,e,u,m])};function rpe(e){d.useEffect(()=>{if(e.current){const t=s=>{var r,c,l,u,m;if(s.target&&s.target instanceof Element&&s.target.closest('[data-formatless-copy="false"]'))return;const o=window.getSelection();if(o!=null&&o.rangeCount){let p=document.createElement("div");const f=o.getRangeAt(0),{startContainer:h,endContainer:g}=f;p.appendChild(f.cloneContents());const y=(r=h.parentElement)==null?void 0:r.closest("pre"),b=(c=g.parentElement)==null?void 0:c.closest("pre"),x=!!y&&!!b&&y===b,v=!!((l=h.parentElement)!=null&&l.closest("table"))&&!ipe(f),S=p.getElementsByTagName("*");for(const I of S)I.getAttribute("data-copy")==="false"?I.remove():(I.removeAttribute("style"),I.removeAttribute("class"),I.removeAttribute("initial"),I.removeAttribute("animate"),I.removeAttribute("variants"),I.removeAttribute("custom"));if(x){const I=document.createElement("pre");I.appendChild(p),p=I}if(v){const I=document.createElement("table"),A=Array.from(p.children);for(const E of A)I.appendChild(E);p=I}p.style.position="absolute",p.style.left="-9999px",document.body.appendChild(p);const C=window.getSelection(),T=document.createRange();T.selectNodeContents(p),C==null||C.removeAllRanges(),C==null||C.addRange(T);const w=(C==null?void 0:C.toString())??"";C==null||C.removeAllRanges(),C==null||C.addRange(f),document.body.removeChild(p),p.removeAttribute("style"),(u=s.clipboardData)==null||u.setData("text/plain",w),(m=s.clipboardData)==null||m.setData("text/html",x||v?p.outerHTML:p.innerHTML)}s.preventDefault()},n=e.current;return n.addEventListener("copy",t),()=>{n.removeEventListener("copy",t)}}return()=>{}},[e])}function ipe(e){var r,c,l,u;const{startContainer:t,endContainer:n}=e,s=((r=t.parentElement)==null?void 0:r.closest("td"))??((c=t.parentElement)==null?void 0:c.closest("th")),o=((l=n.parentElement)==null?void 0:l.closest("td"))??((u=n.parentElement)==null?void 0:u.closest("th"));return!!(s&&o&&s===o)}const cpe=typeof document<"u"?d.useLayoutEffect:d.useEffect;function lpe(e,t){const n=d.useRef(0),s=d.useRef(0);d.useEffect(()=>{const{current:o}=t,r=()=>{if(o){const c=o.scrollHeight-o.scrollTop;s.current=c}};return o==null||o.addEventListener("scroll",r,{passive:!0}),r(),()=>{o==null||o.removeEventListener("scroll",r)}},[t]),cpe(()=>{const{current:o}=t;o&&o.scrollTop+s.current!==o.scrollHeight&&(n.current===0?setTimeout(()=>{o.scrollTop=o.scrollHeight},100):o.scrollTop=o.scrollHeight-s.current,n.current=e)},[e,t])}function upe(e,t){const n=Sn("kill-review-prompt"),o=!!Z.instance().config().promptForReviews&&!n,r=z(as),c=d.useCallback(async u=>{if(!o)return;const{shown:m}=await f$.run({});if(m)return;const f=Gre()>=Fre,h=u>Dre;(f||h)&&!$re()&&(r("prompt-review"),M.trackEvent({name:"system",data:{eventName:"inAppSurveyPopUp",eventInfo_triggerType:h?"longChat":"activeDays"}}))},[o,r]),l=d.useRef(!1);d.useEffect(()=>{t&&(l.current=!0)},[t]),d.useEffect(()=>{t||!l.current||c(e)},[e,t,c])}function dpe(e){return d.useCallback(({behavior:n="smooth",delay:s=0})=>{setTimeout(()=>{e.current&&e.current.scrollTo({top:e.current.scrollHeight,behavior:n})},s)},[e])}const mpe=.1;function ppe(e){const{chatRef:t,hasMessages:n=!0}=e,s=d.useRef(null),[o,r]=d.useState(!1),c=d.useCallback(l=>{const u=l[0];u&&r(!u.isIntersecting&&n)},[n]);return d.useEffect(()=>{if(!t.current||!s.current)return()=>{};const l=new IntersectionObserver(c,{root:t.current,threshold:mpe});return l.observe(s.current),()=>{l.disconnect()}},[t,c]),d.useEffect(()=>{n||r(!1)},[n]),{bottomRef:s,shouldShowScrollToBottomButton:o}}function fpe(){const e=_(lu),t=Xl(Ct),n=_(i0);d.useEffect(()=>{t(s=>{if(n){const o=s.get(n);o&&(o.characterId=e)}})},[n,e,t])}async function hpe(e,t){const n=rb(t);if(n){const{message:s,part:o}=n;if(!o.task)return;const r=await Ms();r.setConversationIdByMessageId({messageId:s.id,conversationId:e}),r.setMessageIdByTaskId({taskId:o.task.id,messageId:s.id})}}const gpe=window.requestIdleCallback||function(t){const n=Date.now();return setTimeout(()=>{t({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-n))}})},1)},m6=e=>d.createElement("svg",{viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M2 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v7a2 2 0 0 1-1.164 1.818 1.497 1.497 0 0 0-.275-.379l-.446-.446A1 1 0 0 0 17 13V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5v1H4a2 2 0 0 1-2-2V6Zm8.854 4.146A.5.5 0 0 0 10 10.5v7a.5.5 0 0 0 .91.287l1.571-2.245 2.943.452a.5.5 0 0 0 .43-.848l-5-5ZM11 15.915v-4.207l3.066 3.067-1.74-.268a.5.5 0 0 0-.486.207l-.84 1.2Z"})),U2e=Object.freeze(Object.defineProperty({__proto__:null,default:m6},Symbol.toStringTag,{value:"Module"})),p6=e=>d.createElement("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{d:"M32.0007 5.33301C46.7282 5.33301 58.6673 17.2721 58.6673 31.9997C58.6673 46.7273 46.7282 58.6663 32.0007 58.6663C17.2731 58.6663 5.33398 46.7273 5.33398 31.9997C5.33398 17.2721 17.2731 5.33301 32.0007 5.33301ZM32.0007 8.66634C19.114 8.66634 8.66732 19.113 8.66732 31.9997C8.66732 44.8863 19.114 55.333 32.0007 55.333C44.8873 55.333 55.334 44.8863 55.334 31.9997C55.334 19.113 44.8873 8.66634 32.0007 8.66634ZM23.7105 21.3663L23.8458 21.4878L32.0007 29.6437L40.1555 21.4878C40.763 20.8803 41.7227 20.8398 42.3772 21.3663L42.5125 21.4878C43.12 22.0953 43.1605 23.0551 42.634 23.7095L42.5125 23.8449L34.3567 31.9997L42.5125 40.1545C43.12 40.762 43.1605 41.7217 42.634 42.3762L42.5125 42.5115C41.905 43.119 40.9453 43.1595 40.2908 42.633L40.1555 42.5115L32.0007 34.3557L23.8458 42.5115C23.2383 43.119 22.2786 43.1595 21.6241 42.633L21.4888 42.5115C20.8813 41.904 20.8408 40.9443 21.3673 40.2898L21.4888 40.1545L29.6447 31.9997L21.4888 23.8449C20.8813 23.2374 20.8408 22.2776 21.3673 21.6232L21.4888 21.4878C22.0963 20.8803 23.0561 20.8398 23.7105 21.3663Z"})),F2e=Object.freeze(Object.defineProperty({__proto__:null,default:p6},Symbol.toStringTag,{value:"Module"})),SS="size-5",wS="flex w-full items-center justify-end gap-1.5 text-foreground-450 dark:text-slate-400";function bpe({type:e}){const{t}=V();switch(e){case"takeTaskControl":return i.jsxs("div",{className:wS,children:[i.jsx(m6,{className:SS}),t("actions.tookControl")]});case"cancelTask":return i.jsxs("div",{className:wS,children:[i.jsx(p6,{className:SS}),t("actions.cancelledTask")]});case"createPage":case"appendToPage":case"promptCharacterSpeech":default:return null}}function vpe(e){const{text:t}=e;return i.jsx("div",{className:"flex w-full flex-col items-end","data-content":"user-message",children:i.jsx("div",{className:F("font-ligatures-none h-fit max-w-[80%] self-end whitespace-pre-wrap break-words rounded-2xl bg-accent-250/60 px-5 py-3 dark:bg-accent-200",so("userMessage")??"text-base"),children:t})})}const f6=e=>(lp(M9),lm({groupper:{tabbability:ype(e==null?void 0:e.tabBehavior)},focusable:{ignoreKeydown:e==null?void 0:e.ignoreDefaultKeydown}})),ype=e=>{switch(e){case"unlimited":return ef.Unlimited;case"limited":return ef.Limited;case"limited-trap-focus":return ef.LimitedTrapFocus;default:return}},h6=d.forwardRef((e,t)=>{const{children:n,tabBehavior:s="limited-trap-focus",ignoreDefaultKeydown:o,...r}=e,c=f6({tabBehavior:s,ignoreDefaultKeydown:o});return D("a11y-keyboard-navigation")?i.jsx(ee.div,{ref:t,...c,...r,tabIndex:0,children:n}):i.jsx(ee.div,{...r,ref:t,children:n})});h6.displayName="FocusableGroupMotion";function Cpe(e){const{children:t,tabBehavior:n="limited-trap-focus",ignoreDefaultKeydown:s,...o}=e,r=f6({tabBehavior:n,ignoreDefaultKeydown:s});return D("a11y-keyboard-navigation")?i.jsx("div",{...r,...o,tabIndex:0,role:"article",children:t}):i.jsx("div",{...o,children:t})}const g6=e=>i.jsx(Cpe,{...e});g6.Motion=h6;function xpe({tabs:e=[]}){return e.length===0?null:i.jsx($o,{className:"flex min-h-[60px] flex-col gap-2",tabbable:!0,tabIndex:0,children:i.jsx(Tk,{showRemoveIcon:!1,tabs:e})})}function Spe(e){var v,S;const{message:t,className:n,isForSharing:s}=e,{t:o}=V(),c=!!_(No),l=mv(),u=D("a11y-keyboard-navigation"),m=o(u?"chat.userSaid":"chat.user"),p=t.content.filter(C=>C.type==="document"||C.type==="image"),[f,h]=d.useState(!1),g=(v=Z.instance().config().composer)==null?void 0:v.smallAttachmentCard,y=p.slice(0,$d),b=d.useCallback(()=>{Wr({msg:o("userInput.seeAll"),type:"polite"}),h(!0)},[o,h]),x=p.length>$d;return i.jsxs(g6,{className:F("space-y-1",n),id:`${t.id}-user-message`,"aria-labelledby":`${t.id}-user-message`,children:[i.jsxs("div",{className:"relative space-y-3",children:[i.jsx("h2",{className:"sr-only","aria-label":m,"data-copy":"false",children:m}),p.length>0&&i.jsxs("div",{className:"flex h-32 w-full flex-row justify-end gap-2 overflow-hidden",children:[y.map((C,T)=>i.jsx(hk,{messageItem:C,isForSharing:s},`file-${T}`)),x&&i.jsx($,{"aria-label":o("userInput.seeAll"),title:o("userInput.seeAll"),color:"overlay-dimmed-inverted",onClick:b,className:W(g?"mt-2 h-[58px]":""),children:o("userInput.seeAll")}),f&&i.jsx(gk,{onClose:()=>h(!1),messages:p,isForSharing:s})]}),t.content.map((C,T)=>C.type==="browserTabs"?l&&PY(C.tabs)?i.jsx(xpe,{tabs:C.tabs},T):null:C.type==="text"?i.jsx(vpe,{text:C.text},T):C.type==="command"?i.jsx(bpe,{type:C.command.type},T):(C.type==="document",null)),t.emojiReaction&&i.jsx("div",{className:"absolute -bottom-3 end-3",children:t.emojiReaction})]}),!c&&((S=t.brand)==null?void 0:S.brandLogo)&&i.jsx("div",{className:"w-full px-3 text-right text-foreground-600 text-xs",children:o("ads.aboutBrand",{brand:t.brand.brandLogo.businessName})})]},t.id)}const wpe=d.lazy(()=>P(()=>import("./ai-message-Dev3NyOE.js").then(e=>e.g),__vite__mapDeps([443,0,1,426,330,444,436,421,445,446,447,448,449]))),Ipe=1.5,IS="inline-block w-full space-y-8",_v="max-w-chat w-full";function l1(e){var ja,Rs,Rt;const{className:t,conversationContainerClassName:n="mb-[var(--composer-container-height)]",bottomButtonClassName:s="bottom-[calc(var(--composer-container-height)+1rem)]",customLaunchGreeting:o,customBottomDisclaimer:r,enableHighlightedClasses:c=!0,enableBackstageClasses:l=!0,disableStickyHeader:u=!1,disableSuggestions:m=!1,disableScrollToBottomButton:p=!1,reactionsToDisable:f,postWelcomeContent:h}=e,{loader:g}=Nk(),y=_(ao),b=_(wn),x=_(l0),v=_(tp),S=lt({breakpoint:"sm"}),C=Tv(),T=D("sticky-conversation-mode"),I=wu()&&x!==null,A=D("share-continue-v2"),E=!_p();d.useEffect(()=>{T&&_n(Ys("sticky-conversation-mode")??ln())},[T]);const R=b==null?void 0:b.sideBySideComparisonId,U=!!R,[K,H]=d.useState(0);fpe();const te=d.useRef(null),oe=dpe(te);lpe(y.length,te),rpe(te);const{isContextualShoppingCardExpanded:ne,showShoppingCardInNewChat:ge}=mb();Ub({scrollableRef:te,source:"chat",customData:{conversationId:b==null?void 0:b.id,...ne&&{isContextualShoppingCardExpanded:ne}}});const[me]=Xb({...g,disabled:!!g.error}),{backstageMessagesProps:be,highlightedMessagesProps:we,sentinelRef:se,sentinelClasses:ae,backstageClasses:fe,highlightedClasses:re,opacity:ke,highlighted:q,backstage:G}=Bde(()=>oe({behavior:"instant",delay:Z.instance().config().scrollToBottomDelay}),te,I,K,y),J=Oi(ke,ht=>ht<.5?"none":"auto"),Ie=()=>oe({behavior:"smooth"}),{bottomRef:X,shouldShowScrollToBottomButton:he}=ppe({chatRef:te,hasMessages:y.length>0&&!p}),ie=_(c0).get((b==null?void 0:b.id)??""),ve=!!(ie!=null&&ie.size),Pe=ie==null?void 0:ie.values().next().value,_e=_(Ji);d.useEffect(()=>{b!=null&&b.id&&(hpe(b.id,y),gpe(()=>{P(()=>import("./ai-message-Dev3NyOE.js").then(ht=>ht.g),__vite__mapDeps([443,0,1,426,330,444,436,421,445,446,447,448,449]))}))},[b==null?void 0:b.id,y]),spe(y,b==null?void 0:b.streamingState);const Oe=Qk(q),Ve=(Oe==null?void 0:Oe.author)==="human"&&Oe.id===""||(b==null?void 0:b.streamingState)==="streaming",j=!!_(Kc),O=_(xi),pe=d.useMemo(()=>{if((Oe==null?void 0:Oe.author)!=="ai")return!1;const ht=Oe.content.at(-1);return(ht==null?void 0:ht.type)==="image"&&ht.status==="generating"},[Oe]),Re=Ve&&!ve||j||O,{disableMultiturn:xe}=Z.instance().config(),qe=(Rs=(ja=Z.instance().config().styleOverrides)==null?void 0:ja.width)==null?void 0:Rs.chat;upe(y.length,Ve);const Le=Wn(),Je=Vr(),Dt=!I&&!S&&Je,cs=_(rc),Tn=l&&!(ge&&!S)&&!cs,{isMediaViewerOpen:La}=io(),uo=D("chat-refactor-max-width"),Gn=uo?Jk():void 0,mo=uo?"w-full":_v,dn=(b==null?void 0:b.streamingState)==="idle",Mn=!m&&!U,ls=Re&&!U&&!pe;ape("/chat");const qo=D("chat-header-title"),po=(ht,Ps=!1,Oa,Ko=!1)=>ht.map((Xe,on)=>{const Da=new Date(Xe.createdAt),Ua=on>0?ht[on-1]:Oa,fo=Ua&&new Date(Ua.createdAt),Fa=!fo||!bv(Da,fo),Ba=A&&_re(b!=null&&b.continuedAt?new Date(b.continuedAt):null,Da,fo);let Vt;return AK(Xe)?Vt=i.jsx($me,{message:Xe,conversationId:b==null?void 0:b.id,animatingMessageIds:ie,sideBySideComparisonId:R,isStreamingComplete:dn,shouldAnimate:Ps,reactionsToDisable:f,isLastMessage:Ko&&on===ht.length-1}):Xe.author==="ai"?Vt=i.jsx(d.Suspense,{fallback:C&&i.jsx(Iv,{loadingType:C}),children:i.jsx(wpe,{message:Xe,isStreamingComplete:dn,shouldAnimate:Ps,reactionsToDisable:f,isLastMessage:Ko&&on===ht.length-1})}):Vt=i.jsx(Spe,{message:Xe,className:Gn}),i.jsxs(d.Fragment,{children:[Ba&&i.jsx(Hme,{content:B("chat.continuedConversationDisclaimer")}),Fa&&!xe&&i.jsx(Ame,{date:Da,className:Gn}),Vt]},Xe.id)});return i.jsx(i6,{children:i.jsxs("div",{className:W("scrollbar-stable flex size-full flex-col items-center overflow-y-auto overflow-x-hidden overscroll-contain text-foreground-800 @container/chat sm:min-w-chat-side-by-side",(b==null?void 0:b.id)&&p3(b.id)&&"t-custom-scrollbar",Z.instance().config().showScrollbarOnHover&&"scrollbar-container",La&&!cs&&"invisible",t),ref:te,"data-testid":"chat-page",children:[!u&&(qo?i.jsx(lme,{}):i.jsx(d6,{})),g.hasNextPage&&i.jsx("div",{ref:me}),I&&i.jsx(eme,{animatingMessageId:Pe,isStreamingMessage:Ve,displayedCharacterId:x,setCharacterComponentHeight:H}),i.jsx($o.Motion,{circular:!1,tabbable:!0,initial:E?"start":!1,animate:"end",variants:{start:Ce,end:{...Be,transition:{duration:.2,delay:.2}}},className:W(n,"grow",!uo&&(jl("pageContainer")??"px-6"),mo,qe),layout:"position",transition:_t,"data-content":"conversation","data-copy":"false",children:i.jsxs(d.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:[i.jsxs(ee.div,{className:W("relative",Le||!u?"pt-10":"pt-6",G.length>0&&IS,Tn&&fe),variants:be.variants,initial:E?be.initial:!1,animate:be.animate,style:{opacity:y.length>0?ke:0,pointerEvents:J},children:[i.jsx("div",{className:W("absolute -z-10 w-full",ae),ref:se}),po(G)]}),i.jsxs("div",{className:W(c&&re,"flex flex-col"),"data-testid":"highlighted-chats",children:[i.jsx(at,{mode:"wait",initial:!1,children:i.jsxs(i.Fragment,{children:[i.jsx(u6,{customLaunchGreeting:o,chatItemClasses:Gn,postContent:h}),q.length>0&&i.jsxs(ee.div,{className:W(xe?"pb-24":"pb-6",IS),initial:we.initial,animate:we.animate,exit:we.exit,onAnimationStart:we.onAnimationStart,children:[po(U?EK(q,R):q,ve,G[G.length-1]??void 0,!0),i.jsx(d.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:ls&&i.jsx(o6,{delay:Ipe,className:Gn})}),i.jsx(jt,{children:_e&&i.jsx(Zde,{className:Gn})}),i.jsx(jt,{children:v&&v.visible&&i.jsx(qde,{className:Gn})})]},(Rt=q[0])==null?void 0:Rt.createdAt)]})}),Mn&&i.jsx(Kme,{mostRecentMessageId:Oe==null?void 0:Oe.id,className:Gn}),i.jsx("div",{ref:X,style:{height:0,overflow:"hidden"}}),i.jsx(Gme,{shouldShowScrollToBottomButton:he,onClick:Ie,bottomButtonClass:s}),xe&&!Re&&Rm.createPortal(i.jsx(Wde,{title:B("tv.chat.moveToMultiturn"),onClick:()=>{const ht=new URL(window.location.origin);ht.searchParams.set("wtv","1"),ht.searchParams.set("oem","lg-multiturn"),ht.searchParams.set("form","LGTVTR"),oc(ht.toString())},hoverVariant:!0,className:W("fixed bottom-6 start-1/2 z-10 -translate-x-1/2 px-8 transition-opacity duration-300",he?"pointer-events-none opacity-0":"opacity-100"),children:B("tv.chat.moveToMultiturn")}),document.body)]})]})}),Dt&&i.jsx(c6,{customBottomDisclaimer:r})]})})}const B2e=Object.freeze(Object.defineProperty({__proto__:null,CHAT_WIDTH_CLASSES:_v,default:l1},Symbol.toStringTag,{value:"Module"}));function Tpe(e){var v,S;const{className:t,conversationContainerClassName:n="mb-[var(--composer-container-height)]",customLaunchGreeting:s,customBottomDisclaimer:o,disableStickyHeader:r=!1,enableBackstageClasses:c=!0,enableHighlightedClasses:l=!0,postWelcomeContent:u}=e;Rde();const m=D("chat-refactor-max-width"),p=lt({breakpoint:"sm"}),f=Wn(),h=!_p(),g=!p,y=(S=(v=Z.instance().config().styleOverrides)==null?void 0:v.width)==null?void 0:S.chat,b=m?Jk():void 0,x=m?"w-full":_v;return i.jsx(i6,{children:i.jsxs("div",{className:W("scrollbar-stable flex size-full flex-col items-center overflow-y-auto overflow-x-hidden overscroll-contain text-foreground-800 sm:min-w-chat-side-by-side",Z.instance().config().showScrollbarOnHover&&"scrollbar-container",t),"data-testid":"landing-page",children:[!r&&i.jsx(d6,{}),i.jsx($o.Motion,{circular:!1,tabbable:!0,initial:h?"start":!1,animate:"end",variants:{start:Ce,end:{...Be,transition:{duration:.2,delay:.2}}},className:W(n,"grow",!m&&(jl("pageContainer")??"px-6"),x,y),layout:"position",transition:_t,children:i.jsxs(d.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:[i.jsx("div",{className:W("relative",f||!r?"pt-10":"pt-6",c&&Zk)}),i.jsx("div",{className:W("flex",l&&Yk),children:i.jsx(at,{mode:"wait",initial:!1,children:i.jsx(u6,{customLaunchGreeting:s,chatItemClasses:b,postContent:u})})})]})}),g&&i.jsx(c6,{customBottomDisclaimer:o})]})})}const Epe=ze("/")({component:Tpe});function Ape(e){const{text:t,shouldAnimate:n,title:s}=e,o=U4(!1),[r,c]=d.useState(0),l=d.useMemo(()=>{const u=o(),m=$b(t);return Dl(m,u,()=>{c(r+1)})},[o,r,t]);return i.jsxs(i.Fragment,{children:[s&&i.jsx("span",{className:"text-foreground-600 text-sm",children:i.jsx("strong",{children:s})}),i.jsx("div",{className:"text-foreground-600 text-sm",children:i.jsx(Ol,{blocks:l,shouldAnimate:n})})]})}function _pe(e){const{items:t,shouldAnimate:n}=e,{t:s}=V();return i.jsxs("div",{className:"space-y-4 ps-2",children:[t==null?void 0:t.map((o,r)=>i.jsx("div",{className:"flex h-full flex-col",children:i.jsxs(TS,{isLastStep:!1,shouldAnimate:n,children:[o.type==="chainOfThought"&&i.jsx(Ape,{title:o.title,text:o.text,shouldAnimate:n}),o.type==="activity"&&i.jsx(kpe,{activity:o.activity})]})},r)),i.jsx(TS,{isLastStep:!0,shouldAnimate:n,children:i.jsx("span",{className:"text-foreground-600 text-sm",children:i.jsx("strong",{children:s("chat.chainOfThought.done")})})})]})}function kpe(e){const{activity:t}=e;return i.jsx("div",{className:"flex flex-col gap-4 overflow-y-auto",children:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("h3",{children:t.title}),t.artifacts.map((n,s)=>i.jsx(w4,{artifact:n},s))]})})}function Npe(e){return e?i.jsx(Jb,{className:"relative bottom-1 size-4 text-background-900"}):i.jsx("div",{className:"size-2 rounded-full bg-foreground-800"})}function TS(e){const{isLastStep:t,shouldAnimate:n,children:s}=e;return i.jsxs(ee.div,{className:"relative grid grid-cols-[auto,1fr] items-start gap-4",initial:n?"start":"end",animate:"end",variants:{start:Ce,end:o=>({...Be,transition:{delay:o,ease:"easeInOut",duration:1.2}})},children:[i.jsxs("div",{className:"relative mt-2 flex h-full w-2 flex-col items-center",children:[Npe(t),!t&&i.jsx("div",{className:"absolute bottom-0 top-4 w-0.5 bg-neutral-300"})]}),i.jsx("div",{className:"min-w-0 flex-1",children:s})]})}function Mpe(e){const{chainOfThoughtItems:t}=e,{t:n}=V();return i.jsxs("div",{className:"flex h-full flex-col",children:[i.jsx("h2",{className:"p-6 text-base",children:n("chat.chainOfThought.title")}),i.jsx("div",{className:"flex-1 overflow-auto p-4",children:i.jsx(gee,{config:{shouldCollapseCode:!0},children:i.jsx(_pe,{items:t,shouldAnimate:!1})})})]})}const b6=e=>d.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},d.createElement("path",{id:"Shape",d:"M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18ZM10 3C10.6568 3 11.4068 3.59025 12.0218 4.90814C12.2393 5.37419 12.4283 5.90978 12.5806 6.5H7.41936C7.57172 5.90978 7.76073 5.37419 7.97822 4.90814C8.59323 3.59025 9.34315 3 10 3ZM7.07203 4.48526C6.79564 5.07753 6.56498 5.75696 6.38931 6.5H3.93648C4.77295 5.05399 6.11182 3.93497 7.71442 3.38163C7.47297 3.71222 7.25828 4.08617 7.07203 4.48526ZM6.19265 7.5C6.06723 8.28832 6 9.12934 6 10C6 10.8707 6.06723 11.7117 6.19265 12.5H3.45963C3.16268 11.7236 3 10.8808 3 10C3 9.1192 3.16268 8.2764 3.45963 7.5H6.19265ZM6.38931 13.5C6.56498 14.243 6.79564 14.9225 7.07203 15.5147C7.25828 15.9138 7.47297 16.2878 7.71442 16.6184C6.11182 16.065 4.77295 14.946 3.93648 13.5H6.38931ZM7.41936 13.5H12.5806C12.4283 14.0902 12.2393 14.6258 12.0218 15.0919C11.4068 16.4097 10.6568 17 10 17C9.34315 17 8.59323 16.4097 7.97822 15.0919C7.76073 14.6258 7.57172 14.0902 7.41936 13.5ZM12.7938 12.5H7.20617C7.07345 11.7253 7 10.8833 7 10C7 9.11669 7.07345 8.27472 7.20617 7.5H12.7938C12.9266 8.27472 13 9.11669 13 10C13 10.8833 12.9266 11.7253 12.7938 12.5ZM13.6107 13.5H16.0635C15.2271 14.946 13.8882 16.065 12.2856 16.6184C12.527 16.2878 12.7417 15.9138 12.928 15.5147C13.2044 14.9225 13.435 14.243 13.6107 13.5ZM16.5404 12.5H13.8074C13.9328 11.7117 14 10.8707 14 10C14 9.12934 13.9328 8.28832 13.8074 7.5H16.5404C16.8373 8.2764 17 9.1192 17 10C17 10.8808 16.8373 11.7236 16.5404 12.5ZM12.2856 3.38163C13.8882 3.93497 15.2271 5.05399 16.0635 6.5H13.6107C13.435 5.75696 13.2044 5.07753 12.928 4.48526C12.7417 4.08617 12.527 3.71222 12.2856 3.38163Z",fill:"currentColor"})),V2e=Object.freeze(Object.defineProperty({__proto__:null,default:b6},Symbol.toStringTag,{value:"Module"}));function Rpe(e){const{title:t,name:n,iconUrl:s,url:o,mode:r,onClick:c,className:l,variant:u,snippet:m}=e,p=Cs(o),f=d.useContext(fc),h=_(Ae),g=u==="panel"||u==="modal";d.useEffect(()=>{if(u==="row"){const b=JSON.stringify({conversationId:h,messageId:f,title:t,url:o});f4("card",b)}},[u,h,f,t,o]);const y=()=>{c==null||c(e),zX(u==="row"?"row":"panel",h,p)};return i.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",onClick:y,className:W("flex w-full min-w-0 cursor-pointer items-start",u==="modal"?"":"rounded-3xl bg-caramel-100 p-5 shadow-xs transition-shadow hover:shadow-sm dark:bg-midnight-800",l),children:i.jsxs("div",{className:"flex min-w-0 grow flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"flex shrink-0 items-center justify-center rounded p-0.5",children:s?i.jsx("div",{className:"size-4 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url('${s}')`}}):i.jsx(b6,{className:"size-4 text-foreground-700 dark:text-slate-400"})}),i.jsx("div",{className:"min-w-0 flex-1 overflow-hidden",children:i.jsx("p",{className:"truncate leading-5 text-foreground-700 text-xs",children:r==="research"?xs(p):n})})]}),i.jsx("div",{className:"overflow-hidden font-medium text-foreground-900 text-sm",children:i.jsx("p",{className:"line-clamp-2 leading-5",children:t})}),g&&m&&i.jsx("div",{className:"overflow-hidden text-foreground-700 text-xs",children:i.jsx("p",{className:"line-clamp-3 leading-5",children:m})}),g&&i.jsx("div",{className:"overflow-hidden text-foreground-600 text-xs",children:i.jsx("p",{className:"truncate leading-5",children:o})})]})})}function Ppe(e){const{citations:t,relatedResults:n,className:s,variant:o}=e,{t:r}=V();if(t.length===0&&n.length===0)return null;const c=(u,m)=>i.jsx("div",{className:W("flex flex-col gap-5",o==="modal"&&"divide-y divide-foreground-300"),children:u.map(({title:p,publisher:f,url:h,iconUrl:g,snippet:y,index:b})=>i.jsx("div",{className:o==="modal"?"pt-5":"",children:i.jsx(Rpe,{title:p,name:f??xs(h),url:h,iconUrl:g??void 0,className:"w-full",variant:o,snippet:y})},`${m}-${h}-${b}`))}),l=u=>i.jsx("div",{className:"mb-3 pb-2",children:i.jsx("h3",{className:"w-full text-center font-semibold text-foreground-800 text-sm",children:r(u)})});return i.jsxs("div",{className:W("flex flex-col overflow-y-auto pb-4",o==="modal"?"gap-10":"gap-5 pe-2 ps-4",s),children:[t.length>0&&i.jsxs("div",{children:[l("citationCards.references"),c(t,"citation")]}),n.length>0&&i.jsxs("div",{children:[l("citationCards.relatedResults"),c(n,"related")]})]})}async function Lpe(e,t){const n=`/messages/${e}/related-results`;return It(n,cH,{analytics:{anonymousPath:"/messages/{id}/related-results"},parseOptions:{safe:t==null?void 0:t.safe},onFailedRequest:()=>{}}).then(s=>s.data)}function jpe(e,t){return Pm({queryKey:["relatedResults",e],queryFn:async()=>(await Lpe(e)).relatedResults,enabled:(t==null?void 0:t.enabled)??!!e,staleTime:5*60*1e3})}function Ope(e){const{data:t,className:n,variant:s}=e,{conversationId:o,messageId:r}=t,c=_(Ct),l=D("see-more-results"),u=c.get(o),m=d.useMemo(()=>u==null?void 0:u.history.find(g=>g.id===r&&g.author==="ai"),[u==null?void 0:u.history,r]),p=d.useMemo(()=>(m==null?void 0:m.content.filter(g=>g.type==="text").flatMap(g=>g.citations??[]))??[],[m]),{data:f=[]}=jpe(r,{enabled:!!r&&(l||(m==null?void 0:m.mode)==="search")&&(u==null?void 0:u.streamingState)!=="streaming"}),h=d.useMemo(()=>f.map((g,y)=>({index:(y+1).toString(),title:g.title,url:g.url,iconUrl:g.iconUrl??null,publisher:g.publisher??null,snippet:g.snippet??null})),[f]);return i.jsx(Ppe,{citations:p,relatedResults:h,className:n,variant:s})}const Dpe=a.union([a.literal(!0),a.literal(!1)]);a.object({enabled:Dpe.optional()});async function Upe(e,t){return(await It(`/healthcare/navigation/provider/${e}`,PU,{query:t,options:{method:"GET",headers:{"Content-Type":"application/json"}}})).data}function Fpe(e,t){const{data:n,isLoading:s,error:o,refetch:r}=Pm({queryKey:["healthcareProvider",e,JSON.stringify(t)],queryFn:()=>Upe(e,t),enabled:!!e});return{data:n,isLoading:s,error:o,refetch:r}}function Em(e){const{title:t,children:n}=e;return i.jsxs("section",{className:"flex flex-col gap-2",children:[i.jsx("h3",{className:"font-medium text-foreground-700 text-sm-strong",children:t}),n]})}function Bpe(e){const{education:t}=e,{type:n,name:s,year:o}=t;if(!n&&!o)return i.jsx("span",{children:s});let r,c;return n&&o?(r="answerCards.educationLabelFull",c={type:n,name:s,year:o}):n?(r="answerCards.educationLabelNameAndType",c={type:n,name:s}):(r="answerCards.educationLabelNameAndYear",c={name:s,year:o}),i.jsx(en,{i18nKey:r,values:c,components:{bold:i.jsx("strong",{})}})}function Vpe(e){const{educations:t}=e,{t:n}=V();return!t||t.length===0?null:i.jsx(Em,{title:n("answerCards.education"),children:i.jsx("div",{className:"rounded-lg border-t border-neutral-200 bg-stone-300/20 p-4",children:i.jsx("ul",{className:"mt-0 space-y-2",children:t.map((s,o)=>i.jsx("li",{className:"list-none text-foreground-600 text-sm",children:i.jsx(Bpe,{education:s})},o))})})})}const Hpe=d.lazy(()=>P(()=>import("./typeahead-B6qpLr_c.js"),__vite__mapDeps([450,0,1])).then(e=>({default:e.Typeahead})));function zpe(){return i.jsx("div",{className:"w-full rounded-2xl bg-black/5 p-4 text-sm dark:bg-midnight-550/25",children:i.jsx("div",{className:"h-5 w-48 animate-pulse rounded bg-foreground-550/20"})})}const gh=4;function Wpe(e){const{insurances:t,insuranceStatus:n}=e,{t:s}=V(),[o,r]=d.useState(null),[c,l]=d.useState(gh),{insuranceGroupedData:u,idToInsurance:m}=d.useMemo(()=>{if(!t)return{insuranceGroupedData:{groups:[]},idToInsurance:new Map};const x=new Map,v=new Map;for(const C of t){const T=[C.carrierName,C.planName,C.planType].filter(Boolean).join(" - "),w=crypto.randomUUID();x.set(w,C);const I=C.carrierName??s("answerCards.otherCarrier");v.has(I)||v.set(I,[]);const A=v.get(I);A&&A.push({id:w,displayString:T})}return{insuranceGroupedData:{groups:Array.from(v.entries()).map(([C,T])=>({category:C,items:T.map(({id:w,displayString:I})=>({id:w,displayString:I}))}))},idToInsurance:x}},[t,s]);if(!t||t.length===0){let x=s("answerCards.insuranceNotAvailable");return n==="does-not-accept"&&(x=s("answerCards.insuranceDoesNotAccept")),i.jsx(Em,{title:s("answerCards.insuranceTitle"),children:i.jsx("p",{className:"text-foreground-450 text-sm",children:x})})}const p=(x,v)=>{r({id:x,plan:v})},f=t.slice(0,c),h=t.length>c,g=c>gh,y=()=>{l(t.length)},b=()=>{l(gh)};return i.jsx(Em,{title:s("answerCards.insuranceTitle"),children:i.jsxs("div",{className:"mb-2 flex flex-col gap-3",children:[i.jsx(d.Suspense,{fallback:i.jsx(zpe,{}),children:i.jsx(Hpe,{data:u,onSelect:x=>{const v=m.get(x);v&&p(x,v)},renderCategory:x=>x,placeholder:s("answerCards.insuranceSearchPlaceholder"),className:"w-full"})}),i.jsx(at,{mode:"wait",children:o&&i.jsxs(ee.div,{className:"p-3",initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.2,ease:"easeOut"},children:[i.jsxs("div",{className:"font-medium text-foreground-700 text-sm",children:[o.plan.carrierName,o.plan.planName&&i.jsxs("span",{children:[" - ",o.plan.planName]}),o.plan.planType&&i.jsxs("span",{className:"ms-1 font-normal text-foreground-450",children:["(",o.plan.planType,")"]})]}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx(Nu,{className:"size-4 text-spot-green-600"}),i.jsx("span",{className:"font-medium text-sm",children:s("answerCards.insuranceInNetwork")})]}),i.jsx("button",{type:"button",onClick:()=>r(null),className:"mt-2 text-foreground-450 underline transition-colors duration-200 text-xs hover:text-foreground-600",children:s("answerCards.insuranceClearSelection")})]},o.id)}),!o&&i.jsxs(i.Fragment,{children:[i.jsx("ul",{className:"mt-0 space-y-2 ps-4",children:f.map((x,v)=>i.jsx("li",{className:"list-disc text-foreground-600 text-sm",children:x.carrierName&&i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:x.carrierName}),x.planName&&i.jsxs("span",{children:[" - ",x.planName]}),x.planType&&i.jsxs("span",{className:"ms-1 text-foreground-450",children:["(",x.planType,")"]})]})},`${x.carrierName}-${x.planName}-${v}`))}),h&&i.jsx($,{size:"36-sm",color:"default",title:s("answerCards.insuranceViewMore",{count:t.length}),onClick:y,className:"w-full",children:s("answerCards.insuranceViewAll",{count:t.length})}),g&&i.jsx("button",{type:"button",onClick:b,className:"text-center text-foreground-450 underline text-sm hover:text-foreground-600 focus:text-foreground-600 focus:outline-none",children:s("answerCards.insuranceShowLess")})]})]})})}function Gpe(e){const t=e.trim();if(!t)return t;const n=t.match(/^(\d{3})(\d{3})(\d{4})$/);return n?`(${n[1]}) ${n[2]}-${n[3]}`:t}function $pe(e){const{location:t}=e,{address:n,phoneNumber:s}=t,{t:o}=V();return i.jsxs("div",{className:"flex flex-col gap-3",children:[n&&i.jsx("p",{className:"text-foreground-600 text-sm",children:n}),s&&i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("p",{className:"text-foreground-600 text-sm",children:Gpe(s)}),i.jsx($,{size:"36-sm",color:"default",title:`${o("answerCards.call")} ${s}`,onClick:()=>ks(`tel:${s}`),className:"w-full",children:o("answerCards.call")})]})]})}function qpe(e){const{url:t,providerName:n}=e,{t:s}=V(),o=EP(t);return i.jsx(ws,{href:t,title:s("answerCards.visitProviderWebsite"),className:"block truncate text-cocoa-550 underline text-sm hover:no-underline","aria-label":s("answerCards.ariaLabel.websiteTo",{place:n}),children:o})}function Kpe(e){const{providerName:t,locationName:n,url:s,location:o}=e;return i.jsxs("header",{className:"flex flex-col gap-3",children:[i.jsx("h2",{className:"text-foreground-750 text-md-strong",children:t}),n&&i.jsx("p",{className:"text-foreground-600 text-sm-strong",children:n}),s?i.jsx(qpe,{providerName:t,url:s}):null,o?i.jsx($pe,{location:o}):null]})}function Zpe(e){const{initialVisibleCount:t,specialties:n,showAll:s,onShowMore:o,onShowLess:r}=e,{t:c}=V();if(n.length===0)return null;const l=s?n:n.slice(0,t),u=n.length>t;return i.jsx(Em,{title:c("answerCards.specialties"),children:i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("ul",{className:"mt-0 space-y-1 ps-4",children:l.map((m,p)=>i.jsx("li",{className:"list-disc text-foreground-600 text-sm",children:m},p))}),u&&!s&&i.jsx($,{size:"36-sm",color:"default",title:c("answerCards.viewMoreSpecialties"),onClick:o,className:"w-full",children:c("answerCards.viewMore")}),u&&s&&i.jsx("button",{type:"button",onClick:r,className:"text-center text-foreground-450 underline text-sm hover:text-foreground-600 focus:text-foreground-600 focus:outline-none",children:c("answerCards.showLess")})]})})}const Ype=4;function Qpe(e){const{data:t}=e,{insuranceStatus:n,location:s,name:o,npi:r,professionalCredentials:c,url:l}=t,{uuid:u,name:m}=s,{t:p}=V(),{data:f,isLoading:h,error:g,refetch:y}=Fpe(r,{locationUuid:u}),[b,x]=d.useState(!1),{educations:v,insurances:S,location:C,otherSpecialtyTitles:T,primarySpecialtyTitle:w}=f??{},I=[o,...c??[]].filter(Boolean).join(", "),A=f?[w,...T??[]].filter(E=>!!E):[];return i.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[i.jsx(Kpe,{providerName:I,locationName:m,url:l,location:C}),g&&i.jsxs("div",{className:"rounded-md border border-system-red-250 bg-system-red-200/20 p-4",children:[i.jsx("p",{className:"mb-2 text-foreground-800 text-sm",children:p("answerCards.errorLoadingProviderInfo")}),i.jsx($,{size:"36-sm",color:"default",title:p("answerCards.tryAgain"),onClick:y,className:"w-full",children:p("answerCards.tryAgainButton")})]}),h?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx($e,{className:"me-3 size-6"}),i.jsx("span",{className:"text-foreground-450 text-sm",children:p("answerCards.loadingAdditionalDetails")})]}):i.jsxs(i.Fragment,{children:[i.jsx(Vpe,{educations:v}),i.jsx(Zpe,{initialVisibleCount:Ype,specialties:A,showAll:b,onShowMore:()=>x(!0),onShowLess:()=>x(!1)}),i.jsx(Wpe,{insurances:S,insuranceStatus:n})]})]})}const Jpe=d.lazy(()=>P(()=>import("./product-details-modal-C5_Kbc1B.js"),__vite__mapDeps([451,0,1,324,431,327,323,432,433,326,434,371,312,435,370,325,329,330,436,452,314,315,316,317,318,319,453,454,369,328,367,368,366,308,349,417,418])));function Xpe(e){const{data:{cardData:t,messageId:n}}=e;return i.jsx(d.Suspense,{fallback:null,children:i.jsx(Jpe,{cardData:t,messageId:n,onClose:()=>xu(null),viewMode:"side-pane"})})}function efe(){var l,u;const e=FA(),{t}=V(),n=lt({breakpoint:"md"}),s=lt({breakpoint:"lg"}),o=D("sidebar-narrow"),r=d.useRef(null);if(Ub({scrollableRef:r,source:(l=e==null?void 0:e.trackingOptions)==null?void 0:l.scrollSource,customData:(u=e==null?void 0:e.trackingOptions)==null?void 0:u.customData}),!e)return null;const c=()=>{var m;yt({source:"closeConversationPanelButton",messageId:(m=e.trackingOptions)==null?void 0:m.messageId}),xu(null)};return n?i.jsx(Es,{isOpen:!!e,onClose:c,className:"max-h-[80vh] w-full max-w-md p-4",trapFocus:!0,children:i.jsx("div",{className:"h-full overflow-auto",children:i.jsx(ES,{panelData:e,variant:"modal"})})}):i.jsx(Bb,{className:W("shrink-0",o&&s?"w-secondary-panel-slim":"w-secondary-panel"),children:i.jsxs("div",{ref:r,className:"size-full space-y-16 overflow-auto",children:[i.jsx(a6,{right:i.jsx($,{title:t("common.closeSidePaneTitle"),color:"subtle-dimmed-inverted",variant:"square",onClick:c,children:i.jsx(Yt,{className:"size-4"})})}),i.jsx(ES,{panelData:e,variant:"panel"})]})})}function ES(e){const{panelData:t,variant:n}=e;switch(t.type){case"devModeMessageInfo":return HR;case"chainOfThought":return i.jsx(Mpe,{chainOfThoughtItems:t.data.chainOfThoughtItems});case"citations":return i.jsx(Ope,{data:t.data,variant:n});case"__TODO___REPLACE_ME__":throw new Error("ConversationPanelContent: Unimplemented type");case"shoppingProductDetails":return i.jsx(Xpe,{data:t.data},t.data.cardData.offerId);case"healthcareEntity":return i.jsx(Qpe,{data:t.data.cardData},t.data.cardData.npi)}return null}const pd=8;function tfe(e){const{children:t,isOpen:n,isSmallScreen:s,panelWidth:o}=e,r=jr(),c=d.useRef(!0),l=lt({breakpoint:"lg"}),u=D("sidebar-narrow");d.useEffect(()=>{c.current=!1},[]);const m=!c.current||!n;return i.jsx(ee.div,{className:"relative h-full overflow-hidden will-change-auto",initial:{width:n?o:0,marginLeft:n&&!r?pd:0,marginRight:n&&r?pd:0},animate:{width:n?o:0,marginLeft:n&&!r?pd:0,marginRight:n&&r?pd:0},transition:m&&!s?_t:{duration:0},children:n&&i.jsx(ee.div,{className:W("absolute end-0 size-full",u&&l?"sm:w-secondary-panel-slim":"sm:w-secondary-panel"),initial:m?"initial":"animate",animate:"animate",exit:"exit",variants:{initial:Ce,animate:Be,exit:Ce},transition:m&&!s?_t:{duration:0},children:t})})}const nfe=R9("/chats/$conversationId");function sfe(e){const{disableStickyHeader:t,reactionsToDisable:n,postWelcomeContent:s}=e,{conversationId:o}=nfe.useParams(),r=D("chat-layout-v2"),c=lt({breakpoint:"sm"}),l=lt({breakpoint:"lg"}),u=FA(),m=z(Ae),p=D("conversation-id-sync"),f=D("sidebar-narrow");return d.useEffect(()=>{p&&m(o)},[o,m,p]),d.useEffect(()=>()=>{xu(null)},[]),r?i.jsxs(i.Fragment,{children:[i.jsxs(Bb,{className:"relative h-full flex-1 overflow-hidden will-change-auto",children:[i.jsx(l1,{disableStickyHeader:t,reactionsToDisable:n,postWelcomeContent:s}),i.jsx(Uk,{}),i.jsx(Fk,{}),i.jsx(Bk,{})]}),i.jsx(tfe,{isOpen:!!u,isSmallScreen:c,panelWidth:f&&l?AR:ER,children:i.jsx(efe,{})})]}):i.jsx(l1,{disableStickyHeader:t,reactionsToDisable:n,postWelcomeContent:s})}const ofe=ze("/chats/$conversationId")({component:sfe}),afe=ze("/topic-selection")(),rfe=ze("/login")(),ife=ze("/library")(),cfe=ze("/gaming")(),lfe=ze("/gallery")(),ufe=ze("/daily")(),dfe=ze("/agents")(),mfe=ze("/referrals/")(),pfe=ze("/labs_/")(),ffe=ze("/subscription/start")(),hfe=ze("/subscription/manage")(),gfe=ze("/shares/$conversationId")(),bfe=ze("/referrals/rules")(),vfe=ze("/pro/subscribe")(),yfe=ze("/pages/$pageId")(),Cfe=ze("/memory/narrative")(),xfe=ze("/gallery/$galleryItemId")(),Sfe=ze("/e/sol")(),wfe=ze("/e/so")(),Ife=ze("/connector/callback")(),Tfe=ze("/chats/private")(),Efe=ze("/campaigns/$campaignId")(),Afe=ze("/labs_/portrait/")(),_fe=ze("/labs_/career-coach/")(),kfe=ze("/labs_/audio-expression/")(),Nfe=ze("/shares/tasks/$shareId")(),Mfe=ze("/shares/podcasts/$shareId")(),Rfe=ze("/shares/pages/$shareId")(),Pfe=ze("/shares/3d-generations/$shareId")(),Lfe=ze("/pro/redeem/$redeemCode")(),jfe=ze("/pro/ewallet/return")(),Ofe=ze("/podcasts/$podcastType/$podcastId")(),Dfe=ze("/labs_/portrait/talk")(),Ufe=ze("/labs_/experiments/$experimentAlias")(),Ffe=ze("/labs_/career-coach/mock-interview")(),Bfe=ze("/discover/{-$modalType}/{-$modalId}")(),Vfe=ze("/chats_/$conversationId/talk")(),Hfe=ze("/labs_/experiments/3d-generations/")(),zfe=ze("/labs_/experiments/3d-generations/my-creations")(),Wfe=afe.update({id:"/topic-selection",path:"/topic-selection",getParentRoute:()=>We}).lazy(()=>P(()=>import("./topic-selection.lazy-Ks87Lvzm.js"),__vite__mapDeps([455,0,1])).then(e=>e.Route)),Gfe=rfe.update({id:"/login",path:"/login",getParentRoute:()=>We}).lazy(()=>P(()=>import("./login.lazy-p7_Et4if.js"),__vite__mapDeps([456,0,1,409])).then(e=>e.Route)),$fe=ife.update({id:"/library",path:"/library",getParentRoute:()=>We}).lazy(()=>P(()=>import("./library.lazy-BOB8LvDD.js"),__vite__mapDeps([457,0,1,458,459,460,461,448,449,462])).then(e=>e.Route)),qfe=cfe.update({id:"/gaming",path:"/gaming",getParentRoute:()=>We}).lazy(()=>P(()=>import("./gaming.lazy-CtQ5w3W0.js"),__vite__mapDeps([463,0,1,343,344])).then(e=>e.Route)),v6=lfe.update({id:"/gallery",path:"/gallery",getParentRoute:()=>We}).lazy(()=>P(()=>import("./gallery._galleryItemId.lazy-CjNXW6Ye.js").then(e=>e.g),__vite__mapDeps([464,0,1])).then(e=>e.Route)),Kfe=ufe.update({id:"/daily",path:"/daily",getParentRoute:()=>We}).lazy(()=>P(()=>import("./daily.lazy-DbtiYp1K.js"),__vite__mapDeps([465,0,1,466,467,468,469,470,471,472,473,474,475,397,476,449,477])).then(e=>e.Route)),Zfe=dfe.update({id:"/agents",path:"/agents",getParentRoute:()=>We}).lazy(()=>P(()=>import("./agents.lazy-DvbSDBb9.js"),__vite__mapDeps([478,0,1])).then(e=>e.Route)),Yfe=Epe.update({id:"/",path:"/",getParentRoute:()=>We}),Qfe=mfe.update({id:"/referrals/",path:"/referrals/",getParentRoute:()=>We}).lazy(()=>P(()=>import("./index.lazy-BFmq7pRD.js"),__vite__mapDeps([479,0,1,332,315,331,334,480,481,482,483,484,485])).then(e=>e.Route)),Jfe=pfe.update({id:"/labs_/",path:"/labs/",getParentRoute:()=>We}).lazy(()=>P(()=>import("./index.lazy-DA5iTuwx.js"),__vite__mapDeps([486,0,1,487,488,489,490,491,492,476])).then(e=>e.Route)),Xfe=ffe.update({id:"/subscription/start",path:"/subscription/start",getParentRoute:()=>We}).lazy(()=>P(()=>import("./subscription.start.lazy-DIYz9eHq.js"),__vite__mapDeps([493,0,1])).then(e=>e.Route)),ehe=hfe.update({id:"/subscription/manage",path:"/subscription/manage",getParentRoute:()=>We}).lazy(()=>P(()=>import("./subscription.manage.lazy-3BPPGhMh.js"),__vite__mapDeps([494,0,1,306])).then(e=>e.Route)),the=gfe.update({id:"/shares/$conversationId",path:"/shares/$conversationId",getParentRoute:()=>We}).lazy(()=>P(()=>import("./shares._conversationId.lazy-nZw1KwoR.js"),__vite__mapDeps([495,0,1])).then(e=>e.Route)),nhe=bfe.update({id:"/referrals/rules",path:"/referrals/rules",getParentRoute:()=>We}).lazy(()=>P(()=>import("./rules.lazy-BYwKUt_h.js"),__vite__mapDeps([496,0,1,315,334,481,335,497])).then(e=>e.Route)),she=vfe.update({id:"/pro/subscribe",path:"/pro/subscribe",getParentRoute:()=>We}).lazy(()=>P(()=>import("./pro.subscribe.lazy-oUpQdF-V.js"),__vite__mapDeps([498,0,1,316,317,318,319,499,500,396,501,502,503,504,311,312,322,505,506,452,314,315,453,330,507,342,508,509,510,511,512,513,514,515,343,344,516,517])).then(e=>e.Route)),ohe=yfe.update({id:"/pages/$pageId",path:"/pages/$pageId",getParentRoute:()=>We}).lazy(()=>P(()=>import("./pages._pageId.lazy-Pxu9hcai.js"),__vite__mapDeps([518,0,1,519,458,446,520,521,522,523,524,525,526,527,528,406,529,530,531,445,471,532,533,459,534])).then(e=>e.Route)),ahe=Cfe.update({id:"/memory/narrative",path:"/memory/narrative",getParentRoute:()=>We}).lazy(()=>P(()=>import("./memory.narrative.lazy-CQt_WdXR.js"),__vite__mapDeps([535,0,1,345])).then(e=>e.Route)),rhe=xfe.update({id:"/$galleryItemId",path:"/$galleryItemId",getParentRoute:()=>v6}).lazy(()=>P(()=>import("./gallery._galleryItemId.lazy-CjNXW6Ye.js").then(e=>e.a),__vite__mapDeps([464,0,1])).then(e=>e.Route)),ihe=Sfe.update({id:"/e/sol",path:"/e/sol",getParentRoute:()=>We}).lazy(()=>P(()=>import("./e.sol.lazy-DaQ7Yhkj.js"),__vite__mapDeps([536,0,1])).then(e=>e.Route)),che=wfe.update({id:"/e/so",path:"/e/so",getParentRoute:()=>We}).lazy(()=>P(()=>import("./e.so.lazy-CGYgrDwo.js"),__vite__mapDeps([537,0,1])).then(e=>e.Route)),lhe=Ife.update({id:"/connector/callback",path:"/connector/callback",getParentRoute:()=>We}).lazy(()=>P(()=>import("./connector.callback.lazy-DTV3N7Cn.js"),__vite__mapDeps([538,0,1])).then(e=>e.Route)),uhe=Tfe.update({id:"/chats/private",path:"/chats/private",getParentRoute:()=>We}).lazy(()=>P(()=>import("./chats.private.lazy-TebyEZS2.js"),__vite__mapDeps([539,0,1])).then(e=>e.Route)),dhe=Efe.update({id:"/campaigns/$campaignId",path:"/campaigns/$campaignId",getParentRoute:()=>We}).lazy(()=>P(()=>import("./campaigns._campaignId.lazy-zwghYZir.js"),__vite__mapDeps([540,0,1])).then(e=>e.Route)),mhe=ofe.update({id:"/chats/$conversationId",path:"/chats/$conversationId",getParentRoute:()=>We}),phe=Afe.update({id:"/labs_/portrait/",path:"/labs/portrait/",getParentRoute:()=>We}).lazy(()=>P(()=>import("./index.lazy-CVmOmgCe.js"),__vite__mapDeps([541,0,1])).then(e=>e.Route)),fhe=_fe.update({id:"/labs_/career-coach/",path:"/labs/career-coach/",getParentRoute:()=>We}).lazy(()=>P(()=>import("./mock-interview.lazy-Dt0qFxTn.js").then(e=>e.i),__vite__mapDeps([542,0,1])).then(e=>e.Route)),hhe=kfe.update({id:"/labs_/audio-expression/",path:"/labs/audio-expression/",getParentRoute:()=>We}).lazy(()=>P(()=>import("./index.lazy-DL_58bMT.js"),__vite__mapDeps([543,0,1,343,344,544,394,395,392,393,397])).then(e=>e.Route)),ghe=Nfe.update({id:"/shares/tasks/$shareId",path:"/shares/tasks/$shareId",getParentRoute:()=>We}).lazy(()=>P(()=>import("./shares.tasks._shareId.lazy-slq6SLkh.js"),__vite__mapDeps([545,0,1,532,353,444,436])).then(e=>e.Route)),bhe=Mfe.update({id:"/shares/podcasts/$shareId",path:"/shares/podcasts/$shareId",getParentRoute:()=>We}).lazy(()=>P(()=>import("./shares.podcasts._shareId.lazy-CHEFYocK.js"),__vite__mapDeps([546,0,1,449,462,474,475])).then(e=>e.Route)),vhe=Rfe.update({id:"/shares/pages/$shareId",path:"/shares/pages/$shareId",getParentRoute:()=>We}).lazy(()=>P(()=>import("./shares.pages._shareId.lazy-CmelRboc.js"),__vite__mapDeps([547,0,1,458,534,519,446,520,521,522,523,524,525,526,527,528,406,529,530,531,445,471,532,533,460])).then(e=>e.Route)),yhe=Pfe.update({id:"/shares/3d-generations/$shareId",path:"/shares/3d-generations/$shareId",getParentRoute:()=>We}).lazy(()=>P(()=>import("./shares.3d-generations._shareId.lazy-hZB694et.js"),__vite__mapDeps([548,0,1,549,342,550,551,526,487,552])).then(e=>e.Route)),Che=Lfe.update({id:"/pro/redeem/$redeemCode",path:"/pro/redeem/$redeemCode",getParentRoute:()=>We}).lazy(()=>P(()=>import("./pro.redeem._redeemCode.lazy-B65VKzON.js"),__vite__mapDeps([553,0,1])).then(e=>e.Route)),xhe=jfe.update({id:"/pro/ewallet/return",path:"/pro/ewallet/return",getParentRoute:()=>We}).lazy(()=>P(()=>import("./pro.ewallet.return.lazy-CEmWd6vo.js"),__vite__mapDeps([554,0,1,500,396])).then(e=>e.Route)),She=Ofe.update({id:"/podcasts/$podcastType/$podcastId",path:"/podcasts/$podcastType/$podcastId",getParentRoute:()=>We}).lazy(()=>P(()=>import("./podcasts._podcastType._podcastId.lazy-46fWijPk.js"),__vite__mapDeps([555,0,1,466,467,468,469,470,471,472,473,474,475,397,476,449,477])).then(e=>e.Route)),whe=Dfe.update({id:"/labs_/portrait/talk",path:"/labs/portrait/talk",getParentRoute:()=>We}).lazy(()=>P(()=>import("./talk.lazy-DqCwjWA-.js"),__vite__mapDeps([556,0,1,557,558,559,560,442,476])).then(e=>e.Route)),Ihe=Ufe.update({id:"/labs_/experiments/$experimentAlias",path:"/labs/experiments/$experimentAlias",getParentRoute:()=>We}).lazy(()=>P(()=>import("./experiments._experimentAlias.lazy-ffz3l_-j.js").then(e=>e.e),__vite__mapDeps([561,0,1,476,394,395,487,488,489,490,491,492])).then(e=>e.Route)),The=Ffe.update({id:"/labs_/career-coach/mock-interview",path:"/labs/career-coach/mock-interview",getParentRoute:()=>We}).lazy(()=>P(()=>import("./mock-interview.lazy-Dt0qFxTn.js").then(e=>e.m),__vite__mapDeps([542,0,1])).then(e=>e.Route)),Ehe=Bfe.update({id:"/discover/{-$modalType}/{-$modalId}",path:"/discover/{-$modalType}/{-$modalId}",getParentRoute:()=>We}).lazy(()=>P(()=>import("./discover._-_modalType_._-_modalId_.lazy-DAXQ9LwV.js"),__vite__mapDeps([562,0,1])).then(e=>e.Route)),Ahe=Vfe.update({id:"/chats_/$conversationId/talk",path:"/chats/$conversationId/talk",getParentRoute:()=>We}).lazy(()=>P(()=>import("./chats_._conversationId.talk.lazy-DC9BVVd7.js"),__vite__mapDeps([563,0,1,557,558,559,560,442,476])).then(e=>e.Route)),_he=Hfe.update({id:"/labs_/experiments/3d-generations/",path:"/labs/experiments/3d-generations/",getParentRoute:()=>We}).lazy(()=>P(()=>import("./my-creations.lazy-Dm59p6s3.js").then(e=>e.i),__vite__mapDeps([564,0,1,549,342,550,551,526,487,404,565,566,544,567,359,344,467,468,469,470,568])).then(e=>e.Route)),khe=zfe.update({id:"/labs_/experiments/3d-generations/my-creations",path:"/labs/experiments/3d-generations/my-creations",getParentRoute:()=>We}).lazy(()=>P(()=>import("./my-creations.lazy-Dm59p6s3.js").then(e=>e.m),__vite__mapDeps([564,0,1,549,342,550,551,526,487,404,565,566,544,567,359,344,467,468,469,470,568])).then(e=>e.Route)),Nhe={GalleryGalleryItemIdLazyRoute:rhe},Mhe=v6._addFileChildren(Nhe),Rhe={IndexRoute:Yfe,AgentsLazyRoute:Zfe,DailyLazyRoute:Kfe,GalleryLazyRoute:Mhe,GamingLazyRoute:qfe,LibraryLazyRoute:$fe,LoginLazyRoute:Gfe,TopicSelectionLazyRoute:Wfe,ChatsConversationIdRoute:mhe,CampaignsCampaignIdLazyRoute:dhe,ChatsPrivateLazyRoute:uhe,ConnectorCallbackLazyRoute:lhe,ESoLazyRoute:che,ESolLazyRoute:ihe,MemoryNarrativeLazyRoute:ahe,PagesPageIdLazyRoute:ohe,ProSubscribeLazyRoute:she,ReferralsRulesLazyRoute:nhe,SharesConversationIdLazyRoute:the,SubscriptionManageLazyRoute:ehe,SubscriptionStartLazyRoute:Xfe,LabsIndexLazyRoute:Jfe,ReferralsIndexLazyRoute:Qfe,ChatsConversationIdTalkLazyRoute:Ahe,DiscoverModalTypeModalIdLazyRoute:Ehe,LabsCareerCoachMockInterviewLazyRoute:The,LabsExperimentsExperimentAliasLazyRoute:Ihe,LabsPortraitTalkLazyRoute:whe,PodcastsPodcastTypePodcastIdLazyRoute:She,ProEwalletReturnLazyRoute:xhe,ProRedeemRedeemCodeLazyRoute:Che,Shares3dGenerationsShareIdLazyRoute:yhe,SharesPagesShareIdLazyRoute:vhe,SharesPodcastsShareIdLazyRoute:bhe,SharesTasksShareIdLazyRoute:ghe,LabsAudioExpressionIndexLazyRoute:hhe,LabsCareerCoachIndexLazyRoute:fhe,LabsPortraitIndexLazyRoute:phe,LabsExperiments3dGenerationsMyCreationsLazyRoute:khe,LabsExperiments3dGenerationsIndexLazyRoute:_he},Phe=We._addFileChildren(Rhe)._addFileTypes(),Pa=P9({routeTree:Phe}),Lhe=()=>P(()=>import("./react-B7EQstoL.js"),__vite__mapDeps([569,0,1])).then(e=>e.domMax),jhe=new L9({defaultOptions:{queries:{retry:0,refetchOnWindowFocus:!1}}});function Ohe(){return i.jsx(r5,{reducedMotion:"user",children:i.jsx(K9,{features:Lhe,strict:!0,children:i.jsx(j9,{client:jhe,children:i.jsx(O9,{router:Pa})})})})}(function(){const e="onabort onactivate onactivateinvisible onafterprint onafterupdate onanimationcancel onanimationend onanimationiteration onanimationstart onariarequest onauxclick onbeforeactivate onbeforecopy onbeforecut onbeforedeactivate onbeforeeditfocus onbeforepaste onbeforeprint onbeforeunload onbegin onblur onbounce oncancel oncanplay oncanplaythrough oncellchange onchange onclick onclose oncommand oncontextmenu oncontrolselect oncopy oncuechange oncut ondataavailable ondatasetchanged ondatasetcomplete ondblclick ondeactivate ondrag ondragdrop ondragend ondragenter ondragexit ondragleave ondragover ondragstart ondrop ondurationchange onemptied onend onended onerror onerrorupdate onexit onfilterchange onfinish onfocus onfocusin onfocusout onformdata onfullscreenchange onfullscreenerror ongotpointercapture onhelp oninput oninvalid onkeydown onkeypress onkeyup onlayoutcomplete onload onloadeddata onloadedmetadata onloadend onloadstart onlosecapture onlostpointercapture onmediacomplete onmediaerror onmessage onmousedown onmouseenter onmouseleave onmousemove onmouseout onmouseover onmouseup onmousewheel onmove onmoveend onmovestart onmozfullscreenchange onmozfullscreenerror onmscontentzoom onmsgesturechange onmsgesturedoubletap onmsgestureend onmsgesturehold onmsgesturestart onmsgesturetap onmsgotpointercapture onmsinertiastart onmslostpointercapture onmsmanipulationstatechanged onmspointercancel onmspointerdown onmspointerenter onmspointerleave onmspointermove onmspointerout onmspointerover onmspointerup onoffline ononline onoutofsync onoverscroll onpaste onpause onplay onplaying onpointercancel onpointerdown onpointerenter onpointerleave onpointermove onpointerout onpointerover onpointerrawupdate onpointerup onprogress onpropertychange onratechange onreadystatechange onrepeat onreset onresize onresizeend onresizestart onresume onreverse onrowdelete onrowenter onrowexit onrowinserted onscroll onscrollend onsearch onseek onseeked onseeking onselect onselectionchange onselectstart onshow onstalled onstart onstop onstorage onsubmit onsuspend onsynchrestored ontimeerror ontimeupdate ontoggle ontrackchange ontransitioncancel ontransitionend ontransitionrun ontransitionstart onunload onurlflip onvolumechange onwaiting onwebkitanimationend onwebkitanimationiteration onwebkitanimationstart onwebkitfullscreenchange onwebkitfullscreenerror onwebkittransitionend onwheel".split(" ");function t(){if(typeof window<"u"){const f=[];for(const h in HTMLElement.prototype)h.slice(0,2)==="on"&&f.push(h);return f}return e}const n=typeof window<"u",s=()=>{throw new TypeError("undefined conversion")},o=()=>null,{toLowerCase:r,toUpperCase:c}=String.prototype;function l(){throw new TypeError("Illegal constructor")}function u(){throw new TypeError("Illegal constructor")}const{l:m}=function(){function f(X){let he=te.get(X);return he===void 0&&(he=C(null),te.set(X,he)),he}function h(X){const he=A(X);if(he==null||A(he)!==E)throw Error();for(const Ue of I(he))T(X,Ue,{value:X[Ue]});return X}function g(X,he){w(X.prototype),delete X.name,T(X,"name",{value:he})}function y(X){return he=>he instanceof X&&te.has(he)}function b(X,he){function Ue(ve,Pe){const _e=he[Pe]||(X=="default"?o:s),Oe=w(new ve(H,X));return w({[Pe](Ve,...j){if(Ve=_e(""+Ve,...j),Ve==null){if(X=="default")return Ve;Ve=""}return Ve=""+Ve,j=w(C(Oe)),f(j).v=Ve,j}}[Pe])}const ie=C(l.prototype);for(const ve of I(J))ie[ve]=Ue(J[ve],ve);return T(ie,"name",{value:X,writable:!1,configurable:!1,enumerable:!0}),w(ie)}function x(X,he,Ue,ie="",ve=""){if(X=c.apply(String(X)),(ie=ve||ie)||(ie="http://www.w3.org/1999/xhtml"),ie=R.apply(q,[ie])?q[ie]:null){if(R.apply(ie,[X])&&ie[X]&&R.apply(ie[X][he],[Ue])&&ie[X][he][Ue])return ie[X][he][Ue];if(R.apply(ie,["*"])&&R.apply(ie["*"][he],[Ue])&&ie["*"][he][Ue])return ie["*"][he][Ue]}}function v(){return me}const{assign:S,create:C,defineProperty:T,freeze:w,getOwnPropertyNames:I,getPrototypeOf:A,prototype:E}=Object,{hasOwnProperty:R}=E,{forEach:U,push:K}=Array.prototype,H=Symbol(),te=h(new WeakMap),oe=h([]),ne=h([]);let ge=!0,me=null,be=!1;class we{constructor(he,Ue){if(he!==H)throw Error("cannot call the constructor");T(this,"policyName",{value:Ue,enumerable:!0})}toString(){return f(this).v}valueOf(){return f(this).v}}class se extends we{}g(se,"TrustedScriptURL");class ae extends we{}g(ae,"TrustedHTML");class fe extends we{}g(fe,"TrustedScript"),g(we,"TrustedType");const re=w(C(new ae(H,"")));f(re).v="";const ke=w(C(new fe(H,"")));f(ke).v="";const q={"http://www.w3.org/1999/xhtml":{EMBED:{attributes:{src:se.name}},IFRAME:{attributes:{srcdoc:ae.name}},OBJECT:{attributes:{data:se.name,codebase:se.name}},SCRIPT:{attributes:{src:se.name,text:fe.name},properties:{innerText:fe.name,textContent:fe.name,text:fe.name}},"*":{attributes:{},properties:{innerHTML:ae.name,outerHTML:ae.name}}},"http://www.w3.org/2000/svg":{"*":{attributes:{},properties:{}}}};var G={codebase:"codeBase",formaction:"formAction"};!n||"srcdoc"in HTMLIFrameElement.prototype||delete q["http://www.w3.org/1999/xhtml"].IFRAME.attributes.srcdoc;for(const X of Object.keys(q["http://www.w3.org/1999/xhtml"])){q["http://www.w3.org/1999/xhtml"][X].properties||(q["http://www.w3.org/1999/xhtml"][X].properties={});for(const he of Object.keys(q["http://www.w3.org/1999/xhtml"][X].attributes))q["http://www.w3.org/1999/xhtml"][X].properties[G[he]?G[he]:he]=q["http://www.w3.org/1999/xhtml"][X].attributes[he]}for(const X of t())q["http://www.w3.org/1999/xhtml"]["*"].attributes[X]="TrustedScript",q["http://www.w3.org/2000/svg"]["*"].attributes[X]="TrustedScript";const J={createHTML:ae,createScriptURL:se,createScript:fe},Ie=J.hasOwnProperty;return G=C(u.prototype),S(G,{createPolicy:function(X,he){if(!X.match(/^[-#a-zA-Z0-9=_/@.%]+$/g))throw new TypeError("Policy "+X+" contains invalid characters.");if(be&&ne.indexOf(X)===-1&&ne.indexOf("*")===-1)throw new TypeError("Policy "+X+" disallowed.");if(X==="default"&&me)throw new TypeError("Policy "+X+" already exists.");if(be&&!ge&&oe.indexOf(X)!==-1)throw new TypeError("Policy "+X+" exists.");oe.push(X);const Ue=C(null);if(he&&typeof he=="object")for(const ie of I(he))Ie.call(J,ie)&&(Ue[ie]=he[ie]);else console.warn("trustedTypes.createPolicy "+X+" was given an empty policy");return w(Ue),he=b(X,Ue),X==="default"&&(me=he),he},h:y(ae),j:y(se),i:y(fe),c:function(X,he,Ue="",ie=""){return he=r.apply(String(he)),x(X,"attributes",he,Ue,ie)||null},f:function(X,he,Ue=""){return x(X,"properties",String(he),Ue)||null},g:function(X=""){if(!X)try{X=document.documentElement.namespaceURI}catch{X="http://www.w3.org/1999/xhtml"}return(X=q[X])?JSON.parse(JSON.stringify(X)):{}},a:re,b:ke,o:me,TrustedHTML:ae,TrustedScriptURL:se,TrustedScript:fe}),T(G,"defaultPolicy",{get:v,set:()=>{}}),{l:w(G),w:function(X,he){be=!0,ne.length=0,U.call(X,Ue=>{K.call(ne,""+Ue)}),ge=he,oe.length=0},m:function(){be=!1},s:v,u:function(){me=null,oe.splice(oe.indexOf("default"),1)}}}();if(typeof window<"u"&&(window.TrustedTypes&&typeof window.trustedTypes>"u"&&(window.trustedTypes=Object.freeze(window.TrustedTypes)),typeof window.trustedTypes>"u")){var p=Object.create(u.prototype);Object.assign(p,{isHTML:m.h,isScriptURL:m.j,isScript:m.i,createPolicy:m.createPolicy,getAttributeType:m.c,getPropertyType:m.f,getTypeMapping:m.g,emptyHTML:m.a,emptyScript:m.b,_isPolyfill_:!0}),Object.defineProperty(p,"defaultPolicy",Object.getOwnPropertyDescriptor(m,"defaultPolicy")||{}),window.trustedTypes=Object.freeze(p),window.TrustedHTML=m.TrustedHTML,window.TrustedScriptURL=m.TrustedScriptURL,window.TrustedScript=m.TrustedScript,window.TrustedTypePolicy=l,window.TrustedTypePolicyFactory=u}}).call(void 0);/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:y6,setPrototypeOf:AS,isFrozen:Dhe,getPrototypeOf:Uhe,getOwnPropertyDescriptor:Fhe}=Object;let{freeze:Cn,seal:rs,create:C6}=Object,{apply:u1,construct:d1}=typeof Reflect<"u"&&Reflect;Cn||(Cn=function(t){return t});rs||(rs=function(t){return t});u1||(u1=function(t,n,s){return t.apply(n,s)});d1||(d1=function(t,n){return new t(...n)});const fd=xn(Array.prototype.forEach),Bhe=xn(Array.prototype.lastIndexOf),_S=xn(Array.prototype.pop),Hc=xn(Array.prototype.push),Vhe=xn(Array.prototype.splice),Md=xn(String.prototype.toLowerCase),bh=xn(String.prototype.toString),kS=xn(String.prototype.match),zc=xn(String.prototype.replace),Hhe=xn(String.prototype.indexOf),zhe=xn(String.prototype.trim),gs=xn(Object.prototype.hasOwnProperty),hn=xn(RegExp.prototype.test),Wc=Whe(TypeError);function xn(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return u1(e,t,s)}}function Whe(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return d1(e,n)}}function Ze(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Md;AS&&AS(e,null);let s=t.length;for(;s--;){let o=t[s];if(typeof o=="string"){const r=n(o);r!==o&&(Dhe(t)||(t[s]=r),o=r)}e[o]=!0}return e}function Ghe(e){for(let t=0;t<e.length;t++)gs(e,t)||(e[t]=null);return e}function Ka(e){const t=C6(null);for(const[n,s]of y6(e))gs(e,n)&&(Array.isArray(s)?t[n]=Ghe(s):s&&typeof s=="object"&&s.constructor===Object?t[n]=Ka(s):t[n]=s);return t}function Gc(e,t){for(;e!==null;){const s=Fhe(e,t);if(s){if(s.get)return xn(s.get);if(typeof s.value=="function")return xn(s.value)}e=Uhe(e)}function n(){return null}return n}const NS=Cn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),vh=Cn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),yh=Cn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),$he=Cn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ch=Cn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),qhe=Cn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),MS=Cn(["#text"]),RS=Cn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),xh=Cn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),PS=Cn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hd=Cn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Khe=rs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Zhe=rs(/<%[\w\W]*|[\w\W]*%>/gm),Yhe=rs(/\$\{[\w\W]*/gm),Qhe=rs(/^data-[\-\w.\u00B7-\uFFFF]+$/),Jhe=rs(/^aria-[\-\w]+$/),x6=rs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Xhe=rs(/^(?:\w+script|data):/i),ege=rs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),S6=rs(/^html$/i),tge=rs(/^[a-z][.\w]*(-[.\w]+)+$/i);var LS=Object.freeze({__proto__:null,ARIA_ATTR:Jhe,ATTR_WHITESPACE:ege,CUSTOM_ELEMENT:tge,DATA_ATTR:Qhe,DOCTYPE_NAME:S6,ERB_EXPR:Zhe,IS_ALLOWED_URI:x6,IS_SCRIPT_OR_DATA:Xhe,MUSTACHE_EXPR:Khe,TMPLIT_EXPR:Yhe});const $c={element:1,text:3,progressingInstruction:7,comment:8,document:9},nge=function(){return typeof window>"u"?null:window},sge=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(s=n.getAttribute(o));const r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML(c){return c},createScriptURL(c){return c}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},jS=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function w6(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:nge();const t=Te=>w6(Te);if(t.version="3.2.4",t.removed=[],!e||!e.document||e.document.nodeType!==$c.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const s=n,o=s.currentScript,{DocumentFragment:r,HTMLTemplateElement:c,Node:l,Element:u,NodeFilter:m,NamedNodeMap:p=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:h,trustedTypes:g}=e,y=u.prototype,b=Gc(y,"cloneNode"),x=Gc(y,"remove"),v=Gc(y,"nextSibling"),S=Gc(y,"childNodes"),C=Gc(y,"parentNode");if(typeof c=="function"){const Te=n.createElement("template");Te.content&&Te.content.ownerDocument&&(n=Te.content.ownerDocument)}let T,w="";const{implementation:I,createNodeIterator:A,createDocumentFragment:E,getElementsByTagName:R}=n,{importNode:U}=s;let K=jS();t.isSupported=typeof y6=="function"&&typeof C=="function"&&I&&I.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:H,ERB_EXPR:te,TMPLIT_EXPR:oe,DATA_ATTR:ne,ARIA_ATTR:ge,IS_SCRIPT_OR_DATA:me,ATTR_WHITESPACE:be,CUSTOM_ELEMENT:we}=LS;let{IS_ALLOWED_URI:se}=LS,ae=null;const fe=Ze({},[...NS,...vh,...yh,...Ch,...MS]);let re=null;const ke=Ze({},[...RS,...xh,...PS,...hd]);let q=Object.seal(C6(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),G=null,J=null,Ie=!0,X=!0,he=!1,Ue=!0,ie=!1,ve=!0,Pe=!1,_e=!1,Oe=!1,Ve=!1,j=!1,O=!1,pe=!0,Re=!1;const xe="user-content-";let qe=!0,Le=!1,Je={},Dt=null;const cs=Ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Tn=null;const La=Ze({},["audio","video","img","source","image","track"]);let uo=null;const Gn=Ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),mo="http://www.w3.org/1998/Math/MathML",dn="http://www.w3.org/2000/svg",Mn="http://www.w3.org/1999/xhtml";let ls=Mn,qo=!1,po=null;const ja=Ze({},[mo,dn,Mn],bh);let Rs=Ze({},["mi","mo","mn","ms","mtext"]),Rt=Ze({},["annotation-xml"]);const ht=Ze({},["title","style","font","a","script"]);let Ps=null;const Oa=["application/xhtml+xml","text/html"],Ko="text/html";let Xe=null,on=null;const Da=n.createElement("form"),Ua=function(L){return L instanceof RegExp||L instanceof Function},fo=function(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(on&&on===L)){if((!L||typeof L!="object")&&(L={}),L=Ka(L),Ps=Oa.indexOf(L.PARSER_MEDIA_TYPE)===-1?Ko:L.PARSER_MEDIA_TYPE,Xe=Ps==="application/xhtml+xml"?bh:Md,ae=gs(L,"ALLOWED_TAGS")?Ze({},L.ALLOWED_TAGS,Xe):fe,re=gs(L,"ALLOWED_ATTR")?Ze({},L.ALLOWED_ATTR,Xe):ke,po=gs(L,"ALLOWED_NAMESPACES")?Ze({},L.ALLOWED_NAMESPACES,bh):ja,uo=gs(L,"ADD_URI_SAFE_ATTR")?Ze(Ka(Gn),L.ADD_URI_SAFE_ATTR,Xe):Gn,Tn=gs(L,"ADD_DATA_URI_TAGS")?Ze(Ka(La),L.ADD_DATA_URI_TAGS,Xe):La,Dt=gs(L,"FORBID_CONTENTS")?Ze({},L.FORBID_CONTENTS,Xe):cs,G=gs(L,"FORBID_TAGS")?Ze({},L.FORBID_TAGS,Xe):{},J=gs(L,"FORBID_ATTR")?Ze({},L.FORBID_ATTR,Xe):{},Je=gs(L,"USE_PROFILES")?L.USE_PROFILES:!1,Ie=L.ALLOW_ARIA_ATTR!==!1,X=L.ALLOW_DATA_ATTR!==!1,he=L.ALLOW_UNKNOWN_PROTOCOLS||!1,Ue=L.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ie=L.SAFE_FOR_TEMPLATES||!1,ve=L.SAFE_FOR_XML!==!1,Pe=L.WHOLE_DOCUMENT||!1,Ve=L.RETURN_DOM||!1,j=L.RETURN_DOM_FRAGMENT||!1,O=L.RETURN_TRUSTED_TYPE||!1,Oe=L.FORCE_BODY||!1,pe=L.SANITIZE_DOM!==!1,Re=L.SANITIZE_NAMED_PROPS||!1,qe=L.KEEP_CONTENT!==!1,Le=L.IN_PLACE||!1,se=L.ALLOWED_URI_REGEXP||x6,ls=L.NAMESPACE||Mn,Rs=L.MATHML_TEXT_INTEGRATION_POINTS||Rs,Rt=L.HTML_INTEGRATION_POINTS||Rt,q=L.CUSTOM_ELEMENT_HANDLING||{},L.CUSTOM_ELEMENT_HANDLING&&Ua(L.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=L.CUSTOM_ELEMENT_HANDLING.tagNameCheck),L.CUSTOM_ELEMENT_HANDLING&&Ua(L.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=L.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),L.CUSTOM_ELEMENT_HANDLING&&typeof L.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=L.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ie&&(X=!1),j&&(Ve=!0),Je&&(ae=Ze({},MS),re=[],Je.html===!0&&(Ze(ae,NS),Ze(re,RS)),Je.svg===!0&&(Ze(ae,vh),Ze(re,xh),Ze(re,hd)),Je.svgFilters===!0&&(Ze(ae,yh),Ze(re,xh),Ze(re,hd)),Je.mathMl===!0&&(Ze(ae,Ch),Ze(re,PS),Ze(re,hd))),L.ADD_TAGS&&(ae===fe&&(ae=Ka(ae)),Ze(ae,L.ADD_TAGS,Xe)),L.ADD_ATTR&&(re===ke&&(re=Ka(re)),Ze(re,L.ADD_ATTR,Xe)),L.ADD_URI_SAFE_ATTR&&Ze(uo,L.ADD_URI_SAFE_ATTR,Xe),L.FORBID_CONTENTS&&(Dt===cs&&(Dt=Ka(Dt)),Ze(Dt,L.FORBID_CONTENTS,Xe)),qe&&(ae["#text"]=!0),Pe&&Ze(ae,["html","head","body"]),ae.table&&(Ze(ae,["tbody"]),delete G.tbody),L.TRUSTED_TYPES_POLICY){if(typeof L.TRUSTED_TYPES_POLICY.createHTML!="function")throw Wc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof L.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Wc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=L.TRUSTED_TYPES_POLICY,w=T.createHTML("")}else T===void 0&&(T=sge(g,o)),T!==null&&typeof w=="string"&&(w=T.createHTML(""));Cn&&Cn(L),on=L}},Fa=Ze({},[...vh,...yh,...$he]),Ba=Ze({},[...Ch,...qhe]),Vt=function(L){let de=C(L);(!de||!de.tagName)&&(de={namespaceURI:ls,tagName:"template"});const Ne=Md(L.tagName),dt=Md(de.tagName);return po[L.namespaceURI]?L.namespaceURI===dn?de.namespaceURI===Mn?Ne==="svg":de.namespaceURI===mo?Ne==="svg"&&(dt==="annotation-xml"||Rs[dt]):!!Fa[Ne]:L.namespaceURI===mo?de.namespaceURI===Mn?Ne==="math":de.namespaceURI===dn?Ne==="math"&&Rt[dt]:!!Ba[Ne]:L.namespaceURI===Mn?de.namespaceURI===dn&&!Rt[dt]||de.namespaceURI===mo&&!Rs[dt]?!1:!Ba[Ne]&&(ht[Ne]||!Fa[Ne]):!!(Ps==="application/xhtml+xml"&&po[L.namespaceURI]):!1},$n=function(L){Hc(t.removed,{element:L});try{C(L).removeChild(L)}catch{x(L)}},Gr=function(L,de){try{Hc(t.removed,{attribute:de.getAttributeNode(L),from:de})}catch{Hc(t.removed,{attribute:null,from:de})}if(de.removeAttribute(L),L==="is")if(Ve||j)try{$n(de)}catch{}else try{de.setAttribute(L,"")}catch{}},Ou=function(L){let de=null,Ne=null;if(Oe)L="<remove></remove>"+L;else{const Ut=kS(L,/^[\r\n\t ]+/);Ne=Ut&&Ut[0]}Ps==="application/xhtml+xml"&&ls===Mn&&(L='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+L+"</body></html>");const dt=T?T.createHTML(L):L;if(ls===Mn)try{de=new h().parseFromString(dt,Ps)}catch{}if(!de||!de.documentElement){de=I.createDocument(ls,"template",null);try{de.documentElement.innerHTML=qo?w:dt}catch{}}const mt=de.body||de.documentElement;return L&&Ne&&mt.insertBefore(n.createTextNode(Ne),mt.childNodes[0]||null),ls===Mn?R.call(de,Pe?"html":"body")[0]:Pe?de.documentElement:mt},ho=function(L){return A.call(L.ownerDocument||L,L,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT|m.SHOW_PROCESSING_INSTRUCTION|m.SHOW_CDATA_SECTION,null)},$r=function(L){return L instanceof f&&(typeof L.nodeName!="string"||typeof L.textContent!="string"||typeof L.removeChild!="function"||!(L.attributes instanceof p)||typeof L.removeAttribute!="function"||typeof L.setAttribute!="function"||typeof L.namespaceURI!="string"||typeof L.insertBefore!="function"||typeof L.hasChildNodes!="function")},Du=function(L){return typeof l=="function"&&L instanceof l};function us(Te,L,de){fd(Te,Ne=>{Ne.call(t,L,de,on)})}const Uu=function(L){let de=null;if(us(K.beforeSanitizeElements,L,null),$r(L))return $n(L),!0;const Ne=Xe(L.nodeName);if(us(K.uponSanitizeElement,L,{tagName:Ne,allowedTags:ae}),L.hasChildNodes()&&!Du(L.firstElementChild)&&hn(/<[/\w]/g,L.innerHTML)&&hn(/<[/\w]/g,L.textContent)||L.nodeType===$c.progressingInstruction||ve&&L.nodeType===$c.comment&&hn(/<[/\w]/g,L.data))return $n(L),!0;if(!ae[Ne]||G[Ne]){if(!G[Ne]&&Fu(Ne)&&(q.tagNameCheck instanceof RegExp&&hn(q.tagNameCheck,Ne)||q.tagNameCheck instanceof Function&&q.tagNameCheck(Ne)))return!1;if(qe&&!Dt[Ne]){const dt=C(L)||L.parentNode,mt=S(L)||L.childNodes;if(mt&&dt){const Ut=mt.length;for(let Qt=Ut-1;Qt>=0;--Qt){const an=b(mt[Qt],!0);an.__removalCount=(L.__removalCount||0)+1,dt.insertBefore(an,v(L))}}}return $n(L),!0}return L instanceof u&&!Vt(L)||(Ne==="noscript"||Ne==="noembed"||Ne==="noframes")&&hn(/<\/no(script|embed|frames)/i,L.innerHTML)?($n(L),!0):(ie&&L.nodeType===$c.text&&(de=L.textContent,fd([H,te,oe],dt=>{de=zc(de,dt," ")}),L.textContent!==de&&(Hc(t.removed,{element:L.cloneNode()}),L.textContent=de)),us(K.afterSanitizeElements,L,null),!1)},mn=function(L,de,Ne){if(pe&&(de==="id"||de==="name")&&(Ne in n||Ne in Da))return!1;if(!(X&&!J[de]&&hn(ne,de))){if(!(Ie&&hn(ge,de))){if(!re[de]||J[de]){if(!(Fu(L)&&(q.tagNameCheck instanceof RegExp&&hn(q.tagNameCheck,L)||q.tagNameCheck instanceof Function&&q.tagNameCheck(L))&&(q.attributeNameCheck instanceof RegExp&&hn(q.attributeNameCheck,de)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(de))||de==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&hn(q.tagNameCheck,Ne)||q.tagNameCheck instanceof Function&&q.tagNameCheck(Ne))))return!1}else if(!uo[de]){if(!hn(se,zc(Ne,be,""))){if(!((de==="src"||de==="xlink:href"||de==="href")&&L!=="script"&&Hhe(Ne,"data:")===0&&Tn[L])){if(!(he&&!hn(me,zc(Ne,be,"")))){if(Ne)return!1}}}}}}return!0},Fu=function(L){return L!=="annotation-xml"&&kS(L,we)},Bu=function(L){us(K.beforeSanitizeAttributes,L,null);const{attributes:de}=L;if(!de||$r(L))return;const Ne={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:re,forceKeepAttr:void 0};let dt=de.length;for(;dt--;){const mt=de[dt],{name:Ut,namespaceURI:Qt,value:an}=mt,Rn=Xe(Ut);let Pt=Ut==="value"?an:zhe(an);if(Ne.attrName=Rn,Ne.attrValue=Pt,Ne.keepAttr=!0,Ne.forceKeepAttr=void 0,us(K.uponSanitizeAttribute,L,Ne),Pt=Ne.attrValue,Re&&(Rn==="id"||Rn==="name")&&(Gr(Ut,L),Pt=xe+Pt),ve&&hn(/((--!?|])>)|<\/(style|title)/i,Pt)){Gr(Ut,L);continue}if(Ne.forceKeepAttr||(Gr(Ut,L),!Ne.keepAttr))continue;if(!Ue&&hn(/\/>/i,Pt)){Gr(Ut,L);continue}ie&&fd([H,te,oe],bc=>{Pt=zc(Pt,bc," ")});const Hu=Xe(L.nodeName);if(mn(Hu,Rn,Pt)){if(T&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Qt)switch(g.getAttributeType(Hu,Rn)){case"TrustedHTML":{Pt=T.createHTML(Pt);break}case"TrustedScriptURL":{Pt=T.createScriptURL(Pt);break}}try{Qt?L.setAttributeNS(Qt,Ut,Pt):L.setAttribute(Ut,Pt),$r(L)?$n(L):_S(t.removed)}catch{}}}us(K.afterSanitizeAttributes,L,null)},Vu=function Te(L){let de=null;const Ne=ho(L);for(us(K.beforeSanitizeShadowDOM,L,null);de=Ne.nextNode();)us(K.uponSanitizeShadowNode,de,null),Uu(de),Bu(de),de.content instanceof r&&Te(de.content);us(K.afterSanitizeShadowDOM,L,null)};return t.sanitize=function(Te){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},de=null,Ne=null,dt=null,mt=null;if(qo=!Te,qo&&(Te="<!-->"),typeof Te!="string"&&!Du(Te))if(typeof Te.toString=="function"){if(Te=Te.toString(),typeof Te!="string")throw Wc("dirty is not a string, aborting")}else throw Wc("toString is not a function");if(!t.isSupported)return Te;if(_e||fo(L),t.removed=[],typeof Te=="string"&&(Le=!1),Le){if(Te.nodeName){const an=Xe(Te.nodeName);if(!ae[an]||G[an])throw Wc("root node is forbidden and cannot be sanitized in-place")}}else if(Te instanceof l)de=Ou("<!---->"),Ne=de.ownerDocument.importNode(Te,!0),Ne.nodeType===$c.element&&Ne.nodeName==="BODY"||Ne.nodeName==="HTML"?de=Ne:de.appendChild(Ne);else{if(!Ve&&!ie&&!Pe&&Te.indexOf("<")===-1)return T&&O?T.createHTML(Te):Te;if(de=Ou(Te),!de)return Ve?null:O?w:""}de&&Oe&&$n(de.firstChild);const Ut=ho(Le?Te:de);for(;dt=Ut.nextNode();)Uu(dt),Bu(dt),dt.content instanceof r&&Vu(dt.content);if(Le)return Te;if(Ve){if(j)for(mt=E.call(de.ownerDocument);de.firstChild;)mt.appendChild(de.firstChild);else mt=de;return(re.shadowroot||re.shadowrootmode)&&(mt=U.call(s,mt,!0)),mt}let Qt=Pe?de.outerHTML:de.innerHTML;return Pe&&ae["!doctype"]&&de.ownerDocument&&de.ownerDocument.doctype&&de.ownerDocument.doctype.name&&hn(S6,de.ownerDocument.doctype.name)&&(Qt="<!DOCTYPE "+de.ownerDocument.doctype.name+`>
`+Qt),ie&&fd([H,te,oe],an=>{Qt=zc(Qt,an," ")}),T&&O?T.createHTML(Qt):Qt},t.setConfig=function(){let Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};fo(Te),_e=!0},t.clearConfig=function(){on=null,_e=!1},t.isValidAttribute=function(Te,L,de){on||fo({});const Ne=Xe(Te),dt=Xe(L);return mn(Ne,dt,de)},t.addHook=function(Te,L){typeof L=="function"&&Hc(K[Te],L)},t.removeHook=function(Te,L){if(L!==void 0){const de=Bhe(K[Te],L);return de===-1?void 0:Vhe(K[Te],de,1)[0]}return _S(K[Te])},t.removeHooks=function(Te){K[Te]=[]},t.removeAllHooks=function(){K=jS()},t}var OS=w6(),pl=class{constructor(e,t,n,s,o,r){N(this,"type",3);N(this,"name","");N(this,"prefix","");N(this,"value","");N(this,"suffix","");N(this,"modifier",3);this.type=e,this.name=t,this.prefix=n,this.value=s,this.suffix=o,this.modifier=r}hasCustomName(){return this.name!==""&&typeof this.name!="number"}},oge=/[$_\p{ID_Start}]/u,age=/[$_\u200C\u200D\p{ID_Continue}]/u,m1=".*";function rge(e,t){return/^[\x00-\x7F]*$/.test(e)}function I6(e,t=!1){let n=[],s=0;for(;s<e.length;){let o=e[s],r=function(c){if(!t)throw new TypeError(c);n.push({type:"INVALID_CHAR",index:s,value:e[s++]})};if(o==="*"){n.push({type:"ASTERISK",index:s,value:e[s++]});continue}if(o==="+"||o==="?"){n.push({type:"OTHER_MODIFIER",index:s,value:e[s++]});continue}if(o==="\\"){n.push({type:"ESCAPED_CHAR",index:s++,value:e[s++]});continue}if(o==="{"){n.push({type:"OPEN",index:s,value:e[s++]});continue}if(o==="}"){n.push({type:"CLOSE",index:s,value:e[s++]});continue}if(o===":"){let c="",l=s+1;for(;l<e.length;){let u=e.substr(l,1);if(l===s+1&&oge.test(u)||l!==s+1&&age.test(u)){c+=e[l++];continue}break}if(!c){r(`Missing parameter name at ${s}`);continue}n.push({type:"NAME",index:s,value:c}),s=l;continue}if(o==="("){let c=1,l="",u=s+1,m=!1;if(e[u]==="?"){r(`Pattern cannot start with "?" at ${u}`);continue}for(;u<e.length;){if(!rge(e[u])){r(`Invalid character '${e[u]}' at ${u}.`),m=!0;break}if(e[u]==="\\"){l+=e[u++]+e[u++];continue}if(e[u]===")"){if(c--,c===0){u++;break}}else if(e[u]==="("&&(c++,e[u+1]!=="?")){r(`Capturing groups are not allowed at ${u}`),m=!0;break}l+=e[u++]}if(m)continue;if(c){r(`Unbalanced pattern at ${s}`);continue}if(!l){r(`Missing pattern at ${s}`);continue}n.push({type:"REGEX",index:s,value:l}),s=u;continue}n.push({type:"CHAR",index:s,value:e[s++]})}return n.push({type:"END",index:s,value:""}),n}function T6(e,t={}){let n=I6(e);t.delimiter??(t.delimiter="/#?"),t.prefixes??(t.prefixes="./");let s=`[^${Kn(t.delimiter)}]+?`,o=[],r=0,c=0,l=new Set,u=S=>{if(c<n.length&&n[c].type===S)return n[c++].value},m=()=>u("OTHER_MODIFIER")??u("ASTERISK"),p=S=>{let C=u(S);if(C!==void 0)return C;let{type:T,index:w}=n[c];throw new TypeError(`Unexpected ${T} at ${w}, expected ${S}`)},f=()=>{let S="",C;for(;C=u("CHAR")??u("ESCAPED_CHAR");)S+=C;return S},h=S=>S,g=t.encodePart||h,y="",b=S=>{y+=S},x=()=>{y.length&&(o.push(new pl(3,"","",g(y),"",3)),y="")},v=(S,C,T,w,I)=>{let A=3;switch(I){case"?":A=1;break;case"*":A=0;break;case"+":A=2;break}if(!C&&!T&&A===3){b(S);return}if(x(),!C&&!T){if(!S)return;o.push(new pl(3,"","",g(S),"",A));return}let E;T?T==="*"?E=m1:E=T:E=s;let R=2;E===s?(R=1,E=""):E===m1&&(R=0,E="");let U;if(C?U=C:T&&(U=r++),l.has(U))throw new TypeError(`Duplicate name '${U}'.`);l.add(U),o.push(new pl(R,U,g(S),E,g(w),A))};for(;c<n.length;){let S=u("CHAR"),C=u("NAME"),T=u("REGEX");if(!C&&!T&&(T=u("ASTERISK")),C||T){let I=S??"";t.prefixes.indexOf(I)===-1&&(b(I),I=""),x();let A=m();v(I,C,T,"",A);continue}let w=S??u("ESCAPED_CHAR");if(w){b(w);continue}if(u("OPEN")){let I=f(),A=u("NAME"),E=u("REGEX");!A&&!E&&(E=u("ASTERISK"));let R=f();p("CLOSE");let U=m();v(I,A,E,R,U);continue}x(),p("END")}return o}function Kn(e){return e.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function DS(e){return e&&e.ignoreCase?"ui":"u"}function ige(e,t,n){return E6(T6(e,n),t,n)}function vi(e){switch(e){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}function E6(e,t,n={}){n.delimiter??(n.delimiter="/#?"),n.prefixes??(n.prefixes="./"),n.sensitive??(n.sensitive=!1),n.strict??(n.strict=!1),n.end??(n.end=!0),n.start??(n.start=!0),n.endsWith="";let s=n.start?"^":"";for(let l of e){if(l.type===3){l.modifier===3?s+=Kn(l.value):s+=`(?:${Kn(l.value)})${vi(l.modifier)}`;continue}t&&t.push(l.name);let u=`[^${Kn(n.delimiter)}]+?`,m=l.value;if(l.type===1?m=u:l.type===0&&(m=m1),!l.prefix.length&&!l.suffix.length){l.modifier===3||l.modifier===1?s+=`(${m})${vi(l.modifier)}`:s+=`((?:${m})${vi(l.modifier)})`;continue}if(l.modifier===3||l.modifier===1){s+=`(?:${Kn(l.prefix)}(${m})${Kn(l.suffix)})`,s+=vi(l.modifier);continue}s+=`(?:${Kn(l.prefix)}`,s+=`((?:${m})(?:`,s+=Kn(l.suffix),s+=Kn(l.prefix),s+=`(?:${m}))*)${Kn(l.suffix)})`,l.modifier===0&&(s+="?")}let o=`[${Kn(n.endsWith)}]|$`,r=`[${Kn(n.delimiter)}]`;if(n.end)return n.strict||(s+=`${r}?`),n.endsWith.length?s+=`(?=${o})`:s+="$",new RegExp(s,DS(n));n.strict||(s+=`(?:${r}(?=${o}))?`);let c=!1;if(e.length){let l=e[e.length-1];l.type===3&&l.modifier===3&&(c=n.delimiter.indexOf(l)>-1)}return c||(s+=`(?=${r}|${o})`),new RegExp(s,DS(n))}var ra={delimiter:"",prefixes:"",sensitive:!0,strict:!0},cge={delimiter:".",prefixes:"",sensitive:!0,strict:!0},lge={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function uge(e,t){return e.length?e[0]==="/"?!0:!t||e.length<2?!1:(e[0]=="\\"||e[0]=="{")&&e[1]=="/":!1}function A6(e,t){return e.startsWith(t)?e.substring(t.length,e.length):e}function dge(e,t){return e.endsWith(t)?e.substr(0,e.length-t.length):e}function _6(e){return!e||e.length<2?!1:e[0]==="["||(e[0]==="\\"||e[0]==="{")&&e[1]==="["}var k6=["ftp","file","http","https","ws","wss"];function N6(e){if(!e)return!0;for(let t of k6)if(e.test(t))return!0;return!1}function mge(e,t){if(e=A6(e,"#"),t||e==="")return e;let n=new URL("https://example.com");return n.hash=e,n.hash?n.hash.substring(1,n.hash.length):""}function pge(e,t){if(e=A6(e,"?"),t||e==="")return e;let n=new URL("https://example.com");return n.search=e,n.search?n.search.substring(1,n.search.length):""}function fge(e,t){return t||e===""?e:_6(e)?P6(e):R6(e)}function hge(e,t){if(t||e==="")return e;let n=new URL("https://example.com");return n.password=e,n.password}function gge(e,t){if(t||e==="")return e;let n=new URL("https://example.com");return n.username=e,n.username}function bge(e,t,n){if(n||e==="")return e;if(t&&!k6.includes(t))return new URL(`${t}:${e}`).pathname;let s=e[0]=="/";return e=new URL(s?e:"/-"+e,"https://example.com").pathname,s||(e=e.substring(2,e.length)),e}function vge(e,t,n){return M6(t)===e&&(e=""),n||e===""?e:L6(e)}function yge(e,t){return e=dge(e,":"),t||e===""?e:kv(e)}function M6(e){switch(e){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}function kv(e){if(e==="")return e;if(/^[-+.A-Za-z0-9]*$/.test(e))return e.toLowerCase();throw new TypeError(`Invalid protocol '${e}'.`)}function Cge(e){if(e==="")return e;let t=new URL("https://example.com");return t.username=e,t.username}function xge(e){if(e==="")return e;let t=new URL("https://example.com");return t.password=e,t.password}function R6(e){if(e==="")return e;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(e))throw new TypeError(`Invalid hostname '${e}'`);let t=new URL("https://example.com");return t.hostname=e,t.hostname}function P6(e){if(e==="")return e;if(/[^0-9a-fA-F[\]:]/g.test(e))throw new TypeError(`Invalid IPv6 hostname '${e}'`);return e.toLowerCase()}function L6(e){if(e===""||/^[0-9]*$/.test(e)&&parseInt(e)<=65535)return e;throw new TypeError(`Invalid port '${e}'.`)}function Sge(e){if(e==="")return e;let t=new URL("https://example.com");return t.pathname=e[0]!=="/"?"/-"+e:e,e[0]!=="/"?t.pathname.substring(2,t.pathname.length):t.pathname}function wge(e){return e===""?e:new URL(`data:${e}`).pathname}function Ige(e){if(e==="")return e;let t=new URL("https://example.com");return t.search=e,t.search.substring(1,t.search.length)}function Tge(e){if(e==="")return e;let t=new URL("https://example.com");return t.hash=e,t.hash.substring(1,t.hash.length)}var ki,gn,$t,vt,or,Ni,Ln,Mi,Ri,Pi,le,Ht,j6,p1,Jc,Rd,Zn,f1,O6,Pd,D6,U6,Ld,ci,Za,F6,B6,V6,H6,Us,z6,GS,Ege=(GS=class{constructor(e){gt(this,le);gt(this,ki);gt(this,gn,[]);gt(this,$t,{});gt(this,vt,0);gt(this,or,1);gt(this,Ni,0);gt(this,Ln,0);gt(this,Mi,0);gt(this,Ri,0);gt(this,Pi,!1);nt(this,ki,e)}get result(){return Y(this,$t)}parse(){for(nt(this,gn,I6(Y(this,ki),!0));Y(this,vt)<Y(this,gn).length;nt(this,vt,Y(this,vt)+Y(this,or))){if(nt(this,or,1),Y(this,gn)[Y(this,vt)].type==="END"){if(Y(this,Ln)===0){ye(this,le,p1).call(this),ye(this,le,Za).call(this)?ye(this,le,Ht).call(this,9,1):ye(this,le,ci).call(this)?ye(this,le,Ht).call(this,8,1):ye(this,le,Ht).call(this,7,0);continue}else if(Y(this,Ln)===2){ye(this,le,Jc).call(this,5);continue}ye(this,le,Ht).call(this,10,0);break}if(Y(this,Mi)>0)if(ye(this,le,B6).call(this))nt(this,Mi,Y(this,Mi)-1);else continue;if(ye(this,le,F6).call(this)){nt(this,Mi,Y(this,Mi)+1);continue}switch(Y(this,Ln)){case 0:ye(this,le,f1).call(this)&&ye(this,le,Jc).call(this,1);break;case 1:if(ye(this,le,f1).call(this)){ye(this,le,z6).call(this);let e=7,t=1;ye(this,le,O6).call(this)?(e=2,t=3):Y(this,Pi)&&(e=2),ye(this,le,Ht).call(this,e,t)}break;case 2:ye(this,le,Pd).call(this)?ye(this,le,Jc).call(this,3):(ye(this,le,Ld).call(this)||ye(this,le,ci).call(this)||ye(this,le,Za).call(this))&&ye(this,le,Jc).call(this,5);break;case 3:ye(this,le,D6).call(this)?ye(this,le,Ht).call(this,4,1):ye(this,le,Pd).call(this)&&ye(this,le,Ht).call(this,5,1);break;case 4:ye(this,le,Pd).call(this)&&ye(this,le,Ht).call(this,5,1);break;case 5:ye(this,le,V6).call(this)?nt(this,Ri,Y(this,Ri)+1):ye(this,le,H6).call(this)&&nt(this,Ri,Y(this,Ri)-1),ye(this,le,U6).call(this)&&!Y(this,Ri)?ye(this,le,Ht).call(this,6,1):ye(this,le,Ld).call(this)?ye(this,le,Ht).call(this,7,0):ye(this,le,ci).call(this)?ye(this,le,Ht).call(this,8,1):ye(this,le,Za).call(this)&&ye(this,le,Ht).call(this,9,1);break;case 6:ye(this,le,Ld).call(this)?ye(this,le,Ht).call(this,7,0):ye(this,le,ci).call(this)?ye(this,le,Ht).call(this,8,1):ye(this,le,Za).call(this)&&ye(this,le,Ht).call(this,9,1);break;case 7:ye(this,le,ci).call(this)?ye(this,le,Ht).call(this,8,1):ye(this,le,Za).call(this)&&ye(this,le,Ht).call(this,9,1);break;case 8:ye(this,le,Za).call(this)&&ye(this,le,Ht).call(this,9,1);break}}Y(this,$t).hostname!==void 0&&Y(this,$t).port===void 0&&(Y(this,$t).port="")}},ki=new WeakMap,gn=new WeakMap,$t=new WeakMap,vt=new WeakMap,or=new WeakMap,Ni=new WeakMap,Ln=new WeakMap,Mi=new WeakMap,Ri=new WeakMap,Pi=new WeakMap,le=new WeakSet,Ht=function(e,t){var n,s,o;switch(Y(this,Ln)){case 0:break;case 1:Y(this,$t).protocol=ye(this,le,Us).call(this);break;case 2:break;case 3:Y(this,$t).username=ye(this,le,Us).call(this);break;case 4:Y(this,$t).password=ye(this,le,Us).call(this);break;case 5:Y(this,$t).hostname=ye(this,le,Us).call(this);break;case 6:Y(this,$t).port=ye(this,le,Us).call(this);break;case 7:Y(this,$t).pathname=ye(this,le,Us).call(this);break;case 8:Y(this,$t).search=ye(this,le,Us).call(this);break;case 9:Y(this,$t).hash=ye(this,le,Us).call(this);break}Y(this,Ln)!==0&&e!==10&&([1,2,3,4].includes(Y(this,Ln))&&[6,7,8,9].includes(e)&&((n=Y(this,$t)).hostname??(n.hostname="")),[1,2,3,4,5,6].includes(Y(this,Ln))&&[8,9].includes(e)&&((s=Y(this,$t)).pathname??(s.pathname=Y(this,Pi)?"/":"")),[1,2,3,4,5,6,7].includes(Y(this,Ln))&&e===9&&((o=Y(this,$t)).search??(o.search=""))),ye(this,le,j6).call(this,e,t)},j6=function(e,t){nt(this,Ln,e),nt(this,Ni,Y(this,vt)+t),nt(this,vt,Y(this,vt)+t),nt(this,or,0)},p1=function(){nt(this,vt,Y(this,Ni)),nt(this,or,0)},Jc=function(e){ye(this,le,p1).call(this),nt(this,Ln,e)},Rd=function(e){return e<0&&(e=Y(this,gn).length-e),e<Y(this,gn).length?Y(this,gn)[e]:Y(this,gn)[Y(this,gn).length-1]},Zn=function(e,t){let n=ye(this,le,Rd).call(this,e);return n.value===t&&(n.type==="CHAR"||n.type==="ESCAPED_CHAR"||n.type==="INVALID_CHAR")},f1=function(){return ye(this,le,Zn).call(this,Y(this,vt),":")},O6=function(){return ye(this,le,Zn).call(this,Y(this,vt)+1,"/")&&ye(this,le,Zn).call(this,Y(this,vt)+2,"/")},Pd=function(){return ye(this,le,Zn).call(this,Y(this,vt),"@")},D6=function(){return ye(this,le,Zn).call(this,Y(this,vt),":")},U6=function(){return ye(this,le,Zn).call(this,Y(this,vt),":")},Ld=function(){return ye(this,le,Zn).call(this,Y(this,vt),"/")},ci=function(){if(ye(this,le,Zn).call(this,Y(this,vt),"?"))return!0;if(Y(this,gn)[Y(this,vt)].value!=="?")return!1;let e=ye(this,le,Rd).call(this,Y(this,vt)-1);return e.type!=="NAME"&&e.type!=="REGEX"&&e.type!=="CLOSE"&&e.type!=="ASTERISK"},Za=function(){return ye(this,le,Zn).call(this,Y(this,vt),"#")},F6=function(){return Y(this,gn)[Y(this,vt)].type=="OPEN"},B6=function(){return Y(this,gn)[Y(this,vt)].type=="CLOSE"},V6=function(){return ye(this,le,Zn).call(this,Y(this,vt),"[")},H6=function(){return ye(this,le,Zn).call(this,Y(this,vt),"]")},Us=function(){let e=Y(this,gn)[Y(this,vt)],t=ye(this,le,Rd).call(this,Y(this,Ni)).index;return Y(this,ki).substring(t,e.index)},z6=function(){let e={};Object.assign(e,ra),e.encodePart=kv;let t=ige(ye(this,le,Us).call(this),void 0,e);nt(this,Pi,N6(t))},GS),Sh=["protocol","username","password","hostname","port","pathname","search","hash"],sa="*";function US(e,t){if(typeof e!="string")throw new TypeError("parameter 1 is not of type 'string'.");let n=new URL(e,t);return{protocol:n.protocol.substring(0,n.protocol.length-1),username:n.username,password:n.password,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search!==""?n.search.substring(1,n.search.length):void 0,hash:n.hash!==""?n.hash.substring(1,n.hash.length):void 0}}function vo(e,t){return t?Xc(e):e}function qc(e,t,n){let s;if(typeof t.baseURL=="string")try{s=new URL(t.baseURL),t.protocol===void 0&&(e.protocol=vo(s.protocol.substring(0,s.protocol.length-1),n)),!n&&t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.username===void 0&&(e.username=vo(s.username,n)),!n&&t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.username===void 0&&t.password===void 0&&(e.password=vo(s.password,n)),t.protocol===void 0&&t.hostname===void 0&&(e.hostname=vo(s.hostname,n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&(e.port=vo(s.port,n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&(e.pathname=vo(s.pathname,n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&t.search===void 0&&(e.search=vo(s.search.substring(1,s.search.length),n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&t.search===void 0&&t.hash===void 0&&(e.hash=vo(s.hash.substring(1,s.hash.length),n))}catch{throw new TypeError(`invalid baseURL '${t.baseURL}'.`)}if(typeof t.protocol=="string"&&(e.protocol=yge(t.protocol,n)),typeof t.username=="string"&&(e.username=gge(t.username,n)),typeof t.password=="string"&&(e.password=hge(t.password,n)),typeof t.hostname=="string"&&(e.hostname=fge(t.hostname,n)),typeof t.port=="string"&&(e.port=vge(t.port,e.protocol,n)),typeof t.pathname=="string"){if(e.pathname=t.pathname,s&&!uge(e.pathname,n)){let o=s.pathname.lastIndexOf("/");o>=0&&(e.pathname=vo(s.pathname.substring(0,o+1),n)+e.pathname)}e.pathname=bge(e.pathname,e.protocol,n)}return typeof t.search=="string"&&(e.search=pge(t.search,n)),typeof t.hash=="string"&&(e.hash=mge(t.hash,n)),e}function Xc(e){return e.replace(/([+*?:{}()\\])/g,"\\$1")}function Age(e){return e.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function _ge(e,t){t.delimiter??(t.delimiter="/#?"),t.prefixes??(t.prefixes="./"),t.sensitive??(t.sensitive=!1),t.strict??(t.strict=!1),t.end??(t.end=!0),t.start??(t.start=!0),t.endsWith="";let n=".*",s=`[^${Age(t.delimiter)}]+?`,o=/[$_\u200C\u200D\p{ID_Continue}]/u,r="";for(let c=0;c<e.length;++c){let l=e[c];if(l.type===3){if(l.modifier===3){r+=Xc(l.value);continue}r+=`{${Xc(l.value)}}${vi(l.modifier)}`;continue}let u=l.hasCustomName(),m=!!l.suffix.length||!!l.prefix.length&&(l.prefix.length!==1||!t.prefixes.includes(l.prefix)),p=c>0?e[c-1]:null,f=c<e.length-1?e[c+1]:null;if(!m&&u&&l.type===1&&l.modifier===3&&f&&!f.prefix.length&&!f.suffix.length)if(f.type===3){let h=f.value.length>0?f.value[0]:"";m=o.test(h)}else m=!f.hasCustomName();if(!m&&!l.prefix.length&&p&&p.type===3){let h=p.value[p.value.length-1];m=t.prefixes.includes(h)}m&&(r+="{"),r+=Xc(l.prefix),u&&(r+=`:${l.name}`),l.type===2?r+=`(${l.value})`:l.type===1?u||(r+=`(${s})`):l.type===0&&(!u&&(!p||p.type===3||p.modifier!==3||m||l.prefix!=="")?r+="*":r+=`(${n})`),l.type===1&&u&&l.suffix.length&&o.test(l.suffix[0])&&(r+="\\"),r+=Xc(l.suffix),m&&(r+="}"),l.modifier!==3&&(r+=vi(l.modifier))}return r}var Vs,ar,Li,qt,bs,ji,$S,kge=($S=class{constructor(e={},t,n){gt(this,Vs);gt(this,ar,{});gt(this,Li,{});gt(this,qt,{});gt(this,bs,{});gt(this,ji,!1);try{let s;if(typeof t=="string"?s=t:n=t,typeof e=="string"){let l=new Ege(e);if(l.parse(),e=l.result,s===void 0&&typeof e.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");e.baseURL=s}else{if(!e||typeof e!="object")throw new TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(s)throw new TypeError("parameter 1 is not of type 'string'.")}typeof n>"u"&&(n={ignoreCase:!1});let o={ignoreCase:n.ignoreCase===!0};nt(this,Vs,qc({pathname:sa,protocol:sa,username:sa,password:sa,hostname:sa,port:sa,search:sa,hash:sa},e,!0)),M6(Y(this,Vs).protocol)===Y(this,Vs).port&&(Y(this,Vs).port="");let c;for(c of Sh){if(!(c in Y(this,Vs)))continue;let l={},u=Y(this,Vs)[c];switch(Y(this,Li)[c]=[],c){case"protocol":Object.assign(l,ra),l.encodePart=kv;break;case"username":Object.assign(l,ra),l.encodePart=Cge;break;case"password":Object.assign(l,ra),l.encodePart=xge;break;case"hostname":Object.assign(l,cge),_6(u)?l.encodePart=P6:l.encodePart=R6;break;case"port":Object.assign(l,ra),l.encodePart=L6;break;case"pathname":N6(Y(this,ar).protocol)?(Object.assign(l,lge,o),l.encodePart=Sge):(Object.assign(l,ra,o),l.encodePart=wge);break;case"search":Object.assign(l,ra,o),l.encodePart=Ige;break;case"hash":Object.assign(l,ra,o),l.encodePart=Tge;break}try{Y(this,bs)[c]=T6(u,l),Y(this,ar)[c]=E6(Y(this,bs)[c],Y(this,Li)[c],l),Y(this,qt)[c]=_ge(Y(this,bs)[c],l),nt(this,ji,Y(this,ji)||Y(this,bs)[c].some(m=>m.type===2))}catch{throw new TypeError(`invalid ${c} pattern '${Y(this,Vs)[c]}'.`)}}}catch(s){throw new TypeError(`Failed to construct 'URLPattern': ${s.message}`)}}test(e={},t){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof e!="string"&&t)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof e>"u")return!1;try{typeof e=="object"?n=qc(n,e,!1):n=qc(n,US(e,t),!1)}catch{return!1}let s;for(s of Sh)if(!Y(this,ar)[s].exec(n[s]))return!1;return!0}exec(e={},t){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof e!="string"&&t)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof e>"u")return;try{typeof e=="object"?n=qc(n,e,!1):n=qc(n,US(e,t),!1)}catch{return null}let s={};t?s.inputs=[e,t]:s.inputs=[e];let o;for(o of Sh){let r=Y(this,ar)[o].exec(n[o]);if(!r)return null;let c={};for(let[l,u]of Y(this,Li)[o].entries())if(typeof u=="string"||typeof u=="number"){let m=r[l+1];c[u]=m}s[o]={input:n[o]??"",groups:c}}return s}static compareComponent(e,t,n){let s=(l,u)=>{for(let m of["type","modifier","prefix","value","suffix"]){if(l[m]<u[m])return-1;if(l[m]!==u[m])return 1}return 0},o=new pl(3,"","","","",3),r=new pl(0,"","","","",3),c=(l,u)=>{let m=0;for(;m<Math.min(l.length,u.length);++m){let p=s(l[m],u[m]);if(p)return p}return l.length===u.length?0:s(l[m]??o,u[m]??o)};return!Y(t,qt)[e]&&!Y(n,qt)[e]?0:Y(t,qt)[e]&&!Y(n,qt)[e]?c(Y(t,bs)[e],[r]):!Y(t,qt)[e]&&Y(n,qt)[e]?c([r],Y(n,bs)[e]):c(Y(t,bs)[e],Y(n,bs)[e])}get protocol(){return Y(this,qt).protocol}get username(){return Y(this,qt).username}get password(){return Y(this,qt).password}get hostname(){return Y(this,qt).hostname}get port(){return Y(this,qt).port}get pathname(){return Y(this,qt).pathname}get search(){return Y(this,qt).search}get hash(){return Y(this,qt).hash}get hasRegExpGroups(){return Y(this,ji)}},Vs=new WeakMap,ar=new WeakMap,Li=new WeakMap,qt=new WeakMap,bs=new WeakMap,ji=new WeakMap,$S);globalThis.URLPattern||(globalThis.URLPattern=kge);let W6;function H2e(e){W6=e}function Nge(){var e,t;typeof window<"u"&&(window.copilotTrustedTypesPolicy=(e=window.trustedTypes)==null?void 0:e.createPolicy("copilotPolicy",{createHTML:n=>OS.sanitize(n)}),(t=window.trustedTypes)==null||t.createPolicy("default",{createScriptURL:n=>{const s=/^\/cl\//,o=new URLPattern({protocol:"https",hostname:"*.clarity.ms"}),r=new URLPattern({protocol:"https",hostname:"*.cloudflare.com"}),c=new URLPattern({protocol:"https",hostname:"bat.bing.com"}),l=new URLPattern({protocol:"https",hostname:"az416426.vo.msecnd.net"}),u=new URLPattern({protocol:"https",hostname:"fpt.dfp.microsoft.com"}),m=new URLPattern({protocol:"https",hostname:"assets.msn.com"}),p=new URLPattern({protocol:"https",hostname:"content.lifecycle.office.net"}),f=new URLPattern({protocol:"https",hostname:"*.paypal.com"}),h=new URLPattern({protocol:"https",hostname:"*.paypalobjects.com"});if(s.test(n)||o.test(n)||r.test(n)||c.test(n)||l.test(n)||u.test(n)||m.test(n)||p.test(n)||f.test(n)||h.test(n)||n===W6)return n;throw new Error(`Unsafe script URL "${n}" blocked by CSP.`)},createHTML:n=>OS.sanitize(n)}))}const Mge="6472538445",Rge="6738511300";function Pge(){const e=document.querySelector('meta[name="apple-itunes-app"]');e&&e.remove();let t=null;if(o0()?t=Mge:vO()&&(t=Rge),t){const n=document.createElement("meta");n.name="apple-itunes-app",n.content=`app-id=${t}`,document.head.appendChild(n)}}Nge();Pge();D9.createRoot(document.getElementById("app")).render(i.jsx(Yi.StrictMode,{children:i.jsx(Ohe,{})}));export{Pbe as $,at as A,$ as B,l1 as C,jc as D,M as E,jt as F,n0e as G,Ce as H,iE as I,un as J,c1 as K,ws as L,dm as M,x3 as N,Sie as O,a2 as P,VJ as Q,BA as R,vr as S,en as T,pt as U,_ae as V,vp as W,w3 as X,Ae as Y,Tve as Z,ue as _,y0e as a,tn as a$,qce as a0,mb as a1,t_ as a2,xE as a3,bse as a4,Og as a5,ew as a6,jO as a7,Ke as a8,tb as a9,HZ as aA,g$ as aB,EC as aC,bb as aD,tve as aE,Uq as aF,Iq as aG,Xb as aH,hve as aI,pQ as aJ,K1 as aK,lbe as aL,Ge as aM,Cr as aN,Gt as aO,Fr as aP,Dq as aQ,Qge as aR,Yge as aS,s0 as aT,Io as aU,Mt as aV,Qd as aW,J1 as aX,ok as aY,gi as aZ,ks as a_,Ks as aa,Z as ab,zn as ac,hu as ad,Zt as ae,G1e as af,$1e as ag,cn as ah,W1e as ai,Sm as aj,Um as ak,_s as al,co as am,kn as an,Se as ao,KO as ap,z0 as aq,xt as ar,nc as as,Yb as at,pw as au,ZO as av,Ra as aw,D as ax,Tne as ay,Ene as az,W4 as b,Sye as b$,l1e as b0,Ib as b1,bm as b2,Gd as b3,yb as b4,Z_ as b5,wn as b6,Jye as b7,LA as b8,wue as b9,M4 as bA,AP as bB,Jq as bC,kA as bD,HC as bE,Go as bF,tv as bG,Wr as bH,mw as bI,yt as bJ,lo as bK,Ng as bL,zK as bM,Qs as bN,p4 as bO,Rg as bP,Ms as bQ,fu as bR,BX as bS,ao as bT,cE as bU,qO as bV,FW as bW,BW as bX,O2 as bY,Ef as bZ,nv as b_,OK as ba,Qg as bb,gc as bc,i1 as bd,v_ as be,b_ as bf,ooe as bg,roe as bh,coe as bi,Vye as bj,loe as bk,uoe as bl,Lr as bm,et as bn,Hm as bo,H1 as bp,z1 as bq,E1e as br,_t as bs,ut as bt,N0e as bu,_0e as bv,P0e as bw,jr as bx,gL as by,wt as bz,Ns as c,qre as c$,wye as c0,c3 as c1,Yne as c2,qne as c3,xs as c4,o1e as c5,Nu as c6,xb as c7,Kb as c8,k4 as c9,Xt as cA,r0e as cB,u1e as cC,St as cD,f1e as cE,wa as cF,Nt as cG,ii as cH,bI as cI,fc as cJ,Tte as cK,Gee as cL,J0e as cM,X0e as cN,ebe as cO,une as cP,xne as cQ,yK as cR,uK as cS,Sn as cT,e1e as cU,rI as cV,Hn as cW,Jbe as cX,Zse as cY,t6 as cZ,e6 as c_,os as ca,S0e as cb,ua as cc,ha as cd,eu as ce,C1e as cf,sc as cg,sn as ch,F1e as ci,ote as cj,P4 as ck,Zs as cl,tye as cm,cb as cn,bbe as co,Sbe as cp,hA as cq,EA as cr,sbe as cs,kq as ct,is as cu,G4 as cv,e0e as cw,ko as cx,a0e as cy,o0e as cz,F as d,io as d$,oc as d0,ce as d1,sE as d2,W0 as d3,Tl as d4,cr as d5,wu as d6,PO as d7,Pj as d8,d0 as d9,b6 as dA,jae as dB,a2e as dC,Bye as dD,n2e as dE,t2e as dF,r2e as dG,s2e as dH,o2e as dI,Ys as dJ,Kve as dK,qve as dL,Dr as dM,Kne as dN,Bt as dO,EQ as dP,wQ as dQ,ml as dR,ft as dS,bS as dT,Sme as dU,wve as dV,Sve as dW,bme as dX,Gi as dY,Pl as dZ,Xl as d_,sae as da,$i as db,x0e as dc,H3 as dd,ic as de,nE as df,eb as dg,Fg as dh,mm as di,X0 as dj,rX as dk,no as dl,Eg as dm,D0e as dn,nq as dp,F4 as dq,Ek as dr,ZJ as ds,FK as dt,Ob as du,hG as dv,it as dw,jj as dx,lA as dy,IA as dz,as as e,gve as e$,ac as e0,Ub as e1,yr as e2,Fb as e3,T4 as e4,Or as e5,Vm as e6,t1e as e7,Gne as e8,o_ as e9,S2e as eA,w2e as eB,ip as eC,rE as eD,ap as eE,pr as eF,lw as eG,i$ as eH,u0 as eI,s6 as eJ,hbe as eK,Ebe as eL,Tbe as eM,fbe as eN,Tq as eO,ZE as eP,zo as eQ,Cbe as eR,xbe as eS,Abe as eT,Ibe as eU,wbe as eV,q4 as eW,Vq as eX,P$ as eY,MJ as eZ,ot as e_,bv as ea,xr as eb,rA as ec,gle as ed,bL as ee,ak as ef,Eu as eg,Ap as eh,kw as ei,sv as ej,Yue as ek,K_ as el,Ct as em,Is as en,i0 as eo,WW as ep,I1e as eq,r0 as er,nb as es,Vb as et,DA as eu,woe as ev,$A as ew,UA as ex,O2e as ey,Eme as ez,lt as f,Ire as f$,Y1e as f0,n_ as f1,Qte as f2,vx as f3,D2e as f4,Ji as f5,tp as f6,OW as f7,pv as f8,ek as f9,I2e as fA,U0e as fB,jl as fC,_v as fD,Spe as fE,J0 as fF,zd as fG,Qce as fH,v2e as fI,abe as fJ,rpe as fK,tre as fL,Jae as fM,Nk as fN,ere as fO,t0e as fP,pu as fQ,d3 as fR,UZ as fS,Qae as fT,u3 as fU,Pae as fV,i4 as fW,pbe as fX,ia as fY,J1e as fZ,Q1e as f_,Xye as fa,Kl as fb,Lye as fc,ld as fd,vs as fe,$a as ff,na as fg,ul as fh,As as fi,Tue as fj,BJ as fk,dq as fl,um as fm,tpe as fn,nme as fo,d2e as fp,Tp as fq,Une as fr,Bne as fs,Dne as ft,Vne as fu,$o as fv,xu as fw,vK as fx,yG as fy,p1e as fz,Wn as g,KT as g$,Bbe as g0,iv as g1,LL as g2,zne as g3,d6 as g4,sre as g5,Ml as g6,dve as g7,lve as g8,c1e as g9,Ol as gA,Coe as gB,P1 as gC,SP as gD,Cs as gE,HK as gF,Fbe as gG,e2e as gH,Yl as gI,Y_ as gJ,wp as gK,Ug as gL,$G as gM,Ma as gN,A4 as gO,Z1e as gP,r6 as gQ,dp as gR,Cp as gS,Rbe as gT,cK as gU,Nbe as gV,Mbe as gW,$X as gX,k_ as gY,Gb as gZ,m4 as g_,mc as ga,$J as gb,o0 as gc,v1e as gd,y1e as ge,yO as gf,md as gg,Wg as gh,X1e as gi,dw as gj,OO as gk,DO as gl,fv as gm,sA as gn,X$ as go,dc as gp,q0 as gq,ro as gr,OA as gs,Ir as gt,Bve as gu,Rpe as gv,U4 as gw,f4 as gx,$b as gy,Dl as gz,Cve as h,KZ as h$,Qe as h0,WZ as h1,zZ as h2,YD as h3,eve as h4,Nq as h5,lp as h6,Obe as h7,u2e as h8,nbe as h9,qb as hA,nye as hB,iye as hC,m1e as hD,O1e as hE,D1e as hF,j1e as hG,iD as hH,sye as hI,mL as hJ,j0e as hK,L0e as hL,Xm as hM,u0e as hN,cu as hO,du as hP,bk as hQ,bG as hR,pf as hS,Mb as hT,Rb as hU,Ii as hV,V1e as hW,uie as hX,nn as hY,em as hZ,Lu as h_,tbe as ha,s0e as hb,obe as hc,ZT as hd,sk as he,wre as hf,A0e as hg,epe as hh,Vbe as hi,NC as hj,Lbe as hk,FA as hl,E0 as hm,s1e as hn,Fee as ho,Wde as hp,Im as hq,Nd as hr,yn as hs,I4 as ht,ql as hu,Es as hv,Zne as hw,oye as hx,cD as hy,b0 as hz,ug as i,jk as i$,$Z as i0,p6 as i1,m6 as i2,m3 as i3,Mre as i4,Rre as i5,pC as i6,T1e as i7,Lve as i8,OS as i9,Px as iA,pve as iB,i_ as iC,F1 as iD,ise as iE,h$ as iF,Iue as iG,Cu as iH,F3 as iI,Wq as iJ,zO as iK,pc as iL,Wo as iM,Ove as iN,Yae as iO,_X as iP,a4 as iQ,Ak as iR,gI as iS,Lx as iT,vre as iU,_ie as iV,vv as iW,Lo as iX,zye as iY,V4 as iZ,up as i_,aL as ia,cve as ib,c0e as ic,gm as id,jg as ie,wb as ig,ive as ih,NY as ii,rve as ij,i0e as ik,eE as il,z1e as im,K1e as io,mve as ip,db as iq,Xs as ir,nQ as is,Ube as it,ol as iu,JA as iv,Uce as iw,Wve as ix,Gse as iy,r5 as iz,kp as j,xZ as j$,N1e as j0,q2 as j1,E0e as j2,I0e as j3,T0e as j4,jse as j5,Mse as j6,Use as j7,fa as j8,Uye as j9,$w as jA,dr as jB,Uw as jC,Cl as jD,ns as jE,Pr as jF,q1e as jG,H2e as jH,JE as jI,MZ as jJ,_l as jK,J5 as jL,uk as jM,Bg as jN,uA as jO,fve as jP,dce as jQ,jJ as jR,Bo as jS,Zbe as jT,Ybe as jU,zbe as jV,Hbe as jW,Wbe as jX,CZ as jY,yZ as jZ,SZ as j_,Dye as ja,w0e as jb,om as jc,H1e as jd,No as je,Al as jf,RD as jg,qbe as jh,$be as ji,B1 as jj,V1 as jk,Fh as jl,Gbe as jm,gj as jn,Gw as jo,zs as jp,Jl as jq,$1 as jr,je as js,Dw as jt,Di as ju,Ft as jv,Jn as jw,Ws as jx,q1 as jy,ga as jz,$e as k,Et as k$,B1e as k0,EZ as k1,AZ as k2,Kbe as k3,M0e as k4,Q2 as k5,R0e as k6,Pme as k7,g6 as k8,R2e as k9,yte as kA,g1e as kB,b1e as kC,Ti as kD,gx as kE,kne as kF,TI as kG,Ep as kH,gee as kI,_pe as kJ,tQ as kK,O0e as kL,VE as kM,ome as kN,Vee as kO,wE as kP,$de as kQ,Hye as kR,cbe as kS,Hr as kT,rbe as kU,HR as kV,Gye as kW,IO as kX,b3 as kY,_n as kZ,ln as k_,M2e as ka,j$ as kb,L$ as kc,hde as kd,A2e as ke,_2e as kf,k2e as kg,mS as kh,N2e as ki,sC as kj,nd as kk,rye as kl,C0e as km,Xse as kn,Jse as ko,Wye as kp,jye as kq,use as kr,Pye as ks,Oye as kt,CL as ku,__ as kv,A_ as kw,bU as kx,aye as ky,qs as kz,eo as l,qse as l$,Dbe as l0,Xbe as l1,Wx as l2,m2e as l3,i2e as l4,cQ as l5,oQ as l6,FZ as l7,wte as l8,ad as l9,BO as lA,uG as lB,OJ as lC,qge as lD,Bb as lE,Fk as lF,Zge as lG,Kge as lH,m0e as lI,tde as lJ,Jge as lK,UW as lL,lde as lM,DW as lN,eD as lO,II as lP,E2e as lQ,Bte as lR,Xge as lS,hE as lT,A1e as lU,QO as lV,_1e as lW,M1e as lX,P1e as lY,R1e as lZ,Vi as l_,kte as la,Jb as lb,BZ as lc,FY as ld,Jk as le,_ne as lf,so as lg,VO as lh,d0e as li,pse as lj,xm as lk,g_ as ll,Fye as lm,Lb as ln,LJ as lo,Db as lp,Oj as lq,h0 as lr,Xx as ls,b2e as lt,Dj as lu,c0 as lv,Vo as lw,jb as lx,Ip as ly,Pb as lz,TQ as m,rk as m$,lu as m0,oE as m1,LO as m2,e3 as m3,oZ as m4,vj as m5,$L as m6,ude as m7,tE as m8,gie as m9,sve as mA,l0e as mB,h0e as mC,f0 as mD,U1e as mE,vO as mF,L1 as mG,L1e as mH,Gve as mI,$ve as mJ,a0 as mK,H0e as mL,rc as mM,hle as mN,c2e as mO,l2e as mP,k1e as mQ,Qb as mR,bl as mS,VK as mT,wme as mU,yve as mV,F$ as mW,xve as mX,Ym as mY,W$ as mZ,z$ as m_,$ge as ma,HW as mb,nve as mc,ove as md,ave as me,$W as mf,qW as mg,GW as mh,b0e as mi,v0e as mj,kbe as mk,Nne as ml,VW as mm,H0 as mn,p0e as mo,f0e as mp,vI as mq,mE as mr,cne as ms,Fve as mt,oue as mu,ibe as mv,d1e as mw,iu as mx,g0e as my,uve as mz,Vn as n,Q8 as n$,oX as n0,pX as n1,Hl as n2,Un as n3,e5 as n4,P8 as n5,zl as n6,zge as n7,li as n8,Ao as n9,I1 as nA,ka as nB,rM as nC,I5 as nD,x1 as nE,nN as nF,Ih as nG,Eh as nH,X9 as nI,i5 as nJ,L8 as nK,J9 as nL,Dm as nM,fl as nN,_1 as nO,Lm as nP,Om as nQ,Sa as nR,c5 as nS,z9 as nT,c8 as nU,Bge as nV,i8 as nW,Z8 as nX,Y8 as nY,rr as nZ,uN as n_,r8 as na,tN as nb,eN as nc,sN as nd,oN as ne,j5 as nf,k5 as ng,gl as nh,h5 as ni,Ud as nj,g8 as nk,Wl as nl,Fe as nm,el as nn,Ha as no,Hge as np,Vge as nq,AN as nr,Gge as ns,Fd as nt,RN as nu,dN as nv,cN as nw,lN as nx,U5 as ny,yi as nz,ee as o,ZN as o$,Fge as o0,O8 as o1,Ah as o2,$5 as o3,t5 as o4,C1 as o5,e8 as o6,Od as o7,V8 as o8,m5 as o9,Vl as oA,s8 as oB,a8 as oC,S5 as oD,jm as oE,Oi as oF,zy as oG,Qu as oH,Wge as oI,K9 as oJ,iM as oK,Uge as oL,d8 as oM,Dd as oN,S8 as oO,zN as oP,PM as oQ,M1 as oR,VM as oS,Hy as oT,Vd as oU,V5 as oV,UM as oW,T1 as oX,_5 as oY,E1 as oZ,$l as o_,g5 as oa,w5 as ob,B8 as oc,l5 as od,H8 as oe,W8 as of,y5 as og,z8 as oh,x5 as oi,v5 as oj,$8 as ok,Q9 as ol,jM as om,Q5 as on,lr as oo,Y5 as op,X8 as oq,Eo as or,F5 as os,Mh as ot,QN as ou,G5 as ov,eM as ow,z5 as ox,n5 as oy,v8 as oz,Q_ as p,B0e as p$,W5 as p0,YN as p1,E5 as p2,A5 as p3,N1 as p4,Y9 as p5,hL as p6,n1e as p7,Bm as p8,jbe as p9,Qk as pA,mbe as pB,dbe as pC,bve as pD,vve as pE,mQ as pF,ybe as pG,ime as pH,vbe as pI,NH as pJ,k0e as pK,Cb as pL,Km as pM,c4 as pN,cv as pO,zae as pP,Cre as pQ,ud as pR,xre as pS,doe as pT,Hb as pU,yre as pV,pye as pW,a1e as pX,r1e as pY,i1e as pZ,F0e as p_,cre as pa,gbe as pb,Pre as pc,_be as pd,MX as pe,Vx as pf,Kae as pg,Uve as ph,x1e as pi,h1e as pj,bie as pk,ube as pl,yp as pm,Zae as pn,AX as po,EX as pp,Po as pq,w1e as pr,dQ as ps,S1e as pt,Dve as pu,Hne as pv,nA as pw,kle as px,AR as py,ER as pz,Fn as q,L2e as q$,V0e as q0,z0e as q1,W0e as q2,G0e as q3,$0e as q4,q0e as q5,K0e as q6,Z0e as q7,Y0e as q8,Q0e as q9,vye as qA,yye as qB,Cye as qC,xye as qD,Iye as qE,Tye as qF,Eye as qG,Aye as qH,_ye as qI,kye as qJ,Nye as qK,Mye as qL,Rye as qM,$ye as qN,qye as qO,Kye as qP,Zye as qQ,Yye as qR,Qye as qS,p2e as qT,f2e as qU,h2e as qV,g2e as qW,y2e as qX,C2e as qY,x2e as qZ,P2e as q_,ab as qa,Qbe as qb,Eve as qc,Ave as qd,_ve as qe,kve as qf,Nve as qg,Mve as qh,Rve as qi,Pve as qj,jve as qk,Zve as ql,Yve as qm,Qve as qn,Jve as qo,Xve as qp,eye as qq,cye as qr,lye as qs,uye as qt,dye as qu,mye as qv,fye as qw,hye as qx,gye as qy,bye as qz,Be as r,j2e as r0,U2e as r1,F2e as r2,B2e as r3,V2e as r4,Ive as s,Yt as t,V as u,W as v,ur as w,It as x,VY as y,vu as z};

//# debugId=3a8166b5-1fda-5a7d-8e06-d1cb454f5640
